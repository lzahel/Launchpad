WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/calendar-printing.soy' */
// This file was automatically generated from calendar-printing.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 * @hassoydelcall {eventIcon}
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.renderCustomImagePrinting = function(opt_data, opt_ignored) {
  return '' + ((opt_data.eventType == 'jira-issue' || opt_data.eventType == 'jira-calendar') ? Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: 'jira', customClasses: opt_data.customClasses}) : (opt_data.eventType == 'jira-project-releases' || opt_data.eventType == 'jira-project-releases-calendar') ? Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: 'jira_box', customClasses: opt_data.customClasses}) : (opt_data.eventType == 'greenhopper-sprint' || opt_data.eventType == 'jira-agile-sprint' || opt_data.eventType == 'jira-agile-sprint-calendar' || opt_data.eventType == 'greenhopper_sprint') ? Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: 'sprints', customClasses: opt_data.customClasses}) : Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: opt_data.eventType, customClasses: opt_data.customClasses}));
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.renderCustomImagePrinting.soyTemplateName = 'Confluence.TeamCalendars.Templates.renderCustomImagePrinting';
}


Confluence.TeamCalendars.Templates.renderImagePrinting = function(opt_data, opt_ignored) {
  var output = '<span class="subcalendar-icon-container ';
  if (opt_data.customClasses) {
    var cssClassList24 = opt_data.customClasses;
    var cssClassListLen24 = cssClassList24.length;
    for (var cssClassIndex24 = 0; cssClassIndex24 < cssClassListLen24; cssClassIndex24++) {
      var cssClassData24 = cssClassList24[cssClassIndex24];
      output += soy.$$escapeHtml(cssClassData24) + ' ';
    }
  }
  output += '"  ' + ((opt_data.dataIcon) ? 'data-icon="' + soy.$$escapeHtml(opt_data.dataIcon) + '"' : '') + '>' + soy.$$getDelegateFn(soy.$$getDelTemplateId('eventIcon'), opt_data.imageName, true)(opt_data) + '</span>';
  return output;
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.renderImagePrinting.soyTemplateName = 'Confluence.TeamCalendars.Templates.renderImagePrinting';
}


Confluence.TeamCalendars.Templates.renderIconPrinting = function(opt_data, opt_ignored) {
  return '' + Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: opt_data.icon});
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.renderIconPrinting.soyTemplateName = 'Confluence.TeamCalendars.Templates.renderIconPrinting';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/timezone-drop-down.soy' */
// This file was automatically generated from timezone-drop-down.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.timeZoneDropDown = function(opt_data, opt_ignored) {
  var output = '';
  var timeZoneList3 = opt_data.timeZones;
  var timeZoneListLen3 = timeZoneList3.length;
  for (var timeZoneIndex3 = 0; timeZoneIndex3 < timeZoneListLen3; timeZoneIndex3++) {
    var timeZoneData3 = timeZoneList3[timeZoneIndex3];
    output += '<option value=' + soy.$$escapeHtml(timeZoneData3.name) + '>' + soy.$$escapeHtml(timeZoneData3.name) + ' (' + soy.$$escapeHtml(timeZoneData3.offset) + ')</option>';
  }
  return output;
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.timeZoneDropDown.soyTemplateName = 'Confluence.TeamCalendars.Templates.timeZoneDropDown';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/subcalendar-panel-entry.soy' */
// This file was automatically generated from subcalendar-panel-entry.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.subCalendarPanelEntry = function(opt_data, opt_ignored) {
  return '<div class="subcalendar-item " data-sub-calendar-id="' + soy.$$escapeHtml(opt_data.subCalendar.id) + '"><div class="subcalendar-info"><div class="subcalendar-name"><span class="ellipsis_text"><b>' + soy.$$escapeHtml(opt_data.subCalendar.displayName) + '</b></span></div></div><ul class="child-subcalendars"></ul></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.subCalendarPanelEntry.soyTemplateName = 'Confluence.TeamCalendars.Templates.subCalendarPanelEntry';
}


Confluence.TeamCalendars.Templates.customEventTypePanelEntry = function(opt_data, opt_ignored) {
  return '<li class="child-subcalendar ' + soy.$$escapeHtml(opt_data.childSubCalendar.color) + ' ' + soy.$$escapeHtml(opt_data.customEventType.icon) + '" data-custom-event-type-id="' + soy.$$escapeHtml(opt_data.customEventType.customEventTypeId) + '" data-sub-calendar-id="' + soy.$$escapeHtml(opt_data.childSubCalendar.id) + '" data-parent-sub-calendar-id="' + soy.$$escapeHtml(opt_data.childSubCalendar.parentId) + '"><input title="Child Subcalendar Checkbox" type="checkbox" id="checkbox-' + soy.$$escapeHtml(opt_data.childSubCalendar.id) + '" class="child-subcalendar-checkbox"/><div class="child-subcalendar-name">' + ((opt_data.childSubCalendar.subscriptionType) ? Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: opt_data.customEventType.icon}) : Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: opt_data.customEventType.icon})) + '<span class="ellipsis_text">' + soy.$$escapeHtml(opt_data.customEventType.title) + '</span></div></li>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.customEventTypePanelEntry.soyTemplateName = 'Confluence.TeamCalendars.Templates.customEventTypePanelEntry';
}


Confluence.TeamCalendars.Templates.childSubCalendarPanelEntry = function(opt_data, opt_ignored) {
  return '<li class="child-subcalendar ' + soy.$$escapeHtml(opt_data.childSubCalendar.color) + ' ' + ((opt_data.childSubCalendar.subscriptionType) ? ' ' + soy.$$escapeHtml(opt_data.childSubCalendar.subscriptionType) : soy.$$escapeHtml(opt_data.childSubCalendar.type)) + '" data-sub-calendar-id="' + soy.$$escapeHtml(opt_data.childSubCalendar.id) + '"data-parent-sub-calendar-id="' + soy.$$escapeHtml(opt_data.childSubCalendar.parentId) + '"><input title="Child Subcalendar Checkbox" type="checkbox" id="checkbox-' + soy.$$escapeHtml(opt_data.childSubCalendar.id) + '" class="child-subcalendar-checkbox"/><div class="child-subcalendar-name">' + ((opt_data.childSubCalendar.subscriptionType) ? Confluence.TeamCalendars.Templates.renderCustomImagePrinting({eventType: opt_data.childSubCalendar.subscriptionType}) : Confluence.TeamCalendars.Templates.renderCustomImagePrinting({eventType: opt_data.childSubCalendar.type})) + '<span class="ellipsis_text">' + soy.$$escapeHtml(opt_data.childSubCalendar.displayName) + '</span></div></li>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.childSubCalendarPanelEntry.soyTemplateName = 'Confluence.TeamCalendars.Templates.childSubCalendarPanelEntry';
}


Confluence.TeamCalendars.Templates.subCalendarMenu = function(opt_data, opt_ignored) {
  return '' + ((opt_data.subCalendar.menuOptions.showMenu) ? Confluence.TeamCalendars.Templates.subCalendarPopupMenu({subCalendar: opt_data.subCalendar, autoConvertSupported: opt_data.autoConvertSupported, subCalendarClasses: opt_data.subCalendarClasses, isParent: true}) : '');
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.subCalendarMenu.soyTemplateName = 'Confluence.TeamCalendars.Templates.subCalendarMenu';
}


Confluence.TeamCalendars.Templates.customEventTypeMenu = function(opt_data, opt_ignored) {
  return '' + ((opt_data.subCalendar.menuOptions.showMenu) ? Confluence.TeamCalendars.Templates.subCalendarPopupMenu({subCalendar: opt_data.subCalendar, autoConvertSupported: opt_data.autoConvertSupported, subCalendarClasses: opt_data.subCalendarClasses, isCustomEventType: true, parentSubCalendar: opt_data.parentSubCalendar, isParent: false}) : '');
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.customEventTypeMenu.soyTemplateName = 'Confluence.TeamCalendars.Templates.customEventTypeMenu';
}


Confluence.TeamCalendars.Templates.childSubCalendarMenu = function(opt_data, opt_ignored) {
  return '' + ((opt_data.subCalendar.menuOptions.showMenu) ? Confluence.TeamCalendars.Templates.subCalendarPopupMenu({subCalendar: opt_data.subCalendar, autoConvertSupported: opt_data.autoConvertSupported, subCalendarClasses: opt_data.subCalendarClasses, isParent: false}) : '');
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.childSubCalendarMenu.soyTemplateName = 'Confluence.TeamCalendars.Templates.childSubCalendarMenu';
}


Confluence.TeamCalendars.Templates.subCalendarPopupMenu = function(opt_data, opt_ignored) {
  return '<div class="subcalendar-dropdown-menu ' + ((opt_data.isParent) ? 'parent-subCalendar' : '') + '"><div class="aui-dd-parent"><div class="aui-dd-trigger subcalendar-dropdown-menu-button"><button  class=\'aui-button aui-button-compact aui-button-subtle\'><span class="aui-icon aui-icon-small aui-iconfont-more">More</span></button></div><ul class="aui-dropdown">' + ((opt_data.subCalendar.menuOptions.showAddEvent) ? '<li><a href="#" class="subcalendar-addevent" title="' + soy.$$escapeHtml('Kalendereintrag hinzuf\xfcgen') + '">' + soy.$$escapeHtml('Termin hinzuf\xfcgen') + '</a></li>' : '') + ((opt_data.subCalendar.menuOptions.showDisplayLink) ? '<li class="subcalendar-display-hide"><a href="#" title="' + soy.$$escapeHtml('Ereignis verstecken') + '">' + soy.$$escapeHtml('Ereignis verstecken') + '</a></li><li class="subcalendar-display-show"><a href="#" title="' + soy.$$escapeHtml('Termin anzeigen') + '">' + soy.$$escapeHtml('Termin anzeigen') + '</a></li>' : '') + ((opt_data.subCalendar.menuOptions.showNotifications) ? ((opt_data.subCalendar.menuOptions.showWatch) ? '<li class="subcalendar-watch section-end"><a href="#" title="' + soy.$$escapeHtml('Diesen Kalender anschauen') + '">' + soy.$$escapeHtml('Beobachten') + '</a></li><li class="subcalendar-unwatch section-end"><a href="#" title="' + soy.$$escapeHtml('Beenden Sie das Abonnement dieses Kalenders') + '">' + soy.$$escapeHtml('Beobachten beenden') + '</a></li>' : '') + '<li class="subcalendar-watching section-end"><a href="#" title="' + soy.$$escapeHtml('Sie beobachten diesen Kalender \xfcber Seiten.') + '">' + soy.$$escapeHtml('Beobachten') + '</a></li><li class="subcalendar-loading-watching-status section-end"><a href="#">' + soy.$$escapeHtml('Loading Watching Status\r\n\r\nBeobachtungsstatus wird geladen\r\n\r\nor\r\n\r\nLade Beobachtungsstatus') + '<span class="aui-icon aui-icon-wait"></span></a></li>' : '') + ((opt_data.subCalendar.menuOptions.showView) ? '<li><a href="#" class="subcalendar-view" title="' + soy.$$escapeHtml('Kalenderdetails anzeigen') + '">' + soy.$$escapeHtml('Kalender anzeigen') + '</a></li>' : '') + ((opt_data.parentSubCalendar && opt_data.parentSubCalendar.menuOptions.showEdit && opt_data.isCustomEventType) ? '<li><a href="#" class="custom-event-type-edit" title="' + soy.$$escapeHtml('Bearbeiten der Details eigener Ereignistypen') + '">' + soy.$$escapeHtml('Bearbeiten') + '</a></li>' : '') + ((opt_data.subCalendar.menuOptions.showEdit) ? '<li><a href="#" class="subcalendar-edit" title="' + soy.$$escapeHtml('Kalender Details bearbeiten') + '">' + soy.$$escapeHtml('Bearbeiten') + '</a></li>' : '') + ((opt_data.subCalendar.menuOptions.showRestrictions) ? '<li><a href="#" class="subcalendar-restrict" title="' + soy.$$escapeHtml('Kalenderzugriff einschr\xe4nken') + '">' + soy.$$escapeHtml('Beschr\xe4nkungen') + '</a></li>' : '') + ((opt_data.subCalendar.menuOptions.showRemove) ? '<li class="section-end"><a href="#" class="subcalendar-remove" title="' + soy.$$escapeHtml('Kalender entfernen') + '">' + soy.$$escapeHtml('...entfernen') + '</a></li>' : '') + ((opt_data.subCalendar.menuOptions.showShareAndSubscribe) ? ((opt_data.autoConvertSupported) ? '<li><a href="#" class="subcalendar-share-or-embed" title="' + soy.$$escapeHtml('Kalender mit anderen teilen') + '">' + soy.$$escapeHtml('Einbetten') + '</a></li>' : '<li><a href="#" class="subcalendar-share" title="' + soy.$$escapeHtml('Kalender mit anderen teilen') + '">' + soy.$$escapeHtml('Teilen') + '</a></li>') + ((opt_data.subCalendar.menuOptions.showSubscribe) ? '<li><a href="#" class="subcalendar-subscribe" title="' + soy.$$escapeHtml('Kalender mit Kalenderprogrammen abonnieren') + '">' + soy.$$escapeHtml('Abonnieren') + '</a></li>' : '') + ((opt_data.subCalendar.menuOptions.showICalExport) ? '<!--                    <li class="hidden-for-anonymous">--><li><a href="#" class="subcalendar-icalexport" title="' + soy.$$escapeHtml('Kalender-Export im iCalendar-Format') + '">' + soy.$$escapeHtml('Export nach iCalendar') + '</a></li>' : '') : '') + ((opt_data.subCalendar.menuOptions.showReload) ? '<li class="section-end"><a href="#" class="subcalendar-reload" title="' + soy.$$escapeHtml('Kalender aktualisieren') + '">' + soy.$$escapeHtml('Aktualisieren') + '</a></li>' : '') + ((opt_data.subCalendar.menuOptions.showReminder) ? '<li class="subcalendar-reminder section-end"><a href="#" class="unreminder-me ' + ((opt_data.subCalendar.reminderMe == false) ? 'hidden' : '') + '" title="' + soy.$$escapeHtml('F\xfcr diesen Event-Typ will ich keine Erinnerungen erhalten.') + '">' + soy.$$escapeHtml('Erinnerungen deaktivieren') + '</a><a href="#" class="reminder-me ' + ((opt_data.subCalendar.reminderMe) ? 'hidden' : '') + '" title="' + soy.$$escapeHtml('Erinnerung f\xfcr diesen Termin senden') + '">' + soy.$$escapeHtml('Erinnerungen aktivieren') + '</a></li>' : '') + ((opt_data.subCalendar.menuOptions.showSettingReminder) ? '<li class="subcalendar-setting-reminder section-end"><a href="#" class="setting-reminder-setting" title="' + soy.$$escapeHtml('F\xfcr diesen Veranstaltungstyp gibt es keine Erinnerung. F\xfcgen Sie jetzt eine hinzu.') + '">' + soy.$$escapeHtml('F\xfcge Erinnerung hinzu\r\nor\r\nErinnerung hinzuf\xfcgen') + '</a></li>' : '') + ((opt_data.subCalendar.menuOptions.showColourGrid) ? Confluence.TeamCalendars.Templates.subCalendarColourGrid(opt_data) : '') + '</ul></div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.subCalendarPopupMenu.soyTemplateName = 'Confluence.TeamCalendars.Templates.subCalendarPopupMenu';
}


Confluence.TeamCalendars.Templates.subCalendarColourGrid = function(opt_data, opt_ignored) {
  var output = '<li class="color-grid"><div class="color-cells">';
  var subCalendarColorClassList233 = opt_data.subCalendarClasses;
  var subCalendarColorClassListLen233 = subCalendarColorClassList233.length;
  for (var subCalendarColorClassIndex233 = 0; subCalendarColorClassIndex233 < subCalendarColorClassListLen233; subCalendarColorClassIndex233++) {
    var subCalendarColorClassData233 = subCalendarColorClassList233[subCalendarColorClassIndex233];
    output += '<div class="' + soy.$$escapeHtml(subCalendarColorClassData233) + ' color-cell ' + ((subCalendarColorClassIndex233 % 7 == 0) ? ' clear' : '') + '" data-colour="' + soy.$$escapeHtml(subCalendarColorClassData233) + '"></div>';
  }
  output += '<div class="clear"></div></div></li>';
  return output;
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.subCalendarColourGrid.soyTemplateName = 'Confluence.TeamCalendars.Templates.subCalendarColourGrid';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/edit-local-subcalendar.soy' */
// This file was automatically generated from edit-local-subcalendar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.editLocalCalendar = function(opt_data, opt_ignored) {
  return '<form name="editSubCalendarForm" class="sub-calendar-edit-form aui" method="POST" action="#"><input type="hidden" name="subCalendarId" value=""><input type="hidden" name="timeZoneId" value=""><input type="hidden" name="type" value="local"><input type="hidden" name="color" value=""><input type="hidden" name="spaceKey" value=""><div class="form-mode create"><div class="subcalendar-type subcalendar-local"><div class="field-group field-group-name"><label for="name">' + soy.$$escapeHtml('Name') + '<span class="aui-icon icon-required"></span></label><input name="name" id="name" type="text" class="text" value="" autocomplete="off"><div class="error name-error"></div></div><div class="field-group field-group-description"><label for="description">' + soy.$$escapeHtml('Beschreibung') + '</label><textarea name="description" id="description" rows="5" class="textarea"></textarea></div><div class="field-group field-group-space-permission"><label for="spaceKeyAutocomplete">' + soy.$$escapeHtml('Zugeh\xf6riger Bereich') + '<span class="aui-icon icon-required"></span></label><input name="spaceKeyAutocomplete" id="spaceKeyAutocomplete" type="text" class="autocomplete-space text" data-max="5" data-none-message="' + soy.$$escapeHtml('Keine Bereiche gefunden') + '" data-template="{key}"><div class="description">' + soy.$$escapeHtml('Diesen Kalender mit einem Bereich verkn\xfcpfen') + '</div><div class="error spaceKeyAutocomplete-error"></div></div><div class="field-group field-group-timezone"><label for="timeZoneIdSelect">' + soy.$$escapeHtml('Zeitzone') + '</label><select name="timeZoneIdSelect" id="timeZoneIdSelect" class="select"></select><span class="spinner aui-icon aui-icon-wait"></span><div class="error timeZoneId-error"></div></div><div class="field-group field-group-timezone-display"><label>' + soy.$$escapeHtml('Zeitzone') + '</label><span class="timeZoneIdDisplay field-value"></span></div><div class="aui-message aui-message-error error calendar-error hidden"><p class="title"><strong>' + soy.$$escapeHtml('Es ist mindestens ein Fehler aufgetreten.') + '</strong></p><div class="error-content"><ul class="error-messages hidden"></ul></div></div></div></div></form>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.editLocalCalendar.soyTemplateName = 'Confluence.TeamCalendars.Templates.editLocalCalendar';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/edit-people-subcalendar.soy' */
// This file was automatically generated from edit-people-subcalendar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.editPeopleCalendar = function(opt_data, opt_ignored) {
  return '<form name="editSubCalendarForm" class="sub-calendar-edit-form aui" method="POST" action="#"><input type="hidden" name="subCalendarId" value=""><input type="hidden" name="timeZoneId" value=""><input type="hidden" name="type" value="people"><input type="hidden" name="color" value=""><input type="hidden" name="spaceKey" value=""><div class="form-mode create"><div class="subcalendar-type subcalendar-people"><div class="field-group field-group-name"><label for="name">' + soy.$$escapeHtml('Name') + '<span class="aui-icon icon-required"></span></label><input name="name" id="name" type="text" class="text" value="" autocomplete="off"><div class="error name-error"></div></div><div class="field-group field-group-description"><label for="description">' + soy.$$escapeHtml('Beschreibung') + '</label><textarea name="description" id="description" rows="5" class="textarea"></textarea></div><div class="field-group field-group-space-permission"><label for="spaceKeyAutocomplete">' + soy.$$escapeHtml('Zugeh\xf6riger Bereich') + '<span class="aui-icon icon-required"></span></label><input name="spaceKeyAutocomplete" id="spaceKeyAutocomplete" type="text" class="autocomplete-space text" data-max="5" data-none-message="' + soy.$$escapeHtml('Keine Bereiche gefunden') + '"><div class="description">' + soy.$$escapeHtml('Diesen Kalender mit einem Bereich verkn\xfcpfen') + '</div><div class="error spaceKeyAutocomplete-error"></div></div><div class="field-group field-group-timezone"><label for="timeZoneIdSelect">' + soy.$$escapeHtml('Zeitzone') + '</label><select name="timeZoneIdSelect" id="timeZoneIdSelect" class="select"></select><span class="spinner aui-icon aui-icon-wait"></span><div class="error timeZoneId-error"></div></div><div class="field-group field-group-timezone-display"><label>' + soy.$$escapeHtml('Zeitzone') + '</label><span class="timeZoneIdDisplay field-value"></span></div><div class="aui-message aui-message-error error calendar-error hidden"><p class="title"><strong>' + soy.$$escapeHtml('Es ist mindestens ein Fehler aufgetreten.') + '</strong></p><div class="error-content"><ul class="error-messages hidden"></ul></div></div></div></div></form>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.editPeopleCalendar.soyTemplateName = 'Confluence.TeamCalendars.Templates.editPeopleCalendar';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/edit-subscription-subcalendar.soy' */
// This file was automatically generated from edit-subscription-subcalendar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.editSubscriptionSubcalendar = function(opt_data, opt_ignored) {
  return '<form name="editSubCalendarForm" class="sub-calendar-edit-form aui" method="POST" action="#"><input type="hidden" name="subCalendarId" value=""><input type="hidden" name="type" value="subscription"><input type="hidden" name="color" value=""><input type="hidden" name="spaceKey" value=""><div class="form-mode create"><div class="subcalendar-type subcalendar-subscription"><div class="field-group field-group-name"><label for="name">' + soy.$$escapeHtml('Name') + '<span class="aui-icon icon-required"></span></label><input name="name" id="name" type="text" class="text" value="" autocomplete="off"><div class="error name-error"></div></div><div class="field-group field-group-description"><label for="description">' + soy.$$escapeHtml('Beschreibung') + '</label><textarea name="description" id="description" rows="5" class="textarea"></textarea></div><div class="field-group field-group-url"><label for="location">' + soy.$$escapeHtml('URL') + '<span class="aui-icon icon-required"></span></label><input name="location" id="location" type="text" class="text" autocomplete="off"><div class="description">' + soy.$$escapeHtml('iCal-URL') + '</div><div class="error location-error"></div></div><div class="field-group field-group-username"><label for="username">' + soy.$$escapeHtml('Benutzername') + '</label><input name="username" id="username" type="text" class="text"></div><div class="field-group field-group-password"><label for="password">' + soy.$$escapeHtml('Passwort') + '</label><input name="password" id="password" type="password" class="password"></div><div class="field-group field-group-space-permission"><label for="spaceKeyAutocomplete">' + soy.$$escapeHtml('Zugeh\xf6riger Bereich') + '<span class="aui-icon icon-required"></span></label><input name="spaceKeyAutocomplete" id="spaceKeyAutocomplete" type="text" class="autocomplete-space text" data-max="5" data-none-message="' + soy.$$escapeHtml('Keine Bereiche gefunden') + '"><div class="description">' + soy.$$escapeHtml('Diesen Kalender mit einem Bereich verkn\xfcpfen') + '</div><div class="error spaceKeyAutocomplete-error"></div></div></div></div></form>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.editSubscriptionSubcalendar.soyTemplateName = 'Confluence.TeamCalendars.Templates.editSubscriptionSubcalendar';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/edit-jira-subcalendar.soy' */
// This file was automatically generated from edit-jira-subcalendar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.hiddenJiraFields = function(opt_data, opt_ignored) {
  return '<input type="hidden" name="subCalendarId" value=""><input type="hidden" name="type" value="jira"><input type="hidden" name="color" value=""><input type="hidden" name="spaceKey" value="">';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.hiddenJiraFields.soyTemplateName = 'Confluence.TeamCalendars.Templates.hiddenJiraFields';
}


Confluence.TeamCalendars.Templates.editJiraCalendar = function(opt_data, opt_ignored) {
  return '<form name="editSubCalendarForm" class="sub-calendar-edit-form aui" method="POST" action="#">' + Confluence.TeamCalendars.Templates.hiddenJiraFields(null) + '<div class="form-mode create"><div class="subcalendar-type subcalendar-jira"><div class="jira-query-options option-project-selected"><fieldset class="group loading-dummy"><legend><span>' + soy.$$escapeHtml('Anzeigen') + ' <span class="aui-icon icon-required"></span></span></legend><div class="matrix"><span class="spinner aui-icon aui-icon-wait"></span><span>' + soy.$$escapeHtml('Wird geladen...') + '</span></div></fieldset><fieldset class="group query-group"><legend><span>' + soy.$$escapeHtml('Anzeigen') + ' <span class="aui-icon icon-required"></span></span></legend><div class="matrix"><div class="radio radio-project"><input class="radio" type="radio" id="query-by-project" name="query-type" checked="checked" value="option-project"><label for="query-by-project">' + soy.$$escapeHtml('Projekt') + '</label></div><div class="radio radio-search-filter trailing-option"><input class="radio" type="radio" id="query-by-searchfilter" name="query-type" value="option-search-filter"><label for="query-by-searchfilter">' + soy.$$escapeHtml('Gespeicherter Filter') + '</label></div><div class="radio radio-jql trailing-option"><input class="radio" type="radio" id="query-by-jql" name="query-type" value="option-jql"><label for="query-by-jql">' + soy.$$escapeHtml('JQL (fortgeschritten)') + '</label></div></div><div class="field-group hidden"><div class="error jiraQueryOptions-error"></div></div></fieldset><div class="field-group compatibility-group" style="position: relative;"><label for="project" class="hidden project-select-label">' + soy.$$escapeHtml('Projekt') + '<span class="aui-icon icon-required"></span></label><div class="option-project option disableable-option"><div class="option-content"><select class="select content option-value" name="project" id="project"></select><div class="unavailable-message field-value"></div></div><div class="error project-error"></div></div><div class="option-search-filter option disableable-option"><input type="text" class="text option-value hidden" id="searchFilter" name="searchFilter"><label for="searchFilter" class="hidden">' + soy.$$escapeHtml('Gespeicherter Filter') + '</label><div class="option-content"><input type="text" class="text content" id="searchFilterName" name="searchFilterName"><label for="searchFilterName" class="hidden">' + soy.$$escapeHtml('Gespeicherter Filter') + '</label><div class="unavailable-message field-value">' + soy.$$escapeHtml('Keine Suchfilter gefunden. Bitte erstellen sie einen Jira-Suchfilter.') + '</div><div class="search-filter-suggestions hidden"></div><div class="error searchFilterId-error"></div></div></div><div class="option-jql option"><textarea rows="20" cols="20" class="textarea option-value" id="jql" name="jql" wrap="off" autocomplete="off"></textarea><span class="jqlAutoCompleteSpinner hidden aui-icon aui-icon-wait"></span><div class="clear"></div><label for="jql" class="hidden">' + soy.$$escapeHtml('JQL (fortgeschritten)') + '</label><div class="error jql-error" id="jql-error"></div><div class="invisible jql-status"><div class="jql-ok hidden">' + soy.$$escapeHtml('G\xfcltig') + ' <a href="' + soy.$$escapeHtml("https://confluence.atlassian.com/display/JIRASOFTWARESERVER/Advanced+searching") + '" target="_blank">' + soy.$$escapeHtml('JQL') + '</a></div><div class="jql-bad hidden">' + soy.$$escapeHtml('Ung\xfcltig') + ' <a href="' + soy.$$escapeHtml("https://confluence.atlassian.com/display/JIRASOFTWARESERVER/Advanced+searching") + '" target="_blank">' + soy.$$escapeHtml('JQL') + '</a></div></div></div></div><div class="date-fields-spinner-container hidden"><span class="aui-icon aui-icon-wait"></span><span>' + soy.$$escapeHtml('Lade die anzuzeigenden Daten...') + '</span></div><fieldset class="group field-group-jira field-group-jira-show hidden"><legend><span>' + soy.$$escapeHtml('Anzeigen') + '</span></legend><div class="dates"><div class="single-dates"><p class="subtitle">' + soy.$$escapeHtml('Einzel-Datum:') + '</p><div class="date-fields"></div></div><div class="duration"><p class="subtitle">' + soy.$$escapeHtml('Datumsbereich:') + '</p><div class="date-fields"></div><p class="duration-desc">' + soy.$$escapeHtml('Zeit vom Start- bis zum Enddatum f\xfcr einen Vorgang anzeigen.') + '</p><a href="#" class="add-duration">' + soy.$$escapeHtml('Start- und Enddatum hinzuf\xfcgen...') + '</a></div><div class="clear"></div></div><div class="error dateFieldName-error"></div></fieldset><div class="field-group field-group-timezone-display"><label>' + soy.$$escapeHtml('Zeitzone') + '</label><span class="timeZoneIdDisplay field-value"></span></div></div></div></div></form>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.editJiraCalendar.soyTemplateName = 'Confluence.TeamCalendars.Templates.editJiraCalendar';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/edit-jira-subcalendar-duration.soy' */
// This file was automatically generated from edit-jira-subcalendar-duration.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.editJiraSubCalendarDurations = function(opt_data, opt_ignored) {
  return '<p class="intro">' + soy.$$escapeHtml('You can visualise the duration between two issue dates in Team Calendars. To do this, select your desired fields below.') + '<a href="' + soy.$$escapeHtml("https://confluence.atlassian.com/display/AdminJIRAServer/Adding+a+custom+field") + '" target="_blank">' + soy.$$escapeHtml('Learn more about creating custom dates.') + '</a></p><div class="duration-fields"><div class="duration-start"><select name="start-field"><option value="">' + soy.$$escapeHtml('Startdatum ausw\xe4hlen...') + '</option></select></div><div class="duration-end"><select name="end-field"><option value="">' + soy.$$escapeHtml('Enddatum ausw\xe4hlen...') + '</option></select></div><div class="clear"></div></div><div class="no-selectable-date-fields hidden"><p>' + soy.$$escapeHtml('Keine benutzerdefinierten Daten f\xfcr die ausgew\xe4hlte Jira-Afrage gefunden.') + '</p><p class="add-fields"></p></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.editJiraSubCalendarDurations.soyTemplateName = 'Confluence.TeamCalendars.Templates.editJiraSubCalendarDurations';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/edit-jira-subcalendar-datefield.soy' */
// This file was automatically generated from edit-jira-subcalendar-datefield.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.editJiraSubCalendarDatefield = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="checkbox"><input id="option-' + soy.$$escapeHtml(opt_data.dateField.key) + '" name="dateFieldName" type="checkbox" value="' + soy.$$escapeHtml(opt_data.dateField.key) + '"' + ((opt_data.isChecked == true) ? 'checked' : '') + '><label for="option-' + soy.$$escapeHtml(opt_data.dateField.key) + '">' + soy.$$escapeHtml(opt_data.dateField.name) + '</label>' + ((opt_data.warning) ? '<a id="' + soy.$$escapeHtml(opt_data.dateField.key) + '-warning-message" href="#' + soy.$$escapeHtml(opt_data.dateField.key) + '-warning-message" title="' + soy.$$escapeHtml(opt_data.warning) + '"><span class="aui-icon aui-icon-small aui-iconfont-warning">' + soy.$$escapeHtml('Warning') + '</span></a>' : '') + '</div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.editJiraSubCalendarDatefield.soyTemplateName = 'Confluence.TeamCalendars.Templates.editJiraSubCalendarDatefield';
}


Confluence.TeamCalendars.Templates.editJiraSubCalendarDateDuration = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="checkbox"><input id="' + soy.$$escapeHtml(opt_data.durationFieldId) + '" name="dateFieldName" type="checkbox" value="' + soy.$$escapeHtml(opt_data.selectedDurationFieldKey) + '"' + ((opt_data.isChecked == true) ? 'checked' : '') + '><label for="' + soy.$$escapeHtml(opt_data.durationFieldId) + '">' + soy.$$escapeHtml(opt_data.selectedStartDateFieldName) + '<br>' + soy.$$escapeHtml(opt_data.selectedEndDateFieldName) + '</label></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.editJiraSubCalendarDateDuration.soyTemplateName = 'Confluence.TeamCalendars.Templates.editJiraSubCalendarDateDuration';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-feature-discovery-dialog/subcalendar-features-dialog.soy' */
// This file was automatically generated from subcalendar-features-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.subCalendarFeatures = function(opt_data, opt_ignored) {
  return '<div class="feature-discovery"><p class="didyouknow description">' + soy.$$escapeHtml('Wussten Sie schon:') + '</p><div class="features-table-container' + ((! opt_data.autoConvertSupported) ? ' noautoconvert' : '') + '"><table cellspacing="0" class="' + soy.$$escapeHtml(opt_data.subCalendar.type) + '"><tbody><tr class="features"><td class="feature add-event"><a class="feature-icon" alt="' + soy.$$escapeHtml('Hinzuf\xfcgen') + '">' + soy.$$escapeHtml('Hinzuf\xfcgen') + '</a><p class="title">' + soy.$$escapeHtml('Hinzuf\xfcgen') + '</p><p class="feature-description">' + soy.$$escapeHtml('F\xfcgen Sie Ereignissen zu Ihrem Kalender hinzu.') + '</p></td><td class="feature restrict"><a class="feature-icon" alt="' + soy.$$escapeHtml('Beschr\xe4nken') + '">' + soy.$$escapeHtml('Beschr\xe4nken') + '</a><p class="title">' + soy.$$escapeHtml('Beschr\xe4nken') + '</p><p class="feature-description">' + soy.$$escapeHtml('Restrict the calendar\x27s visibility so that only certain people can   see or edit it.\r\n\r\nSchr\xe4nke die Sichtbarkeit des Kalenders so ein, dass nur bestimmte Personen ihn sehen oder bearbeiten k\xf6nnen.') + '</p></td><td class="feature embed"><a class="feature-icon" alt="' + soy.$$escapeHtml('Einbetten') + '">' + soy.$$escapeHtml('Einbetten') + '</a><p class="title">' + soy.$$escapeHtml('Einbetten') + '</p><p class="feature-description">' + soy.$$escapeHtml('Den Kalender auf einer Seite oder einen Blogbeitrag einbetten.') + '</p></td><td class="feature embed-or-share"><a class="feature-icon" alt="' + soy.$$escapeHtml('Einbetten') + '">' + soy.$$escapeHtml('Einbetten') + '</a><p class="title">' + soy.$$escapeHtml('Einbetten') + '</p><p class="feature-description">' + soy.$$escapeHtml('Teile den Kalender mit anderen.') + '</p></td><td class="feature share"><a class="feature-icon" alt="' + soy.$$escapeHtml('Teilen') + '">' + soy.$$escapeHtml('Teilen') + '</a><p class="title">' + soy.$$escapeHtml('Teilen') + '</p><p class="feature-description">' + soy.$$escapeHtml('Teilen Sie den Kalender mit anderen Menschen, damit sie ihn abonnieren k\xf6nnen.') + '</p></td></tr></tbody></table></div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.subCalendarFeatures.soyTemplateName = 'Confluence.TeamCalendars.Templates.subCalendarFeatures';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-reset-url-dialog/subcalendar-privateurl-reset-dialog.soy' */
// This file was automatically generated from subcalendar-privateurl-reset-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.resetSubCalendarPrivateUrl = function(opt_data, opt_ignored) {
  return '<p class="reset-reason">' + soy.$$filterNoAutoescape('Ihre Abonnementverkn\xfcpfung f\xfcr \x3cstrong class\x3d\x22calendar-title\x22\x3e\x3c/strong\x3e ist privat. Wenn Sie Ihre Abonnementverkn\xfcpfung versehentlich freigegeben haben, sollten Sie diese zur\xfccksetzen.') + '</p><p class="reset-implication">' + soy.$$escapeHtml('Wenn die Verkn\xfcpfung zu diesem Kalender zur\xfcckgesetzt wird, m\xfcssen Sie den Kalender von Ihrer Kalenderanwendung aus neu abonnieren.') + '</p><div class="reset-progress"><div class="resetting"><span class="progress-icon aui-icon aui-icon-wait"></span><span class="progress-description">' + soy.$$escapeHtml('Zur\xfccksetzen ...') + '</span></div><div class="reset"><img class="progress-icon" src="' + soy.$$escapeHtml("") + '/images/icons/bullet_done.gif"><span class="progress-description">' + soy.$$escapeHtml('Ihre Abonnementverkn\xfcpfung wurde zur\xfcckgesetzt.') + ' <a href="#" class="subscribe-to-calendar">' + soy.$$escapeHtml('Abonnieren Sie diesen Kalender') + '</a>.</span></div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.resetSubCalendarPrivateUrl.soyTemplateName = 'Confluence.TeamCalendars.Templates.resetSubCalendarPrivateUrl';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-restriction-dialog/subcalendar-restrict-dialog.soy' */
// This file was automatically generated from subcalendar-restrict-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.restrictSubCalendar = function(opt_data, opt_ignored) {
  return '<form name="editSubCalendarForm" class="sub-calendar-edit-form aui" method="POST" action="#"><input type="hidden" name="subCalendarId"><div class="field-group-permissions"><div class="permissions-type-select"><input type="radio" name="restriction-type" class="radio option-view-restrictions" id="option-view-restrictions-' + soy.$$escapeHtml(opt_data.elementIdSuffix) + '" value="view"><span>' + soy.$$escapeHtml('Ansicht einschr\xe4nken') + '</span><input type="radio" name="restriction-type" class="radio option-edit-restrictions" id="option-edit-restrictions-' + soy.$$escapeHtml(opt_data.elementIdSuffix) + '" value="edit" checked="checked"><span>' + soy.$$escapeHtml('Bearbeitung einschr\xe4nken') + '</span></div><div class="permissions-details"><div class="permissions-input"><div class="user-picker-container"><input name="permissionsUserPicker" id="permissionsUserPicker-' + soy.$$escapeHtml(opt_data.elementIdSuffix) + '" type="text" class="text autocomplete-user with-hint" value="' + soy.$$escapeHtml('Geben Sie den Benutzernamen ein') + '" autocomplete="off" data-none-message="' + soy.$$escapeHtml('Keinen Benutzer gefunden. \x27Eingabetaste\x27 dr\xfccken um nach Gruppen zu suchen.') + '" data-template="{title}" data-max="3"></div><div class="group-picker-container"><span class="or-text">' + soy.$$escapeHtml('oder') + '</span><a class="group-picker-trigger" href="#">' + ((opt_data.pdlEnabled) ? '<span class="aui-icon aui-icon-small aui-iconfont-people">Insert meaningful text here for accessibility</span><span>' + soy.$$escapeHtml('Gruppe...') + '</span>' : '<img class="group-picker-icon" src="' + soy.$$escapeHtml("") + '/images/icons/group_16.gif"><span>' + soy.$$escapeHtml('Gruppe...') + '</span>') + '</a><div class="clear"></div></div></div><div class="clear"></div><div class="error permissions-error"></div><div class="view-permissions">' + ((opt_data.pdlEnabled) ? '<span class="aui-icon-small aui-iconfont-view"></span>' : '') + '<span class="no-view-restrictions">' + soy.$$escapeHtml('Keine Sichtbarkeitseinschr\xe4nkungen f\xfcr diesen Kalender definiert') + '</span><span class="restricted-viewing-to">' + soy.$$escapeHtml('Ansicht beschr\xe4nkt auf:') + '</span><table class="permission-table hidden"><tbody class="permitted-entities"></tbody></table></div><div class="clear"></div><div class="edit-permissions"><div class="no-edit-restrictions">' + soy.$$escapeHtml('Keine Einschr\xe4nkungen f\xfcr die Bearbeitung dieses Kalenders definiert') + '</div><div class="restricted-editing-to">' + soy.$$escapeHtml('Bearbeitung beschr\xe4nkt auf:') + '</div><table class="permission-table hidden"><tbody class="permitted-entities"></tbody></table></div></div></div></form>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.restrictSubCalendar.soyTemplateName = 'Confluence.TeamCalendars.Templates.restrictSubCalendar';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-remove-dialog/subcalendar-remove-dialog.soy' */
// This file was automatically generated from subcalendar-remove-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.removeSubCalendar = function(opt_data, opt_ignored) {
  return '<form class="sub-calendar-remove aui" action="#" method="POST"><h3>' + soy.$$filterNoAutoescape('Was m\xf6chten Sie mit \x26quot;\x3cspan class\x3d\x22calendar-to-remove\x22\x3e\x3c/span\x3e\x26quot; tun?') + '</h3><fieldset class="group radios"><div class="radio"><input class="radio" type="radio" name="remove" id="removefromviewoption" checked="checked"><label for="removefromviewoption">' + ((opt_data.inSpace == true) ? soy.$$escapeHtml('Diesen Kalender aus der Space-Kalenderansicht entfernen.') : soy.$$escapeHtml('Diesen Kalender von meiner Kalenderansicht entfernen.')) + '</label></div><div class="radio"><input class="radio" type="radio" name="remove" id="deletecalendaroption" ><label for="deletecalendaroption">' + soy.$$escapeHtml('Diesen Kalender dauerhaft f\xfcr alle Nutzer entfernen.') + '</label></div></fieldset></form>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.removeSubCalendar.soyTemplateName = 'Confluence.TeamCalendars.Templates.removeSubCalendar';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/subcalendar-remove-confirm-dialog.soy' */
// This file was automatically generated from subcalendar-remove-confirm-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.confirmRemoveSubCalendar = function(opt_data, opt_ignored) {
  return '<form class="sub-calendar-delete-confirm aui" action="#" method="POST"><input type="hidden" name="subCalendarId" value=""><p><strong>' + soy.$$filterNoAutoescape('Sind Sie sicher, dass Sie den Kalender \x26quot;\x3cspan class\x3d\x22calendar-to-delete\x22\x3e\x3c/span\x3e\x26quot; l\xf6schen wollen?') + ((opt_data.subscriberCount > 0) ? (opt_data.subscriberCount > 1) ? '<span class="has-subscribers-warning"> ' + soy.$$escapeHtml(AJS.format('{0} Personen haben diesen Kalender abonniert.',opt_data.subscriberCount)) + '</span>' : '<span class="has-subscribers-warning"> ' + soy.$$escapeHtml('Es ist 1 Person abboniert auf diesen Kalender.') + '</span>' : '') + '</strong></p>' + ((opt_data.subCalendar.subscriptionType == 'jira' || opt_data.subCalendar.type == 'jira') ? soy.$$escapeHtml('Durch Entfernen dieses Kalenders werden keine \xc4nderungen in Jira vorgenommen. Der Kalender ist nur eine Ansicht davon. Dieselbe Ansicht kann nach Bedarf mit denselben Parametern erneut erstellt werden.') : '<p>' + soy.$$escapeHtml('Alle Abonnenten erhalten einen iCalendar-Export von diesem Kalender.') + '</p><p>' + soy.$$filterNoAutoescape(AJS.format('Wenn Sie den Kalender zu einem anderen Zeitpunkt wiederherstellen m\xf6chten, w\xe4hlen Sie einfach die Option \x26quot;{0}\x26quot;, wenn Sie einen neuen Kalender hinzuf\xfcgen.','Kalender importieren')) + '</p>') + '<div class="clear"></div></form>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.confirmRemoveSubCalendar.soyTemplateName = 'Confluence.TeamCalendars.Templates.confirmRemoveSubCalendar';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/jira-subcalendar-remove-confirm-dialog.soy' */
// This file was automatically generated from jira-subcalendar-remove-confirm-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.confirmRemoveJiraEvents = function(opt_data, opt_ignored) {
  return '<div class="delete-jira-events-hint"><p>' + soy.$$escapeHtml(AJS.format('M\xf6chten Sie \x27\x27{0}\x27\x27 wirklich aus \x27\x27{1}\x27\x27 entfernen?',opt_data.childName,opt_data.parentName)) + '</p></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.confirmRemoveJiraEvents.soyTemplateName = 'Confluence.TeamCalendars.Templates.confirmRemoveJiraEvents';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-subcalendar-subscribe-dialog/calendar-search-result.soy' */
// This file was automatically generated from calendar-search-result.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.calendarSearchResultTable = function(opt_data, opt_ignored) {
  return '<table><thead class="tc-subscription-header"><tr><th class="subcalendar-checkbox"></th><th class="subcalendar-name">' + soy.$$escapeHtml('Kalender') + '</th><th class="subcalendar-description">' + soy.$$escapeHtml('Beschreibung') + '</th><th class="subcalendar-space">' + soy.$$escapeHtml('Zugeh\xf6riger Bereich') + '</th><th class="subcalendar-subscribercount">' + soy.$$escapeHtml('Abonnenten') + '</th></tr></thead></table><table class="confluenceTable tc-table-content"><tbody class="tc-subscription-result" data-page-size="10"></tbody></table>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.calendarSearchResultTable.soyTemplateName = 'Confluence.TeamCalendars.Templates.calendarSearchResultTable';
}


Confluence.TeamCalendars.Templates.calendarSearchResult = function(opt_data, opt_ignored) {
  return '<tr><td class="confluenceTd"><input type="checkbox" class="subcalendar-select"></td><td class="confluenceTd subcalendar-name"><div class="ellipsedColumn" title="' + soy.$$escapeHtml(opt_data.name) + '" threedots="' + soy.$$escapeHtml(opt_data.name) + '"><span class="ellipsis_text">' + soy.$$escapeHtml(opt_data.name) + '</span></div></td><td class="confluenceTd subcalendar-description"><div class="ellipsedColumn" title="' + soy.$$escapeHtml(opt_data.description) + '" threedots="' + soy.$$escapeHtml(opt_data.description) + '"><span class="ellipsis_text">' + soy.$$escapeHtml(opt_data.description) + '</span></div></td><td class="confluenceTd subcalendar-space"><div class="ellipsedColumn" title="' + soy.$$escapeHtml(opt_data.relatedSpace) + '" threedots="' + soy.$$escapeHtml(opt_data.relatedSpace) + '"><span class="ellipsis_text">' + soy.$$escapeHtml(opt_data.relatedSpace) + '</span></div></td><td class="confluenceTd subcalendar-subscribercount"><div class="ellipsedColumn" title="' + soy.$$escapeHtml(opt_data.numSubscribers) + '" threedots="' + soy.$$escapeHtml(opt_data.numSubscribers) + '"><span class="ellipsis_text">' + soy.$$escapeHtml(opt_data.numSubscribers) + '</span></div></td></tr>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.calendarSearchResult.soyTemplateName = 'Confluence.TeamCalendars.Templates.calendarSearchResult';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/js/timeline-view.js' */
(function(a){Confluence.TeamCalendars.getTimelineAdapter=function(E,r,m,x){var n,e,p,B,c,q,g,u,l,J,w,b,L=null,j,y=null,G=500,i=0.2,K;n=r;e=m;p=E;B=x;c=1000*60*60*24*7;q=new Date();g=new Date(q.getTime()-c*2);u=new Date(q.getTime()+c*2);B.visStart=g;B.visEnd=u;l=g;J=u;function t(Q){var V,X,P,U,S=function(){if(j){P=j.dom.frame.scrollTop;U=a(j.dom.content).height()}},R=function(){var Y=a(j.dom.content).height()-U;if(Y>0){j.dom.frame.scrollTop=P+Y}else{j.dom.frame.scrollTop=P}},O=function(){if(K){var Y=a("<div/>");a.each(Q,function(ab,Z){var aa=Y.empty().html(Z.content).find("[data-event-id]").data("event-id");if(aa===K.id){j.setSelection([{row:ab}],true)}});K=null}},W=function(){var Y=a(j.dom.content).find(".timeline-event-content");a.each(Y,function(ad,aa){var Z=a(aa).parent();if(Z!==undefined&&Z.length>0){var ae=a(Z).position().left;var ab=a(j.dom.content).width();if(a(Z).width()>=ab){if(ae>0){a(aa).css("padding-left",(ab-ae)/2)}else{if(ab>=(a(Z).width()+ae)){a(aa).css("padding-left",(a(Z).width()+ae)/2-ae)}else{a(aa).css("padding-left",ab/2-ae)}}}else{var ac=(a(Z).width()+ae)/2-ae;if((ab>=(a(Z).width()+ae))&&ac>=0&&(ac<a(Z).width())){a(aa).css("padding-left",ac)}else{a(aa).css("padding-left",0)}}}})};V=n.getTimelineHeight(e)||G;var T=parseInt(n.getMaxMonthToDisplayTimelineCalendar(e))||6;X={width:"99%",height:"auto",viewHeight:V+"px",minHeight:V,editable:true,enableKeys:true,axisOnTop:false,showNavigation:true,style:"box",start:g,end:u,intervalMin:1000*60*60*6,intervalMax:c*4*T,MONTHS:n.getMonthNames(),DAYS:n.getDayNames()};S();j=new links.Timeline(p[0]);links.events.addListener(j,"select",o);links.events.addListener(j,"change",v);links.events.addListener(j,"rangechange",C);links.events.addListener(j,"rangechanged",F);links.events.addListener(j,"add",z);links.events.addListener(j,"moved",s);j.draw(Q,X);R();O();W();C()}function C(){A()}function o(O){var Q=M(),P=a(".timeline-event-box.timeline-event-selected");if(!Q){return}if(!P.length){P=a(".timeline-event-range.timeline-event-selected")}if(!d(Q)){j.setSelection([])}if(Q.disableResizing){a(".timeline-event-range-drag-left, .timeline-event-range-drag-right").addClass("hidden")}else{a(".timeline-event-range-drag-left, .timeline-event-range-drag-right").removeClass("hidden")}L=n.getEventDetailsDialog(e,Q,P);L[0].style.zIndex=1000;L.show();if(P.position().left<0){setTimeout(function(){var R=P.parent().offset().left;L.offset({left:R})},0)}}function v(){var R=M(),Q=H(),P=D(R,Q);K=R;if(!d(R)){j.cancelChange()}else{var O=n.setSubCalendarSpinnerIconVisible(e,true);n.updateEvent(e,P,function(S,U,T){if(O){O.resolve()}n.showAjaxError(e,S,U,T,n.ERROR_CLASS_EVENT_UPDATE)},function(S){if(O){O.resolve()}if(S.success){y=R.subCalendarId;n.reloadSubCalendar(e,R.subCalendarId)}else{Confluence.TeamCalendars.setGenericErrors(e,I(S.fieldErrors),n.ERROR_CLASS_EVENT_UPDATE)}})}A()}function F(){var O=j.getVisibleChartRange();k(O.start.getTime(),O.end.getTime())}function f(Q,P){if(!Q&&!P){var O=j.getVisibleChartRange();Q=new Date(O.start);P=new Date(O.end)}Confluence.TeamCalendars.updateDateDisplay(e,x.formatDate(Q,"dd MMM")+" &mdash; "+x.formatDate(P,"dd MMM, yyyy"))}function k(Q,P){var O=(P-Q)/2;g=new Date(Q);u=new Date(P);if(l.getTime()>Q||J.getTime()<P){l.setTime(Q-O);J.setTime(P+O);B.visStart=l;B.visEnd=J;B.update()}f(g,u)}function z(O){Confluence.TeamCalendars.Dialogs.getEditEventDialog({start:O.start,localizedStartTime:n.getDefaultStartTime(e),localizedEndTime:n.getDefaultEndTime(e),allDay:true},null,n,e).show()}function s(){A()}function d(O){return n.isEventEditable(e,O)}function h(){var P=undefined;var O=j.getSelection();if(O.length){if(O[0].row!=undefined){P=O[0].row}}return P}function M(){return w[h()]}function H(){return b[h()]}function A(){L&&L.hide()}function I(O){return a.map(O,function(P,Q){return P.field+" : "+P.errorMessages.toString()})}function N(P){function O(S){var R;if(!S.allDay){return S.end}if(S.className[0]==="jira-version"||(S.className[0]==="jira-issue"&&S.localizedStartDate===S.localizedEndDate)){return null}R=S.end||new Date(S.start.getTime());R=new Date(R.getTime());R.setHours(R.getHours()+23);R.setMinutes(59);R.setSeconds(59);return R}function Q(T){var S=T.className[0];function R(){if(a.inArray("jira-version",T.className)!==-1||a.inArray("jira-issue",T.className)!==-1){return T.title}if(a.inArray("other",T.className)!==-1||T.eventType==="custom"){if(T.shortTitle){return T.shortTitle+": "+T.title}else{if(T.invitees&&T.invitees.length){return T.invitees[0].displayName+": "+T.title}else{return T.title}}}else{return T.shortTitle||T.title}}switch(S){case"birthdays":return Confluence.TeamCalendars.Templates.timelineEventContentWithEventTypeIcon({eventId:T.id,className:S,title:R()});break;case"travel":case"leaves":case"other":if(T.invitees&&T.invitees.length){if(T.invitees.length>1){return Confluence.TeamCalendars.Templates.timelineEventContent({eventId:T.id,iconClass:"people",title:R()})}else{return Confluence.TeamCalendars.Templates.timelineEventContentSingleInvitee({eventId:T.id,iconUrl:T.iconUrl,title:R()})}}else{return Confluence.TeamCalendars.Templates.defaultTimelineEventContent({eventId:T.id,title:T.title})}break;case"jira-issue":case"jira-version":case"greenhopper-sprint":return Confluence.TeamCalendars.Templates.timelineEventContent({eventId:T.id,iconClass:S,title:R()});break}return Confluence.TeamCalendars.Templates.defaultTimelineEventContent({eventId:T.id,title:T.title})}return a.map(P,function(R){return{start:R.start,end:O(R),content:Q(R),className:R.colorScheme}})}function D(O,Q){var P={},R=n.getSubCalendar(e,O.subCalendarId);if(O.className[0]=="jira-version"||(O.className[0]==="jira-issue"&&O.localizedStartDate===O.localizedEndDate)||(O.allDay&&Q.end.getHours()==23&&Q.end.getMinutes()==59)){P.allDayEvent=true;if(Q.end){Q.end.setHours(0);Q.end.setMinutes(0);Q.end.setSeconds(0)}}else{P.allDayEvent=false}P.subCalendarId=R.parentId;P.uid=O._id;P.originalStartDate=O.originalStart||"";P.what=O.title;P.url=O.workingUrl;P.start=a.fullCalendar.formatDate(Q.start,"ddMMyyyyHHmm");P.end=a.fullCalendar.formatDate(Q.end||Q.start,"ddMMyyyyHHmm");P.where=O.where;P.description=O.description;P.freq=O.recur?O.recur.freq:"";P.byday=O.recur?O.recur.byDay:"";P.interval=O.recur?O.recur.interval:"";P.until=O.recur?O.recur.localizedUntil||"":"";P.recurrenceId=O.recurId||"";P.editAllInRecurrenceSeries="false";P.dragAndDropUpdate=true;P.eventType=O.eventType;P.customEventTypeId=O.customEventTypeId;if(R.eventInviteesSupported){P.person=a.map(O.invitees||[],function(S){return S.id})}return P}return{renderEvents:function(P){var O=a.map(P,function(Q){return Q.subCalendarId});if(y&&a.inArray(y,O)===-1){y=null;return}w=P;b=N(P);t(b);f()},setDate:function(O){var P=u.getTime()-g.getTime();g=new Date(O.getTime()-(P/2));u=new Date(O.getTime()+(P/2));k(g.getTime(),u.getTime())},next:function(){j.move(i);F()},prev:function(){j.move(-i);F()},gotoToday:function(){j.setVisibleChartRangeNow();F()}}}})(AJS.$);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/require-oauth-message.soy' */
// This file was automatically generated from require-oauth-message.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.requireOauthMessage = function(opt_data, opt_ignored) {
  return '<div class="oauth-approve aui-message aui-message-hint hint" data-o-auth-url="' + soy.$$escapeHtml(opt_data.oAuthUrl) + '" data-sub-calendar-ids="' + soy.$$escapeHtml(opt_data.subCalendarIdsArrayJson) + '" data-sub-calendar-names="' + soy.$$escapeHtml(opt_data.subCalendarNamesArrayJson) + '"><p class="info-approve">' + soy.$$filterNoAutoescape(AJS.format('\x3ca href\x3d\x22#\x22 class\x3d\x22approve-dance\x22\x3e{0}\x3c/a\x3e zur Anzeige von Ereignissen von \x3cspan class\x3d\x22subcalendar-names\x22\x3e{1}\x3c/span\x3e','Anmelden und Genehmigen',opt_data.subCalendarName)) + '</p></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.requireOauthMessage.soyTemplateName = 'Confluence.TeamCalendars.Templates.requireOauthMessage';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/timeline-event-content.soy' */
// This file was automatically generated from timeline-event-content.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.timelineEventContentSingleInvitee = function(opt_data, opt_ignored) {
  return '<div class="user-icon-container"><img class="user-icon" src="' + soy.$$escapeHtml(opt_data.iconUrl) + '" data-event-id="' + soy.$$escapeHtml(opt_data.eventId) + '"><span class="single_person">' + soy.$$escapeHtml(opt_data.title) + '</span></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.timelineEventContentSingleInvitee.soyTemplateName = 'Confluence.TeamCalendars.Templates.timelineEventContentSingleInvitee';
}


Confluence.TeamCalendars.Templates.timelineEventContent = function(opt_data, opt_ignored) {
  return '<div class="timeline-event-content-container">' + Confluence.TeamCalendars.Templates.renderCustomImagePrinting({eventType: opt_data.iconClass}) + '<div class="event-content-with-icon ' + soy.$$escapeHtml(opt_data.iconClass) + '-icon" data-event-id="' + soy.$$escapeHtml(opt_data.eventId) + '">' + soy.$$escapeHtml(opt_data.title) + '</div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.timelineEventContent.soyTemplateName = 'Confluence.TeamCalendars.Templates.timelineEventContent';
}


Confluence.TeamCalendars.Templates.timelineEventContentWithEventTypeIcon = function(opt_data, opt_ignored) {
  return '<div class="timeline-event-content-container ' + soy.$$escapeHtml(opt_data.className) + '">' + Confluence.TeamCalendars.Templates.renderCustomImagePrinting({eventType: opt_data.className}) + '<div class="event-content" data-event-id="' + soy.$$escapeHtml(opt_data.eventId) + '">' + soy.$$escapeHtml(opt_data.title) + '</div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.timelineEventContentWithEventTypeIcon.soyTemplateName = 'Confluence.TeamCalendars.Templates.timelineEventContentWithEventTypeIcon';
}


Confluence.TeamCalendars.Templates.defaultTimelineEventContent = function(opt_data, opt_ignored) {
  return '<div class="timeline-event-content-container"><span data-event-id="' + soy.$$escapeHtml(opt_data.eventId) + '">' + soy.$$escapeHtml(opt_data.title) + '</span></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.defaultTimelineEventContent.soyTemplateName = 'Confluence.TeamCalendars.Templates.defaultTimelineEventContent';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-subcalendar-subscribe-dialog/calendar-subscribe-dialog.soy' */
// This file was automatically generated from calendar-subscribe-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.subscribeDialog = function(opt_data, opt_ignored) {
  return '<div class="subscribe-to-subcalendar"><div class="aui-message aui-message-error error calendar-error hidden"><p class="title"><strong>' + soy.$$escapeHtml('Es ist mindestens ein Fehler aufgetreten.') + '</strong></p><div class="error-content"><ul class="error-messages hidden"></ul></div></div><div class="mode"><div id="tc-subscribe-no-search-warning" class="hidden loading"><span>' + soy.$$escapeHtml('In der von Ihnen verwendeten Version von Confluence kann nicht nach Kalendern gesucht werden. Hier eine Liste aller Kalender, die Sie abonnieren k\xf6nnen.') + '</span><span class="spinner aui-icon aui-icon-wait"></span></div><div class="preamble"><span id="subscribe-intro"></span><span class="spinner aui-icon aui-icon-wait"></span></div><div class="search"><form class="aui"><textarea name="query" class="textarea" rows="1"></textarea></form><span class="spinner aui-icon aui-icon-wait"></span></div></div></div><div class="results"></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.subscribeDialog.soyTemplateName = 'Confluence.TeamCalendars.Templates.subscribeDialog';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/event-popup-issue.soy' */
// This file was automatically generated from event-popup-issue.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.eventPopupIssue = function(opt_data, opt_ignored) {
  return '<div class="event-field labeled-field field-jira-date"><span class="field-label">' + soy.$$escapeHtml(opt_data.event.extraProperties.dateField) + ':</span><div class="field-value">' + ((opt_data.event.extraProperties.resolved == 'true') ? soy.$$escapeHtml(opt_data.event.localizedEndDate) : soy.$$escapeHtml(opt_data.event.extraProperties.jiraIssueDisplayDayDuration)) + '</div></div><div class="event-field labeled-field field-jira-assignee"><span class="field-label">' + soy.$$escapeHtml('Bearbeiter') + ':</span><div class="field-value' + ((opt_data.event.extraProperties.assigneeProfileUrl) ? ' assignee-with-link' : '') + '"><span class="plain-assignee-name">' + soy.$$escapeHtml(opt_data.event.extraProperties.assigneeName) + '</span>' + ((opt_data.event.extraProperties.assigneeProfileUrl) ? '<a class="assignee-profile-link" href="' + soy.$$escapeHtml(opt_data.event.extraProperties.assigneeProfileUrl) + '">' + soy.$$escapeHtml(opt_data.event.extraProperties.assigneeName) + '</a>' : '') + '</div></div><div class="event-field labeled-field field-jira-status"><span class="field-label">' + soy.$$escapeHtml('Status') + ':</span><div class="field-value">' + soy.$$escapeHtml(opt_data.event.extraProperties.statusText) + '</div></div><div class="event-field field-event-links edit-controls"><a class="event-edit edit-control" href="#">' + soy.$$escapeHtml('Bearbeiten') + '</a> <span class="event-hyperlink-separator">&middot;</span> <a href="' + soy.$$escapeHtml(opt_data.event.extraProperties.issueLink) + '" class="event-hyperlink" target="_blank">' + soy.$$escapeHtml('Vorgang anzeigen') + '</a></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.eventPopupIssue.soyTemplateName = 'Confluence.TeamCalendars.Templates.eventPopupIssue';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/event-popup-version.soy' */
// This file was automatically generated from event-popup-version.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.eventPopupVersion = function(opt_data, opt_ignored) {
  return '<div class="event-field field-duration"><div class="time"></div><div class="day-duration">' + ((opt_data.event.extraProperties.resolved == 'true') ? soy.$$escapeHtml(opt_data.event.localizedEndDate) : soy.$$escapeHtml(opt_data.event.extraProperties.jiraVersionDisplayDayDuration)) + '</div></div><div class="event-field field-event-links edit-controls"><a class="event-edit edit-control" href="#">' + soy.$$escapeHtml('Bearbeiten') + '</a> <span class="event-hyperlink-separator">&middot;</span> <a href="' + soy.$$escapeHtml(opt_data.event.extraProperties.summaryLink) + '" class="event-hyperlink" target="_blank">' + soy.$$escapeHtml('Zusammenfassung') + '</a> <span class="event-hyperlink-separator">&middot;</span> <a href="' + soy.$$escapeHtml(opt_data.event.extraProperties.viewIssuesLink) + '" class="event-hyperlink" target="_blank">' + soy.$$escapeHtml('Vorg\xe4nge anzeigen') + '</a> <span class="event-hyperlink-separator">&middot;</span> <a href="' + soy.$$escapeHtml(opt_data.event.extraProperties.releaseNotesLink) + '" class="event-hyperlink" target="_blank">' + soy.$$escapeHtml('Versionshinweise') + '</a></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.eventPopupVersion.soyTemplateName = 'Confluence.TeamCalendars.Templates.eventPopupVersion';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/event-popup-sprint.soy' */
// This file was automatically generated from event-popup-sprint.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.eventPopupSprint = function(opt_data, opt_ignored) {
  return '<div class="event-field field-duration"><div class="time"></div><div class="all-day-label">' + soy.$$escapeHtml('Den ganzen Tag') + '</div></div><div class="event-field field-event-links"><div class="' + ((opt_data.event.extraProperties.sprintHomePageUrl) ? 'with-sprint-homepage' : 'no-sprint-homepage') + '"><a href="' + soy.$$escapeHtml(opt_data.event.extraProperties.viewBoardsUrl) + '" class="event-hyperlink" target="_blank">' + soy.$$escapeHtml('Sprint anzeigen') + '</a>' + ((opt_data.event.extraProperties.sprintHomePageUrl) ? '<span class="sprintHomePageUrlContainer"> &middot; <a href="' + soy.$$escapeHtml(opt_data.event.extraProperties.sprintHomePageUrl) + '" class="event-hyperlink" target="_blank">' + soy.$$escapeHtml('Sprint Startseite') + '</a></span>' : '') + '</div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.eventPopupSprint.soyTemplateName = 'Confluence.TeamCalendars.Templates.eventPopupSprint';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/event-popup.soy' */
// This file was automatically generated from event-popup.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.eventPopup = function(opt_data, opt_ignored) {
  var output = '<div class="event-details-popup ' + soy.$$escapeHtml(opt_data.contextClass) + '"><div class="' + soy.$$escapeHtml(opt_data.event.className) + '"><div class="event-icon-container"><img class="event-icon" src="' + soy.$$escapeHtml(opt_data.event.iconUrl) + '"></div><div class="event-fields"><div class="event-field field-subcalendar-name"><span class="lozenge ' + soy.$$escapeHtml(opt_data.event.colour) + '">' + soy.$$escapeHtml(opt_data.event.subCalendarDisplayName) + '</span><div class="name"><a href="' + soy.$$escapeHtml(opt_data.baseUrl) + '/calendar/previewcalendar.action?subCalendarId=' + soy.$$escapeHtml(opt_data.event.subCalendarId) + '">' + soy.$$escapeHtml(opt_data.event.subCalendarDisplayName) + '</a></div></div><div class="event-field field-summary"><span class="field-title"> ' + soy.$$escapeHtml(opt_data.event.title) + '</span>' + ((opt_data.event.period) ? '<span class="event-field reminder-icon" title="' + soy.$$escapeHtml(opt_data.event.period) + '"></span>' : '') + '</div>' + ((opt_data.event.where) ? '<div class="event-field field-location">' + soy.$$escapeHtml(opt_data.event.where) + '</div>' : '');
  if (opt_data.event.inviteesSupported && opt_data.event.invitees && opt_data.event.invitees.length > 1) {
    output += '<div class="event-field field-invitees">';
    var inviteeList36 = opt_data.event.invitees;
    var inviteeListLen36 = inviteeList36.length;
    for (var inviteeIndex36 = 0; inviteeIndex36 < inviteeListLen36; inviteeIndex36++) {
      var inviteeData36 = inviteeList36[inviteeIndex36];
      output += '<img class="invitee" src="' + soy.$$escapeHtml(inviteeData36.avatarIconUrl) + '" title="' + soy.$$escapeHtml(inviteeData36.displayName) + '">';
    }
    output += '</div>';
  }
  if (opt_data.event.workingUrl) {
    output += '<div class="event-field field-link">';
    var eventLink__soy47 = '' + ((! opt_data.event.urlAlias) ? soy.$$escapeHtml(opt_data.event.workingUrl) : soy.$$escapeHtml(opt_data.event.urlAlias));
    output += '<a class="event-link" href="' + soy.$$escapeHtml(opt_data.event.workingUrl) + '" title="' + soy.$$escapeHtml(eventLink__soy47) + '">' + soy.$$escapeHtml(eventLink__soy47) + '</a></div>';
  }
  output += (opt_data.event.description) ? '<div class="event-field field-description">' + ((opt_data.event.descriptionRendered) ? soy.$$filterNoAutoescape(opt_data.event.descriptionRendered) : soy.$$escapeHtml(opt_data.event.description)) + '</div>' : '';
  if (opt_data.event.extraPropertiesTemplate) {
    output += '<div class="extra-fields">';
    switch (opt_data.event.extraPropertiesTemplate) {
      case 'event-details-version':
        output += Confluence.TeamCalendars.Templates.eventPopupVersion(opt_data);
        break;
      case 'event-details-issue':
        output += Confluence.TeamCalendars.Templates.eventPopupIssue(opt_data);
        break;
      case 'event-details-sprint':
        output += Confluence.TeamCalendars.Templates.eventPopupSprint(opt_data);
        break;
    }
    output += '</div>';
  }
  output += '<div class="event-field field-duration"><div class="time"></div><div class="all-day-label">' + soy.$$escapeHtml('Den ganzen Tag') + '</div></div><div class="event-field field-event-links edit-controls"><a class="event-edit edit-control" href="#">' + soy.$$escapeHtml('Bearbeiten') + '</a> <span class="event-hyperlink-separator">&middot;</span> <a class="event-delete edit-control" href="#">' + soy.$$escapeHtml('L\xf6schen') + '</a></div></div></div></div>';
  return output;
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.eventPopup.soyTemplateName = 'Confluence.TeamCalendars.Templates.eventPopup';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/upcoming-events.soy' */
// This file was automatically generated from upcoming-events.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.dayEventListItemDetails = function(opt_data, opt_ignored) {
  return '<div class="event-details"><div class="event-times-container">' + ((opt_data.eventItem.allDay || opt_data.eventItem.multiday) ? '<span> ' + soy.$$escapeHtml('Ganzt\xe4gig') + ' </span>' : (opt_data.eventItem.startdisplay) ? '<span class="event-times-container-item">' + soy.$$escapeHtml(opt_data.eventItem.startdisplay) + ' </span>' + ((opt_data.eventItem.enddisplay) ? '<span> - </span><span class="event-times-container-item">' + soy.$$escapeHtml(opt_data.eventItem.enddisplay) + ' </span>' : '') : '') + '</div><div class="event-icon-container">' + ((opt_data.eventItem.invitees) ? (opt_data.eventItem.mediumIconUrl) ? '<img class="event-icon" src="' + soy.$$escapeHtml(opt_data.eventItem.mediumIconUrl) + '">' : '<img class="event-icon" src="' + soy.$$escapeHtml(opt_data.eventItem.iconUrl) + '">' : '<div class="child-subcalendar ' + soy.$$escapeHtml(opt_data.eventItem.subCalendar.color) + '" title="' + soy.$$escapeHtml(opt_data.eventItem.subCalendar.name) + '">' + Confluence.TeamCalendars.Templates.renderCustomImagePrinting({eventType: opt_data.eventItem.iconName}) + '</div>') + '</div><div class="event-info-container"><strong class="event-name">' + soy.$$escapeHtml(opt_data.eventItem.title) + '</strong><span class="event-subcalendar-name">' + ((opt_data.eventItem.parentSubCalendar) ? soy.$$escapeHtml(opt_data.eventItem.parentSubCalendar.name) : soy.$$escapeHtml(opt_data.eventItem.subCalendar.name)) + '</span><div class="event-description">' + ((opt_data.eventItem.descriptionRendered) ? '<span class="ellipsis_text">' + soy.$$filterNoAutoescape(opt_data.eventItem.descriptionRendered) + '</span>' : (opt_data.eventItem.description) ? '<span class="ellipsis_text">' + soy.$$escapeHtml(opt_data.eventItem.description) + '</span>' : '') + '</div></div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.dayEventListItemDetails.soyTemplateName = 'Confluence.TeamCalendars.Templates.dayEventListItemDetails';
}


Confluence.TeamCalendars.Templates.dayEventList = function(opt_data, opt_ignored) {
  var output = '<ul class="events" id="' + soy.$$escapeHtml(opt_data.groupKey) + '">';
  var eventList63 = opt_data.eventsList;
  var eventListLen63 = eventList63.length;
  for (var eventIndex63 = 0; eventIndex63 < eventListLen63; eventIndex63++) {
    var eventData63 = eventList63[eventIndex63];
    output += '<li class="event-item" data-event-id="' + soy.$$escapeHtml(eventData63.id) + '" data-event-subCalendar-id="' + soy.$$escapeHtml(eventData63.subCalendar.id) + '" data-sub-calendar-name="' + soy.$$escapeHtml(eventData63.subCalendar.name) + '">' + Confluence.TeamCalendars.Templates.dayEventListItemDetails({eventItem: eventData63}) + '<div class="clear"></div></li>';
  }
  output += ((opt_data.hiddenEventsCount > 1) ? '<li><button class="aui-button aui-button-compact aui-button-subtle hidden-events-expand" data-event-group-key="' + soy.$$escapeHtml(opt_data.groupKey) + '">' + soy.$$escapeHtml(AJS.format('{0}\xa0weitere Ereignisse anzeigen\xa0\u2026',opt_data.hiddenEventsCount)) + '</button></li>' : (opt_data.hiddenEventsCount > 0) ? '<li><button class="aui-button aui-button-compact aui-button-subtle hidden-events-expand" data-event-group-key="' + soy.$$escapeHtml(opt_data.groupKey) + '">' + soy.$$escapeHtml(AJS.format('{0}\xa0weiteres Ereignis anzeigen\xa0\u2026',opt_data.hiddenEventsCount)) + '</button></li>' : '') + '</ul>';
  return output;
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.dayEventList.soyTemplateName = 'Confluence.TeamCalendars.Templates.dayEventList';
}


Confluence.TeamCalendars.Templates.upcomingEvents = function(opt_data, opt_ignored) {
  var output = '<div class="dashboard-calendar"><div class="events-container"><ul class="group-list">';
  var eventGroupList91 = opt_data.eventGroups;
  var eventGroupListLen91 = eventGroupList91.length;
  for (var eventGroupIndex91 = 0; eventGroupIndex91 < eventGroupListLen91; eventGroupIndex91++) {
    var eventGroupData91 = eventGroupList91[eventGroupIndex91];
    output += '<li class="event-group"><div class="group-details-container"><div class="group-details"><div class="group-headline' + ((eventGroupData91.today == true) ? ' today-headline' : '') + '"><span class="other-days" data-group-date="' + soy.$$escapeHtml(eventGroupData91.dateFormatKey) + '">' + soy.$$escapeHtml('Formatierung ...') + '</span><span class="today">' + soy.$$escapeHtml('Heute') + '</span></div>' + Confluence.TeamCalendars.Templates.dayEventList({eventsList: eventGroupData91.events, hiddenEventsCount: eventGroupData91.hiddenEventsCount, groupKey: eventGroupData91.groupKey}) + '</div></div><div class="group-date' + ((eventGroupData91.today) ? ' first-group-date' : '') + '"><div class="day" data-group-date="' + soy.$$escapeHtml(eventGroupData91.dateFormatKey) + '">' + soy.$$escapeHtml(eventGroupData91.groupDay) + '</div><div class="month" data-group-date="' + soy.$$escapeHtml(eventGroupData91.dateFormatKey) + '"></div></div><div class="event-group-clear"></div></li>';
  }
  output += '</ul></div></div>';
  return output;
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.upcomingEvents.soyTemplateName = 'Confluence.TeamCalendars.Templates.upcomingEvents';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:templates-amd', location = '/com/atlassian/confluence/extra/calendar3/amd/shim/templates-amd.js' */
define("tc/templates",function(){return Confluence.TeamCalendars.Templates});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:split_aui.component.form.select2', location = 'aui.chunk.6a46c4082f29a6fd6bc5--ff11a3937b24ddd7828c.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.component.form.select2"],{"02/N":function(e,t){!function(e){void 0===e.fn.each2&&e.extend(e.fn,{each2:function(t){for(var s=e([0]),i=-1,n=this.length;++i<n&&(s.context=s[0]=this[i])&&!1!==t.call(s[0],i,s););return this}})}(jQuery),function(e,t){"use strict";if(window.Select2===t){var s,i,n,o,a,c,l,r={x:0,y:0},h={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case h.LEFT:case h.RIGHT:case h.UP:case h.DOWN:return!0}return!1},isControl:function(e){switch(e.which){case h.SHIFT:case h.CTRL:case h.ALT:return!0}return!!e.metaKey},isFunctionKey:function(e){return(e=e.which?e.which:e)>=112&&e<=123}},u="<div class='select2-measure-scrollbar'></div>",d={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z"};c=e(document),o=function(){var e=1;return function(){return e++}}(),c.on("mousemove",function(e){r.x=e.pageX,r.y=e.pageY}),s=A(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(s){var i,n;this.opts=s=this.prepareOpts(s),this.id=s.id,s.element.data("select2")!==t&&null!==s.element.data("select2")&&s.element.data("select2").destroy(),this.container=this.createContainer(),this.containerId="s2id_"+(s.element.attr("id")||"autogen"+o()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=function(e){var t,s=!1;return function(){return!1===s&&(t=e(),s=!0),t}}(function(){return s.element.closest("body")}),S(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",s.element.attr("style")),this.container.css(P(s.containerCss)),this.container.addClass(P(s.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",b),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),S(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(P(s.dropdownCssClass)),this.dropdown.data("select2",this),this.dropdown.on("click",b),this.results=i=this.container.find(".select2-results"),this.search=n=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",b),function(s){s.on("mousemove",function(s){var i=r;i!==t&&i.x===s.pageX&&i.y===s.pageY||e(s.target).trigger("mousemove-filtered",s)})}(this.results),this.dropdown.on("mousemove-filtered touchstart touchmove touchend",".select2-results",this.bind(this.highlightUnderEvent)),function(e,t){var s=C(e,function(e){t.trigger("scroll-debounced",e)});t.on("scroll",function(e){f(e.target,t.get())>=0&&s(e)})}(80,this.results),this.dropdown.on("scroll-debounced",".select2-results",this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&i.mousewheel(function(e,t,s,n){var o=i.scrollTop();n>0&&o-n<=0?(i.scrollTop(0),b(e)):n<0&&i.get(0).scrollHeight-i.scrollTop()+n<=i.height()&&(i.scrollTop(i.get(0).scrollHeight-i.height()),b(e))}),w(n),n.on("keyup-change input paste",this.bind(this.updateResults)),n.on("focus",function(){n.addClass("select2-focused")}),n.on("blur",function(){n.removeClass("select2-focused")}),this.dropdown.on("mouseup",".select2-results",this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.on("click mouseup mousedown",function(e){e.stopPropagation()}),e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==s.maximumInputLength&&this.search.attr("maxlength",s.maximumInputLength);var a=s.element.prop("disabled");a===t&&(a=!1),this.enable(!a);var c=s.element.prop("readonly");c===t&&(c=!1),this.readonly(c),l=l||function(){var t=e(u);t.appendTo("body");var s={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),s}(),this.autofocus=s.element.prop("autofocus"),s.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.nextSearchTerm=t},destroy:function(){var e=this.opts.element,s=e.data("select2");this.close(),this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),s!==t&&(s.container.remove(),s.dropdown.remove(),e.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show())},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:g(e.attr("locked"),"locked")||g(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(s){var i,n,o,a,c=this;if("select"===(i=s.element).get(0).tagName.toLowerCase()&&(this.select=n=s.element),n&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in s)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),"function"!=typeof(s=e.extend({},{populateResults:function(i,n,o){var a,l=this.opts.id;(a=function(i,n,r){var h,u,d,p,f,g,m,v,w,C;for(h=0,u=(i=s.sortResults(i,n,o)).length;h<u;h+=1)p=!(f=!0===(d=i[h]).disabled)&&l(d)!==t,g=d.children&&d.children.length>0,(m=e("<li></li>")).addClass("select2-results-dept-"+r),m.addClass("select2-result"),m.addClass(p?"select2-result-selectable":"select2-result-unselectable"),f&&m.addClass("select2-disabled"),g&&m.addClass("select2-result-with-children"),m.addClass(c.opts.formatResultCssClass(d)),(v=e(document.createElement("div"))).addClass("select2-result-label"),(C=s.formatResult(d,v,o,c.opts.escapeMarkup))!==t&&v.html(C),m.append(v),g&&((w=e("<ul></ul>")).addClass("select2-result-sub"),a(d.children,w,r+1),m.append(w)),m.data("select2-data",d),n.append(m)})(n,i,0)}},e.fn.select2.defaults,s)).id&&(o=s.id,s.id=function(e){return e[o]}),e.isArray(s.element.data("select2Tags"))){if("tags"in s)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+s.element.attr("id");s.tags=s.element.data("select2Tags")}if(n?(s.query=this.bind(function(e){var s,n,o,a={results:[],more:!1},l=e.term;o=function(t,s){var i;t.is("option")?e.matcher(l,t.text(),t)&&s.push(c.optionToData(t)):t.is("optgroup")&&(i=c.optionToData(t),t.children().each2(function(e,t){o(t,i.children)}),i.children.length>0&&s.push(i))},s=i.children(),this.getPlaceholder()!==t&&s.length>0&&(n=this.getPlaceholderOption())&&(s=s.not(n)),s.each2(function(e,t){o(t,a.results)}),e.callback(a)}),s.id=function(e){return e.id},s.formatResultCssClass=function(e){return e.css}):"query"in s||("ajax"in s?((a=s.element.data("ajax-url"))&&a.length>0&&(s.ajax.url=a),s.query=x.call(s.element,s.ajax)):"data"in s?s.query=T(s.data):"tags"in s&&(s.query=O(s.tags),s.createSearchChoice===t&&(s.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}),s.initSelection===t&&(s.initSelection=function(t,i){var n=[];e(m(t.val(),s.separator)).each(function(){var t={id:this,text:this},i=s.tags;e.isFunction(i)&&(i=i()),e(i).each(function(){if(g(this.id,t.id))return t=this,!1}),n.push(t)}),i(n)}))),"function"!=typeof s.query)throw"query function not defined for Select2 "+s.element.attr("id");return s},monitorSource:function(){var e,s,i=this.opts.element;i.on("change.select2",this.bind(function(e){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()})),e=this.bind(function(){var e=i.prop("disabled");e===t&&(e=!1),this.enable(!e);var s=i.prop("readonly");s===t&&(s=!1),this.readonly(s),S(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(P(this.opts.containerCssClass)),S(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(P(this.opts.dropdownCssClass))}),i.on("propertychange.select2",e),this.mutationCallback===t&&(this.mutationCallback=function(t){t.forEach(e)}),(s=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new s(this.mutationCallback),this.propertyObserver.observe(i.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var s=e.Event("select2-selecting",{val:this.id(t),object:t});return this.opts.element.trigger(s),!s.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===t&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){return e===t&&(e=!1),this._readonly!==e&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface(),!0)},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,s,i,n,o,a=this.dropdown,c=this.container.offset(),r=this.container.outerHeight(!1),h=this.container.outerWidth(!1),u=a.outerHeight(!1),d=e(window),p=d.width(),f=d.height(),g=d.scrollLeft()+p,m=d.scrollTop()+f,v=c.top+r,w=c.left,C=v+u<=m,b=c.top-u>=this.body().scrollTop(),S=a.outerWidth(!1),y=w+S<=g;a.hasClass("select2-drop-above")?(s=!0,!b&&C&&(i=!0,s=!1)):(s=!1,!C&&b&&(i=!0,s=!0)),i&&(a.hide(),c=this.container.offset(),r=this.container.outerHeight(!1),h=this.container.outerWidth(!1),u=a.outerHeight(!1),g=d.scrollLeft()+p,m=d.scrollTop()+f,v=c.top+r,y=(w=c.left)+(S=a.outerWidth(!1))<=g,a.show()),this.opts.dropdownAutoWidth?(o=e(".select2-results",a)[0],a.addClass("select2-drop-auto-width"),a.css("width",""),(S=a.outerWidth(!1)+(o.scrollHeight===o.clientHeight?0:l.width))>h?h=S:S=h,y=w+S<=g):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body().css("position")&&(v-=(t=this.body().offset()).top,w-=t.left),y||(w=c.left+h-S),n={left:w,width:h},s?(n.bottom=f-c.top,n.top="auto",this.container.addClass("select2-drop-above"),a.addClass("select2-drop-above")):(n.top=v,n.bottom="auto",this.container.removeClass("select2-drop-above"),a.removeClass("select2-drop-above")),n=e.extend(n,P(this.opts.dropdownCss)),a.css(n)},shouldOpen:function(){var t;return!this.opened()&&(!1!==this._enabled&&!0!==this._readonly&&(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),!0)},opening:function(){var t,s=this.containerId,i="scroll."+s,n="resize."+s,o="orientationchange."+s;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),0==(t=e("#select2-drop-mask")).length&&((t=e(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),t.hide(),t.appendTo(this.body()),t.on("mousedown touchstart click",function(t){var s,i=e("#select2-drop");i.length>0&&((s=i.data("select2")).opts.selectOnBlur&&s.selectHighlighted({noFocus:!0}),s.close({focus:!0}),t.preventDefault(),t.stopPropagation())})),this.dropdown.prev()[0]!==t[0]&&this.dropdown.before(t),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),t.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var a=this;this.container.parents().add(window).each(function(){e(this).on(n+" "+i+" "+o,function(e){a.positionDropdown()})})},close:function(){if(this.opened()){var t=this.containerId,s="scroll."+t,i="resize."+t,n="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).off(s).off(i).off(n)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return P(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var t,s,i,n,o,a,c,l=this.results;(s=this.highlight())<0||(0!=s?(t=this.findHighlightableChoices().find(".select2-result-label"),n=(i=e(t[s])).offset().top+i.outerHeight(!0),s===t.length-1&&(c=l.find("li.select2-more-results")).length>0&&(n=c.offset().top+c.outerHeight(!0)),n>(o=l.offset().top+l.outerHeight(!0))&&l.scrollTop(l.scrollTop()+(n-o)),(a=i.offset().top-l.offset().top)<0&&"none"!=i.css("display")&&l.scrollTop(l.scrollTop()+a)):l.scrollTop(0))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled, .select2-selected)")},moveHighlight:function(t){for(var s=this.findHighlightableChoices(),i=this.highlight();i>-1&&i<s.length;){var n=e(s[i+=t]);if(n.hasClass("select2-result-selectable")&&!n.hasClass("select2-disabled")&&!n.hasClass("select2-selected")){this.highlight(i);break}}},highlight:function(t){var s,i,n=this.findHighlightableChoices();if(0===arguments.length)return f(n.filter(".select2-highlighted")[0],n.get());t>=n.length&&(t=n.length-1),t<0&&(t=0),this.removeHighlight(),(s=e(n[t])).addClass("select2-highlighted"),this.ensureHighlightVisible(),(i=s.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(i),choice:i})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var s=e(t.target).closest(".select2-result-selectable");if(s.length>0&&!s.is(".select2-highlighted")){var i=this.findHighlightableChoices();this.highlight(i.index(s))}else 0==s.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var e=this.results,t=e.find("li.select2-more-results"),s=this.resultsPage+1,i=this,n=this.search.val(),o=this.context;0!==t.length&&t.offset().top-e.offset().top-e.height()<=this.opts.loadMorePadding&&(t.addClass("select2-active"),this.opts.query({element:this.opts.element,term:n,page:s,context:o,matcher:this.opts.matcher,callback:this.bind(function(a){i.opened()&&(i.opts.populateResults.call(this,e,a.results,{term:n,page:s,context:o}),i.postprocessResults(a,!1,!1),!0===a.more?(t.detach().appendTo(e).text(i.opts.formatLoadMore(s+1)),window.setTimeout(function(){i.loadMoreIfNeeded()},10)):t.remove(),i.positionDropdown(),i.resultsPage=s,i.context=a.context,this.opts.element.trigger({type:"select2-loaded",items:a}))})}))},tokenize:function(){},updateResults:function(s){var i,n,o,a=this.search,c=this.results,l=this.opts,r=this,h=a.val(),u=e.data(this.container,"select2-last-term");if((!0===s||!u||!g(h,u))&&(e.data(this.container,"select2-last-term",h),!0===s||!1!==this.showSearchInput&&this.opened())){o=++this.queryCount;var d=this.getMaximumSelectionSize();if(!(d>=1&&(i=this.data(),e.isArray(i)&&i.length>=d&&k(l.formatSelectionTooBig,"formatSelectionTooBig"))))return a.val().length<l.minimumInputLength?(k(l.formatInputTooShort,"formatInputTooShort")?f("<li class='select2-no-results'>"+l.formatInputTooShort(a.val(),l.minimumInputLength)+"</li>"):f(""),void(s&&this.showSearch&&this.showSearch(!0))):void(l.maximumInputLength&&a.val().length>l.maximumInputLength?k(l.formatInputTooLong,"formatInputTooLong")?f("<li class='select2-no-results'>"+l.formatInputTooLong(a.val(),l.maximumInputLength)+"</li>"):f(""):(l.formatSearching&&0===this.findHighlightableChoices().length&&f("<li class='select2-searching'>"+l.formatSearching()+"</li>"),a.addClass("select2-active"),this.removeHighlight(),(n=this.tokenize())!=t&&null!=n&&a.val(n),this.resultsPage=1,l.query({element:l.element,term:a.val(),page:this.resultsPage,context:null,matcher:l.matcher,callback:this.bind(function(i){var n;o==this.queryCount&&(this.opened()?(this.context=i.context===t?null:i.context,this.opts.createSearchChoice&&""!==a.val()&&(n=this.opts.createSearchChoice.call(r,a.val(),i.results))!==t&&null!==n&&r.id(n)!==t&&null!==r.id(n)&&0===e(i.results).filter(function(){return g(r.id(this),r.id(n))}).length&&i.results.unshift(n),0===i.results.length&&k(l.formatNoMatches,"formatNoMatches")?f("<li class='select2-no-results'>"+l.formatNoMatches(a.val())+"</li>"):(c.empty(),r.opts.populateResults.call(this,c,i.results,{term:a.val(),page:this.resultsPage,context:null}),!0===i.more&&k(l.formatLoadMore,"formatLoadMore")&&(c.append("<li class='select2-more-results'>"+r.opts.escapeMarkup(l.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){r.loadMoreIfNeeded()},10)),this.postprocessResults(i,s),p(),this.opts.element.trigger({type:"select2-loaded",items:i}))):this.search.removeClass("select2-active"))})})));f("<li class='select2-selection-limit'>"+l.formatSelectionTooBig(d)+"</li>")}function p(){a.removeClass("select2-active"),r.positionDropdown()}function f(e){c.html(e),p()}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){!function(e){e[0]!==document.activeElement&&window.setTimeout(function(){var t,s=e[0],i=e.val().length;e.focus(),e.is(":visible")&&s===document.activeElement&&(s.setSelectionRange?s.setSelectionRange(i,i):s.createTextRange&&((t=s.createTextRange()).collapse(!1),t.select()))},0)}(this.search)},selectHighlighted:function(e){var t=this.highlight(),s=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");s?(this.highlight(t),this.onSelect(s,e)):e&&e.noFocus&&this.close()},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var e=this.select.children("option").first();if(this.opts.placeholderOption!==t)return"first"===this.opts.placeholderOption&&e||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.text()&&""===e.val())return e}},initContainerWidth:function(){var s=function(){var s,i,n,o,a;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if((s=this.opts.element.attr("style"))!==t)for(o=0,a=(i=s.split(";")).length;o<a;o+=1)if(null!==(n=i[o].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&n.length>=1)return n[1];return"resolve"===this.opts.width?(s=this.opts.element.css("width")).indexOf("%")>0?s:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);null!==s&&this.container.css("width",s)}}),i=A(s,{createContainer:function(){return e(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow'><b></b></span>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var s,i,n;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.search.focus(),(s=this.search.get(0)).createTextRange?((i=s.createTextRange()).collapse(!1),i.select()):s.setSelectionRange&&(n=this.search.val().length,s.setSelectionRange(n,n)),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(e){this.opened()&&(this.parent.close.apply(this,arguments),e=e||{focus:!0},this.focusser.removeAttr("disabled"),e.focus&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments)},initContainer:function(){var t,s=this.container,i=this.dropdown;this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=t=s.find(".select2-choice"),this.focusser=s.find(".select2-focusser"),this.focusser.attr("id","s2id_autogen"+o()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id")),this.focusser.attr("tabindex",this.elementTabIndex),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled())if(e.which!==h.PAGE_UP&&e.which!==h.PAGE_DOWN)switch(e.which){case h.UP:case h.DOWN:return this.moveHighlight(e.which===h.UP?-1:1),void b(e);case h.ENTER:return this.selectHighlighted(),void b(e);case h.TAB:return void this.selectHighlighted({noFocus:!0});case h.ESC:return this.cancel(e),void b(e)}else b(e)})),this.search.on("blur",this.bind(function(e){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==h.TAB&&!h.isControl(e)&&!h.isFunctionKey(e)&&e.which!==h.ESC){if(!1!==this.opts.openOnEnter||e.which!==h.ENTER){if(e.which==h.DOWN||e.which==h.UP||e.which==h.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),void b(e)}return e.which==h.DELETE||e.which==h.BACKSPACE?(this.opts.allowClear&&this.clear(),void b(e)):void 0}b(e)}})),w(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}})),t.on("mousedown","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),function(e){e.preventDefault(),e.stopImmediatePropagation()}(e),this.close(),this.selection.focus())})),t.on("mousedown",this.bind(function(t){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),b(t)})),i.on("mousedown",this.bind(function(){this.search.focus()})),t.on("focus",this.bind(function(e){b(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(t){var s=this.selection.data("select2-data");if(s){var i=e.Event("select2-clearing");if(this.opts.element.trigger(i),i.isDefaultPrevented())return;var n=this.getPlaceholderOption();this.opts.element.val(n?n.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==t&&(this.opts.element.trigger({type:"select2-removed",val:this.id(s),choice:s}),this.triggerChange({removed:s}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(s){s!==t&&null!==s&&(e.updateSelection(s),e.close(),e.setPlaceholder())})}},isPlaceholderOptionSelected:function(){var e;return!!this.getPlaceholder()&&((e=this.getPlaceholderOption())!==t&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===t||null===this.opts.element.val())},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),s=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=e.find("option").filter(function(){return this.selected});t(s.optionToData(i))}:"data"in t&&(t.initSelection=t.initSelection||function(s,i){var n=s.val(),o=null;t.query({matcher:function(e,s,i){var a=g(n,t.id(i));return a&&(o=i),a},callback:e.isFunction(i)?function(){i(o)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(t,s,i){var n=0,o=this;if(this.findHighlightableChoices().each2(function(e,t){if(g(o.id(t.data("select2-data")),o.opts.element.val()))return n=e,!1}),!1!==i&&(!0===s&&n>=0?this.highlight(n):this.highlight(0)),!0===s){var a=this.opts.minimumResultsForSearch;a>=0&&this.showSearch(function t(s){var i=0;return e.each(s,function(e,s){s.children?i+=t(s.children):i++}),i}(t.results)>=a)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(e,t){if(this.triggerSelect(e)){var s=this.opts.element.val(),i=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.close(),t&&t.noFocus||this.focusser.focus(),g(s,this.id(e))||this.triggerChange({added:e,removed:i})}},updateSelection:function(e){var s,i,n=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),n.empty(),null!==e&&(s=this.opts.formatSelection(e,n,this.opts.escapeMarkup)),s!==t&&n.append(s),(i=this.opts.formatSelectionCssClass(e,n))!==t&&n.addClass(i),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,s=!1,i=null,n=this,o=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(s=arguments[1]),this.select)this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,t){return i=n.optionToData(t),!1}),this.updateSelection(i),this.setPlaceholder(),s&&this.triggerChange({added:i,removed:o});else{if(!e&&0!==e)return void this.clear(s);if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){n.opts.element.val(e?n.id(e):""),n.updateSelection(e),n.setPlaceholder(),s&&n.triggerChange({added:e,removed:o})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var s,i=!1;if(0===arguments.length)return(s=this.selection.data("select2-data"))==t&&(s=null),s;arguments.length>1&&(i=arguments[1]),e?(s=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),i&&this.triggerChange({added:e,removed:s})):this.clear(i)}}),n=A(s,{createContainer:function(){return e(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),s=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=[];e.find("option").filter(function(){return this.selected}).each2(function(e,t){i.push(s.optionToData(t))}),t(i)}:"data"in t&&(t.initSelection=t.initSelection||function(s,i){var n=m(s.val(),t.separator),o=[];t.query({matcher:function(s,i,a){var c=e.grep(n,function(e){return g(e,t.id(a))}).length;return c&&o.push(a),c},callback:e.isFunction(i)?function(){for(var e=[],s=0;s<n.length;s++)for(var a=n[s],c=0;c<o.length;c++){var l=o[c];if(g(a,t.id(l))){e.push(l),o.splice(c,1);break}}i(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments)},initContainer:function(){var t,s=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(s);var i=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(t){i.search[0].focus(),i.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+o()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(s){if(this.isInterfaceEnabled()){++this.keydowns;var i=t.find(".select2-search-choice-focus"),n=i.prev(".select2-search-choice:not(.select2-locked)"),o=i.next(".select2-search-choice:not(.select2-locked)"),a=function(t){var s=0,i=0;if("selectionStart"in(t=e(t)[0]))s=t.selectionStart,i=t.selectionEnd-s;else if("selection"in document){t.focus();var n=document.selection.createRange();i=document.selection.createRange().text.length,n.moveStart("character",-t.value.length),s=n.text.length-i}return{offset:s,length:i}}(this.search);if(i.length&&(s.which==h.LEFT||s.which==h.RIGHT||s.which==h.BACKSPACE||s.which==h.DELETE||s.which==h.ENTER)){var c=i;return s.which==h.LEFT&&n.length?c=n:s.which==h.RIGHT?c=o.length?o:null:s.which===h.BACKSPACE?(this.unselect(i.first()),this.search.width(10),c=n.length?n:o):s.which==h.DELETE?(this.unselect(i.first()),this.search.width(10),c=o.length?o:null):s.which==h.ENTER&&(c=null),this.selectChoice(c),b(s),void(c&&c.length||this.open())}if((s.which===h.BACKSPACE&&1==this.keydowns||s.which==h.LEFT)&&0==a.offset&&!a.length)return this.selectChoice(t.find(".select2-search-choice:not(.select2-locked)").last()),void b(s);if(this.selectChoice(null),this.opened())switch(s.which){case h.UP:case h.DOWN:return this.moveHighlight(s.which===h.UP?-1:1),void b(s);case h.ENTER:return this.selectHighlighted(),void b(s);case h.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case h.ESC:return this.cancel(s),void b(s)}if(s.which!==h.TAB&&!h.isControl(s)&&!h.isFunctionKey(s)&&s.which!==h.BACKSPACE&&s.which!==h.ESC){if(s.which===h.ENTER){if(!1===this.opts.openOnEnter)return;if(s.altKey||s.ctrlKey||s.shiftKey||s.metaKey)return}this.open(),s.which!==h.PAGE_UP&&s.which!==h.PAGE_DOWN||b(s),s.which===h.ENTER&&b(s)}}})),this.search.on("keyup",this.bind(function(e){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))})),this.container.on("click",s,this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))})),this.container.on("focus",s,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(s){s!==t&&null!==s&&(e.updateSelection(s),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),s=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(e).addClass("select2-default"),this.search.width(s>0?s:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.updateResults(!0),this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var s=[],i=[],n=this;e(t).each(function(){f(n.id(this),s)<0&&(s.push(n.id(this)),i.push(this))}),t=i,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){n.addSelectedChoice(this)}),n.postprocessResults()},tokenize:function(){var e=this.search.val();null!=(e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts))&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,t){this.triggerSelect(e)&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),!this.select&&this.opts.closeOnSelect||this.postprocessResults(e,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),t&&t.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(s){var i,n,o=!s.locked,a=e("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),c=e("<li class='select2-search-choice select2-locked'><div></div></li>"),l=o?a:c,r=this.id(s),h=this.getVal();(i=this.opts.formatSelection(s,l.find("div"),this.opts.escapeMarkup))!=t&&l.find("div").replaceWith("<div>"+i+"</div>"),(n=this.opts.formatSelectionCssClass(s,l.find("div")))!=t&&l.addClass(n),o&&l.find(".select2-search-choice-close").on("mousedown",b).on("click dblclick",this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),b(t))})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),l.data("select2-data",s),l.insertBefore(this.searchContainer),h.push(r),this.setVal(h)},unselect:function(t){var s,i,n=this.getVal();if(0===(t=t.closest(".select2-search-choice")).length)throw"Invalid argument: "+t+". Must be .select2-search-choice";if(s=t.data("select2-data")){for(;(i=f(this.id(s),n))>=0;)n.splice(i,1),this.setVal(n),this.select&&this.postprocessResults();var o=e.Event("select2-removing");o.val=this.id(s),o.choice=s,this.opts.element.trigger(o),o.isDefaultPrevented()||(t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(s),choice:s}),this.triggerChange({removed:s}))}},postprocessResults:function(e,t,s){var i=this.getVal(),n=this.results.find(".select2-result"),o=this.results.find(".select2-result-with-children"),a=this;n.each2(function(e,t){f(a.id(t.data("select2-data")),i)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))}),o.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&!1!==s&&a.highlight(0),!this.opts.createSearchChoice&&!n.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&k(a.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+a.opts.formatNoMatches(a.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-v(this.search)},resizeSearch:function(){var t,s,i,n,o=v(this.search);t=function(t){if(!a){var s=t[0].currentStyle||window.getComputedStyle(t[0],null);(a=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:s.fontSize,fontFamily:s.fontFamily,fontStyle:s.fontStyle,fontWeight:s.fontWeight,letterSpacing:s.letterSpacing,textTransform:s.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),e("body").append(a)}return a.text(t.val()),a.width()}(this.search)+10,s=this.search.offset().left,(n=(i=this.selection.width())-(s-this.selection.offset().left)-o)<t&&(n=i-o),n<40&&(n=i-o),n<=0&&(n=t),this.search.width(Math.floor(n))},getVal:function(){var e;return this.select?null===(e=this.select.val())?[]:e:m(e=this.opts.element.val(),this.opts.separator)},setVal:function(t){var s;this.select?this.select.val(t):(s=[],e(t).each(function(){f(this,s)<0&&s.push(this)}),this.opts.element.val(0===s.length?"":s.join(this.opts.separator)))},buildChangeDetails:function(e,t){t=t.slice(0),e=e.slice(0);for(var s=0;s<t.length;s++)for(var i=0;i<e.length;i++)g(this.opts.id(t[s]),this.opts.id(e[i]))&&(t.splice(s,1),s>0&&s--,e.splice(i,1),i--);return{added:t,removed:e}},val:function(s,i){var n,o=this;if(0===arguments.length)return this.getVal();if((n=this.data()).length||(n=[]),!s&&0!==s)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(i&&this.triggerChange({added:this.data(),removed:n}));if(this.setVal(s),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange(this.buildChangeDetails(n,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var s=e.map(t,o.id);o.setVal(s),o.updateSelection(t),o.clearSearch(),i&&o.triggerChange(o.buildChangeDetails(n,o.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],s=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(s.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(t,s){var i,n,o=this;if(0===arguments.length)return this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get();n=this.data(),t||(t=[]),i=e.map(t,function(e){return o.opts.id(e)}),this.setVal(i),this.updateSelection(t),this.clearSearch(),s&&this.triggerChange(this.buildChangeDetails(n,this.data()))}}),e.fn.select2=function(){var s,o,a,c,l,r=Array.prototype.slice.call(arguments,0),h=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],u=["opened","isFocused","container","dropdown"],d=["val","data"],p={search:"externalSearch"};return this.each(function(){if(0===r.length||"object"==typeof r[0])(s=0===r.length?{}:e.extend({},r[0])).element=e(this),"select"===s.element.get(0).tagName.toLowerCase()?l=s.element.prop("multiple"):(l=s.multiple||!1,"tags"in s&&(s.multiple=l=!0)),(o=l?new n:new i).init(s);else{if("string"!=typeof r[0])throw"Invalid arguments to select2 plugin: "+r;if(f(r[0],h)<0)throw"Unknown method: "+r[0];if(c=t,(o=e(this).data("select2"))===t)return;if("container"===(a=r[0])?c=o.container:"dropdown"===a?c=o.dropdown:(p[a]&&(a=p[a]),c=o[a].apply(o,r.slice(1))),f(r[0],u)>=0||f(r[0],d)&&1==r.length)return!1}}),c===t?this:c},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,s,i){var n=[];return y(e.text,s.term,n,i),n.join("")},formatSelection:function(e,s,i){return e?i(e.text):t},sortResults:function(e,t,s){return e},formatResultCssClass:function(e){return t},formatSelectionCssClass:function(e,s){return t},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(e,t){var s=t-e.length;return"Please enter "+s+" more character"+(1==s?"":"s")},formatInputTooLong:function(e,t){var s=e.length-t;return"Please delete "+s+" character"+(1==s?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(e){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e.id},matcher:function(e,t){return p(""+t).toUpperCase().indexOf(p(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:function(e,s,i,n){var o,a,c,l,r,h=e,u=!1;if(!n.createSearchChoice||!n.tokenSeparators||n.tokenSeparators.length<1)return t;for(;;){for(a=-1,c=0,l=n.tokenSeparators.length;c<l&&(r=n.tokenSeparators[c],!((a=e.indexOf(r))>=0));c++);if(a<0)break;if(o=e.substring(0,a),e=e.substring(a+r.length),o.length>0&&(o=n.createSearchChoice.call(this,o,s))!==t&&null!==o&&n.id(o)!==t&&null!==n.id(o)){for(u=!1,c=0,l=s.length;c<l;c++)if(g(n.id(o),n.id(s[c]))){u=!0;break}u||i(o)}}return h!==e?e:void 0},escapeMarkup:E,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(e){return null},nextSearchTerm:function(e,s){return t}},e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:x,local:T,tags:O},util:{debounce:C,markMatch:y,escapeMarkup:E,stripDiacritics:p},class:{abstract:s,single:i,multi:n}}}function p(e){var t,s,i,n;if(!e||e.length<1)return e;for(t="",s=0,i=e.length;s<i;s++)n=e.charAt(s),t+=d[n]||n;return t}function f(e,t){for(var s=0,i=t.length;s<i;s+=1)if(g(e,t[s]))return s;return-1}function g(e,s){return e===s||e!==t&&s!==t&&(null!==e&&null!==s&&(e.constructor===String?e+""==s+"":s.constructor===String&&s+""==e+""))}function m(t,s){var i,n,o;if(null===t||t.length<1)return[];for(n=0,o=(i=t.split(s)).length;n<o;n+=1)i[n]=e.trim(i[n]);return i}function v(e){return e.outerWidth(!1)-e.width()}function w(s){var i="keyup-change-value";s.on("keydown",function(){e.data(s,i)===t&&e.data(s,i,s.val())}),s.on("keyup",function(){var n=e.data(s,i);n!==t&&s.val()!==n&&(e.removeData(s,i),s.trigger("keyup-change"))})}function C(e,s,i){var n;return i=i||t,function(){var t=arguments;window.clearTimeout(n),n=window.setTimeout(function(){s.apply(i,t)},e)}}function b(e){e.preventDefault(),e.stopPropagation()}function S(t,s,i){var n,o,a=[];(n=t.attr("class"))&&e((n=""+n).split(" ")).each2(function(){0===this.indexOf("select2-")&&a.push(this)}),(n=s.attr("class"))&&e((n=""+n).split(" ")).each2(function(){0!==this.indexOf("select2-")&&(o=i(this))&&a.push(o)}),t.attr("class",a.join(" "))}function y(e,t,s,i){var n=p(e.toUpperCase()).indexOf(p(t.toUpperCase())),o=t.length;n<0?s.push(i(e)):(s.push(i(e.substring(0,n))),s.push("<span class='select2-match'>"),s.push(i(e.substring(n,n+o))),s.push("</span>"),s.push(i(e.substring(n+o,e.length))))}function E(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function x(s){var i,n=null,o=s.quietMillis||100,a=s.url,c=this;return function(l){window.clearTimeout(i),i=window.setTimeout(function(){var i=s.data,o=a,r=s.transport||e.fn.select2.ajaxDefaults.transport,h={type:s.type||"GET",cache:s.cache||!1,jsonpCallback:s.jsonpCallback||t,dataType:s.dataType||"json"},u=e.extend({},e.fn.select2.ajaxDefaults.params,h);i=i?i.call(c,l.term,l.page,l.context):null,o="function"==typeof o?o.call(c,l.term,l.page,l.context):o,n&&n.abort(),s.params&&(e.isFunction(s.params)?e.extend(u,s.params.call(c)):e.extend(u,s.params)),e.extend(u,{url:o,dataType:s.dataType,data:i,success:function(e){var t=s.results(e,l.page);l.callback(t)}}),n=r.call(c,u)},o)}}function T(t){var s,i,n=t,o=function(e){return""+e.text};e.isArray(n)&&(n={results:i=n}),!1===e.isFunction(n)&&(i=n,n=function(){return i});var a=n();return a.text&&(o=a.text,e.isFunction(o)||(s=a.text,o=function(e){return e[s]})),function(t){var s,i=t.term,a={results:[]};""!==i?(s=function(n,a){var c,l;if((n=n[0]).children){for(l in c={},n)n.hasOwnProperty(l)&&(c[l]=n[l]);c.children=[],e(n.children).each2(function(e,t){s(t,c.children)}),(c.children.length||t.matcher(i,o(c),n))&&a.push(c)}else t.matcher(i,o(n),n)&&a.push(n)},e(n().results).each2(function(e,t){s(t,a.results)}),t.callback(a)):t.callback(n())}}function O(s){var i=e.isFunction(s);return function(n){var o=n.term,a={results:[]};e(i?s():s).each(function(){var e=this.text!==t,s=e?this.text:this;(""===o||n.matcher(o,s))&&a.results.push(e?this:{id:this,text:this})}),n.callback(a)}}function k(t,s){if(e.isFunction(t))return!0;if(!t)return!1;throw new Error(s+" must be a function or a falsy value")}function P(t){return e.isFunction(t)?t():t}function A(t,s){var i=function(){};return(i.prototype=new t).constructor=i,i.prototype.parent=t.prototype,i.prototype=e.extend(i.prototype,s),i}}(jQuery)},cpPd:function(e,t,s){},tNzr:function(e,t,s){},tW0B:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s("6fSn"),s("tNzr"),s("cpPd"),s("vX7Z")},vX7Z:function(e,t,s){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(s("+x/D"));s("02/N");var n=i.default.fn.select2,o="aui-select2-drop aui-dropdown2 aui-style-default";i.default.fn.auiSelect2=function(e){var t;if(i.default.isPlainObject(e)){var s=i.default.extend({},e),a=s.hasAvatar?" aui-has-avatar":"";s.containerCssClass="aui-select2-container"+a+(s.containerCssClass?" "+s.containerCssClass:""),s.dropdownCssClass=o+a+(s.dropdownCssClass?" "+s.dropdownCssClass:""),(t=Array.prototype.slice.call(arguments,1)).unshift(s)}else t=arguments.length?arguments:[{containerCssClass:"aui-select2-container",dropdownCssClass:o}];return n.apply(this,t)}}},[["tW0B","runtime","aui.splitchunk.172ffb6da7","aui.splitchunk.b0831cc7d0","aui.splitchunk.572a8bf5cd","aui.splitchunk.fbd1a5ab27","aui.splitchunk.d49cf794d2","aui.splitchunk.336ae4f9e7","aui.splitchunk.fb15cffa72","aui.splitchunk.56dfb54d0c","aui.splitchunk.908fe798b4","aui.splitchunk.462ee5f9ef","aui.splitchunk.50dca3e042"]]]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:split_jquery.ui.plugin', location = 'aui.chunk.ffc19e6264a7911e8e4a--6569b0825f6ee156119e.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["jquery.ui.plugin"],{iKtg:function(u,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),e("lSwU"),i.default="jquery",u.exports=i.default}},[["iKtg","runtime","aui.splitchunk.vendors--20a97d6a33","aui.splitchunk.vendors--9c8c8c1546","aui.splitchunk.172ffb6da7"]]]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:split_aui.splitchunk.vendors--85718a7eef', location = 'aui.chunk.ae3c4b97fc5a1976668b--c6988b4dfd3c4a3d1198.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.splitchunk.vendors--85718a7eef"],{"2V+C":function(t,i,e){},XnJT:function(t,i,e){var s,h,n;h=[e("oDIA"),e("XPYc"),e("zq/Y"),e("lSwU"),e("O+lX"),e("yIBB")],void 0===(n="function"==typeof(s=function(t){return t.widget("ui.resizable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(i,e){if("hidden"===t(i).css("overflow"))return!1;var s,h=e&&"left"===e?"scrollLeft":"scrollTop";return i[h]>0||(i[h]=1,s=i[h]>0,i[h]=0,s)},_create:function(){var i,e=this.options,s=this;this._addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!e.aspectRatio,aspectRatio:e.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:e.helper||e.ghost||e.animate?e.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,i={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(i),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(i),this._proportionallyResize()),this._setupHandles(),e.autoHide&&t(this.element).on("mouseenter",function(){e.disabled||(s._removeClass("ui-resizable-autohide"),s._handles.show())}).on("mouseleave",function(){e.disabled||s.resizing||(s._addClass("ui-resizable-autohide"),s._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var i,e=function(i){t(i).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(e(this.element),i=this.element,this.originalElement.css({position:i.css("position"),width:i.outerWidth(),height:i.outerHeight(),top:i.css("top"),left:i.css("left")}).insertAfter(i),i.remove()),this.originalElement.css("resize",this.originalResizeStyle),e(this.originalElement),this},_setOption:function(t,i){switch(this._super(t,i),t){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var i,e,s,h,n,o=this.options,a=this;if(this.handles=o.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=t(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),s=this.handles.split(","),this.handles={},e=0;e<s.length;e++)h="ui-resizable-"+(i=t.trim(s[e])),n=t("<div>"),this._addClass(n,"ui-resizable-handle "+h),n.css({zIndex:o.zIndex}),this.handles[i]=".ui-resizable-"+i,this.element.append(n);this._renderAxis=function(i){var e,s,h,n;for(e in i=i||this.element,this.handles)this.handles[e].constructor===String?this.handles[e]=this.element.children(this.handles[e]).first().show():(this.handles[e].jquery||this.handles[e].nodeType)&&(this.handles[e]=t(this.handles[e]),this._on(this.handles[e],{mousedown:a._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(s=t(this.handles[e],this.element),n=/sw|ne|nw|se|n|s/.test(e)?s.outerHeight():s.outerWidth(),h=["padding",/ne|nw|n/.test(e)?"Top":/se|sw|s/.test(e)?"Bottom":/^e$/.test(e)?"Right":"Left"].join(""),i.css(h,n),this._proportionallyResize()),this._handles=this._handles.add(this.handles[e])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){a.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=n&&n[1]?n[1]:"se")}),o.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(i){var e,s,h=!1;for(e in this.handles)((s=t(this.handles[e])[0])===i.target||t.contains(s,i.target))&&(h=!0);return!this.options.disabled&&h},_mouseStart:function(i){var e,s,h,n=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),e=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),n.containment&&(e+=t(n.containment).scrollLeft()||0,s+=t(n.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:e,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:e,top:s},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof n.aspectRatio?n.aspectRatio:this.originalSize.width/this.originalSize.height||1,h=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===h?this.axis+"-resize":h),this._addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(i){var e,s,h=this.originalMousePosition,n=this.axis,o=i.pageX-h.left||0,a=i.pageY-h.top||0,l=this._change[n];return this._updatePrevProperties(),!!l&&(e=l.apply(this,[i,o,a]),this._updateVirtualBoundaries(i.shiftKey),(this._aspectRatio||i.shiftKey)&&(e=this._updateRatio(e,i)),e=this._respectSize(e,i),this._updateCache(e),this._propagate("resize",i),s=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(s)||(this._updatePrevProperties(),this._trigger("resize",i,this.ui()),this._applyChanges()),!1)},_mouseStop:function(i){this.resizing=!1;var e,s,h,n,o,a,l,r=this.options;return this._helper&&(h=(s=(e=this._proportionallyResizeElements).length&&/textarea/i.test(e[0].nodeName))&&this._hasScroll(e[0],"left")?0:this.sizeDiff.height,n=s?0:this.sizeDiff.width,o={width:this.helper.width()-n,height:this.helper.height()-h},a=parseFloat(this.element.css("left"))+(this.position.left-this.originalPosition.left)||null,l=parseFloat(this.element.css("top"))+(this.position.top-this.originalPosition.top)||null,r.animate||this.element.css(t.extend(o,{top:l,left:a})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!r.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",i),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var i,e,s,h,n,o=this.options;n={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||t)&&(i=n.minHeight*this.aspectRatio,s=n.minWidth/this.aspectRatio,e=n.maxHeight*this.aspectRatio,h=n.maxWidth/this.aspectRatio,i>n.minWidth&&(n.minWidth=i),s>n.minHeight&&(n.minHeight=s),e<n.maxWidth&&(n.maxWidth=e),h<n.maxHeight&&(n.maxHeight=h)),this._vBoundaries=n},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var i=this.position,e=this.size,s=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===s&&(t.left=i.left+(e.width-t.width),t.top=null),"nw"===s&&(t.top=i.top+(e.height-t.height),t.left=i.left+(e.width-t.width)),t},_respectSize:function(t){var i=this._vBoundaries,e=this.axis,s=this._isNumber(t.width)&&i.maxWidth&&i.maxWidth<t.width,h=this._isNumber(t.height)&&i.maxHeight&&i.maxHeight<t.height,n=this._isNumber(t.width)&&i.minWidth&&i.minWidth>t.width,o=this._isNumber(t.height)&&i.minHeight&&i.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,r=/sw|nw|w/.test(e),p=/nw|ne|n/.test(e);return n&&(t.width=i.minWidth),o&&(t.height=i.minHeight),s&&(t.width=i.maxWidth),h&&(t.height=i.maxHeight),n&&r&&(t.left=a-i.minWidth),s&&r&&(t.left=a-i.maxWidth),o&&p&&(t.top=l-i.minHeight),h&&p&&(t.top=l-i.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var i=0,e=[],s=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],h=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];i<4;i++)e[i]=parseFloat(s[i])||0,e[i]+=parseFloat(h[i])||0;return{height:e[0]+e[2],width:e[1]+e[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,i=0,e=this.helper||this.element;i<this._proportionallyResizeElements.length;i++)t=this._proportionallyResizeElements[i],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:e.height()-this.outerDimensions.height||0,width:e.width()-this.outerDimensions.width||0})},_renderProxy:function(){var i=this.element,e=this.options;this.elementOffset=i.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++e.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,i){return{width:this.originalSize.width+i}},w:function(t,i){var e=this.originalSize;return{left:this.originalPosition.left+i,width:e.width-i}},n:function(t,i,e){var s=this.originalSize;return{top:this.originalPosition.top+e,height:s.height-e}},s:function(t,i,e){return{height:this.originalSize.height+e}},se:function(i,e,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[i,e,s]))},sw:function(i,e,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[i,e,s]))},ne:function(i,e,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[i,e,s]))},nw:function(i,e,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[i,e,s]))}},_propagate:function(i,e){t.ui.plugin.call(this,i,[e,this.ui()]),"resize"!==i&&this._trigger(i,e,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(i){var e=t(this).resizable("instance"),s=e.options,h=e._proportionallyResizeElements,n=h.length&&/textarea/i.test(h[0].nodeName),o=n&&e._hasScroll(h[0],"left")?0:e.sizeDiff.height,a=n?0:e.sizeDiff.width,l={width:e.size.width-a,height:e.size.height-o},r=parseFloat(e.element.css("left"))+(e.position.left-e.originalPosition.left)||null,p=parseFloat(e.element.css("top"))+(e.position.top-e.originalPosition.top)||null;e.element.animate(t.extend(l,p&&r?{top:p,left:r}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseFloat(e.element.css("width")),height:parseFloat(e.element.css("height")),top:parseFloat(e.element.css("top")),left:parseFloat(e.element.css("left"))};h&&h.length&&t(h[0]).css({width:s.width,height:s.height}),e._updateCache(s),e._propagate("resize",i)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var i,e,s,h,n,o,a,l=t(this).resizable("instance"),r=l.options,p=l.element,d=r.containment,g=d instanceof t?d.get(0):/parent/.test(d)?p.parent().get(0):d;g&&(l.containerElement=t(g),/document/.test(d)||d===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(i=t(g),e=[],t(["Top","Right","Left","Bottom"]).each(function(t,s){e[t]=l._num(i.css("padding"+s))}),l.containerOffset=i.offset(),l.containerPosition=i.position(),l.containerSize={height:i.innerHeight()-e[3],width:i.innerWidth()-e[1]},s=l.containerOffset,h=l.containerSize.height,n=l.containerSize.width,o=l._hasScroll(g,"left")?g.scrollWidth:n,a=l._hasScroll(g)?g.scrollHeight:h,l.parentData={element:g,left:s.left,top:s.top,width:o,height:a}))},resize:function(i){var e,s,h,n,o=t(this).resizable("instance"),a=o.options,l=o.containerOffset,r=o.position,p=o._aspectRatio||i.shiftKey,d={top:0,left:0},g=o.containerElement,u=!0;g[0]!==document&&/static/.test(g.css("position"))&&(d=l),r.left<(o._helper?l.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-l.left:o.position.left-d.left),p&&(o.size.height=o.size.width/o.aspectRatio,u=!1),o.position.left=a.helper?l.left:0),r.top<(o._helper?l.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-l.top:o.position.top),p&&(o.size.width=o.size.height*o.aspectRatio,u=!1),o.position.top=o._helper?l.top:0),h=o.containerElement.get(0)===o.element.parent().get(0),n=/relative|absolute/.test(o.containerElement.css("position")),h&&n?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),e=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-d.left:o.offset.left-l.left)),s=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-d.top:o.offset.top-l.top)),e+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-e,p&&(o.size.height=o.size.width/o.aspectRatio,u=!1)),s+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-s,p&&(o.size.width=o.size.height*o.aspectRatio,u=!1)),u||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var i=t(this).resizable("instance"),e=i.options,s=i.containerOffset,h=i.containerPosition,n=i.containerElement,o=t(i.helper),a=o.offset(),l=o.outerWidth()-i.sizeDiff.width,r=o.outerHeight()-i.sizeDiff.height;i._helper&&!e.animate&&/relative/.test(n.css("position"))&&t(this).css({left:a.left-h.left-s.left,width:l,height:r}),i._helper&&!e.animate&&/static/.test(n.css("position"))&&t(this).css({left:a.left-h.left-s.left,width:l,height:r})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var i=t(this).resizable("instance").options;t(i.alsoResize).each(function(){var i=t(this);i.data("ui-resizable-alsoresize",{width:parseFloat(i.width()),height:parseFloat(i.height()),left:parseFloat(i.css("left")),top:parseFloat(i.css("top"))})})},resize:function(i,e){var s=t(this).resizable("instance"),h=s.options,n=s.originalSize,o=s.originalPosition,a={height:s.size.height-n.height||0,width:s.size.width-n.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0};t(h.alsoResize).each(function(){var i=t(this),s=t(this).data("ui-resizable-alsoresize"),h={},n=i.parents(e.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(n,function(t,i){var e=(s[i]||0)+(a[i]||0);e&&e>=0&&(h[i]=e||null)}),i.css(h)})},stop:function(){t(this).removeData("ui-resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var i=t(this).resizable("instance"),e=i.size;i.ghost=i.originalElement.clone(),i.ghost.css({opacity:.25,display:"block",position:"relative",height:e.height,width:e.width,margin:0,left:0,top:0}),i._addClass(i.ghost,"ui-resizable-ghost"),!1!==t.uiBackCompat&&"string"==typeof i.options.ghost&&i.ghost.addClass(this.options.ghost),i.ghost.appendTo(i.helper)},resize:function(){var i=t(this).resizable("instance");i.ghost&&i.ghost.css({position:"relative",height:i.size.height,width:i.size.width})},stop:function(){var i=t(this).resizable("instance");i.ghost&&i.helper&&i.helper.get(0).removeChild(i.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var i,e=t(this).resizable("instance"),s=e.options,h=e.size,n=e.originalSize,o=e.originalPosition,a=e.axis,l="number"==typeof s.grid?[s.grid,s.grid]:s.grid,r=l[0]||1,p=l[1]||1,d=Math.round((h.width-n.width)/r)*r,g=Math.round((h.height-n.height)/p)*p,u=n.width+d,f=n.height+g,c=s.maxWidth&&s.maxWidth<u,m=s.maxHeight&&s.maxHeight<f,z=s.minWidth&&s.minWidth>u,w=s.minHeight&&s.minHeight>f;s.grid=l,z&&(u+=r),w&&(f+=p),c&&(u-=r),m&&(f-=p),/^(se|s|e)$/.test(a)?(e.size.width=u,e.size.height=f):/^(ne)$/.test(a)?(e.size.width=u,e.size.height=f,e.position.top=o.top-g):/^(sw)$/.test(a)?(e.size.width=u,e.size.height=f,e.position.left=o.left-d):((f-p<=0||u-r<=0)&&(i=e._getPaddingPlusBorderDimensions(this)),f-p>0?(e.size.height=f,e.position.top=o.top-g):(f=p-i.height,e.size.height=f,e.position.top=o.top+n.height-f),u-r>0?(e.size.width=u,e.position.left=o.left-d):(u=r-i.width,e.size.width=u,e.position.left=o.left+n.width-u))}}),t.ui.resizable})?s.apply(i,h):s)||(t.exports=n)},"zq/Y":function(t,i,e){var s,h,n;h=[e("oDIA"),e("O+lX")],void 0===(n="function"==typeof(s=function(t){return t.fn.extend({disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}})})?s.apply(i,h):s)||(t.exports=n)}}]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:split_jquery.ui.resizable', location = 'aui.chunk.a312bad5b76741024fb4--5eca985b02b335e904e5.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["jquery.ui.resizable"],{kW2n:function(u,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i("2V+C"),i("XnJT"),e.default="jquery",u.exports=e.default}},[["kW2n","runtime","aui.splitchunk.vendors--20a97d6a33","aui.splitchunk.vendors--d18e3cafa7","aui.splitchunk.vendors--db57146687","aui.splitchunk.vendors--9c8c8c1546","aui.splitchunk.vendors--85718a7eef","aui.splitchunk.172ffb6da7"]]]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:split_aui.splitchunk.vendors--c7d6d1dc80', location = 'aui.chunk.a7fc0d5b8767e9b40315--bdd2730e8619a65df894.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.splitchunk.vendors--c7d6d1dc80"],{"2NYx":function(t,i,o){var e,n,l;n=[o("oDIA"),o("O+lX")],void 0===(l="function"==typeof(e=function(t){return function(){var i,o=Math.max,e=Math.abs,n=/left|center|right/,l=/top|center|bottom/,s=/[\+\-]\d+(\.[\d]+)?%?/,f=/^\w+/,h=/%$/,r=t.fn.position;function p(t,i,o){return[parseFloat(t[0])*(h.test(t[0])?i/100:1),parseFloat(t[1])*(h.test(t[1])?o/100:1)]}function c(i,o){return parseInt(t.css(i,o),10)||0}t.position={scrollbarWidth:function(){if(void 0!==i)return i;var o,e,n=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),l=n.children()[0];return t("body").append(n),o=l.offsetWidth,n.css("overflow","scroll"),o===(e=l.offsetWidth)&&(e=n[0].clientWidth),n.remove(),i=o-e},getScrollInfo:function(i){var o=i.isWindow||i.isDocument?"":i.element.css("overflow-x"),e=i.isWindow||i.isDocument?"":i.element.css("overflow-y"),n="scroll"===o||"auto"===o&&i.width<i.element[0].scrollWidth;return{width:"scroll"===e||"auto"===e&&i.height<i.element[0].scrollHeight?t.position.scrollbarWidth():0,height:n?t.position.scrollbarWidth():0}},getWithinInfo:function(i){var o=t(i||window),e=t.isWindow(o[0]),n=!!o[0]&&9===o[0].nodeType;return{element:o,isWindow:e,isDocument:n,offset:e||n?{left:0,top:0}:t(i).offset(),scrollLeft:o.scrollLeft(),scrollTop:o.scrollTop(),width:o.outerWidth(),height:o.outerHeight()}}},t.fn.position=function(i){if(!i||!i.of)return r.apply(this,arguments);i=t.extend({},i);var h,a,d,g,u,m,w=t(i.of),W=t.position.getWithinInfo(i.within),v=t.position.getScrollInfo(W),y=(i.collision||"flip").split(" "),H={};return m=function(i){var o=i[0];return 9===o.nodeType?{width:i.width(),height:i.height(),offset:{top:0,left:0}}:t.isWindow(o)?{width:i.width(),height:i.height(),offset:{top:i.scrollTop(),left:i.scrollLeft()}}:o.preventDefault?{width:0,height:0,offset:{top:o.pageY,left:o.pageX}}:{width:i.outerWidth(),height:i.outerHeight(),offset:i.offset()}}(w),w[0].preventDefault&&(i.at="left top"),a=m.width,d=m.height,g=m.offset,u=t.extend({},g),t.each(["my","at"],function(){var t,o,e=(i[this]||"").split(" ");1===e.length&&(e=n.test(e[0])?e.concat(["center"]):l.test(e[0])?["center"].concat(e):["center","center"]),e[0]=n.test(e[0])?e[0]:"center",e[1]=l.test(e[1])?e[1]:"center",t=s.exec(e[0]),o=s.exec(e[1]),H[this]=[t?t[0]:0,o?o[0]:0],i[this]=[f.exec(e[0])[0],f.exec(e[1])[0]]}),1===y.length&&(y[1]=y[0]),"right"===i.at[0]?u.left+=a:"center"===i.at[0]&&(u.left+=a/2),"bottom"===i.at[1]?u.top+=d:"center"===i.at[1]&&(u.top+=d/2),h=p(H.at,a,d),u.left+=h[0],u.top+=h[1],this.each(function(){var n,l,s=t(this),f=s.outerWidth(),r=s.outerHeight(),m=c(this,"marginLeft"),x=c(this,"marginTop"),b=f+m+c(this,"marginRight")+v.width,T=r+x+c(this,"marginBottom")+v.height,L=t.extend({},u),P=p(H.my,s.outerWidth(),s.outerHeight());"right"===i.my[0]?L.left-=f:"center"===i.my[0]&&(L.left-=f/2),"bottom"===i.my[1]?L.top-=r:"center"===i.my[1]&&(L.top-=r/2),L.left+=P[0],L.top+=P[1],n={marginLeft:m,marginTop:x},t.each(["left","top"],function(o,e){t.ui.position[y[o]]&&t.ui.position[y[o]][e](L,{targetWidth:a,targetHeight:d,elemWidth:f,elemHeight:r,collisionPosition:n,collisionWidth:b,collisionHeight:T,offset:[h[0]+P[0],h[1]+P[1]],my:i.my,at:i.at,within:W,elem:s})}),i.using&&(l=function(t){var n=g.left-L.left,l=n+a-f,h=g.top-L.top,p=h+d-r,c={target:{element:w,left:g.left,top:g.top,width:a,height:d},element:{element:s,left:L.left,top:L.top,width:f,height:r},horizontal:l<0?"left":n>0?"right":"center",vertical:p<0?"top":h>0?"bottom":"middle"};a<f&&e(n+l)<a&&(c.horizontal="center"),d<r&&e(h+p)<d&&(c.vertical="middle"),o(e(n),e(l))>o(e(h),e(p))?c.important="horizontal":c.important="vertical",i.using.call(this,t,c)}),s.offset(t.extend(L,{using:l}))})},t.ui.position={fit:{left:function(t,i){var e,n=i.within,l=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,f=t.left-i.collisionPosition.marginLeft,h=l-f,r=f+i.collisionWidth-s-l;i.collisionWidth>s?h>0&&r<=0?(e=t.left+h+i.collisionWidth-s-l,t.left+=h-e):t.left=r>0&&h<=0?l:h>r?l+s-i.collisionWidth:l:h>0?t.left+=h:r>0?t.left-=r:t.left=o(t.left-f,t.left)},top:function(t,i){var e,n=i.within,l=n.isWindow?n.scrollTop:n.offset.top,s=i.within.height,f=t.top-i.collisionPosition.marginTop,h=l-f,r=f+i.collisionHeight-s-l;i.collisionHeight>s?h>0&&r<=0?(e=t.top+h+i.collisionHeight-s-l,t.top+=h-e):t.top=r>0&&h<=0?l:h>r?l+s-i.collisionHeight:l:h>0?t.top+=h:r>0?t.top-=r:t.top=o(t.top-f,t.top)}},flip:{left:function(t,i){var o,n,l=i.within,s=l.offset.left+l.scrollLeft,f=l.width,h=l.isWindow?l.scrollLeft:l.offset.left,r=t.left-i.collisionPosition.marginLeft,p=r-h,c=r+i.collisionWidth-f-h,a="left"===i.my[0]?-i.elemWidth:"right"===i.my[0]?i.elemWidth:0,d="left"===i.at[0]?i.targetWidth:"right"===i.at[0]?-i.targetWidth:0,g=-2*i.offset[0];p<0?((o=t.left+a+d+g+i.collisionWidth-f-s)<0||o<e(p))&&(t.left+=a+d+g):c>0&&((n=t.left-i.collisionPosition.marginLeft+a+d+g-h)>0||e(n)<c)&&(t.left+=a+d+g)},top:function(t,i){var o,n,l=i.within,s=l.offset.top+l.scrollTop,f=l.height,h=l.isWindow?l.scrollTop:l.offset.top,r=t.top-i.collisionPosition.marginTop,p=r-h,c=r+i.collisionHeight-f-h,a="top"===i.my[1]?-i.elemHeight:"bottom"===i.my[1]?i.elemHeight:0,d="top"===i.at[1]?i.targetHeight:"bottom"===i.at[1]?-i.targetHeight:0,g=-2*i.offset[1];p<0?((n=t.top+a+d+g+i.collisionHeight-f-s)<0||n<e(p))&&(t.top+=a+d+g):c>0&&((o=t.top-i.collisionPosition.marginTop+a+d+g-h)>0||e(o)<c)&&(t.top+=a+d+g)}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}}}(),t.ui.position})?e.apply(i,n):e)||(t.exports=l)}}]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:split_jquery.ui.position', location = 'aui.chunk.6d46b627bfb0d048fba9--406d570703742f04765b.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["jquery.ui.position"],{"7ih8":function(i,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),e("2NYx"),u.default="jquery",i.exports=u.default}},[["7ih8","runtime","aui.splitchunk.vendors--20a97d6a33","aui.splitchunk.vendors--c7d6d1dc80","aui.splitchunk.172ffb6da7"]]]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:split_aui.splitchunk.vendors--f29b9b9def', location = 'aui.chunk.25d29ac3a5db8655ba18--0c97ad24864d45f4b264.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.splitchunk.vendors--f29b9b9def"],{zxTg:function(n,i,o){}}]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:split_jquery.ui.draggable', location = 'aui.chunk.05b7bcc68c25281d0731--3ad7dcf9c4cebedef46a.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["jquery.ui.draggable"],{duoV:function(u,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i("zxTg"),i("z+ct"),e.default="jquery",u.exports=e.default}},[["duoV","runtime","aui.splitchunk.vendors--20a97d6a33","aui.splitchunk.vendors--d18e3cafa7","aui.splitchunk.vendors--db57146687","aui.splitchunk.vendors--51504ebf10","aui.splitchunk.vendors--9c8c8c1546","aui.splitchunk.vendors--351ae504d7","aui.splitchunk.vendors--06bc6ae5d7","aui.splitchunk.vendors--f29b9b9def","aui.splitchunk.172ffb6da7"]]]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:tc-jquery-ui-plugins', location = 'com/atlassian/confluence/extra/calendar3/lib/jquery-plugins/jquery.ThreeDots.js' */
(function(e){e.fn.ThreeDots=function(h){var g=this;if((typeof h=="object")||(h==undefined)){e.fn.ThreeDots.the_selected=this;var g=e.fn.ThreeDots.update(h)}return g};e.fn.ThreeDots.update=function(u){var k,t=null;var m,j,s,q,o;var l,i;var r,h,n;if((typeof u=="object")||(u==undefined)){e.fn.ThreeDots.c_settings=e.extend({},e.fn.ThreeDots.settings,u);var p=e.fn.ThreeDots.c_settings.max_rows;if(p<1){return e.fn.ThreeDots.the_selected}var g=false;jQuery.each(e.fn.ThreeDots.c_settings.valid_delimiters,function(v,w){if(((new String(w)).length==1)){g=true}});if(g==false){return e.fn.ThreeDots.the_selected}e.fn.ThreeDots.the_selected.each(function(){k=e(this);if(e(k).children("."+e.fn.ThreeDots.c_settings.text_span_class).length==0){return true}l=e(k).children("."+e.fn.ThreeDots.c_settings.text_span_class).get(0);var y=a(k,true);var x=e(l).text();d(k,l,y);var v=e(l).text();if((h=e(k).attr("threedots"))!=undefined){e(l).text(h);e(k).children("."+e.fn.ThreeDots.c_settings.e_span_class).remove()}r=e(l).text();if(r.length<=0){r=""}e(k).attr("threedots",x);if(a(k,y)>p){curr_ellipsis=e(k).append('<span style="white-space:nowrap" class="'+e.fn.ThreeDots.c_settings.e_span_class+'">'+e.fn.ThreeDots.c_settings.ellipsis_string+"</span>");while(a(k,y)>p){i=b(e(l).text());e(l).text(i.updated_string);t=i.word;n=i.del;if(n==null){break}}if(t!=null){var w=c(k,y);if((a(k,y)<=p-1)||(w)||(!e.fn.ThreeDots.c_settings.whole_word)){r=e(l).text();if(i.del!=null){e(l).text(r+n)}if(a(k,y)>p){e(l).text(r)}else{e(l).text(e(l).text()+t);if((a(k,y)>p+1)||(!e.fn.ThreeDots.c_settings.whole_word)||(v==t)||w){while((a(k,y)>p)){if(e(l).text().length>0){e(l).text(e(l).text().substr(0,e(l).text().length-1))}else{break}}}}}}}if(x==e(e(k).children("."+e.fn.ThreeDots.c_settings.text_span_class).get(0)).text()){e(k).children("."+e.fn.ThreeDots.c_settings.e_span_class).remove()}else{if((e(k).children("."+e.fn.ThreeDots.c_settings.e_span_class)).length>0){if(e.fn.ThreeDots.c_settings.alt_text_t){e(k).children("."+e.fn.ThreeDots.c_settings.text_span_class).attr("title",x)}if(e.fn.ThreeDots.c_settings.alt_text_e){e(k).children("."+e.fn.ThreeDots.c_settings.e_span_class).attr("title",x)}}}})}return e.fn.ThreeDots.the_selected};e.fn.ThreeDots.settings={valid_delimiters:[" ",",","."],ellipsis_string:"...",max_rows:2,text_span_class:"ellipsis_text",e_span_class:"threedots_ellipsis",whole_word:true,allow_dangle:false,alt_text_e:false,alt_text_t:false};function c(k,h){if(e.fn.ThreeDots.c_settings.allow_dangle==true){return false}var l=e(k).children("."+e.fn.ThreeDots.c_settings.e_span_class).get(0);var g=e(l).css("display");var i=a(k,h);e(l).css("display","none");var j=a(k,h);e(l).css("display",g);if(i>j){return true}else{return false}}function a(i,j){var g=typeof j;if((g=="object")||(g==undefined)){return e(i).height()/j.lh}else{if(g=="boolean"){var h=f(e(i));return{lh:h}}}}function b(k){var j;var i=e.fn.ThreeDots.c_settings.valid_delimiters;k=jQuery.trim(k);var g=-1;var h=null;var l=null;jQuery.each(i,function(m,o){if(((new String(o)).length!=1)||(o==null)){return false}var n=k.lastIndexOf(o);if(n!=-1){if(n>g){g=n;h=k.substring(g+1);l=o}}});if(g>0){return{updated_string:jQuery.trim(k.substring(0,g)),word:h,del:l}}else{return{updated_string:"",word:jQuery.trim(k),del:null}}}function f(h){e(h).append("<div id='temp_ellipsis_div' style='position:absolute; visibility:hidden'>H</div>");var g=e("#temp_ellipsis_div").height();e("#temp_ellipsis_div").remove();return g}function d(k,l,m){var q=e(l).text();var i=q;var o=e.fn.ThreeDots.c_settings.max_rows;var h,g,n,r,j;var p;if(a(k,m)<=o){return}else{p=0;curr_length=i.length;curr_middle=Math.floor((curr_length-p)/2);h=q.substring(p,p+curr_middle);g=q.substring(p+curr_middle);while(curr_middle!=0){e(l).text(h);if(a(k,m)<=(o)){j=Math.floor(g.length/2);n=g.substring(0,j);p=h.length;i=h+n;curr_length=i.length;e(l).text(i)}else{i=h;curr_length=i.length}curr_middle=Math.floor((curr_length-p)/2);h=q.substring(0,p+curr_middle);g=q.substring(p+curr_middle)}}}})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:tc-jquery-ui-plugins', location = 'com/atlassian/confluence/extra/calendar3/lib/jquery-plugins/jquery.ui.autocomplete.js' */
(function(a){if(!a.fn.zIndex){a.fn.extend({zIndex:function(e){if(e!==undefined){return this.css("zIndex",e)}if(this.length){var c=a(this[0]),b,d;while(c.length&&c[0]!==document){b=c.css("position");if(b==="absolute"||b==="relative"||b==="fixed"){d=parseInt(c.css("zIndex"),10);if(!isNaN(d)&&d!==0){return d}}c=c.parent()}}return 0}})}a.widget("ui.autocompleteTC",{options:{minLength:1,delay:300},_create:function(){var b=this,c=this.element[0].ownerDocument;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(d){var e=a.ui.keyCode;switch(d.keyCode){case e.PAGE_UP:b._move("previousPage",d);break;case e.PAGE_DOWN:b._move("nextPage",d);break;case e.UP:b._move("previous",d);d.preventDefault();break;case e.DOWN:b._move("next",d);d.preventDefault();break;case e.ENTER:if(b.menu.active){d.preventDefault()}case e.TAB:if(!b.menu.active){return}b.menu.select(d);break;case e.ESCAPE:b.element.val(b.term);b.close(d);break;case e.LEFT:case e.RIGHT:case e.SHIFT:case e.CONTROL:case e.ALT:break;default:clearTimeout(b.searching);b.searching=setTimeout(function(){b.search(null,d)},b.options.delay);break}}).bind("focus.autocomplete",function(){b.selectedItem=null;b.previous=b.element.val()}).bind("blur.autocomplete",function(d){clearTimeout(b.searching);b.closing=setTimeout(function(){b.close(d);b._change(d)},150)});this._initSource();this.response=function(){return b._response.apply(b,arguments)};this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo("body",c).menu({focus:function(e,f){var d=f.item.data("item.autocomplete");if(false!==b._trigger("focus",null,{item:d})){if(/^key/.test(e.originalEvent.type)){b.element.val(d.value)}}},selected:function(f,g){var e=g.item.data("item.autocomplete");if(false!==b._trigger("select",f,{item:e})){b.element.val(e.value)}b.close(f);var d=b.previous;if(b.element[0]!==c.activeElement){b.element.focus();b.previous=d}b.selectedItem=e},blur:function(d,e){if(b.menu.element.is(":visible")){b.element.val(b.term)}}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");if(a.fn.bgiframe){this.menu.element.bgiframe()}},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();a.Widget.prototype.destroy.call(this)},_setOption:function(b){a.Widget.prototype._setOption.apply(this,arguments);if(b==="source"){this._initSource()}},_initSource:function(){var c,b;if(a.isArray(this.options.source)){c=this.options.source;this.source=function(e,d){d(a.ui.autocompleteTC.filter(c,e.term))}}else{if(typeof this.options.source==="string"){b=this.options.source;this.source=function(e,d){a.getJSON(b,e,d)}}else{this.source=this.options.source}}},search:function(c,b){c=c!=null?c:this.element.val();if(c.length<this.options.minLength){return this.close(b)}clearTimeout(this.closing);if(this._trigger("search")===false){return}return this._search(c)},_search:function(b){this.term=this.element.addClass("ui-autocomplete-loading").val();this.source({term:b},this.response)},_response:function(b){if(b.length){b=this._normalize(b);this._suggest(b);this._trigger("open")}else{this.close()}this.element.removeClass("ui-autocomplete-loading")},close:function(b){clearTimeout(this.closing);if(this.menu.element.is(":visible")){this._trigger("close",b);this.menu.element.hide();this.menu.deactivate()}},_change:function(b){if(this.previous!==this.element.val()){this._trigger("change",b,{item:this.selectedItem})}},_normalize:function(b){if(b.length&&b[0].label&&b[0].value){return b}return a.map(b,function(c){if(typeof c==="string"){return{label:c,value:c}}return a.extend({label:c.label||c.value,value:c.value||c.label},c)})},_suggest:function(b){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1),d,e;this._renderMenu(c,b);this.menu.deactivate();this.menu.refresh();this.menu.element.show().position({my:"left top",at:"left bottom",of:this.element,collision:"none"});d=c.width("").width();e=this.element.width();c.width(Math.max(d,e))},_renderMenu:function(d,c){var b=this;a.each(c,function(e,f){b._renderItem(d,f)})},_renderItem:function(b,c){return a("<li></li>").data("item.autocomplete",c).append("<a>"+c.label+"</a>").appendTo(b)},_move:function(c,b){if(!this.menu.element.is(":visible")){this.search(null,b);return}if(this.menu.first()&&/^previous/.test(c)||this.menu.last()&&/^next/.test(c)){this.element.val(this.term);this.menu.deactivate();return}this.menu[c](b)},widget:function(){return this.menu.element}});a.extend(a.ui.autocompleteTC,{escapeRegex:function(b){return b.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")},filter:function(d,b){var c=new RegExp(a.ui.autocompleteTC.escapeRegex(b),"i");return a.grep(d,function(e){return c.test(e.label||e.value||e)})}})}(jQuery));(function(a){a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){if(!a(c.target).closest(".ui-menu-item a").length){return}c.preventDefault();b.select(c)});this.refresh()},refresh:function(){var c=this;var b=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");b.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(d){c.activate(d,a(this).parent())}).mouseleave(function(){c.deactivate()})},activate:function(e,d){this.deactivate();if(this.hasScroll()){var f=d.offset().top-this.element.offset().top,b=this.element.attr("scrollTop"),c=this.element.height();if(f<0){this.element.attr("scrollTop",b+f)}else{if(f>c){this.element.attr("scrollTop",b+f-c+d.height())}}}this.active=d.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",e,{item:d})},deactivate:function(){if(!this.active){return}this.active.children("a").removeClass("ui-state-hover").removeAttr("id");this._trigger("blur");this.active=null},next:function(b){this.move("next",".ui-menu-item:first",b)},previous:function(b){this.move("prev",".ui-menu-item:last",b)},first:function(){return this.active&&!this.active.prev().length},last:function(){return this.active&&!this.active.next().length},move:function(e,d,c){if(!this.active){this.activate(c,this.element.children(d));return}var b=this.active[e+"All"](".ui-menu-item").eq(0);if(b.length){this.activate(c,b)}else{this.activate(c,this.element.children(d))}},nextPage:function(d){if(this.hasScroll()){if(!this.active||this.last()){this.activate(d,this.element.children(":first"));return}var e=this.active.offset().top,c=this.element.height(),b=this.element.children("li").filter(function(){var f=a(this).offset().top-e-c+a(this).height();return f<10&&f>-10});if(!b.length){b=this.element.children(":last")}this.activate(d,b)}else{this.activate(d,this.element.children(!this.active||this.last()?":first":":last"))}},previousPage:function(c){if(this.hasScroll()){if(!this.active||this.first()){this.activate(c,this.element.children(":last"));return}var d=this.active.offset().top,b=this.element.height();result=this.element.children("li").filter(function(){var e=a(this).offset().top-d+b-a(this).height();return e<10&&e>-10});if(!result.length){result=this.element.children(":first")}this.activate(c,result)}else{this.activate(c,this.element.children(!this.active||this.first()?":last":":first"))}},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")},select:function(b){this._trigger("selected",b,{item:this.active})}})}(jQuery));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:tc-jquery-ui-plugins', location = 'com/atlassian/confluence/extra/calendar3/lib/jquery-plugins/jquery.tourbus.js' */
(function e(b,g,d){function c(k,i){if(!g[k]){if(!b[k]){var h=typeof require=="function"&&require;if(!i&&h){return h(k,!0)}if(a){return a(k,!0)}throw new Error("Cannot find module '"+k+"'")}var j=g[k]={exports:{}};b[k][0].call(j.exports,function(l){var m=b[k][1][l];return c(m?m:l)},j,j.exports,e,b,g,d)}return g[k].exports}var a=typeof require=="function"&&require;for(var f=0;f<d.length;f++){c(d[f])}return c})({1:[function(b,c,a){(function(){var g,j,f,d,i,h=[].slice;g=jQuery;j=b("./modules/bus");f=b("./modules/leg");i=g.tourbus=function(){var k,l;k=1<=arguments.length?h.call(arguments,0):[];l=k[0];if(d.hasOwnProperty(l)){k=k.slice(1)}else{if(l instanceof g){l="build"}else{if(typeof l==="string"){l="build";k[0]=g(k[0])}else{g.error("Unknown method of $.tourbus --",k)}}}return d[l].apply(this,k)};g.fn.tourbus=function(){var k;k=1<=arguments.length?h.call(arguments,0):[];return this.each(function(){k.unshift(g(this));i.apply(null,["build"].concat(h.call(k)));return this})};d={build:function(m,k){var l;if(k==null){k={}}k=g.extend(true,{},i.defaults,k);l=[];if(!(m instanceof g)){m=g(m)}m.each(function(){return l.push(new j(this,k))});if(l.length===0){g.error(""+m.selector+" was not found!")}if(l.length===1){return l[0]}return l},destroyAll:function(){var l,m,n,k;n=j._busses;k=[];for(m in n){l=n[m];k.push(l.destroy())}return k},expose:function(k){return k.tourbus={Bus:j,Leg:f}}};i.defaults={debug:false,autoDepart:false,container:"body","class":null,startAt:0,onDepart:function(){return null},onStop:function(){return null},onLegStart:function(){return null},onLegEnd:function(){return null},leg:{"class":null,scrollTo:null,scrollSpeed:150,scrollContext:100,orientation:"bottom",align:"left",width:"auto",margin:10,top:null,left:null,zindex:9999,arrow:"50%"}}}).call(this)},{"./modules/bus":2,"./modules/leg":3}],2:[function(b,c,a){(function(){var g,i,f,d,h=[].slice;g=jQuery;f=b("./leg");d=b("./utils");c.exports=i=(function(){j._busses={};j._tours=0;j.uniqueId=function(){return this._tours++};function j(l,k){this.options=k;this.id=this.constructor.uniqueId();this.elId="tourbus-"+this.id;this.constructor._busses[this.id]=this;this.$original=g(l);this.rawData=this.$original.data();this.$container=g(d.dataProp(this.rawData.container,this.options.container));this.$original.data({tourbus:this});this.currentLegIndex=null;this.legs=[];this.legEls=this.$original.children("li");this.totalLegs=this.legEls.length;this._configureElement();this._setupEvents();if(d.dataProp(this.rawData.autoDepart,this.options.autoDepart)){this.$original.trigger("depart.tourbus")}this._log("built tourbus with el",l.toString(),"and options",this.options)}j.prototype.depart=function(){this.running=true;this.options.onDepart(this);this._log("departing",this);this.currentLegIndex=d.dataProp(this.rawData.startAt,this.options.startAt);return this.showLeg()};j.prototype.stop=function(k){if(!this.running){return}if(k&&k.stopPropagation){k.stopPropagation()}g.each(this.legs,g.proxy(this.hideLeg,this));this.currentLegIndex=null;this.options.onStop(this);return this.running=false};j.prototype.on=function(m,k,l){return this.$container.on(m,k,l)};j.prototype.currentLeg=function(){if(this.currentLegIndex===null){return null}return this.legs[this.currentLegIndex]};j.prototype.buildLeg=function(l){var k,n,m;k=g(this.legEls[l]);n=k.data();this.legs[l]=m=new f({bus:this,original:k,target:k.attr("data-el")||"body",index:l,rawData:n});m.render();this.$el.append(m.$el);m._position();m.hide();return m};j.prototype.showLeg=function(l){var m,k;if(l==null){l=this.currentLegIndex}m=this.legs[l]||this.buildLeg(l);this._log("showLeg:",m);k=this.options.onLegStart(m,this);if(k!==false){m.show()}if(++l<this.totalLegs&&!this.legs[l]){return this.buildLeg(l)}};j.prototype.hideLeg=function(l){var m,k;if(l==null){l=this.currentLegIndex}m=this.legs[l];if(m&&m.visible){this._log("hideLeg:",m);k=this.options.onLegEnd(m,this);if(k!==false){m.hide()}}if(--l>0&&!this.legs[l]){return this.buildLeg(l)}};j.prototype.repositionLegs=function(){return g.each(this.legs,function(k,l){if(l){l.reposition()}return})};j.prototype.next=function(k){if(k&&k.stopPropagation){k.stopPropagation()}this.hideLeg();this.currentLegIndex++;if(this.currentLegIndex>this.totalLegs-1){return this.$original.trigger("stop.tourbus")}else{return this.showLeg()}};j.prototype.prev=function(k){if(k&&k.stopPropagation){k.stopPropagation()}this.hideLeg();this.currentLegIndex--;if(this.currentLegIndex<0){return this.$original.trigger("stop.tourbus")}else{return this.showLeg()}};j.prototype.destroy=function(){g.each(this.legs,function(k,l){if(l&&l.destroy){l.destroy()}});this.legs=[];delete this.constructor._busses[this.id];this._teardownEvents();this.$original.removeData("tourbus");return this.$el.remove()};j.prototype._configureElement=function(){this.$el=g("<div class='tourbus-container'></div>");this.el=this.$el[0];this.$el.attr({id:this.elId});this.$el.addClass(d.dataProp(this.rawData["class"],this.options["class"]));return this.$container.append(this.$el)};j.prototype._log=function(){if(!d.dataProp(this.rawData.debug,this.options.debug)){return}return console.log.apply(console,["TOURBUS "+this.id+":"].concat(h.call(arguments)))};j.prototype._setupEvents=function(){this.$original.on("depart.tourbus",g.proxy(this.depart,this));this.$original.on("stop.tourbus",g.proxy(this.stop,this));this.$original.on("next.tourbus",g.proxy(this.next,this));return this.$original.on("prev.tourbus",g.proxy(this.prev,this))};j.prototype._teardownEvents=function(){return this.$original.off(".tourbus")};return j})()}).call(this)},{"./leg":3,"./utils":4}],3:[function(b,c,a){(function(){var g,f,d,h;g=jQuery;d=b("./utils");c.exports=f=(function(){function i(j){this.options=j;this.$original=this.options.original;this.bus=this.options.bus;this.rawData=this.options.rawData;this.index=this.options.index;this.$target=g(this.options.target);this.id=""+this.bus.id+"-"+this.options.index;this.elId="tourbus-leg-"+this.id;this.visible=false;if(this.$target.length===0){throw""+this.$target.selector+" is not an element!"}this.content=this.$original.html();this._setupOptions();this._configureElement();this._configureTarget();this._configureScroll();this._setupEvents();this.bus._log("leg "+this.index+" made with options",this.options)}i.prototype.render=function(){var k,j;k=this.options.orientation==="centered"?"":"tourbus-arrow";this.$el.addClass(" "+k+" tourbus-arrow-"+this.options.orientation+" ");j="<div class='tourbus-leg-inner'>\n  "+this.content+"\n</div>";this.$el.css({width:this.options.width,zIndex:this.options.zindex}).html(j);return this};i.prototype.destroy=function(){this.$el.remove();return this._teardownEvents()};i.prototype.reposition=function(){this._configureTarget();return this._position()};i.prototype._position=function(){var k,l,m,j;if(this.options.orientation!=="centered"){m={};l={top:"left",bottom:"left",left:"top",right:"top"};if(typeof this.options.arrow==="number"){this.options.arrow+="px"}m[l[this.options.orientation]]=this.options.arrow;j="#"+this.elId+".tourbus-arrow";this.bus._log("adding rule for "+this.elId,m);h(""+j+":before, "+j+":after",m)}k=this._offsets();this.bus._log("setting offsets on leg",k);return this.$el.css(k)};i.prototype.show=function(){this.visible=true;this.$el.css({visibility:"visible",opacity:1,zIndex:this.options.zindex});return this.scrollIntoView()};i.prototype.hide=function(){this.visible=false;if(this.bus.options.debug){return this.$el.css({visibility:"visible",opacity:0.4,zIndex:0})}else{return this.$el.css({visibility:"hidden"})}};i.prototype.scrollIntoView=function(){var j;if(!this.willScroll){return}j=d.dataProp(this.options.scrollTo,this.$el);this.bus._log("scrolling to",j,this.scrollSettings);return g.scrollTo(j,this.scrollSettings)};i.prototype._setupOptions=function(){var m,l,o,n,k,j;l=this.bus.options.leg;m=["class","top","left","scrollTo","scrollSpeed","scrollContext","margin","arrow","align","width","zindex","orientation"];j=[];for(n=0,k=m.length;n<k;n++){o=m[n];j.push(this.options[o]=d.dataProp(this.rawData[o],l[o]))}return j};i.prototype._configureElement=function(){this.$el=g("<div class='tourbus-leg'></div>");this.el=this.$el[0];this.$el.attr({id:this.elId});this.$el.addClass(this.options["class"]);return this.$el.css({zIndex:this.options.zindex})};i.prototype._setupEvents=function(){this.$el.on("click",".tourbus-next",g.proxy(this.bus.next,this.bus));this.$el.on("click",".tourbus-prev",g.proxy(this.bus.prev,this.bus));return this.$el.on("click",".tourbus-stop",g.proxy(this.bus.stop,this.bus))};i.prototype._teardownEvents=function(){return this.$el.off("click")};i.prototype._configureTarget=function(){this.targetOffset=this.$target.offset();if(d.dataProp(this.options.top,false)){this.targetOffset.top=this.options.top}if(d.dataProp(this.options.left,false)){this.targetOffset.left=this.options.left}this.targetWidth=this.$target.outerWidth();return this.targetHeight=this.$target.outerHeight()};i.prototype._configureScroll=function(){this.willScroll=g.fn.scrollTo&&this.options.scrollTo!==false;return this.scrollSettings={offset:-this.options.scrollContext,easing:"linear",axis:"y",duration:this.options.scrollSpeed}};i.prototype._offsets=function(){var m,u,o,t,k,j,q,s;o=this.$el.height();t=this.$el.width();var r,p;r=this.$target.width();p=this.$target.height();k={};switch(this.options.orientation){case"centered":q=g(window).height();k.top=this.options.top;if(!d.dataProp(k.top,false)){k.top=(q/2)-(o/2)}k.left=(this.targetWidth/2)-(t/2);break;case"left":var l=0;if(!(typeof this.options.arrow==="number")){var n=parseFloat(this.options.arrow);l=(n*o)/100;k.top=this.targetOffset.top+this.options.top+p/2-l}else{k.top=this.targetOffset.top-o/2+p/2+this.options.top}k.left=this.targetOffset.left-t-this.options.margin;break;case"right":k.top=this.targetOffset.top-o/2+p/2;k.left=this.targetOffset.left+this.targetWidth+this.options.margin;break;case"top":k.top=this.targetOffset.top-o-this.options.margin;k.left=this.targetOffset.left-t/2+r/2;break;case"bottom":k.top=this.targetOffset.top+this.targetHeight+this.options.margin;k.left=this.targetOffset.left-t/2+r/2}s={top:["left","right"],bottom:["left","right"],left:["top","bottom"],right:["top","bottom"]};if(d.include(this.options.orientation,s[this.options.align])){switch(this.options.align){case"right":k.left+=this.targetWidth-t;break;case"bottom":k.top+=this.targetHeight-o}}else{if(this.options.align==="center"){if(d.include(this.options.orientation,s.left)){j=this.targetWidth/2;u=t/2;m="left"}else{j=this.targetHeight/2;u=o/2;m="top"}if(j>u){k[m]+=j-u}else{k[m]-=u-j}}}return k};return i})();h=(function(i){var j;i.type="text/css";document.getElementsByTagName("head")[0].appendChild(i);j=document.styleSheets[document.styleSheets.length-1];return function(k,n){var m,l;l=g.map((function(){var p;p=[];for(m in n){p.push(m)}return p})(),function(q){return""+q+":"+n[q]}).join(";");try{if(j.insertRule){j.insertRule(""+k+" { "+l+" }",(j.cssRules||j.rules).length)}else{j.addRule(k,l)}}catch(o){}}})(document.createElement("style"))}).call(this)},{"./utils":4}],4:[function(b,c,a){(function(){c.exports={dataProp:function(f,d){if(f===null||typeof f==="undefined"){return d}return f},include:function(d,f){return $.inArray(d,f||[])!==-1}}}).call(this)},{}]},{},[1,2,3,4]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-frontend:split_jquery-selection-plugin', location = 'jquery-selection-plugin.js' */
(window.atlassianWebpackJsonpe19a4f58490c3d96a3072d1e47cd0e73=window.atlassianWebpackJsonpe19a4f58490c3d96a3072d1e47cd0e73||[]).push([[16],{399:function(t,e,n){"use strict";n.r(e);var s=n(13),o=n(105);!function(t,e){if(e.selection){const n=function(t){return t.replace(/\u000D/g,"")};t.fn.selection=function(t){const n=this[0];if(this.focus(),!n)return!1;if(null==t)return e.selection.createRange().text;const{scrollTop:s}=n,o=e.selection.createRange();o.text=t,o.select(),n.focus(),n.scrollTop=s},t.fn.selectionRange=function(t,s){const o=this[0];this.focus();const c=e.selection.createRange();if(null==t){const t=this.val(),e=t.length,s=c.duplicate();s.moveToElementText(o),s.setEndPoint("StartToEnd",c);let i=e-n(s.text).length;s.setEndPoint("StartToStart",c);const l=e-n(s.text).length;return i!==l&&"\n"===t.charAt(i+1)&&(i+=1),{end:i,start:l,text:t.substring(l,i),textBefore:t.substring(0,l),textAfter:t.substring(i)}}c.moveToElementText(o),c.collapse(!0),c.moveStart("character",t),c.moveEnd("character",s-t),c.select()}}else t.fn.selection=function(t){const e=this[0];if(!e)return!1;if(null==t)return!!e.setSelectionRange&&e.value.substring(e.selectionStart,e.selectionEnd);const{scrollTop:n}=e;if(e.setSelectionRange){const{selectionStart:n}=e;e.value=e.value.substring(0,n)+t+e.value.substring(e.selectionEnd),e.selectionStart=n,e.selectionEnd=n+t.length}e.focus(),e.scrollTop=n},t.fn.selectionRange=function(t,e){if(null==t){const t={start:this[0].selectionStart,end:this[0].selectionEnd},e=this.val();return t.text=e.substring(t.start,t.end),t.textBefore=e.substring(0,t.start),t.textAfter=e.substring(t.end),t}this[0].selectionStart=t,this[0].selectionEnd=e};t.fn.wrapSelection=function(t,e){this.selection(t+this.selection()+(e||""))}}(n.n(o).a,s.document)}},[[399,0,1,4,6]]]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:jira-resources', location = 'com/atlassian/confluence/extra/calendar3/lib/jira/globals.js' */
if(!window.JIRA){window.JIRA={}}if(!window.JIRA.begetObject){window.JIRA.begetObject=function(b){var a=function(){};a.prototype=b;return new a()}};
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:jira-resources', location = 'com/atlassian/confluence/extra/calendar3/lib/jira/Dropdown.js' */
JIRA.Dropdown=function(){var a=[];return{addInstance:function(){a.push(this)},hideInstances:function(){var b=this;jQuery(a).each(function(){if(b!==this){this.hideDropdown()}})},getHash:function(){if(!this.hash){this.hash={container:this.dropdown,hide:this.hideDropdown,show:this.displayDropdown}}return this.hash},displayDropdown:function(){if(JIRA.Dropdown.current===this){return}this.hideInstances();JIRA.Dropdown.current=this;this.dropdown.css({display:"block"});this.displayed=true;var b=this.dropdown;setTimeout(function(){var d=jQuery(window);var c=b.offset().top+b.attr("offsetHeight")-d.height()+10;if(d.scrollTop()<c){jQuery("html,body").animate({scrollTop:c},300,"linear")}},100)},hideDropdown:function(){if(this.displayed===false){return}JIRA.Dropdown.current=null;this.dropdown.css({display:"none"});this.displayed=false},init:function(b,d){var c=this;this.addInstance(this);this.dropdown=jQuery(d);this.dropdown.css({display:"none"});jQuery(document).keydown(function(f){if(f.keyCode===9){c.hideDropdown()}});if(b.target){jQuery.aop.before(b,function(){if(!c.displayed){c.displayDropdown()}})}else{c.dropdown.css("top",jQuery(b).outerHeight()+"px");b.click(function(f){if(!c.displayed){c.displayDropdown();f.stopPropagation()}else{c.hideDropdown()}f.preventDefault()})}jQuery(document.body).click(function(){if(c.displayed){c.hideDropdown()}})}}}();JIRA.Dropdown.Standard=function(a,c){var b=JIRA.begetObject(JIRA.Dropdown);b.init(a,c);return b};JIRA.Dropdown.AutoComplete=function(a,c){var b=JIRA.begetObject(JIRA.Dropdown);b.init=function(d,e){this.addInstance(this);this.dropdown=jQuery(e).click(function(f){f.stopPropagation()});this.dropdown.css({display:"none"});if(d.target){jQuery.aop.before(d,function(){if(!b.displayed){b.displayDropdown()}})}else{d.click(function(f){if(!b.displayed){b.displayDropdown();f.stopPropagation()}})}jQuery(document.body).click(function(){if(b.displayed){b.hideDropdown()}})};b.init(a,c);return b};
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:jira-resources', location = 'com/atlassian/confluence/extra/calendar3/lib/jira/JiraAutoComplete.js' */
JIRA.AutoComplete=function(){var c;var b=function(e,d){if(b.t){clearTimeout(b.t);b.t=undefined}b.t=setTimeout(e,d*1000)};var a={9:true,13:true,14:true,25:true,27:true,38:true,40:true,224:true};return{dispatcher:function(){},getSavedResponse:function(){},saveResponse:function(){},renderSuggestions:function(){},disable:function(){this.disabled=true},enable:function(){this.disabled=false},set:function(e){for(var d in e){if(e.hasOwnProperty(d)){this[d]=e[d]}}},completeField:function(d){if(d){this.field.val(d).focus()}},textToSuggestionCursorPosition:function(){return this.field.val()},_makeRequest:function(d){var e=this,f=AJS.$.extend({},d);if(this.pendingRequest){this.pendingRequest.abort()}f.complete=function(){e.pendingRequest=null};f.error=function(g){if(!g.aborted&&g.status!==0&&d.error){d.error.apply(this,arguments)}};f.timeout=Confluence.TeamCalendars.ajaxTimeout;return this.pendingRequest=AJS.$.ajax(f)},addSuggestionControls:function(h){var m=this;var l=function(q,i){var r=(m.autoSelectFirst===false)?-1:0;if(m.allowArrowCarousel){if(q>i){return r}else{if(q<r){return i}else{return q}}}else{if(q>i){return i}else{if(q<r){m.responseContainer.scrollTop(0);return r}else{return q}}}};var d=function(i){if(m.selectedIndex!==undefined&&m.selectedIndex>-1){m.suggestionNodes[m.selectedIndex][0].removeClass("active")}m.selectedIndex=l(i,m.suggestionNodes.length-1);if(m.selectedIndex>-1){m.suggestionNodes[m.selectedIndex][0].addClass("active")}};var p=function(){return m.suggestionNodes&&m.suggestionNodes[m.selectedIndex]&&m.suggestionNodes[m.selectedIndex][0].hasClass("active")};var n=function(i){if(m.responseContainer.is(":visible")){if(i.keyCode===13){if(p()&&!m.pendingRequest){m.completeField(m.suggestionNodes[m.selectedIndex][1])}i.preventDefault()}}};var g=function(s){if(m.responseContainer.is(":visible")){if(m.field[0]!==document.activeElement){m.field.focus()}if(s.keyCode===40){d(m.selectedIndex+1);if(m.selectedIndex>=0){var q=m.responseContainer.height();var i=m.suggestionNodes[m.selectedIndex][0].position().top+m.suggestionNodes[m.selectedIndex][0].outerHeight();if(i-q>0){m.responseContainer.scrollTop(m.responseContainer.scrollTop()+i-q+2)}}else{m.responseContainer.scrollTop(0)}s.preventDefault()}else{if(s.keyCode===38){d(m.selectedIndex-1);if(m.selectedIndex>=0){var r=m.suggestionNodes[m.selectedIndex][0].position().top;if(r<0){m.responseContainer.scrollTop(m.responseContainer.scrollTop()+r-2)}}s.preventDefault()}else{if(s.keyCode===9){if(p()){m.completeField(m.suggestionNodes[m.selectedIndex][1]);s.preventDefault()}else{m.dropdownController.hideDropdown()}}}}}};if(h.length){this.selectedIndex=0;this.suggestionNodes=h;for(var k=0;k<m.suggestionNodes.length;k++){var o={instance:this,index:k};this.suggestionNodes[k][0].bind("mouseover",o,j).bind("mouseout",o,f).bind("click",o,e)}if(!this.keyboardHandlerBinded){jQuery(this.field).keypress(n);if(jQuery.browser.mozilla){jQuery(this.field).keypress(g)}else{jQuery(this.field).keydown(g)}this.keyboardHandlerBinded=true}if(m.autoSelectFirst===false){d(-1)}else{d(0)}c=this}function j(i){if(m.dropdownController.displayed){d(i.data.index)}}function f(i){if(i.data.index===0){m.selectedIndex=-1}jQuery(this).removeClass("active")}function e(i){m.completeField(m.suggestionNodes[i.data.index][1])}},clearResponseContainer:function(){this.responseContainer.empty();this.suggestionNodes=undefined},delay:b,buildResponseContainer:function(){var d=this.field.parent().addClass("atlassian-autocomplete");this.responseContainer=jQuery(document.createElement("div"));this.responseContainer.addClass("suggestions").css({top:this.field.outerHeight()+"px"}).appendTo(d)},keyUpHandler:(function(){var d=jQuery.browser.msie&&jQuery.browser.version==8;function e(){if(!this.responseContainer){this.buildResponseContainer()}this.dispatcher(this.field.val())}return function(f){if(this.field.val().length>=this.minQueryLength){if(!(f.keyCode in a)||(this.responseContainer&&!this.responseContainer.is(":visible")&&(f.keyCode==38||f.keyCode==40))){if(d){b(jQuery.proxy(e,this),0.2)}else{e.call(this)}}}return f}})(),addMultiSelectAdvice:function(f){var e=this;var d=function(h){if(!d.isAlerting){d.isAlerting=true;var g=jQuery(document.createElement("div")).css({"float":"left",display:"none"}).addClass("warningBox").html("Oops! You have already entered the value <em>"+h+"</em>").appendTo(e.field.parent()).show("fast",function(){e.delay(function(){g.hide("fast",function(){g.remove();d.isAlerting=false})},4)})}};jQuery.aop.before({target:this,method:"dispatcher"},function(h){var g=this.field.val();h[0]=jQuery.trim(g.slice(g.lastIndexOf(f)+1));return h});jQuery.aop.before({target:this,method:"completeField"},function(h){var j=h[0],i=this.field.val().split(f);var g=jQuery(i).map(function(){return jQuery.trim(this)}).get();if(!this.allowDuplicates&&new RegExp("(?:^|[\\s"+f+"])"+j+"\\s*"+f).test(this.field.val())){d(j);g[g.length-1]=""}else{g[g.length-1]=j;g[g.length]=""}h[0]=g.join(f.replace(/([^\s]$)/,"$1 "));return h})},addDropdownAdvice:function(){var d=this;jQuery.aop.after({target:this,method:"buildResponseContainer"},function(e){this.dropdownController=JIRA.Dropdown.AutoComplete({target:this,method:"renderSuggestions"},this.responseContainer);if(AJS.$.browser.msie){jQuery.aop.before({target:this.dropdownController,method:"displayDropdown"},function(){d.field.parent().addClass("atlassian-autocomplete")});jQuery.aop.after({target:this.dropdownController,method:"hideDropdown"},function(){d.field.parent().removeClass("atlassian-autocomplete")})}jQuery.aop.after({target:this.dropdownController,method:"hideDropdown"},function(){this.dropdown.removeClass("dropdown-ready")});return e});jQuery.aop.after({target:this,method:"renderSuggestions"},function(e){if(e&&e.length>0){this.dropdownController.displayDropdown();if(this.maxHeight&&this.dropdownController.dropdown.attr("scrollHeight")>this.maxHeight){this.dropdownController.dropdown.css({height:this.maxHeight,overflowX:"visible",overflowY:"scroll"})}else{if(this.maxHeight){this.dropdownController.dropdown.css({height:"",overflowX:"",overflowY:""})}}this.dropdownController.dropdown.addClass("dropdown-ready")}else{this.dropdownController.hideDropdown()}return e});jQuery.aop.after({target:this,method:"completeField"},function(e){this.dropdownController.hideDropdown();return e});jQuery.aop.after({target:this,method:"keyUpHandler"},function(f){if((!(this.field.val().length>=this.minQueryLength)||f.keyCode===27)&&this.dropdownController&&this.dropdownController.displayed){this.dropdownController.hideDropdown();if(f.keyCode===27){f.stopPropagation()}}return f})},init:function(d){var e=this;this.set(d);this.field=this.field||jQuery("#"+this.fieldID);this.field.attr("autocomplete","off").keyup(function(f){if(!e.disabled){e.keyUpHandler(f)}}).keydown(function(g){var f=27;if(g.keyCode===f&&e.responseContainer&&e.responseContainer.is(":visible")){g.preventDefault()}}).click(function(f){if(c===e){f.stopPropagation()}}).blur(function(){if(e.pendingRequest){e.pendingRequest.abort()}});this.addDropdownAdvice();if(d.delimChar){this.addMultiSelectAdvice(d.delimChar)}}}}();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:jira-resources', location = 'com/atlassian/confluence/extra/calendar3/lib/jira/JQLAutoComplete.js' */
(function(){var F=[{value:"=",displayName:"="},{value:"!=",displayName:"!="},{value:"~",displayName:"~"},{value:"<=",displayName:"&lt;="},{value:">=",displayName:"&gt;="},{value:">",displayName:"&gt;"},{value:"<",displayName:"&lt;"},{value:"!~",displayName:"!~"},{value:"is not",displayName:"is not"},{value:"is",displayName:"is"},{value:"not in",displayName:"not in"},{value:"in",displayName:"in"},{value:"was",displayName:"was"},{value:"was not",displayName:"was not"},{value:"was in",displayName:"was in"},{value:"was not in",displayName:"was not in"},{value:"changed",displayName:"changed"}];var o=[{value:"AND",displayName:"AND"},{value:"OR",displayName:"OR"}];var x=[{value:"AND",displayName:"AND"},{value:"OR",displayName:"OR"},{value:"ORDER BY",displayName:"ORDER BY"}];var s=[{value:"ASC",displayName:"ASC"},{value:"DESC",displayName:"DESC"}];var t=[{value:"EMPTY",displayName:"EMPTY",types:["java.lang.Object"]}];var E=[{value:"NOT",displayName:"NOT"}];var i=[{value:"AFTER",displayName:"AFTER",type:"java.util.Date",supportsList:"false"},{value:"BEFORE",displayName:"BEFORE",type:"java.util.Date",supportsList:"false"},{value:"BY",displayName:"BY",type:"com.opensymphony.user.User",supportsList:"false",auto:"true"},{value:"DURING",displayName:"DURING",type:"java.util.Date",supportsList:"true"},{value:"ON",displayName:"ON",type:"java.util.Date",supportsList:"false"}];var n=i.concat([{value:"FROM",displayName:"FROM",type:"java.lang.String",supportsList:"true",auto:"true"},{value:"TO",displayName:"TO",type:"java.lang.String",supportsList:"true",auto:"true"}]);var y=i.concat(x);var k=i.concat(o);var v=n.concat(x);var p=n.concat(o);var h=/^AND\s/i;var A=/^OR\s/i;var e=/^NOT\s/i;var w=/^\s+not/i;var d=/^\s+in/i;var m=/^\s+(not\s+in|not|in)/i;var u=/^\s*,/;var r=/^\s+asc/i;var H=/^\s+desc/i;var l=/^order\s+by/i;var D=/^\s/;var g=/^u[a-fA-F0-9]{4}/;var z=/^\s-\scf\[\d\d\d\d\d\]/;var c=/[\r\n]/;var a=/\d/;var G=/[^=!~<>(),\s&|]/;var f=/[{}*\/%+$#@?.;\][]/;var b=/[\s(]/;var C=/[^trn"'\\\s]/;var q=/^NO?$/i;var B=/^IN?$/i;var j=/^(after|before|by|during|from|on|to)/i;JIRA.JQLAutoComplete=function(T){var N=JIRA.begetObject(JIRA.AutoComplete);var I=T.parser;var U;var J=jQuery.grep(T.jqlFieldNames,function(V){return V.searchable});var P=jQuery.grep(T.jqlFieldNames,function(V){return V.orderable});var R=T.jqlFunctionNames;var M=jQuery("#"+T.errorID);var Q=0;var K=jQuery("#jqlcolumnnum");var S=jQuery("#jqlrownum");var L=T.jiraApplicationId;var O=T.baseUrl;N.textToSuggestionCursorPosition=function(){return this.field.selectionRange().textBefore};N.pushSuggestionsOnHtmlStack=function(ab,Z,ac,Y,V){var X=Math.min(15,ab.length);for(var aa=0;aa<X;aa++){var W;var ae;if(ab[aa].value){var ad=ab[aa];if(U&&V){W=((U.getNeedsOpenParen())?"(":"")+ad.value}else{W=ad.value}ae=ad.displayName}else{ae=ab[aa];W=displayName}Z.push(W);ac.push('<li id="',Y,aa,'">',ae,"</li>")}};N.renderSuggestions=function(W,Y,V){var Z=[];if(W instanceof Array){if(W.length<1&&(Y&&Y.length<1)&&(V&&V.length<1)){return Z}var X=["<ul>"];if(V&&V.length>0){N.pushSuggestionsOnHtmlStack(V,Z,X,"jql_operator_suggest_",false)}N.pushSuggestionsOnHtmlStack(W,Z,X,"jql_value_suggest_",true);if(Y&&Y.length>0){N.pushSuggestionsOnHtmlStack(Y,Z,X,"jql_function_suggest_",false)}X.push("</ul>");N.responseContainer.html(X.join("")).find("li").each(function(aa){Z[aa]=[jQuery(this),Z[aa]]});N.addSuggestionControls(Z)}return Z};N.completeField=function(X){var Y=N.getReplacementStartIndex(U,X);var V=N.getReplacementEndIndex(U,Y);N.replaceValue(Y,V,X);var W=I.parse(this.field.val());N.updateParseIndicator(W)};N.prepareOperandSuggestions=function(aa,ad,ac,Y,Z){if(aa){var W=Q;var V=(Z==null)?((U.getLastOperand()===null)?"":N.stripEscapeCharacters(U.getLastOperand())):Z;var ab=ad+":"+V;var X={fieldName:N.stripEscapeCharacters(ad)};if(U.getLastOperand()!==null||Z!==null){X.fieldValue=V}if(!N.getSavedResponse(ab)){N.dropdownController.dropdown.removeClass("dropdown-ready");this.delay(function(){N._makeRequest({url:O+"/rest/calendar-services/1.0/calendar/jira/"+encodeURIComponent(L)+"/jql/autocomplete.json",dataType:"json",data:X,success:function(ae){var af;if(ae!==null&&ae.results!==null){af=ae.results}else{af=[]}N.saveResponse(ab,af);N.renderSuggestionsForOperands(V,af,ac,Y,W)},error:function(){N.renderSuggestionsForOperands(V,[],ac,Y,W)}})},N.queryDelay)}else{N.renderSuggestionsForOperands(V,N.getSavedResponse(ab),ac,Y,W)}}else{N.renderSuggestionsForOperands(N.stripEscapeCharacters(U.getLastOperand()),[],ac,Y,Q)}};N.preparePredicateSuggestions=function(ab,V){var Z=Q;if(typeof V=="undefined"){V=null}var Y=N.slimListForPredicates(V,R,ab);N.boldMatchingString(V,Y);var W=(V==null)?((U.getLastOperand()===null)?"":N.stripEscapeCharacters(U.getLastOperand())):V;var aa=ab+":"+W;var X={predicateName:N.stripEscapeCharacters(ab)};if(U.getLastOperand()!==null||V!==null){X.predicateValue=W}if(U.getLastFieldName()!==null){X.fieldName=U.getLastFieldName();aa=U.getLastFieldName()+":"+aa}if(N.predicateSupportsAutoComplete(ab)){if(!N.getSavedResponse(aa)){N.dropdownController.dropdown.removeClass("dropdown-ready");this.delay(function(){N._makeRequest({url:O+"/rest/calendar-services/1.0/calendar/jira/"+encodeURIComponent(L)+"/jql/autocomplete.json",dataType:"json",data:X,success:function(ac){var ad;if(ac!==null&&ac.results!==null){ad=ac.results}else{ad=[]}N.saveResponse(aa,ad);N.renderSuggestions(ad,Y)},error:function(){N.renderSuggestionsForOperands(W,[])}})},N.queryDelay)}else{N.renderSuggestions(N.getSavedResponse(aa),Y)}}else{N.renderSuggestions([],Y)}};N.incompleteOperator=function(){var V=U.getTokens();if(V==null||V.length<2){return""}else{var V=N.textToSuggestionCursorPosition().split(" ");if(V.length>2){return V[V.length-1]}}return""};N.incompletePredicateValue=function(){var V=U.getTokens();if(V==null||V.length<3){return""}else{var V=N.textToSuggestionCursorPosition().split(/[\s(,]+/);if(V.length>3){return V[V.length-1]}}return""};N.dispatcher=function(X){var af=this;var V=jQuery(af.field).selectionRange();var ad=X.substring(0,V.start);U=I.parse(ad).getResult();Q++;if(U.getNeedsField()){af.renderSuggestionsFromMap(af.stripEscapeCharacters(U.getLastFieldName()),J,E,true)}else{if(U.getNeedsOperatorOrOperand()){var W=U.getLastOperator();var Z=W.length;var Y=(W.length>0)?ad.substr(U.getLastOperatorStartIndex()):null;var ai=(af.isEmptyOnlyOperator(U.getLastOperator()))?t:R;var ac=af.getSuggestionsForOperators(Y,F);if(Z>0){var ab=W.length-(W.replace(/\s+/g,"")).length;U.setLastOperandStartIndex(U.getLastOperatorStartIndex()+Z+ab+1)}if(ac&&ac.length>0){var ag=U.getTokens();var ah=af.incompleteOperator();af.prepareOperandSuggestions(true,U.getLastFieldName(),ai,ac,ah)}}else{if(U.getNeedsOperator()){af.renderSuggestionsForOperators(U.getLastOperator(),F)}else{if(U.getNeedsPredicateOperand()){var ak=U.getLastWasPredicate();af.preparePredicateSuggestions(ak,af.stripEscapeCharacters(U.getLastOperand()))}else{if(U.getNeedsLogicalOperator()){if(U.getNeedsWasPredicate()){if(U.getNeedsOrderBy()){var aj=(U.getLastOrderBy()===null)?U.getLastWasPredicate():U.getLastOrderBy();if(U.getLastOperator()=="was"){af.renderSuggestionsFromMap(aj,y,false)}else{af.renderSuggestionsFromMap(aj,v,false)}}else{if(U.getLastOperator()=="was"){af.renderSuggestionsFromMap(U.getLastWasPredicate(),k,false)}else{af.renderSuggestionsFromMap(U.getLastWasPredicate(),p,false)}}}else{if(U.getNeedsOrderBy()){var aj=(U.getLastOrderBy()===null)?U.getLastLogicalOperator():U.getLastOrderBy();af.renderSuggestionsFromMap(aj,x,false)}else{af.renderSuggestionsFromMap(U.getLastLogicalOperator(),o,false)}}}else{if(U.getNeedsOrderByField()){af.renderSuggestionsFromMap(af.stripEscapeCharacters(U.getLastOrderByFieldName()),P,true)}else{if(U.getNeedsOrderByDirection()){af.renderSuggestionsFromMap(U.getLastOrderByDirection(),s,false)}else{if(U.getNeedsOperand()){var al=U.getLastFieldName();var ae=false;if(!af.isEmptyOnlyOperator(U.getLastOperator())){for(var aa=0;aa<J.length;aa++){if(af.equalsIgnoreCase(U.getUnquotedString(J[aa].value),al)||(J[aa].cfid&&af.equalsIgnoreCase(J[aa].cfid,al))){ae=J[aa].auto;break}}}var ai=(af.isEmptyOnlyOperator(U.getLastOperator()))?t:R;af.prepareOperandSuggestions(ae,al,ai,{})}else{af.dropdownController.hideDropdown()}}}}}}}}af.parse(X)};N.stripEscapeCharacters=function(Y){if(Y==null){return Y}var V="";var X=Y.split("");for(var W=0;W<X.length;W++){if(X[W]=="\\"){if(!g.test(Y.substring(W,Y.length))){W++;if(W>=Y.length){break}}}V+=X[W]}return V};N.parse=function(W){var V=I.parse(W);N.updateParseIndicator(V);N.updateColumnLineCount();return V.getResult()};N.renderSuggestionsFromMap=function(W,Y,X,Z){if(!X){X={}}var V=N.slimListForMapResults(W,Y,Z);var aa=N.slimListForMapResults(W,X,Z);N.boldMatchingString(W,aa);N.boldMatchingString(W,V);N.renderSuggestions(V,aa);if(V.length===0&&aa.length===0){N.dropdownController.hideDropdown()}};N.getSuggestionsForOperators=function(W,Z){var V=N.slimListForMapResults(W,Z,false);var aa=U.getLastFieldName();var Y;for(var X=0;X<J.length;X++){if(N.equalsIgnoreCase(U.getUnquotedString(J[X].value),aa)||(J[X].cfid&&N.equalsIgnoreCase(J[X].cfid,aa))){Y=J[X].operators;break}}if(Y){V=jQuery.grep(V,function(ab){return jQuery.inArray(ab.value,Y)>-1})}N.boldMatchingString(W,V);return V};N.renderSuggestionsForOperators=function(W,X){var V=N.getSuggestionsForOperators(W,X);N.renderSuggestions(V);if(V.length===0){N.dropdownController.hideDropdown()}};N.renderSuggestionsForOperands=function(W,X,Z,V,aa){if(aa===Q){var Y=N.slimListForFunctionResults(W,Z,U.getLastOperator());N.boldMatchingString(W,Y);N.renderSuggestions(X,Y,V);if(X.length===0&&Y.length===0&&V.length==0){N.dropdownController.hideDropdown()}}};N.boldMatchingString=function(W,Z){if(W==null||Z.length===0){return}var aa=W.length;for(var X=0,ab=aa;X<ab;X++){switch(W.charAt(X)){case"<":case">":aa+=3;break;case"&":aa+=4;break;case'"':aa+=5;break}}for(var Y=0;Y<Z.length;Y++){if(Z[Y].displayName){var V=Z[Y].displayName;Z[Y]={value:Z[Y].value,displayName:"<b>"+V.substring(0,aa)+"</b>"+V.substring(aa)}}else{Z[Y]={value:Z[Y],displayName:"<b>"+Z[Y].substring(0,aa)+"</b>"+Z[Y].substring(aa)}}}};N.htmlEscape=function(W){if(W==null){return null}var V="";var Y=W.split("");for(var X=0;X<Y.length;X++){if(Y[X]==="<"){V+="&lt;"}else{if(Y[X]===">"){V+="&gt;"}else{if(Y[X]==="&"){V+="&amp;"}else{if(Y[X]==='"'){V+="&quot;"}else{V+=Y[X]}}}}}return V},N.getReplacementStartIndex=function(V,W){var X=jQuery(this.field);var Y;if(V.getNeedsField()){Y=V.getLastFieldNameStartIndex()}else{if(V.getNeedsOperatorOrOperand()){if(V.getNeedsOperator()&&N.isWasOperator(W)){Y=V.getLastOperatorStartIndex()}else{Y=V.getLastOperandStartIndex()}}else{if(V.getNeedsOperand()){Y=V.getLastOperandStartIndex()}else{if(V.getNeedsOperator()){Y=V.getLastOperatorStartIndex()}else{if(V.getNeedsOrderByField()){Y=V.getLastOrderByFieldNameStartIndex()}else{if(V.getNeedsOrderByDirection()){Y=V.getLastOrderByDirectionStartIndex()}else{if(V.getNeedsPredicateOperand()){Y=V.getLastOperandStartIndex()}else{if(V.getNeedsLogicalOperator()){if(V.getLastLogicalOperatorStartIndex()!==null&&V.getLastLogicalOperatorStartIndex()!==0){Y=V.getLastLogicalOperatorStartIndex()}else{if(V.getLastOrderBy()!==null&&V.getLastOrderByStartIndex()!==0){Y=V.getLastOrderByStartIndex()}else{if(V.getLastWasPredicate()!=null&&V.getLastWasPredicateStartIndex()!==0){Y=V.getLastWasPredicateStartIndex()}else{if(V.getMustBeOperatorOrPredicate()===true){Y=X.selectionRange().start}else{Y=X.selectionRange().start-1}}}}}else{if(V.getNeedsWasPredicate()){Y=V.getLastWasPredicateStartIndex()}else{Y=X.selectionRange().start-1}}}}}}}}}return Y!=null?Y:X.selectionRange().start};N.getReplacementEndIndex=function(ah,V){var ag=jQuery(this.field);var W=ag.selectionRange();var Z=null;if(W.start===W.end&&W.end!==this.field.val().length){var aa=ah.getTokens().length-1;var Y=I.parse(this.field.val());if(!Y.getParseError()){var X=Y.getResult().getTokens()[aa];if(X!==null&&X!=="("&&X!==")"){var af=this.field.val();var ac=af.substring(V,af.length);var ae=ac.split("");var ad=0;for(var ab=0;ab<ae.length;ab++){if(D.test(ae[ab])){ad++}else{break}}Z=V+X.length+ad}}}if(Z===null){Z=W.end}if(Z<V){N.replaceValue(V,Z," ");Z=V}return Z};N.replaceValue=function(Z,V,Y){var X=jQuery(this.field);X.selectionRange(Z,V);X.selection(Y);var W=X.selectionRange().end;X.selectionRange(W,W)};N.slimListForMapResults=function(V,Y,Z){var X=N.htmlEscape(V);var W=jQuery.grep(Y,function(aa){return N.startsWithIgnoreCaseNullsMeanAll(X,aa.displayName)});if(!Z){if(W.length===1&&!N.startsWithNotEqualsIgnoreCaseNullMeansAll(X,W[0].displayName)){return{}}}return W};N.slimListForFunctionResults=function(V,aa,X){var ab=U.getLastFieldName();var Z;for(var Y=0;Y<J.length;Y++){if(N.equalsIgnoreCase(U.getUnquotedString(J[Y].value),ab)||(J[Y].cfid&&N.equalsIgnoreCase(J[Y].cfid,ab))){Z=J[Y].types;break}}var W=jQuery.grep(aa,function(ac){if((ac.isList&&!N.isListSupportingOperator(X))||(!ac.isList&&N.isListSupportingOperator(X))){return false}if(Z){var ae=jQuery.inArray("java.lang.Object",ac.types)>-1||jQuery.inArray("java.lang.Object",Z)>-1;for(var ad=0;ad<Z.length&&!ae;ad++){ae=jQuery.inArray(Z[ad],ac.types)!==-1}if(!ae){return false}}else{return false}return N.startsWithIgnoreCaseNullsMeanAll(V,ac.value)||N.startsWithIgnoreCaseNullsMeanAll(V,ac.displayName)});if(W.length===1&&!N.startsWithNotEqualsIgnoreCaseNullMeansAll(V,W[0].displayName)){return{}}return W};N.slimListForPredicates=function(Y,ab,W){var V;var X;for(var aa=0;aa<n.length;aa++){if(N.equalsIgnoreCase(U.getUnquotedString(n[aa].value),W)){V=n[aa].type;X=n[aa].supportsList;break}}var Z=jQuery.grep(ab,function(ac){if(typeof ac.isList!="undefined"){if((ac.isList&&!!X)||(!ac.isList&&X)){return false}}var ad=jQuery.inArray(V,ac.types)!==-1;return ad?N.startsWithIgnoreCaseNullsMeanAll(Y,ac.value)||N.startsWithIgnoreCaseNullsMeanAll(Y,ac.displayName):false});if(Z.length===1&&!N.startsWithNotEqualsIgnoreCaseNullMeansAll(Y,Z[0].displayName)){return{}}return Z};N.predicateSupportsAutoComplete=function(V){var X;for(var W=0;W<n.length;W++){if(N.equalsIgnoreCase(U.getUnquotedString(n[W].value),V)){X=n[W].auto;break}}return X};N.isListSupportingOperator=function(V){return V==="in"||V==="not in"||V=="was not in"||V=="was in"};N.isEmptyOnlyOperator=function(V){return V==="is"||V==="is not"};N.isWasOperator=function(V){return V==="was"||V==="was in"||V=="was not in"||V=="was not"};N.isChangedOperator=function(V){return V==="changed"};N.startsWithIgnoreCaseNullsMeanAll=function(V,W){if(W===null||V===null){return true}if(W.length<V.length){return false}else{return V.toLowerCase()==W.substr(0,V.length).toLowerCase()}};N.startsWithNotEqualsIgnoreCaseNullMeansAll=function(V,Y){if(Y===null||V===null){return true}if(Y.length<V.length){return false}else{var W=V.toLowerCase()==Y.substr(0,V.length).toLowerCase();if(W){var X=null;if(z.test(Y.substr(V.length,Y.length))){X=Y.substr(0,V.length)}else{X=Y}return V.toLowerCase()!=X.toLowerCase()}return false}};N.equalsIgnoreCase=function(W,V){if(W===null&&V===null){return true}else{if(W===null||W===null){return false}else{return W.toLowerCase()===V.toLowerCase()}}};N.getSavedResponse=function(V){if(!this.requested){this.requested={}}return this.requested[V]};N.saveResponse=function(W,V){if(typeof W==="string"&&typeof V==="object"){if(!this.requested){this.requested={}}this.requested[W]=V}};N.startsWithIgnoreCase=function(V,W){if(W===null||V===null||W.length<V.length){return false}else{return V.toLowerCase()==W.substr(0,V.length).toLowerCase()}};N.updateParseIndicator=function(V){if(V.getParseError()){M.attr("title",V.getResult().getParseErrorMsg()).removeClass("jqlgood").addClass("jqlerror")}else{M.attr("title","").removeClass("jqlerror").addClass("jqlgood")}};N.updateColumnLineCount=function(){var aa=jQuery(N.field);var Z=0;if(N.field[0]===document.activeElement){var ab=aa.selectionRange();Z=ab.start}else{Z=N.field[0].value.length}var V=1;var X=1;var Y=N.field.val();for(var W=0;W<Z;W++){if(c.test(Y.charAt(W))){V++;X=1}else{X++}}K.text(X);S.text(V)};N.init(T);return N};JIRA.JQLAutoComplete.MyParser=function(J){var I=J;return{parse:function(K){var L=JIRA.JQLAutoComplete.Token();L.init(K);this.jql(L);return L},orderByClause:function(L){var M=L.remainingString();var N=M.match(l);if(N){var K=M.substring(0,N[0].length);L.consumeCharacters(K.length);L.getResult().setLastOrderBy(K,L);if(!L.isComplete()){M=L.remainingString();if(D.test(M)){this.chewWhitespace(L);this.orderByFields(L)}else{L.getResult().resetLogicalOperators();L.setParseError()}}else{L.getResult().resetLogicalOperators();L.setParseError()}}else{L.consumeCharacters(M.length);L.getResult().setLastOrderBy(M,L);L.setParseError()}},orderByFields:function(K){this.orderByField(K);this.chewWhitespace(K);if(K.isComplete()){if(!K.getResult().getNeedsOrderByField()){K.getResult().setLastOrderByDirection("",K)}}else{var L=K.remainingString();if(this.startsWithIgnoreCase(",",L)){K.consumeCharacter();this.orderByFields(K);this.chewWhitespace(K)}else{L=K.remainingString();if(L!==null){K.consumeCharacters(L.length)}K.getResult().setNeedsOrderByDirection();K.getResult().setLastOrderByDirection(L,K);K.setParseError()}}},orderByField:function(K){this.chewWhitespace(K);var M=this.fieldName(K);if(M.length!==0){K.getResult().setLastOrderByFieldName(M,K);var L=K.remainingString();if(!K.isComplete()&&!u.test(L)){if(r.test(L)){this.chewWhitespace(K);K.consumeCharacters(3);K.getResult().setLastOrderByDirection("asc",K);K.getResult().setNeedsOrderByComma()}else{if(H.test(L)){this.chewWhitespace(K);K.consumeCharacters(4);K.getResult().setLastOrderByDirection("desc",K);K.getResult().setNeedsOrderByComma()}else{K.getResult().setNeedsOrderByDirection()}}}else{K.getResult().setNeedsOrderByField();this.chewWhitespace(K)}}else{K.getResult().setLastOrderByFieldName("",K);K.getResult().setNeedsOrderByField();K.setParseError()}},jql:function(K){this.orClause(K);var L=K.remainingString();if(this.startsWithIgnoreCase("ord",L)){this.orderByClause(K)}},orClause:function(K){while(!K.isComplete()&&!this.startsWithIgnoreCase(")",K.remainingString())){this.chewWhitespace(K);var L=K.remainingString();if(this.startsWithIgnoreCase("ord",L)){break}if(K.getResult().getMustBeOperatorOrPredicate()){K.getResult().resetLastPredicates()}else{K.getResult().resetLogicalOperators();this.andClause(K)}if(!K.isComplete()&&K.getResult().getLastLogicalOperator()===null){if(K.getResult().getNeedsWasPredicate()){this.predicateClause(K)}if(K.isComplete()){return}L=K.remainingString();if(this.startsWithIgnoreCase("ord",L)){break}else{if(L!==null&&(A.test(L)||this.startsWithIgnoreCase("|",L)||this.startsWithIgnoreCase("||",L))){if(this.startsWithIgnoreCase("||",L)){K.getResult().setLastLogicalOperator("||",K.getTokenStringIdx());K.consumeCharacters(2)}else{if(A.test(L)){K.getResult().setLastLogicalOperator("OR",K.getTokenStringIdx());K.consumeCharacters(3)}else{K.getResult().setLastLogicalOperator("|",K.getTokenStringIdx());K.consumeCharacters(1)}}K.getResult().resetTerminalClause();if(K.isComplete()){K.setParseError()}K.getResult().setNeedsField()}else{if(!this.startsWithIgnoreCase(")",L)||!K.getInParens()){this.chewWhitespace(K);var N=(L===null)?K.getMaxTokenStringIdx():K.getMaxTokenStringIdx()-L.length;var M;if(L!=null){M=L.split(" ");K.getResult().setLastLogicalOperator(M[0],N);K.getResult().setLastWasPredicate(M[0],K);K.getResult().setNeedsLogicalOperator(K)}if(K.getResult().getLastWasOperator()==null){K.setParseError()}else{if(M!=null){if(j.test(M[0])){K.getResult().setLastLogicalOperator(null);K.getResult().resetNeedsPredicateOperand()}else{if(h.test(L)){K.consumeCharacters(4);K.getResult().resetTerminalClause();K.getResult().setNeedsField()}if(K.isComplete()||M.length==1){K.setParseError()}}}}}}}}}},andClause:function(K){this.chewWhitespace(K);this.notClause(K);if(!K.isComplete()&&K.getResult().getLastLogicalOperator()===null){this.chewWhitespace(K);var L=K.remainingString();if(L!==null&&(h.test(L)||this.startsWithIgnoreCase("&",L)||this.startsWithIgnoreCase("&&",L))){if(this.startsWithIgnoreCase("&&",L)){K.getResult().setLastLogicalOperator("&&",K.getTokenStringIdx());K.consumeCharacters(2)}else{if(this.startsWithIgnoreCase("&",L)){K.getResult().setLastLogicalOperator("&",K.getTokenStringIdx());K.consumeCharacters(1)}else{K.getResult().setLastLogicalOperator("AND",K.getTokenStringIdx());K.consumeCharacters(4)}}K.getResult().resetTerminalClause();if(K.isComplete()){K.setParseError()}K.getResult().setNeedsField()}else{K.getResult().setNeedsLogicalOperator(K);if(K.isComplete()){K.getResult().setLastLogicalOperator(null,K.getMaxTokenStringIdx())}}}},notClause:function(K){this.chewWhitespace(K);if(!K.isComplete()){this.chewWhitespace(K);var L=K.remainingString();if(L!==null&&(e.test(L)||this.startsWithIgnoreCase("!",L))){K.getResult().needsField=false;if(this.startsWithIgnoreCase("!",L)){K.getResult().setLastLogicalOperator("!",K.getTokenStringIdx());K.consumeCharacters(1)}else{K.getResult().setLastLogicalOperator("NOT",K.getTokenStringIdx());K.consumeCharacters(4)}K.getResult().resetTerminalClause();if(K.isComplete()){K.setParseError()}K.getResult().setNeedsField()}else{this.terminalClause(K)}}else{this.terminalClause(K);K.setParseError()}},predicateClause:function(K){this.chewWhitespace(K);if(!K.isComplete()){var L=K.remainingString();var M=L.split(/[\s(]+/);if(L!==null){K.getResult().setMustBeOperatorOrPredicate(false);if(this.startsWithLogicalOperator(L)){if(M.length==1){K.setParseError();K.getResult().resetLogicalOperators();return}return}K.getResult().resetNeedsPredicateOperand();K.consumeCharacters(M[0].length);K.getResult().setLastWasPredicate(M[0],K);if(M.length==1){K.setParseError();return}if(this.wasPredicateComplete(M[0])){K.getResult().setNeedsPredicateOperand();this.predicateOperand(K)}else{K.setParseError()}}}else{K.setParseError()}},predicateOperand:function(L){this.chewWhitespace(L);var K=this.collectPredicateOperands(L);if(K==null||K==""){L.getResult().setLastOperandStartIndex(L.getTokenStringIdx());L.setParseError()}if(L.remainingString()!=null){L.getResult().resetNeedsPredicateOperand();L.getResult().resetLastPredicates();L.getResult().setMustBeOperatorOrPredicate(true);L.getResult().setNeedsLogicalOperator(L);this.chewWhitespace(L)}},collectPredicateOperands:function(L){if(L.getResult().getLastWasPredicate()==="DURING"){L.getResult().setNeedsOpenParen(true)}var K=this.listOperand(L,true);if(K.length===0){K=this.functionOperand(L);if(K.length===0){K=this.singleValueOperand(L)}else{L.getResult().setNeedsOpenParen(false)}}else{L.getResult().setNeedsOpenParen(false)}return L.getResult().getUnquotedString(K)},terminalClause:function(M){M.getResult().resetTerminalClause();this.chewWhitespace(M);var N=M.remainingString();if(this.startsWithIgnoreCase("(",N)){M.getResult().addToken("(");M.setInParens();M.consumeCharacter();this.orClause(M);this.chewWhitespace(M);N=M.remainingString();if(this.startsWithIgnoreCase(")",N)){M.getResult().addToken(")");M.consumeCharacter();M.setOutOfParens();if(M.isComplete()){M.getResult().resetLogicalOperators();M.getResult().resetLastPredicates()}}else{M.setParseError()}}else{this.field(M);if(!M.isComplete()){this.oper(M);if(!M.isComplete()){if(M.getResult().getLastWasOperator()==="changed"){M.getResult().setNeedsLogicalOperator(M);return}this.operand(M);if(M.getResult().getOperandComplete()){var K=M.getResult().getLastWasOperator();M.getResult().setNeedsNothing();if(K){M.getResult().setLastWasOperator(K)}}else{if(M.isComplete()&&!M.getResult().getNeedsListComma()){M.getResult().setNeedsOperand()}}}else{if(M.getResult().getLastOperator()=="was"||M.getResult().getLastOperator()=="was not"){M.getResult().setNeedsOperandOrOperator()}else{if(M.getResult().getLastWasOperator()==="changed"){var L=M.currentCharacter();if(L!==null&&b.test(L)){M.getResult().setNeedsLogicalOperator(M)}else{M.getResult().resetLogicalOperators()}return}else{M.getResult().setNeedsOperator()}}M.setParseError()}}else{M.getResult().setNeedsField();M.setParseError()}}},field:function(K){var L=this.fieldName(K);if(L.length!==0){K.getResult().setLastFieldName(L,K)}else{if(K.getResult().getLastFieldName()===null){remainingString=K.remainingString();K.getResult().setNeedsField();K.getResult().setLastFieldName(remainingString,K);K.setParseError()}}},fieldName:function(M){this.chewWhitespace(M);var O=M.remainingString();if(this.startsWithIgnoreCase("cf",O)){var L=M.getTokenStringIdx();var K=M.remainingString();M.consumeCharacters(2);this.chewWhitespace(M);O=M.remainingString();if(this.startsWithIgnoreCase("[",O)){M.consumeCharacter();O=M.remainingString();var N=this.numberValue(M);if(N.length!==0){this.chewWhitespace(M);O=M.remainingString();if(this.startsWithIgnoreCase("]",O)){M.consumeCharacter();return K.substring(0,M.getTokenStringIdx()-L)}}}M.setParseError();return K}else{return this.fieldOrFunctionName(M)}},oper:function(M){this.chewWhitespace(M);var N=M.remainingString();var L=this.getLongestOperatorMatch(N,F);if(L!==null){M.getResult().setLastOperator(L,M.getTokenStringIdx());if(this.isWasOperator(L)||this.isChangedOperator(L)){M.getResult().setLastWasOperator(L)}M.consumeCharacters(L.length);if(L=="in"||L=="is"||L=="is not"||L=="not in"||L=="was"||L=="was not"||L=="was in"||L=="was not in"){var K=M.currentCharacter();if(K!==null&&!b.test(K)){M.setParseError()}}if(L=="was"){M.getResult().setNeedsOperandOrOperator();this.chewWhitespace(M);var N=M.remainingString();if(N!=null&&(q.test(N)||B.test(N))){M.setParseError()}}else{if(L=="was not"){M.getResult().setNeedsOperandOrOperator();this.chewWhitespace(M);var N=M.remainingString();if(N!=null&&(B.test(N))){M.setParseError()}}else{if(L=="changed"){M.getResult().setNeedsLogicalOperator(M)}else{M.getResult().setNeedsOperand()}}}}else{if(M.getResult().getLastOperator()===null){var O=(N===null)?M.getMaxTokenStringIdx():M.getMaxTokenStringIdx()-N.length;M.getResult().setLastOperator(N,O);M.getResult().setNeedsOperator();M.setParseError()}}},operand:function(L){this.chewWhitespace(L);if(L.getResult().getLastOperator()==="in"||L.getResult().getLastOperator()==="not in"||L.getResult().getLastOperator()==="was not in"||L.getResult().getLastOperator()==="was in"){L.getResult().setNeedsOpenParen(true)}var K=this.listOperand(L,true);if(K.length===0){K=this.functionOperand(L);if(K.length===0){K=this.singleValueOperand(L)}else{L.getResult().setNeedsOpenParen(false)}}else{L.getResult().setNeedsOpenParen(false)}if(K===null||K.length===0){var M=L.remainingString();L.getResult().setLastOperand(M,L);L.getResult().setNeedsOperand();L.setParseError()}if(K.length!==0){return K}return""},singleValueOperand:function(L){var K=this.stringValue(L);if(K.length!==0){L.getResult().setLastOperand(K,L);if(K.toLowerCase()!="empty"&&K.toLowerCase()!="null"&&this.isReservedWord(K.toLowerCase())){L.setParseError()}return K}return""},functionOperand:function(N){var M=N.getTokenStringIdx();var O=this.fieldOrFunctionName(N);this.chewWhitespace(N);var L=this.listOperand(N,false);if(O.length!==0&&L.length!==0){var K=O+L;N.getResult().setLastOperand(K,N);return K}else{N.backTrackToIdx(M);return""}},listOperand:function(L,M){if(L.currentCharacter()=="("){L.consumeCharacter();var K=this.collectListValues(L,M);var N="("+K;this.chewWhitespace(L);if(L.currentCharacter()==")"){L.consumeCharacter();N+=")";if(N=="()"&&M){L.getResult().setLastOperand(N,L)}if(M){L.getResult().setOperandComplete();L.getResult().resetNeedsPredicateOperand()}}else{L.setParseError()}return N}else{return""}},collectListValues:function(M,N){if(N){M.getResult().setNeedsOperand()}this.chewWhitespace(M);var K=(N)?this.operand(M):this.stringValue(M);if(K.length!==0){if(this.chewWhitespace(M)&&N){M.getResult().setNeedsListComma()}if(M.currentCharacter()==","){M.consumeCharacter();var L=this.collectListValues(M,N);if(L.length===0){M.setParseError()}return K+", "+L}else{return K}}else{return""}},startsWithIgnoreCase:function(K,L){if(L===null||K===null||L.length<K.length){return false}else{return K.toLowerCase()==L.substr(0,K.length).toLowerCase()}},startsWithLogicalOperator:function(K){if(K===null){return false}else{return this.startsWithOr(K)||this.startsWithAnd(K)||this.startsWithNot(K)||this.startsWithBraces(K)}},startsWithOr:function(K){return this.startsWithIgnoreCase("|",K)||this.startsWithIgnoreCase("||",K)||this.startsWithIgnoreCase("or",K)},startsWithAnd:function(K){return this.startsWithIgnoreCase("&",K)||this.startsWithIgnoreCase("&&",K)||this.startsWithIgnoreCase("and",K)},startsWithNot:function(K){return this.startsWithIgnoreCase("!",K)||this.startsWithIgnoreCase("not",K)},startsWithBraces:function(K){return this.startsWithIgnoreCase("(",K)||this.startsWithIgnoreCase(")",K)},chewWhitespace:function(M){var L=false;var K=M.currentCharacter();while(K!==null&&D.test(K)){M.consumeCharacter();K=M.currentCharacter();L=true}return L},getLongestOperatorMatch:function(O,K){var L=null;if(this.startsWithIgnoreCase("is",O)){var N=O.substring(2).match(w);if(N){L=O.substring(0,N[0].length+2)}else{L="is"}}if(this.startsWithIgnoreCase("was",O)){var N=O.substring(3).match(m);if(N){L=O.substring(0,N[0].length+3)}else{L="was"}}else{if(this.startsWithIgnoreCase("not",O)){var P=O.substring(3).match(d);if(P){L=O.substring(0,P[0].length+3)}}else{for(var M=0;M<K.length;M++){if(this.startsWithIgnoreCase(K[M].value,O)){if(L===null||F[M].value.length>L){L=F[M].value}}}}}return L},getValueMinusExtraWhitespace:function(N){if(N===null){return null}var O="";var P=true;var L=N.split("");for(var M=0;M<L.length;M++){var K=L[M];if(D.test(K)){if(P){P=false;O=O+K}}else{P=true;O=O+K}}return O},fieldOrFunctionName:function(L){var K=this.stringValue(L);if(K==='""'||K==="''"){L.setParseError()}if(this.isReservedWord(K.toLowerCase())){L.setParseError()}return K},isReservedWord:function(K){return jQuery.inArray(K,I)!==-1},isWasOperator:function(K){return K==="was"||K==="was in"||K=="was not in"||K=="was not"},isChangedOperator:function(K){return K==="changed"},stringValue:function(M){var K="";var P=false;var N=false;var L=M.currentCharacter();while(L!==null&&(P||N||G.test(L))){K=K+L;M.consumeCharacter();if(L=="\\"){L=M.currentCharacter();if(L===null){M.setParseError();break}else{if(C.test(L)){var O=M.remainingString();if(!g.test(O)){M.setParseError();break}}}K=K+L;M.consumeCharacter()}else{if(f.test(L)&&!(P||N)){M.setParseError();break}else{if(L=='"'&&!N){P=!P}else{if(L=="'"&&!P){N=!N}}}}L=M.currentCharacter()}if(M.isComplete()&&(P||N)){M.setParseError()}return K},numberValue:function(L){var M="";this.chewWhitespace(L);var K=L.currentCharacter();while(K!==null){if(a.test(K)){M=M+K;L.consumeCharacter()}else{break}K=L.currentCharacter()}return M},wasPredicateComplete:function(L){var O=false;var N=n.length;for(var M=0,K=N;M<K;++M){if(L.toLowerCase()==n[M].value.toLowerCase()){O=true;break}}return O}}};JIRA.JQLAutoComplete.ParseResult=function(){var J=[];var I=0;return{getTokens:function(){return J},addToken:function(K){J[I++]=K},setLastFieldName:function(L,K){this.fieldNameStartIndex=(L===null)?K.getMaxTokenStringIdx():(K.getTokenStringIdx()-L.length);this.lastFieldName=this.getUnquotedString(L);J[I++]=L},getLastFieldName:function(){return this.lastFieldName},getLastFieldNameStartIndex:function(){return this.fieldNameStartIndex},setLastOrderByFieldName:function(L,K){this.orderByFieldNameStartIndex=(L===null)?K.getMaxTokenStringIdx():(K.getTokenStringIdx()-L.length);this.lastOrderByFieldName=this.getUnquotedString(L);this.lastOrderByDirection=null;J[I++]=L},getLastOrderByFieldName:function(){return this.lastOrderByFieldName},getLastOrderByFieldNameStartIndex:function(){return this.orderByFieldNameStartIndex},setLastOrderByDirection:function(L,K){this.orderByDirectionStartIndex=(L===null)?K.getMaxTokenStringIdx():(K.getTokenStringIdx()-L.length);this.lastOrderByDirection=L;J[I++]=L},getLastOrderByDirection:function(){return this.lastOrderByDirection},getLastOrderByDirectionStartIndex:function(){return this.orderByDirectionStartIndex},setNeedsField:function(){this.needsOperator=false;this.needsOperand=false;this.needsLogicalOperator=false;this.needsOrderBy=false;this.needsField=true;this.needsOrderByField=false;this.needsOrderByDirection=false;this.needsListComma=false;this.needsWasPredicate=false;this.lastWasOperator=null},getNeedsField:function(){return this.needsField},setNeedsOrderByField:function(){this.needsOperator=false;this.needsOperand=false;this.needsLogicalOperator=false;this.needsOrderBy=false;this.needsField=false;this.needsOrderByField=true;this.needsOrderByDirection=false;this.lastOrderByDirection=null;this.needsListComma=false},getNeedsOrderByField:function(){return this.needsOrderByField},setNeedsOrderByDirection:function(){this.needsOperator=false;this.needsOperand=false;this.needsLogicalOperator=false;this.needsOrderBy=false;this.needsField=false;this.needsOrderByField=false;this.needsOrderByDirection=true;this.needsListComma=false},getNeedsOrderByDirection:function(){return this.needsOrderByDirection},setNeedsOrderByComma:function(){this.needsOperator=false;this.needsOperand=false;this.needsLogicalOperator=false;this.needsOrderBy=false;this.needsField=false;this.needsOrderByField=false;this.needsOrderByDirection=false;this.needsListComma=false},setNeedsListComma:function(){this.needsOperator=false;this.needsOperand=false;this.needsLogicalOperator=false;this.needsOrderBy=false;this.needsField=false;this.needsOrderByField=false;this.needsOrderByDirection=false;this.needsListComma=true},getNeedsListComma:function(){return this.needsListComma},setLastOperator:function(K,L){this.lastOperator=K;this.operatorStartIndex=L;J[I++]=K},setLastWasOperator:function(K){this.lastWasOperator=K},getLastWasOperator:function(){return this.lastWasOperator},getLastOperator:function(){return this.lastOperator},getLastOperatorStartIndex:function(){return this.operatorStartIndex},setLastOperand:function(L,K){this.operandStartIndex=(L===null)?K.getMaxTokenStringIdx():(K.getTokenStringIdx()-L.length);this.lastOperand=this.getUnquotedString(L);J[I++]=L},getLastOperand:function(){return this.lastOperand},setNeedsOperand:function(){this.needsField=false;this.needsOperator=false;this.needsLogicalOperator=false;this.needsOperand=true;this.needsOrderBy=false;this.needsOrderByField=false;this.needsOrderByDirection=false;this.needsListComma=false},setNeedsOperandOrOperator:function(){this.needsField=false;this.needsOperator=true;this.needsLogicalOperator=false;this.needsOperand=true;this.needsOrderBy=false;this.needsOrderByField=false;this.needsOrderByDirection=false;this.needsListComma=false},getNeedsOperand:function(){return this.needsOperand},setNeedsPredicateOperand:function(){this.needsPredicateOperand=true},resetNeedsPredicateOperand:function(){this.needsPredicateOperand=false;this.needsOperand=false},getNeedsPredicateOperand:function(){return this.needsPredicateOperand},getLastOperandStartIndex:function(){return this.operandStartIndex},setLastOperandStartIndex:function(K){this.operandStartIndex=K},setLastLogicalOperator:function(K,L){this.lastLogicalOperator=K;this.logicalOperatorStartIndex=L;J[I++]=K},setNeedsOperator:function(){this.needsField=false;this.needsOperand=false;this.needsLogicalOperator=false;this.needsOrderBy=false;this.needsOperator=true;this.needsOrderByField=false;this.needsOrderByDirection=false;this.needsListComma=false},getNeedsOperatorOrOperand:function(){return this.needsOperator&&this.needsOperand},getNeedsOperator:function(){return this.needsOperator},getLastLogicalOperator:function(){return this.lastLogicalOperator},getLastLogicalOperatorStartIndex:function(){return this.logicalOperatorStartIndex},setNeedsLogicalOperator:function(K){this.needsLogicalOperator=true;this.needsOperator=false;this.needsOperand=false;this.needsField=false;this.needsOrderByField=false;this.needsOrderByDirection=false;this.needsListComma=false;this.needsOrderBy=!K.getInParens();if(this.lastWasOperator!=null){this.needsWasPredicate=true}},setNeedsOpenParen:function(K){this.needsOpenParen=K},getNeedsOpenParen:function(){return this.needsOpenParen},getNeedsLogicalOperator:function(){return this.needsLogicalOperator},getNeedsOrderBy:function(){return this.needsOrderBy},getNeedsWasPredicate:function(){return this.needsWasPredicate},setLastWasPredicate:function(K,L){this.wasPredicateStartIndex=(K===null)?L.getMaxTokenStringIdx():(L.getTokenStringIdx()-K.length);this.lastWasPredicate=K;J[I++]=K},getLastWasPredicate:function(){return this.lastWasPredicate},resetLastPredicates:function(){this.lastLogicalOperator=null;this.lastWasPredicate=null;this.lastOperand=null;this.wasPredicateStartIndex=null;this.operandStartIndex=null},getLastWasPredicateStartIndex:function(){return this.wasPredicateStartIndex},setLastOrderBy:function(L,K){this.orderByStartIndex=(L===null)?K.getMaxTokenStringIdx():(K.getTokenStringIdx()-L.length);this.lastOrderBy=L;J[I++]=L},getLastOrderBy:function(){return this.lastOrderBy},getLastOrderByStartIndex:function(){return this.orderByStartIndex},resetLogicalOperators:function(){this.lastLogicalOperator=null;this.logicalOperatorStartIndex=null;this.needsLogicalOperator=null},getUnquotedString:function(K){var L=K!=null&&K.length>=3&&K.charAt(K.length-2)!="\\";if(K!=null&&K.charAt(0)=='"'){K=K.substring(1,K.length);if(K.charAt(K.length-1)=='"'&&L){K=K.substring(0,K.length-1)}}else{if(K!=null&&K.charAt(0)=="'"){K=K.substring(1,K.length);if(K.charAt(K.length-1)=="'"&&L){K=K.substring(0,K.length-1)}}}return K},setParseError:function(K){this.parseError=true;this.parseErrorMsg=K},getParseError:function(){return this.parseError},getParseErrorMsg:function(){return this.parseErrorMsg},setNeedsNothing:function(){this.needsOperator=false;this.needsOperand=false;this.needsLogicalOperator=false;this.needsOrderBy=false;this.needsField=false;this.needsOrderByField=false;this.needsOrderByDirection=false;this.needsOpenParen=false;this.needsListComma=false;this.needsWasPredicate=null;this.needsPredicateOperand=null;this.mustBeOperatorOrPredicate=null;this.lastWasOperator=null},setOperandComplete:function(){this.operandComplete=true},getOperandComplete:function(){return this.operandComplete},setMustBeOperatorOrPredicate:function(K){this.mustBeOperatorOrPredicate=K},getMustBeOperatorOrPredicate:function(){return this.mustBeOperatorOrPredicate},resetTerminalClause:function(){this.lastFieldName=null;this.fieldNameStartIndex=null;this.needsField=null;this.lastOperator=null;this.operatorStartIndex=null;this.needsOperator=null;this.lastOperand=null;this.operandStartIndex=null;this.needsOperand=null;this.operandComplete=null;this.needsOpenParen=null;this.needsListComma=false;this.mustBeOperatorOrPredicate=null},init:function(){this.lastFieldName=null;this.fieldNameStartIndex=null;this.needsField=null;this.lastOperator=null;this.operatorStartIndex=null;this.needsOperator=null;this.lastOperand=null;this.operandStartIndex=null;this.needsOperand=null;this.lastLogicalOperator=null;this.logicalOperatorStartIndex=null;this.lastOrderByFieldName=null;this.lastOrderByFieldNameStartIndex=null;this.lastOrderByDirection=null;this.lastOrderByDirectionStartIndex=null;this.orderByStartIndex=null;this.lastOrderBy=null;this.needsOrderBy=null;this.needsOrderByField=null;this.needsOrderByDirection=null;this.operandComplete=null;this.needsOpenParen=null;this.needsListComma=null;this.wasPredicateStartIndex=null;this.lastWasPredicate=null;this.needsWasPredicate=null;this.needsPredicateOperand=null;this.mustBeOperatorOrPredicate=null;this.lastWasOperator=null}}};JIRA.JQLAutoComplete.Token=function(){return{init:function(I){this.tokenStringIdx=0;this.tokenString=I;this.parseError=false;this.parseErrorMsg=null;this.result=JIRA.JQLAutoComplete.ParseResult();this.result.init();this.inParens=0},consumeCharacter:function(){this.tokenStringIdx++},consumeCharacters:function(I){this.tokenStringIdx=this.tokenStringIdx+I},backTrackToIdx:function(I){this.tokenStringIdx=I;this.parseError=false;this.parseErrorMsg=null;this.result.parseError=false;this.result.parseErrorMsg=null},getTokenStringIdx:function(){return this.tokenStringIdx},currentCharacter:function(){if(this.tokenStringIdx>=this.tokenString.length){return null}return this.tokenString.charAt(this.tokenStringIdx)},remainingString:function(){if(this.tokenStringIdx>=this.tokenString.length){return null}return this.tokenString.substr(this.tokenStringIdx,this.tokenString.length)},getMaxTokenStringIdx:function(){return this.tokenString.length},isComplete:function(){if(this.parseError){return true}return this.tokenStringIdx>=this.tokenString.length},setInParens:function(){this.inParens++},setOutOfParens:function(){if(this.inParens!==0){this.inParens--}},getInParens:function(){return this.inParens!==0},setParseError:function(){this.parseError=true;var J=((this.tokenStringIdx-9)<0)?0:this.tokenStringIdx-9;var I=this.tokenString.substring(J,this.tokenStringIdx-1);this.result.setParseError("..."+I+"^"+this.tokenString.substring(this.tokenStringIdx,this.tokenString.length))},getParseError:function(){return this.parseError},getResult:function(){return this.result}}};jQuery(function(){jQuery(".jql-autocomplete-params").each(function(){var N={};jQuery(this).find("input").each(function(){var O=jQuery(this);N[O.attr("id")]=O.val()});var K=JSON.parse(jQuery("#jqlFieldz").text());var L=JSON.parse(jQuery("#jqlFunctionNamez").text());var M=JSON.parse(jQuery("#jqlReservedWordz").text());var J=JIRA.JQLAutoComplete({fieldID:"jqltext",parser:JIRA.JQLAutoComplete.MyParser(M),queryDelay:0.65,jqlFieldNames:K,jqlFunctionNames:L,minQueryLength:0,allowArrowCarousel:true,autoSelectFirst:false,errorID:"jqlerrormsg"});var I=jQuery("#jqltext");I.unbind("keypress",submitOnEnter).keypress(function(O){if(J.dropdownController===null||!J.dropdownController.displayed||J.selectedIndex<0){if(O.keyCode==13&&!O.ctrlKey&&!O.shiftKey){jQuery("#jqlform").submit();return false}else{return true}}});J.buildResponseContainer();J.parse(I.text());J.updateColumnLineCount();I.click(function(){J.dropdownController.hideDropdown()})})})})();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:timeline-resources', location = 'com/atlassian/confluence/extra/calendar3/lib/timeline.js' */
if(typeof links==="undefined"){links={}}if(typeof google==="undefined"){google=undefined}links.Timeline=function(a){if(!a){return}this.dom={};this.conversion={};this.eventParams={};this.groups=[];this.groupIndexes={};this.items=[];this.renderQueue={show:[],hide:[],update:[]};this.renderedItems=[];this.clusterGenerator=new links.Timeline.ClusterGenerator(this);this.currentClusters=[];this.selection=undefined;this.listeners={};this.size={actualHeight:0,axis:{characterMajorHeight:0,characterMajorWidth:0,characterMinorHeight:0,characterMinorWidth:0,height:0,labelMajorTop:0,labelMinorTop:0,line:0,lineMajorWidth:0,lineMinorHeight:0,lineMinorTop:0,lineMinorWidth:0,top:0},contentHeight:0,contentLeft:0,contentWidth:0,frameHeight:0,frameWidth:0,groupsLeft:0,groupsWidth:0,items:{top:0}};this.dom.container=a;this.options={width:"100%",height:"auto",minHeight:0,autoHeight:true,eventMargin:10,eventMarginAxis:20,dragAreaWidth:10,min:undefined,max:undefined,zoomMin:10,zoomMax:1000*60*60*24*365*10000,moveable:true,zoomable:true,selectable:true,editable:false,snapEvents:true,groupChangeable:true,showCurrentTime:true,showCustomTime:false,showMajorLabels:true,showMinorLabels:true,showNavigation:false,showButtonNew:false,groupsOnRight:false,axisOnTop:false,stackEvents:true,animate:true,animateZoom:true,cluster:false,style:"box",customStackOrder:false,locale:"en",MONTHS:new Array("January","February","March","April","May","June","July","August","September","October","November","December"),DAYS:new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"),MONTHS_SHORT:new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"),DAYS_SHORT:new Array("Sun","Mon","Tue","Wed","Thu","Fri","Sat"),ZOOM_IN:"Zoom in",ZOOM_OUT:"Zoom out",MOVE_LEFT:"Move left",MOVE_RIGHT:"Move right",NEW:"New",CREATE_NEW_EVENT:"Create new event"};this.clientTimeOffset=0;var c=this.dom;while(c.container.hasChildNodes()){c.container.removeChild(c.container.firstChild)}this.step=new links.Timeline.StepDate();this.itemTypes={box:links.Timeline.ItemBox,range:links.Timeline.ItemRange,dot:links.Timeline.ItemDot};this.data=[];this.firstDraw=true;this.setVisibleChartRange(undefined,undefined,false);this.render();var b=this;setTimeout(function(){b.trigger("ready")},0)};links.Timeline.prototype.draw=function(b,a){this.setOptions(a);this.setData(b);if(a&&(a.start||a.end)){this.setVisibleChartRange(a.start,a.end)}else{if(this.firstDraw){this.setVisibleChartRangeAuto()}}this.firstDraw=false};links.Timeline.prototype.setOptions=function(b){if(b){for(var d in b){if(b.hasOwnProperty(d)){this.options[d]=b[d]}}if(typeof links.locales!=="undefined"&&this.options.locale!=="en"){var c=links.locales[this.options.locale];if(c){for(var a in c){if(c.hasOwnProperty(a)){this.options[a]=c[a]}}}}if(b.showButtonAdd!=undefined){this.options.showButtonNew=b.showButtonAdd;console.log("WARNING: Option showButtonAdd is deprecated. Use showButtonNew instead")}if(b.intervalMin!=undefined){this.options.zoomMin=b.intervalMin;console.log("WARNING: Option intervalMin is deprecated. Use zoomMin instead")}if(b.intervalMax!=undefined){this.options.zoomMax=b.intervalMax;console.log("WARNING: Option intervalMax is deprecated. Use zoomMax instead")}if(b.scale&&b.step){this.step.setScale(b.scale,b.step)}}this.options.autoHeight=(this.options.height==="auto")};links.Timeline.prototype.addItemType=function(a,b){this.itemTypes[a]=b};links.Timeline.mapColumnIds=function(b){var c={},f=b.getNumberOfColumns(),e=true;for(var a=0;a<f;a++){var d=b.getColumnId(a)||b.getColumnLabel(a);c[d]=a;if(d=="start"||d=="end"||d=="content"||d=="group"||d=="className"||d=="editable"){e=false}}if(e){c.start=0;c.end=1;c.content=2}return c};links.Timeline.prototype.setData=function(e){this.unselectItem();if(!e){e=[]}this.stackCancelAnimation();this.clearItems();this.data=e;var b=this.items;this.deleteGroups();if(google&&google.visualization&&e instanceof google.visualization.DataTable){var f=links.Timeline.mapColumnIds(e);for(var g=0,d=e.getNumberOfRows();g<d;g++){b.push(this.createItem({start:((f.start!=undefined)?e.getValue(g,f.start):undefined),end:((f.end!=undefined)?e.getValue(g,f.end):undefined),content:((f.content!=undefined)?e.getValue(g,f.content):undefined),group:((f.group!=undefined)?e.getValue(g,f.group):undefined),className:((f.className!=undefined)?e.getValue(g,f.className):undefined),editable:((f.editable!=undefined)?e.getValue(g,f.editable):undefined)}))}}else{if(links.Timeline.isArray(e)){for(var g=0,d=e.length;g<d;g++){var a=e[g];var c=this.createItem(a);b.push(c)}}else{throw"Unknown data type. DataTable or Array expected."}}if(this.options.cluster){this.clusterGenerator.setData(this.items)}this.render({animate:false})};links.Timeline.prototype.getData=function(){return this.data};links.Timeline.prototype.updateData=function(e,j){var d=this.data,a;if(google&&google.visualization&&d instanceof google.visualization.DataTable){var g=(e+1)-d.getNumberOfRows();if(g>0){d.addRows(g)}var f=links.Timeline.mapColumnIds(d);for(a in j){if(j.hasOwnProperty(a)){var b=f[a];if(b==undefined){var h=j[a];var c="string";if(typeof(h)=="number"){c="number"}else{if(typeof(h)=="boolean"){c="boolean"}else{if(h instanceof Date){c="datetime"}}}b=d.addColumn(c,a)}d.setValue(e,b,j[a])}}}else{if(links.Timeline.isArray(d)){var k=d[e];if(k==undefined){k={};d[e]=k}for(a in j){if(j.hasOwnProperty(a)){k[a]=j[a]}}}else{throw"Cannot update data, unknown type of data"}}};links.Timeline.prototype.getItemIndex=function(f){var g=f,j=this.dom,h=j.items.frame,b=this.items,c=undefined;while(g.parentNode&&g.parentNode!==h){g=g.parentNode}if(g.parentNode===h){for(var d=0,a=b.length;d<a;d++){if(b[d].dom===g){c=d;break}}}return c};links.Timeline.prototype.setSize=function(b,a){if(b){this.options.width=b;this.dom.frame.style.width=b}if(a){this.options.height=a;this.options.autoHeight=(this.options.height==="auto");if(a!=="auto"){this.dom.frame.style.height=a}}this.render({animate:false})};links.Timeline.prototype.setVisibleChartRange=function(f,b,e){var c={};if(!f||!b){c=this.getDataRange(true)}if(!f){if(b){if(c.min&&c.min.valueOf()<b.valueOf()){f=c.min}else{f=new Date(b.valueOf());f.setDate(f.getDate()-7)}}else{f=new Date();f.setDate(f.getDate()-3)}}if(!b){if(c.max){b=c.max}else{b=new Date(f.valueOf());b.setDate(b.getDate()+7)}}if(b<=f){b=new Date(f.valueOf());b.setDate(b.getDate()+7)}var d=this.options.min?this.options.min:undefined;if(d!=undefined&&f.valueOf()<d.valueOf()){f=new Date(d.valueOf())}var a=this.options.max?this.options.max:undefined;if(a!=undefined&&b.valueOf()>a.valueOf()){b=new Date(a.valueOf())}this.applyRange(f,b);if(e==undefined||e==true){this.render({animate:false})}else{this.recalcConversion()}};links.Timeline.prototype.setVisibleChartRangeAuto=function(){var a=this.getDataRange(true);this.setVisibleChartRange(a.min,a.max)};links.Timeline.prototype.setVisibleChartRangeNow=function(){var a=new Date();var b=(this.end.valueOf()-this.start.valueOf());var d=new Date(a.valueOf()-b/2);var c=new Date(d.valueOf()+b);this.setVisibleChartRange(d,c)};links.Timeline.prototype.getVisibleChartRange=function(){return{start:new Date(this.start.valueOf()),end:new Date(this.end.valueOf())}};links.Timeline.prototype.getDataRange=function(b){var g=this.items,d=undefined,h=undefined;if(g){for(var f=0,e=g.length;f<e;f++){var k=g[f],a=k.start!=undefined?k.start.valueOf():undefined,c=k.end!=undefined?k.end.valueOf():a;if(d!=undefined&&a!=undefined){d=Math.min(d.valueOf(),a.valueOf())}else{d=a}if(h!=undefined&&c!=undefined){h=Math.max(h,c)}else{h=c}}}if(d&&h&&b){var j=(h-d);d=d-j*0.05;h=h+j*0.05}return{min:d!=undefined?new Date(d):undefined,max:h!=undefined?new Date(h):undefined}};links.Timeline.prototype.render=function(j){var e=this.reflowFrame();var h=this.reflowAxis();var d=this.reflowGroups();var g=this.reflowItems();var f=(e||h||d||g);var a=this.options.animate;if(j&&j.animate!=undefined){a=j.animate}this.recalcConversion();this.clusterItems();this.filterItems();this.stackItems(a);this.recalcItems();var b=this.repaint();if(b){var c=j?j.renderTimesLeft:undefined;if(c==undefined){c=5}if(c>0){this.render({animate:j?j.animate:undefined,renderTimesLeft:(c-1)})}}};links.Timeline.prototype.repaint=function(){var b=this.repaintFrame();var a=this.repaintAxis();var d=this.repaintGroups();var c=this.repaintItems();this.repaintCurrentTime();this.repaintCustomTime();return(b||a||d||c)};links.Timeline.prototype.reflowFrame=function(){var f=this.dom,d=this.options,e=this.size,b=false;var a=f.frame?f.frame.offsetWidth:0,c=f.frame?f.frame.children[0].clientHeight:0;b=b||(e.frameWidth!==a);b=b||(e.frameHeight!==c);e.frameWidth=a;e.frameHeight=c;return b};links.Timeline.prototype.repaintFrame=function(){var b=false,d=this.dom,j=this.options,h=this.size;if(!d.frame){d.frame=document.createElement("DIV");d.frame.className="timeline-frame";d.frame.style.position="relative";d.frame.style.overflowX="hidden";d.frame.style.overflowY="auto";d.container.appendChild(d.frame);b=true}var g=j.autoHeight?(h.actualHeight+"px"):(j.height||"100%");var a=j.width||"100%";b=b||(d.frame.style.height!=g);b=b||(d.frame.style.width!=a);d.frame.style.height=j.viewHeight?j.viewHeight:g;d.frame.style.width=a;if(!d.content){d.content=document.createElement("DIV");d.content.style.position="relative";d.content.style.overflow="hidden";d.frame.appendChild(d.content);var e=document.createElement("DIV");e.style.position="absolute";e.style.left="0px";e.style.top="0px";e.style.height="100%";e.style.width="0px";d.content.appendChild(e);d.contentTimelines=e;var c=this.eventParams,f=this;if(!c.onMouseDown){c.onMouseDown=function(k){f.onMouseDown(k)};links.Timeline.addEventListener(d.content,"mousedown",c.onMouseDown)}if(!c.onTouchStart){c.onTouchStart=function(k){f.onTouchStart(k)};links.Timeline.addEventListener(d.content,"touchstart",c.onTouchStart)}if(!c.onDblClick){c.onDblClick=function(k){f.onDblClick(k)};links.Timeline.addEventListener(d.content,"dblclick",c.onDblClick)}b=true}d.content.style.left=h.contentLeft+"px";d.content.style.top="0px";d.content.style.width=h.contentWidth+"px";d.content.style.height=g;this.repaintNavigation();this.reflowAxis();this.repaintAxis();return b};links.Timeline.prototype.reflowAxis=function(){var j=false,h=this.dom,o=this.options,n=this.size,l=h.axis;var k=(l&&l.characterMinor)?l.characterMinor.clientWidth:0,g=(l&&l.characterMinor)?l.characterMinor.clientHeight:0,b=(l&&l.characterMajor)?l.characterMajor.clientWidth:0,e=(l&&l.characterMajor)?l.characterMajor.clientHeight:0,d=(o.showMinorLabels?g:0)+(o.showMajorLabels?e:0);var f=h.frame?h.frame.children[0].clientHeight:n.frameHeight;var a=o.axisOnTop?0:f-d,c=o.axisOnTop?d:a;j=j||(n.axis.top!==a);j=j||(n.axis.line!==c);j=j||(n.axis.height!==d);n.axis.top=a;n.axis.line=c;n.axis.height=d;n.axis.labelMajorTop=o.axisOnTop?0:c+(o.showMinorLabels?g:0);n.axis.labelMinorTop=o.axisOnTop?(o.showMajorLabels?e:0):c;n.axis.lineMinorTop=o.axisOnTop?n.axis.labelMinorTop:0;n.axis.lineMinorHeight=o.showMajorLabels?n.frameHeight-e:n.frameHeight;if(l&&l.minorLines&&l.minorLines.length){n.axis.lineMinorWidth=l.minorLines[0].offsetWidth}else{n.axis.lineMinorWidth=1}if(l&&l.majorLines&&l.majorLines.length){n.axis.lineMajorWidth=l.majorLines[0].offsetWidth}else{n.axis.lineMajorWidth=1}j=j||(n.axis.characterMinorWidth!==k);j=j||(n.axis.characterMinorHeight!==g);j=j||(n.axis.characterMajorWidth!==b);j=j||(n.axis.characterMajorHeight!==e);n.axis.characterMinorWidth=k;n.axis.characterMinorHeight=g;n.axis.characterMajorWidth=b;n.axis.characterMajorHeight=e;var m=Math.max(n.frameHeight-d,0);n.contentLeft=o.groupsOnRight?0:n.groupsWidth;n.contentWidth=Math.max(n.frameWidth-n.groupsWidth,0);n.contentHeight=m;n.axis.lineMinorHeight=m;return j};links.Timeline.prototype.repaintAxis=function(){var f=false,j=this.dom,r=this.options,q=this.size,e=this.step;var g=j.axis;if(!g){g={};j.axis=g}if(!q.axis.properties){q.axis.properties={}}if(!g.minorTexts){g.minorTexts=[]}if(!g.minorLines){g.minorLines=[]}if(!g.majorTexts){g.majorTexts=[]}if(!g.majorLines){g.majorLines=[]}if(!g.frame){g.frame=document.createElement("DIV");g.frame.style.position="absolute";g.frame.style.left="0px";g.frame.style.top="0px";j.content.appendChild(g.frame)}j.content.removeChild(g.frame);g.frame.style.width=(q.contentWidth)+"px";g.frame.style.height=(q.axis.height)+"px";var d=this.screenToTime(0);var h=this.screenToTime(q.contentWidth);if(q.axis.characterMinorWidth){this.minimumStep=this.screenToTime(q.axis.characterMinorWidth*6)-this.screenToTime(0);e.setRange(d,h,this.minimumStep)}var o=this.repaintAxisCharacters();f=f||o;this.repaintAxisStartOverwriting();e.start();var a=undefined;var l=0;while(!e.end()&&l<1000){l++;var p=e.getCurrent(),n=this.timeToScreen(p),k=e.isMajor();if(r.showMinorLabels){this.repaintAxisMinorText(n,e.getLabelMinor(r))}if(k&&r.showMajorLabels){if(n>0){if(a==undefined){a=n}this.repaintAxisMajorText(n,e.getLabelMajor(r))}this.repaintAxisMajorLine(n)}else{this.repaintAxisMinorLine(n)}e.next()}if(r.showMajorLabels){var c=this.screenToTime(0),m=this.step.getLabelMajor(r,c),b=m.length*q.axis.characterMajorWidth+10;if(a==undefined||b<a){this.repaintAxisMajorText(0,m,c)}}this.repaintAxisEndOverwriting();this.repaintAxisHorizontal();j.content.insertBefore(g.frame,j.content.firstChild);return f};links.Timeline.prototype.repaintAxisCharacters=function(){var c=false,f=this.dom,b=f.axis,e;if(!b.characterMinor){e=document.createTextNode("0");var a=document.createElement("DIV");a.className="timeline-axis-text timeline-axis-text-minor";a.appendChild(e);a.style.position="absolute";a.style.visibility="hidden";a.style.paddingLeft="0px";a.style.paddingRight="0px";b.frame.appendChild(a);b.characterMinor=a;c=true}if(!b.characterMajor){e=document.createTextNode("0");var d=document.createElement("DIV");d.className="timeline-axis-text timeline-axis-text-major";d.appendChild(e);d.style.position="absolute";d.style.visibility="hidden";d.style.paddingLeft="0px";d.style.paddingRight="0px";b.frame.appendChild(d);b.characterMajor=d;c=true}return c};links.Timeline.prototype.repaintAxisStartOverwriting=function(){var a=this.size.axis.properties;a.minorTextNum=0;a.minorLineNum=0;a.majorTextNum=0;a.majorLineNum=0};links.Timeline.prototype.repaintAxisEndOverwriting=function(){var b=this.dom,j=this.size.axis.properties,a=this.dom.axis.frame,e;var l=b.axis.minorTexts;e=j.minorTextNum;while(l.length>e){var c=l[e];a.removeChild(c);l.splice(e,1)}var d=b.axis.minorLines;e=j.minorLineNum;while(d.length>e){var f=d[e];a.removeChild(f);d.splice(e,1)}var m=b.axis.majorTexts;e=j.majorTextNum;while(m.length>e){var h=m[e];a.removeChild(h);m.splice(e,1)}var g=b.axis.majorLines;e=j.majorLineNum;while(g.length>e){var k=g[e];a.removeChild(k);g.splice(e,1)}};links.Timeline.prototype.repaintAxisHorizontal=function(){var e=this.dom.axis,d=this.size,c=this.options;var a=(c.showMinorLabels||c.showMajorLabels);if(a){if(!e.backgroundLine){var f=document.createElement("DIV");f.className="timeline-axis";f.style.position="absolute";f.style.left="0px";f.style.width="100%";f.style.border="none";e.frame.insertBefore(f,e.frame.firstChild);e.backgroundLine=f}if(e.backgroundLine){e.backgroundLine.style.top=d.axis.top+"px";e.backgroundLine.style.height=d.axis.height+"px"}}else{if(e.backgroundLine){e.frame.removeChild(e.backgroundLine);delete e.backgroundLine}}if(a){if(e.line){var b=e.frame.removeChild(e.line);e.frame.appendChild(b)}else{var b=document.createElement("DIV");b.className="timeline-axis";b.style.position="absolute";b.style.left="0px";b.style.width="100%";b.style.height="0px";e.frame.appendChild(b);e.line=b}e.line.style.top=d.axis.line+"px"}else{if(e.line&&e.line.parentElement){e.frame.removeChild(e.line);delete e.line}}};links.Timeline.prototype.repaintAxisMinorText=function(h,j){var k=this.size,b=this.dom,e=k.axis.properties,a=b.axis.frame,g=b.axis.minorTexts,c=e.minorTextNum,f;if(c<g.length){f=g[c]}else{var d=document.createTextNode("");f=document.createElement("DIV");f.appendChild(d);f.className="timeline-axis-text timeline-axis-text-minor";f.style.position="absolute";a.appendChild(f);g.push(f)}f.childNodes[0].nodeValue=j;f.style.left=(h-8)+"px";f.style.top=k.axis.labelMinorTop+"px";e.minorTextNum++};links.Timeline.prototype.repaintAxisMinorLine=function(a){var e=this.size.axis,h=this.dom,d=e.properties,g=h.axis.frame,f=h.axis.minorLines,c=d.minorLineNum,b;if(c<f.length){b=f[c]}else{b=document.createElement("DIV");b.className="timeline-axis-grid timeline-axis-grid-minor";b.style.position="absolute";b.style.width="0px";g.appendChild(b);f.push(b)}b.style.top=e.lineMinorTop+"px";b.style.height=e.lineMinorHeight+"px";b.style.left=(a-e.lineMinorWidth/2)+"px";d.minorLineNum++};links.Timeline.prototype.repaintAxisMajorText=function(f,h){var j=this.size,d=j.axis.properties,a=this.dom.axis.frame,g=this.dom.axis.majorTexts,b=d.majorTextNum,e;if(b<g.length){e=g[b]}else{var c=document.createTextNode(h);e=document.createElement("DIV");e.className="timeline-axis-text timeline-axis-text-major";e.appendChild(c);e.style.position="absolute";e.style.top="0px";a.appendChild(e);g.push(e)}e.childNodes[0].nodeValue=h;e.style.top=j.axis.labelMajorTop+"px";e.style.left=f+"px";d.majorTextNum++};links.Timeline.prototype.repaintAxisMajorLine=function(a){var e=this.size,g=e.axis.properties,f=this.size.axis,h=this.dom.axis.frame,d=this.dom.axis.majorLines,c=g.majorLineNum,b;if(c<d.length){b=d[c]}else{b=document.createElement("DIV");b.className="timeline-axis-grid timeline-axis-grid-major";b.style.position="absolute";b.style.top="0px";b.style.width="0px";h.appendChild(b);d.push(b)}b.style.left=(a-f.lineMajorWidth/2)+"px";b.style.height=e.contentHeight+"px";g.majorLineNum++};links.Timeline.prototype.reflowItems=function(){var g=false,f,e,h,d=this.groups,c=this.renderedItems;if(d){AJS.$.each(d,function(m,l){l.itemsHeight=0})}for(f=0,e=c.length;f<e;f++){var k=c[f],a=k.dom;h=k.group;if(a){var b=a?a.clientWidth:0;var j=a?a.clientHeight:0;g=g||(k.width!=b);g=g||(k.height!=j);k.width=b;k.height=j;k.reflow()}if(h){h.itemsHeight=h.itemsHeight?Math.max(h.itemsHeight,k.height):k.height}}return g};links.Timeline.prototype.recalcItems=function(){var q=false,p,l,r,t,f,d,s=this.groups,k=this.size,b=this.options,n=this.renderedItems;var a=0;if(s.length==0){if(b.autoHeight||b.cluster){var m=0,o=0;if(this.stack&&this.stack.finalItems){f=this.stack.finalItems;t=f[0];if(t&&t.top){m=t.top;o=t.top+t.height}for(p=1,l=f.length;p<l;p++){t=f[p];m=Math.min(m,t.top);o=Math.max(o,t.top+t.height)}}else{r=n[0];if(r&&r.top){m=r.top;o=r.top+r.height}for(p=1,l=n.length;p<l;p++){r=n[p];if(r.top){m=Math.min(m,r.top);o=Math.max(o,(r.top+r.height))}}}a=(o-m)+2*b.eventMarginAxis+k.axis.height;if(a<b.minHeight){a=b.minHeight}if(k.actualHeight!=a&&b.autoHeight&&!b.axisOnTop){var g=a-k.actualHeight;if(this.stack&&this.stack.finalItems){f=this.stack.finalItems;for(p=0,l=f.length;p<l;p++){f[p].top+=g;f[p].item.top+=g}}else{for(p=0,l=n.length;p<l;p++){n[p].top+=g}}}}}else{a=k.axis.height+2*b.eventMarginAxis;for(p=0,l=s.length;p<l;p++){d=s[p];var j=Math.max(d.labelHeight||0,d.itemsHeight||0);q=q||(j!=d.height);d.height=j;a+=s[p].height+b.eventMargin}var c=b.eventMargin,h=b.axisOnTop?b.eventMarginAxis+c/2:k.contentHeight-b.eventMarginAxis+c/2,e=k.axis.height;for(p=0,l=s.length;p<l;p++){d=s[p];if(b.axisOnTop){d.top=h+e;d.labelTop=h+e+(d.height-d.labelHeight)/2;d.lineTop=h+e+d.height+c/2;h+=d.height+c}else{h-=d.height+c;d.top=h;d.labelTop=h+(d.height-d.labelHeight)/2;d.lineTop=h-c/2}}for(p=0,l=n.length;p<l;p++){r=n[p];d=r.group;if(d){r.top=d.top}}q=true}if(a<b.minHeight){a=b.minHeight}q=q||(a!=k.actualHeight);k.actualHeight=a;return q};links.Timeline.prototype.clearItems=function(){var a=this.renderQueue.hide;AJS.$.each(this.renderedItems,function(c,b){a.push(b)});this.clusterGenerator.clear();this.items=[]};links.Timeline.prototype.repaintItems=function(){var h,g,n,k;var d=false,f=this.dom,o=this.size,m=this,b=this.renderedItems;if(!f.items){f.items={}}var a=f.items.frame;if(!a){a=document.createElement("DIV");a.style.position="relative";f.content.appendChild(a);f.items.frame=a}a.style.left="0px";a.style.top=o.items.top+"px";a.style.height="0px";f.content.removeChild(a);var j=this.renderQueue;var c=[];d=d||(j.show.length>0)||(j.update.length>0)||(j.hide.length>0);while(n=j.show.shift()){n.showDOM(a);n.getImageUrls(c);b.push(n)}while(n=j.update.shift()){n.updateDOM(a);n.getImageUrls(c);k=AJS.$.inArray(n,this.renderedItems);if(k==-1){b.push(n)}}while(n=j.hide.shift()){n.hideDOM(a);k=AJS.$.inArray(n,this.renderedItems);if(k!=-1){b.splice(k,1)}}AJS.$.each(b,function(q,p){p.updatePosition(m)});this.repaintDeleteButton();this.repaintDragAreas();f.content.appendChild(a);if(c.length){var l=function(){m.render()};var e=false;links.imageloader.loadAll(c,l,e)}return d};links.Timeline.prototype.reflowGroups=function(){var f=false,m=this.options,l=this.size,d=this.dom;var j=0;var b=this.groups;var g=this.dom.groups?this.dom.groups.labels:[];for(var e=0,c=b.length;e<c;e++){var k=b[e];var h=g[e];k.labelWidth=h?h.clientWidth:0;k.labelHeight=h?h.clientHeight:0;k.width=k.labelWidth;j=Math.max(j,k.width)}if(m.groupsWidth!==undefined){j=d.groups.frame?d.groups.frame.clientWidth:0}j+=1;var a=m.groupsOnRight?l.frameWidth-j:0;f=f||(l.groupsWidth!==j);f=f||(l.groupsLeft!==a);l.groupsWidth=j;l.groupsLeft=a;return f};links.Timeline.prototype.repaintGroups=function(){var u=this.dom,f=this,b=this.options,n=this.size,w=this.groups;if(u.groups===undefined){u.groups={}}var v=u.groups.labels;if(!v){v=[];u.groups.labels=v}var g=u.groups.labelLines;if(!g){g=[];u.groups.labelLines=g}var o=u.groups.itemLines;if(!o){o=[];u.groups.itemLines=o}var m=u.groups.frame;if(!m){m=document.createElement("DIV");m.className="timeline-groups-axis";m.style.position="absolute";m.style.overflow="hidden";m.style.top="0px";m.style.height="100%";u.frame.appendChild(m);u.groups.frame=m}m.style.left=n.groupsLeft+"px";m.style.width=(b.groupsWidth!==undefined)?b.groupsWidth:n.groupsWidth+"px";if(w.length==0){m.style.display="none"}else{m.style.display=""}var q=v.length,k=w.length;for(var s=0,r=Math.min(q,k);s<r;s++){var h=w[s];var j=v[s];j.innerHTML=this.getGroupName(h);j.style.display=""}for(var s=q;s<k;s++){var h=w[s];var j=document.createElement("DIV");j.className="timeline-groups-text";j.style.position="absolute";if(b.groupsWidth===undefined){j.style.whiteSpace="nowrap"}j.innerHTML=this.getGroupName(h);m.appendChild(j);v[s]=j;var e=document.createElement("DIV");e.className="timeline-axis-grid timeline-axis-grid-minor";e.style.position="absolute";e.style.left="0px";e.style.width="100%";e.style.height="0px";e.style.borderTopStyle="solid";m.appendChild(e);g[s]=e;var d=document.createElement("DIV");d.className="timeline-axis-grid timeline-axis-grid-minor";d.style.position="absolute";d.style.left="0px";d.style.width="100%";d.style.height="0px";d.style.borderTopStyle="solid";u.content.insertBefore(d,u.content.firstChild);o[s]=d}for(var s=k;s<q;s++){var j=v[s],e=g[s],d=o[s];m.removeChild(j);m.removeChild(e);u.content.removeChild(d)}v.splice(k,q-k);g.splice(k,q-k);o.splice(k,q-k);m.style.borderStyle=b.groupsOnRight?"none none none solid":"none solid none none";for(var s=0,r=w.length;s<r;s++){var h=w[s],j=v[s],e=g[s],d=o[s];j.style.top=h.labelTop+"px";e.style.top=h.lineTop+"px";d.style.top=h.lineTop+"px";d.style.width=n.contentWidth+"px"}if(!u.groups.background){var t=document.createElement("DIV");t.className="timeline-axis";t.style.position="absolute";t.style.left="0px";t.style.width="100%";t.style.border="none";m.appendChild(t);u.groups.background=t}u.groups.background.style.top=n.axis.top+"px";u.groups.background.style.height=n.axis.height+"px";if(!u.groups.line){var l=document.createElement("DIV");l.className="timeline-axis";l.style.position="absolute";l.style.left="0px";l.style.width="100%";l.style.height="0px";m.appendChild(l);u.groups.line=l}u.groups.line.style.top=n.axis.line+"px";if(u.groups.frame&&w.length){var p=[];links.imageloader.filterImageUrls(u.groups.frame,p);if(p.length){var c=function(){f.render()};var a=false;links.imageloader.loadAll(p,c,a)}}};links.Timeline.prototype.repaintCurrentTime=function(){var l=this.options,e=this.dom,k=this.size;if(!l.showCurrentTime){if(e.currentTime){e.contentTimelines.removeChild(e.currentTime);delete e.currentTime}return}if(!e.currentTime){var a=document.createElement("DIV");a.className="timeline-currenttime";a.style.position="absolute";a.style.top="0px";a.style.height="100%";e.contentTimelines.appendChild(a);e.currentTime=a}else{e.currentTime.style.height=k.contentHeight+"px"}var b=new Date();var f=new Date(b.valueOf()+this.clientTimeOffset);var h=this.timeToScreen(f);var d=(h>-k.contentWidth&&h<2*k.contentWidth);e.currentTime.style.display=d?"":"none";e.currentTime.style.left=h+"px";e.currentTime.title="Current time: "+f;if(this.currentTimeTimer!=undefined){clearTimeout(this.currentTimeTimer);delete this.currentTimeTimer}var j=this;var g=function(){j.repaintCurrentTime()};var c=1/this.conversion.factor/2;if(c<30){c=30}this.currentTimeTimer=setTimeout(g,c)};links.Timeline.prototype.repaintCustomTime=function(){var c=this.options,g=this.dom,d=this.size;if(!c.showCustomTime){if(g.customTime){g.contentTimelines.removeChild(g.customTime);delete g.customTime}return}if(!g.customTime){var b=document.createElement("DIV");b.className="timeline-customtime";b.style.position="absolute";b.style.top="0px";b.style.height="100%";var e=document.createElement("DIV");e.style.position="relative";e.style.top="0px";e.style.left="-10px";e.style.height="100%";e.style.width="20px";b.appendChild(e);g.contentTimelines.appendChild(b);g.customTime=b;this.customTime=new Date()}var a=this.timeToScreen(this.customTime),f=(a>-d.contentWidth&&a<2*d.contentWidth);g.customTime.style.display=f?"":"none";g.customTime.style.left=a+"px";g.customTime.title="Time: "+this.customTime};links.Timeline.prototype.repaintDeleteButton=function(){var d=this,g=this.dom,f=g.items.frame;var h=g.items.deleteButton;if(!h){h=document.createElement("DIV");h.className="timeline-navigation-delete";h.style.position="absolute";f.appendChild(h);g.items.deleteButton=h}var a=this.selection?this.selection.index:-1,c=this.selection?this.items[a]:undefined;if(c&&c.rendered&&this.isEditable(c)){var b=c.getRight(this),e=c.top;h.style.left=b+"px";h.style.top=e+"px";h.style.display="";f.removeChild(h);f.appendChild(h)}else{h.style.display="none"}};links.Timeline.prototype.repaintDragAreas=function(){var k=this,m=this.options,d=this.dom,a=this.dom.items.frame;var c=d.items.dragLeft;if(!c){c=document.createElement("DIV");c.className="timeline-event-range-drag-left";c.style.position="absolute";a.appendChild(c);d.items.dragLeft=c}var e=d.items.dragRight;if(!e){e=document.createElement("DIV");e.className="timeline-event-range-drag-right";e.style.position="absolute";a.appendChild(e);d.items.dragRight=e}var f=this.selection?this.selection.index:-1,l=this.selection?this.items[f]:undefined;if(l&&l.rendered&&this.isEditable(l)&&(l instanceof links.Timeline.ItemRange)){var b=this.timeToScreen(l.start),h=this.timeToScreen(l.end),g=l.top,j=l.height;c.style.left=b+"px";c.style.top=g+"px";c.style.width=m.dragAreaWidth+"px";c.style.height=j+"px";c.style.display="";a.removeChild(c);a.appendChild(c);e.style.left=(h-m.dragAreaWidth)+"px";e.style.top=g+"px";e.style.width=m.dragAreaWidth+"px";e.style.height=j+"px";e.style.display="";a.removeChild(e);a.appendChild(e)}else{c.style.display="none";e.style.display="none"}};links.Timeline.prototype.repaintNavigation=function(){var l=this,m=this.options,g=this.dom,e=g.frame,f=g.navBar;if(!f){var a=m.showButtonNew&&m.editable;var d=m.showNavigation&&(m.zoomable||m.moveable);if(d||a){f=document.createElement("DIV");f.style.position="absolute";f.className="timeline-navigation";if(m.groupsOnRight){f.style.left="10px"}else{f.style.right="32px"}if(m.axisOnTop){f.style.bottom="10px"}else{f.style.top="10px"}g.navBar=f;g.container.appendChild(f)}if(a){f.addButton=document.createElement("DIV");f.addButton.className="timeline-navigation-new";f.addButton.title=m.CREATE_NEW_EVENT;var j=function(o){links.Timeline.preventDefault(o);links.Timeline.stopPropagation(o);var t=l.size.contentWidth;var s=t/2;var v=l.screenToTime(s-t/10);var n=l.screenToTime(s+t/10);if(m.snapEvents){l.step.snap(v);l.step.snap(n)}var q=m.NEW;var u=l.groups.length?l.groups[0].content:undefined;var r=true;l.addItem({start:v,end:n,content:q,group:u},r);var p=(l.items.length-1);l.selectItem(p);l.applyAdd=true;l.trigger("add");if(l.applyAdd){l.render({animate:false});l.selectItem(p)}else{l.deleteItem(p)}};links.Timeline.addEventListener(f.addButton,"mousedown",j);f.appendChild(f.addButton)}if(a&&d){f.addButton.style.borderRightWidth="1px";f.addButton.style.borderRightStyle="solid"}if(d){if(m.zoomable){f.zoomInButton=document.createElement("DIV");f.zoomInButton.className="timeline-navigation-zoom-in";f.zoomInButton.title=this.options.ZOOM_IN;var c=function(n){links.Timeline.preventDefault(n);links.Timeline.stopPropagation(n);l.zoom(0.4);l.trigger("rangechange");l.trigger("rangechanged")};links.Timeline.addEventListener(f.zoomInButton,"mousedown",c);f.appendChild(f.zoomInButton);f.zoomOutButton=document.createElement("DIV");f.zoomOutButton.className="timeline-navigation-zoom-out";f.zoomOutButton.title=this.options.ZOOM_OUT;var h=function(n){links.Timeline.preventDefault(n);links.Timeline.stopPropagation(n);l.zoom(-0.4);l.trigger("rangechange");l.trigger("rangechanged")};links.Timeline.addEventListener(f.zoomOutButton,"mousedown",h);f.appendChild(f.zoomOutButton)}if(m.moveable){f.moveLeftButton=document.createElement("DIV");f.moveLeftButton.className="timeline-navigation-move-left";f.moveLeftButton.title=this.options.MOVE_LEFT;var k=function(n){links.Timeline.preventDefault(n);links.Timeline.stopPropagation(n);l.move(-0.2);l.trigger("rangechange");l.trigger("rangechanged")};links.Timeline.addEventListener(f.moveLeftButton,"mousedown",k);f.appendChild(f.moveLeftButton);f.moveRightButton=document.createElement("DIV");f.moveRightButton.className="timeline-navigation-move-right";f.moveRightButton.title=this.options.MOVE_RIGHT;var b=function(n){links.Timeline.preventDefault(n);links.Timeline.stopPropagation(n);l.move(0.2);l.trigger("rangechange");l.trigger("rangechanged")};links.Timeline.addEventListener(f.moveRightButton,"mousedown",b);f.appendChild(f.moveRightButton)}}}};links.Timeline.prototype.setCurrentTime=function(b){var a=new Date();this.clientTimeOffset=(b.valueOf()-a.valueOf());this.repaintCurrentTime()};links.Timeline.prototype.getCurrentTime=function(){var a=new Date();return new Date(a.valueOf()+this.clientTimeOffset)};links.Timeline.prototype.setCustomTime=function(a){this.customTime=new Date(a.valueOf());this.repaintCustomTime()};links.Timeline.prototype.getCustomTime=function(){return new Date(this.customTime.valueOf())};links.Timeline.prototype.setScale=function(b,a){this.step.setScale(b,a);this.render()};links.Timeline.prototype.setAutoScale=function(a){this.step.setAutoScale(a);this.render()};links.Timeline.prototype.redraw=function(){this.setData(this.data)};links.Timeline.prototype.checkResize=function(){this.render()};links.Timeline.prototype.isEditable=function(a){if(a){if(a.editable!=undefined){return a.editable}else{return this.options.editable}}return false};links.Timeline.prototype.recalcConversion=function(){this.conversion.offset=this.start.valueOf();this.conversion.factor=this.size.contentWidth/(this.end.valueOf()-this.start.valueOf())};links.Timeline.prototype.screenToTime=function(a){var b=this.conversion;return new Date(a/b.factor+b.offset)};links.Timeline.prototype.timeToScreen=function(b){var a=this.conversion;return(b.valueOf()-a.offset)*a.factor};links.Timeline.prototype.onTouchStart=function(c){var e=this.eventParams,b=this;if(e.touchDown){return}e.touchDown=true;e.zoomed=false;this.onMouseDown(c);if(!e.onTouchMove){e.onTouchMove=function(f){b.onTouchMove(f)};links.Timeline.addEventListener(document,"touchmove",e.onTouchMove)}if(!e.onTouchEnd){e.onTouchEnd=function(f){b.onTouchEnd(f)};links.Timeline.addEventListener(document,"touchend",e.onTouchEnd)}var d=links.Timeline.getTarget(c);var a=this.getItemIndex(d);e.doubleTapStartPrev=e.doubleTapStart;e.doubleTapStart=(new Date()).valueOf();e.doubleTapItemPrev=e.doubleTapItem;e.doubleTapItem=a;links.Timeline.preventDefault(c)};links.Timeline.prototype.onTouchMove=function(d){var g=this.eventParams;if(d.scale&&d.scale!==1){g.zoomed=true}if(!g.zoomed){this.onMouseMove(d)}else{if(this.options.zoomable){g.zoomed=true;var f=d.scale,b=(g.end.valueOf()-g.start.valueOf()),c=b/f,e=c-b,h=new Date(parseInt(g.start.valueOf()-e/2)),a=new Date(parseInt(g.end.valueOf()+e/2));this.setVisibleChartRange(h,a);this.trigger("rangechange")}}links.Timeline.preventDefault(d)};links.Timeline.prototype.onTouchEnd=function(d){var f=this.eventParams;var c=this;f.touchDown=false;if(f.zoomed){this.trigger("rangechanged")}if(f.onTouchMove){links.Timeline.removeEventListener(document,"touchmove",f.onTouchMove);delete f.onTouchMove}if(f.onTouchEnd){links.Timeline.removeEventListener(document,"touchend",f.onTouchEnd);delete f.onTouchEnd}this.onMouseUp(d);var g=500;var a=(new Date()).valueOf();var e=links.Timeline.getTarget(d);var b=this.getItemIndex(e);if(f.doubleTapStartPrev&&(a-f.doubleTapStartPrev)<g&&f.doubleTapItem==f.doubleTapItemPrev){f.touchDown=true;c.onDblClick(d);f.touchDown=false}links.Timeline.preventDefault(d)};links.Timeline.prototype.onMouseDown=function(b){b=b||window.event;var e=this.eventParams,q=this.options,f=this.dom;var p=b.which?(b.which==1):(b.button==1);if(!p&&!e.touchDown){return}e.mouseX=links.Timeline.getPageX(b);e.mouseY=links.Timeline.getPageY(b);e.frameLeft=links.Timeline.getAbsoluteLeft(this.dom.content);e.frameTop=links.Timeline.getAbsoluteTop(this.dom.content);e.previousLeft=0;e.previousOffset=0;e.moved=false;e.start=new Date(this.start.valueOf());e.end=new Date(this.end.valueOf());e.target=links.Timeline.getTarget(b);var d=(f.items&&f.items.dragLeft)?f.items.dragLeft:undefined;var g=(f.items&&f.items.dragRight)?f.items.dragRight:undefined;e.itemDragLeft=(e.target===d);e.itemDragRight=(e.target===g);if(e.itemDragLeft||e.itemDragRight){e.itemIndex=this.selection?this.selection.index:undefined}else{e.itemIndex=this.getItemIndex(e.target)}e.customTime=(e.target===f.customTime||e.target.parentNode===f.customTime)?this.customTime:undefined;e.addItem=(q.editable&&b.ctrlKey);if(e.addItem){var l=e.mouseX-e.frameLeft;var k=e.mouseY-e.frameTop;var n=this.screenToTime(l);if(q.snapEvents){this.step.snap(n)}var a=new Date(n.valueOf());var h=q.NEW;var m=this.getGroupFromHeight(k);this.addItem({start:n,end:a,content:h,group:this.getGroupName(m)});e.itemIndex=(this.items.length-1);this.selectItem(e.itemIndex);e.itemDragRight=true}var o=this.items[e.itemIndex];var c=this.isSelected(e.itemIndex);e.editItem=c&&this.isEditable(o);if(e.editItem){e.itemStart=o.start;e.itemEnd=o.end;e.itemGroup=o.group;e.itemLeft=o.start?this.timeToScreen(o.start):undefined;e.itemRight=o.end?this.timeToScreen(o.end):undefined}else{this.dom.frame.style.cursor="move"}if(!e.touchDown){var j=this;if(!e.onMouseMove){e.onMouseMove=function(r){j.onMouseMove(r)};links.Timeline.addEventListener(document,"mousemove",e.onMouseMove)}if(!e.onMouseUp){e.onMouseUp=function(r){j.onMouseUp(r)};links.Timeline.addEventListener(document,"mouseup",e.onMouseUp)}links.Timeline.preventDefault(b)}};links.Timeline.prototype.onMouseMove=function(w){w=w||window.event;var D=this.eventParams,r=this.size,z=this.dom,e=this.options;var m=links.Timeline.getPageX(w);var k=links.Timeline.getPageY(w);if(D.mouseX==undefined){D.mouseX=m}if(D.mouseY==undefined){D.mouseY=k}var t=m-D.mouseX;var s=k-D.mouseY;if(Math.abs(t)>=1){D.moved=true}if(D.customTime){var o=this.timeToScreen(D.customTime);var q=o+t;this.customTime=this.screenToTime(q);this.repaintCustomTime();this.trigger("timechange")}else{if(D.editItem){this.trigger("moved");var B=this.items[D.itemIndex],f,C;if(D.itemDragLeft){f=D.itemLeft+t;C=D.itemRight;B.start=this.screenToTime(f);if(e.snapEvents){this.step.snap(B.start);f=this.timeToScreen(B.start)}if(f>C){f=C;B.start=this.screenToTime(f)}}else{if(D.itemDragRight){f=D.itemLeft;C=D.itemRight+t;B.end=this.screenToTime(C);if(e.snapEvents){this.step.snap(B.end);C=this.timeToScreen(B.end)}if(C<f){C=f;B.end=this.screenToTime(C)}}else{f=D.itemLeft+t;B.start=this.screenToTime(f);if(e.snapEvents){this.step.snap(B.start);f=this.timeToScreen(B.start)}if(B.end){C=f+(D.itemRight-D.itemLeft);B.end=this.screenToTime(C)}}}B.setPosition(f,C);var u=D.itemDragLeft||D.itemDragRight;if(this.groups.length&&!u){var n=k-D.frameTop;var j=this.getGroupFromHeight(n);if(e.groupsChangeable&&B.group!==j){var g=AJS.$.inArray(B,this.items);this.changeItem(g,{group:this.getGroupName(j)})}else{this.repaintDeleteButton();this.repaintDragAreas()}}else{this.render()}}else{if(e.moveable){var A=(D.end.valueOf()-D.start.valueOf());var E=Math.round((-t)/r.contentWidth*A);var b=new Date(D.start.valueOf()+E);var a=new Date(D.end.valueOf()+E);this.applyRange(b,a);var l=(this.start.valueOf()-b.valueOf());if(l){E+=l}this.recalcConversion();var d=D.previousLeft||0;var v=parseFloat(z.items.frame.style.left)||0;var p=D.previousOffset||0;var c=p+(v-d);var h=-E/A*r.contentWidth+c;z.items.frame.style.left=(h)+"px";D.previousOffset=c;D.previousLeft=parseFloat(z.items.frame.style.left)||h;this.repaintCurrentTime();this.repaintCustomTime();this.repaintAxis();this.trigger("rangechange")}}}links.Timeline.preventDefault(w)};links.Timeline.prototype.onMouseUp=function(d){var e=this.eventParams,a=this.options;d=d||window.event;this.dom.frame.style.cursor="auto";if(e.onMouseMove){links.Timeline.removeEventListener(document,"mousemove",e.onMouseMove);delete e.onMouseMove}if(e.onMouseUp){links.Timeline.removeEventListener(document,"mouseup",e.onMouseUp);delete e.onMouseUp}if(e.customTime){this.trigger("timechanged")}else{if(e.editItem){var c=this.items[e.itemIndex];if(e.moved||e.addItem){this.applyChange=true;this.applyAdd=true;this.updateData(e.itemIndex,{start:c.start,end:c.end});this.trigger(e.addItem?"add":"change");if(e.addItem){if(this.applyAdd){this.updateData(e.itemIndex,{start:c.start,end:c.end,content:c.content,group:this.getGroupName(c.group)})}else{this.deleteItem(e.itemIndex)}}else{if(this.applyChange){this.updateData(e.itemIndex,{start:c.start,end:c.end})}else{delete this.applyChange;delete this.applyAdd;var c=this.items[e.itemIndex],b=c.dom;c.start=e.itemStart;c.end=e.itemEnd;c.group=e.itemGroup;c.setPosition(e.itemLeft,e.itemRight)}}if(this.options.cluster){this.clusterGenerator.updateData()}this.render()}}else{if(!e.moved&&!e.zoomed){if(e.target===this.dom.items.deleteButton){if(this.selection){this.confirmDeleteItem(this.selection.index)}}else{if(a.selectable){if(e.itemIndex!=undefined){if(!this.isSelected(e.itemIndex)){this.selectItem(e.itemIndex);this.trigger("select")}}else{this.unselectItem();this.trigger("select")}}}}else{this.render();if((e.moved&&a.moveable)||(e.zoomed&&a.zoomable)){this.trigger("rangechanged")}}}}};links.Timeline.prototype.onDblClick=function(d){var f=this.eventParams,a=this.options,e=this.dom,b=this.size;d=d||window.event;if(f.itemIndex!=undefined){var c=this.items[f.itemIndex];if(c&&this.isEditable(c)){this.trigger("edit")}}else{if(a.editable){this.trigger("add")}}links.Timeline.preventDefault(d)};links.Timeline.prototype.onMouseWheel=function(c){if(!this.options.zoomable){return}if(!c){c=window.event}var d=0;if(c.wheelDelta){d=c.wheelDelta/120}else{if(c.detail){d=-c.detail/3}}if(d){var b=this;var a=function(){var g=d/5;var f=links.Timeline.getAbsoluteLeft(b.dom.content);var e=links.Timeline.getPageX(c);var h=(e!=undefined&&f!=undefined)?b.screenToTime(e-f):undefined;b.zoom(g,h);b.trigger("rangechange");b.trigger("rangechanged")};a()}links.Timeline.preventDefault(c)};links.Timeline.prototype.zoom=function(g,h){if(h==undefined){h=new Date((this.start.valueOf()+this.end.valueOf())/2)}if(g>=1){g=0.9}if(g<=-1){g=-0.9}if(g<0){g=g/(1+g)}var e=(this.start.valueOf()-h);var d=(this.end.valueOf()-h);var a=new Date(this.start.valueOf()-e*g);var f=new Date(this.end.valueOf()-d*g);var c=(f.valueOf()-a.valueOf());var b=Number(this.options.zoomMin)||10;if(b<10){b=10}if(c>=b){this.applyRange(a,f,h);this.render({animate:this.options.animate&&this.options.animateZoom})}};links.Timeline.prototype.move=function(b){var d=(this.end.valueOf()-this.start.valueOf());var a=new Date(this.start.valueOf()+d*b);var c=new Date(this.end.valueOf()+d*b);this.applyRange(a,c);this.render()};links.Timeline.prototype.applyRange=function(b,e,a){var c=b.valueOf();var n=e.valueOf();var d=(n-c);var q=this.options;var k=1000*60*60*24*365;var h=Number(q.zoomMin)||10;if(h<10){h=10}var p=Number(q.zoomMax)||10000*k;if(p>10000*k){p=10000*k}if(p<h){p=h}var g=q.min?q.min.valueOf():undefined;var m=q.max?q.max.valueOf():undefined;if(g!=undefined&&m!=undefined){if(g>=m){var l=1000*60*60*24;m=g+l}if(p>(m-g)){p=(m-g)}if(h>(m-g)){h=(m-g)}}if(c>=n){n+=1000*60*60*24}if(d<h){var o=(h-d);var j=a?(a.valueOf()-c)/d:0.5;c-=Math.round(o*j);n+=Math.round(o*(1-j))}if(d>p){var o=(d-p);var j=a?(a.valueOf()-c)/d:0.5;c+=Math.round(o*j);n-=Math.round(o*(1-j))}if(g!=undefined){var o=(c-g);if(o<0){c-=o;n-=o}}if(m!=undefined){var o=(m-n);if(o<0){c+=o;n+=o}}this.start=new Date(c);this.end=new Date(n)};links.Timeline.prototype.confirmDeleteItem=function(a){this.applyDelete=true;if(!this.isSelected(a)){this.selectItem(a)}this.trigger("delete");if(this.applyDelete){this.deleteItem(a)}delete this.applyDelete};links.Timeline.prototype.deleteItem=function(a,c){if(a>=this.items.length){throw"Cannot delete row, index out of range"}if(this.selection){if(this.selection.index==a){this.unselectItem()}else{if(this.selection.index>a){this.selection.index--}}}var b=this.items.splice(a,1)[0];this.renderQueue.hide.push(b);if(this.data){if(google&&google.visualization&&this.data instanceof google.visualization.DataTable){this.data.removeRow(a)}else{if(links.Timeline.isArray(this.data)){this.data.splice(a,1)}else{throw"Cannot delete row from data, unknown data type"}}}if(this.options.cluster){this.clusterGenerator.updateData()}if(!c){this.render()}};links.Timeline.prototype.deleteAllItems=function(){this.unselectItem();this.clearItems();this.deleteGroups();if(this.data){if(google&&google.visualization&&this.data instanceof google.visualization.DataTable){this.data.removeRows(0,this.data.getNumberOfRows())}else{if(links.Timeline.isArray(this.data)){this.data.splice(0,this.data.length)}else{throw"Cannot delete row from data, unknown data type"}}}if(this.options.cluster){this.clusterGenerator.updateData()}this.render()};links.Timeline.prototype.getGroupFromHeight=function(b){var c,d,a=this.groups;if(a.length){if(this.options.axisOnTop){for(c=a.length-1;c>=0;c--){d=a[c];if(b>d.top){return d}}}else{for(c=0;c<a.length;c++){d=a[c];if(b>d.top){return d}}}return d}return undefined};links.Timeline.Item=function(c,a){if(c){this.start=c.start;this.end=c.end;this.content=c.content;this.className=c.className;this.editable=c.editable;this.group=c.group}this.top=0;this.left=0;this.width=0;this.height=0;this.lineWidth=0;this.dotWidth=0;this.dotHeight=0;this.rendered=false;if(a){for(var b in a){if(a.hasOwnProperty(b)){this[b]=a[b]}}}};links.Timeline.Item.prototype.reflow=function(){return false};links.Timeline.Item.prototype.getImageUrls=function(a){if(this.dom){links.imageloader.filterImageUrls(this.dom,a)}};links.Timeline.Item.prototype.select=function(){};links.Timeline.Item.prototype.unselect=function(){};links.Timeline.Item.prototype.createDOM=function(){};links.Timeline.Item.prototype.showDOM=function(a){};links.Timeline.Item.prototype.hideDOM=function(a){};links.Timeline.Item.prototype.updateDOM=function(){};links.Timeline.Item.prototype.updatePosition=function(a){};links.Timeline.Item.prototype.isRendered=function(){return this.rendered};links.Timeline.Item.prototype.isVisible=function(b,a){return false};links.Timeline.Item.prototype.setPosition=function(b,a){};links.Timeline.Item.prototype.getRight=function(a){return 0};links.Timeline.Item.prototype.getWidth=function(a){return this.width||0};links.Timeline.ItemBox=function(b,a){links.Timeline.Item.call(this,b,a)};links.Timeline.ItemBox.prototype=new links.Timeline.Item();links.Timeline.ItemBox.prototype.reflow=function(){var e=this.dom,c=e.dot.offsetHeight,d=e.dot.offsetWidth,a=e.line.offsetWidth,b=((this.dotHeight!=c)||(this.dotWidth!=d)||(this.lineWidth!=a));this.dotHeight=c;this.dotWidth=d;this.lineWidth=a;return b};links.Timeline.ItemBox.prototype.select=function(){var a=this.dom;links.Timeline.addClassName(a,"timeline-event-selected");links.Timeline.addClassName(a.line,"timeline-event-selected");links.Timeline.addClassName(a.dot,"timeline-event-selected")};links.Timeline.ItemBox.prototype.unselect=function(){var a=this.dom;links.Timeline.removeClassName(a,"timeline-event-selected");links.Timeline.removeClassName(a.line,"timeline-event-selected");links.Timeline.removeClassName(a.dot,"timeline-event-selected")};links.Timeline.ItemBox.prototype.createDOM=function(){var c=document.createElement("DIV");c.style.position="absolute";c.style.left=this.left+"px";c.style.top=this.top+"px";var b=document.createElement("DIV");b.className="timeline-event-content";b.innerHTML=this.content;c.appendChild(b);var d=document.createElement("DIV");d.style.position="absolute";d.style.width="0px";c.line=d;var a=document.createElement("DIV");a.style.position="absolute";a.style.width="0px";a.style.height="0px";c.dot=a;this.dom=c;this.updateDOM();return c};links.Timeline.ItemBox.prototype.showDOM=function(a){var b=this.dom;if(!b){b=this.createDOM()}if(b.parentNode!=a){if(b.parentNode){this.hideDOM()}a.appendChild(b);a.insertBefore(b.line,a.firstChild);a.appendChild(b.dot);this.rendered=true}};links.Timeline.ItemBox.prototype.hideDOM=function(){var c=this.dom;if(c){var b=c.parentNode;if(b){var a=function(d){if(d&&d.parentNode){d.parentNode.removeChild(d)}};a(c.line);a(c.dot);a(c);this.rendered=false}}};links.Timeline.ItemBox.prototype.updateDOM=function(){var b=this.dom;if(b){var c=b.line;var a=b.dot;b.firstChild.innerHTML=this.content;b.className="timeline-event timeline-event-box";c.className="timeline-event timeline-event-line";a.className="timeline-event timeline-event-dot";if(this.isCluster){links.Timeline.addClassName(b,"timeline-event-cluster");links.Timeline.addClassName(c,"timeline-event-cluster");links.Timeline.addClassName(a,"timeline-event-cluster")}if(this.className){links.Timeline.addClassName(b,this.className);links.Timeline.addClassName(c,this.className);links.Timeline.addClassName(a,this.className)}}};links.Timeline.ItemBox.prototype.updatePosition=function(g){var e=this.dom;if(e){var c=g.timeToScreen(this.start),f=g.options.axisOnTop,a=g.size.axis.top,d=g.size.axis.height,h=(g.options.box&&g.options.box.align)?g.options.box.align:undefined;e.style.top=this.top+"px";if(h=="right"){e.style.left=(c-this.width)+"px"}else{if(h=="left"){e.style.left=(c)+"px"}else{e.style.left=(c-this.width/2)+"px"}}var j=e.line;var b=e.dot;j.style.left=(c-this.lineWidth/2)+"px";b.style.left=(c-this.dotWidth/2)+"px";if(f){j.style.top=d+"px";j.style.height=Math.max(this.top-d,0)+"px";b.style.top=(d-this.dotHeight/2)+"px"}else{j.style.top=(this.top+this.height)+"px";j.style.height=Math.max(a-this.top-this.height,0)+"px";b.style.top=(a-this.dotHeight/2)+"px"}}};links.Timeline.ItemBox.prototype.isVisible=function(b,a){if(this.cluster){return false}return(this.start>b)&&(this.start<a)};links.Timeline.ItemBox.prototype.setPosition=function(b,a){var c=this.dom;c.style.left=(b-this.width/2)+"px";c.line.style.left=(b-this.lineWidth/2)+"px";c.dot.style.left=(b-this.dotWidth/2)+"px";if(this.group){this.top=this.group.top;c.style.top=this.top+"px"}};links.Timeline.ItemBox.prototype.getRight=function(c){var a=(c.options.box&&c.options.box.align)?c.options.box.align:undefined;var d=c.timeToScreen(this.start);var b;if(a=="right"){b=d}else{if(a=="left"){b=(d+this.width)}else{b=(d+this.width/2)}}return b};links.Timeline.ItemRange=function(b,a){links.Timeline.Item.call(this,b,a)};links.Timeline.ItemRange.prototype=new links.Timeline.Item();links.Timeline.ItemRange.prototype.select=function(){var a=this.dom;links.Timeline.addClassName(a,"timeline-event-selected")};links.Timeline.ItemRange.prototype.unselect=function(){var a=this.dom;links.Timeline.removeClassName(a,"timeline-event-selected")};links.Timeline.ItemRange.prototype.createDOM=function(){var b=document.createElement("DIV");b.style.position="absolute";var a=document.createElement("DIV");a.className="timeline-event-content";b.appendChild(a);this.dom=b;this.updateDOM();return b};links.Timeline.ItemRange.prototype.showDOM=function(a){var b=this.dom;if(!b){b=this.createDOM()}if(b.parentNode!=a){if(b.parentNode){this.hideDOM()}a.appendChild(b);this.rendered=true}};links.Timeline.ItemRange.prototype.hideDOM=function(){var a=this.dom;if(a){if(a.parentNode){a.parentNode.removeChild(a)}this.rendered=false}};links.Timeline.ItemRange.prototype.updateDOM=function(){var a=this.dom;if(a){a.firstChild.innerHTML=this.content;a.className="timeline-event timeline-event-range";if(this.isCluster){links.Timeline.addClassName(a,"timeline-event-cluster")}if(this.className){links.Timeline.addClassName(a,this.className)}}};links.Timeline.ItemRange.prototype.updatePosition=function(c){var e=this.dom;if(e){var a=c.size.contentWidth,d=c.timeToScreen(this.start),b=c.timeToScreen(this.end);if(d<-a){d=-a}if(b>2*a){b=2*a}e.style.top=this.top+"px";e.style.left=d+"px";e.style.width=Math.max(b-d,1)+"px"}};links.Timeline.ItemRange.prototype.isVisible=function(b,a){if(this.cluster){return false}return(this.end>b)&&(this.start<a)};links.Timeline.ItemRange.prototype.setPosition=function(b,a){var c=this.dom;c.style.left=b+"px";c.style.width=(a-b)+"px";if(this.group){this.top=this.group.top;c.style.top=this.top+"px"}};links.Timeline.ItemRange.prototype.getRight=function(a){return a.timeToScreen(this.end)};links.Timeline.ItemRange.prototype.getWidth=function(a){return a.timeToScreen(this.end)-a.timeToScreen(this.start)};links.Timeline.ItemDot=function(b,a){links.Timeline.Item.call(this,b,a)};links.Timeline.ItemDot.prototype=new links.Timeline.Item();links.Timeline.ItemDot.prototype.reflow=function(){var e=this.dom,c=e.dot.offsetHeight,d=e.dot.offsetWidth,b=e.content.offsetHeight,a=((this.dotHeight!=c)||(this.dotWidth!=d)||(this.contentHeight!=b));this.dotHeight=c;this.dotWidth=d;this.contentHeight=b;return a};links.Timeline.ItemDot.prototype.select=function(){var a=this.dom;links.Timeline.addClassName(a,"timeline-event-selected")};links.Timeline.ItemDot.prototype.unselect=function(){var a=this.dom;links.Timeline.removeClassName(a,"timeline-event-selected")};links.Timeline.ItemDot.prototype.createDOM=function(){var c=document.createElement("DIV");c.style.position="absolute";var b=document.createElement("DIV");b.className="timeline-event-content";c.appendChild(b);var a=document.createElement("DIV");a.style.position="absolute";a.style.width="0px";a.style.height="0px";c.appendChild(a);c.content=b;c.dot=a;this.dom=c;this.updateDOM();return c};links.Timeline.ItemDot.prototype.showDOM=function(a){var b=this.dom;if(!b){b=this.createDOM()}if(b.parentNode!=a){if(b.parentNode){this.hideDOM()}a.appendChild(b);this.rendered=true}};links.Timeline.ItemDot.prototype.hideDOM=function(){var a=this.dom;if(a){if(a.parentNode){a.parentNode.removeChild(a)}this.rendered=false}};links.Timeline.ItemDot.prototype.updateDOM=function(){if(this.dom){var b=this.dom;var a=b.dot;b.firstChild.innerHTML=this.content;a.className="timeline-event timeline-event-dot";if(this.isCluster){links.Timeline.addClassName(b,"timeline-event-cluster");links.Timeline.addClassName(a,"timeline-event-cluster")}if(this.className){links.Timeline.addClassName(b,this.className);links.Timeline.addClassName(a,this.className)}}};links.Timeline.ItemDot.prototype.updatePosition=function(a){var c=this.dom;if(c){var b=a.timeToScreen(this.start);c.style.top=this.top+"px";c.style.left=(b-this.dotWidth/2)+"px";c.content.style.marginLeft=(1.5*this.dotWidth)+"px";c.dot.style.top=((this.height-this.dotHeight)/2)+"px"}};links.Timeline.ItemDot.prototype.isVisible=function(b,a){if(this.cluster){return false}return(this.start>b)&&(this.start<a)};links.Timeline.ItemDot.prototype.setPosition=function(b,a){var c=this.dom;c.style.left=(b-this.dotWidth/2)+"px";if(this.group){this.top=this.group.top;c.style.top=this.top+"px"}};links.Timeline.ItemDot.prototype.getRight=function(a){return a.timeToScreen(this.start)+this.width};links.Timeline.prototype.getItem=function(a){if(a>=this.items.length){throw"Cannot get item, index out of range"}var c=this.items[a];var b={};b.start=new Date(c.start.valueOf());if(c.end){b.end=new Date(c.end.valueOf())}b.content=c.content;if(c.group){b.group=this.getGroupName(c.group)}if("className" in c){b.className=this.getGroupName(c.className)}if(c.hasOwnProperty("editable")&&(typeof c.editable!="undefined")){b.editable=c.editable}return b};links.Timeline.prototype.addItem=function(a,b){var c=[a];this.addItems(c,b)};links.Timeline.prototype.addItems=function(d,c){var b=this,a=this.items;AJS.$.each(d,function(g,e){var f=a.length;a.push(b.createItem(e));b.updateData(f,e)});if(this.options.cluster){this.clusterGenerator.updateData()}if(!c){this.render({animate:false})}};links.Timeline.prototype.createItem=function(a){var c=a.end?"range":this.options.style;var e={start:a.start,end:a.end,content:a.content,className:a.className,editable:a.editable,group:this.getGroup(a.group)};var d,b=this.options;if(b.axisOnTop){d=this.size.axis.height+b.eventMarginAxis+b.eventMargin/2}else{d=this.size.contentHeight-b.eventMarginAxis-b.eventMargin/2}if(c in this.itemTypes){return new this.itemTypes[c](e,{top:d})}console.log('ERROR: Unknown event style "'+c+'"');return new links.Timeline.Item(e,{top:d})};links.Timeline.prototype.changeItem=function(b,a,d){var e=this.items[b];if(!e){throw"Cannot change item, index out of range"}var c=this.createItem({start:a.hasOwnProperty("start")?a.start:e.start,end:a.hasOwnProperty("end")?a.end:e.end,content:a.hasOwnProperty("content")?a.content:e.content,group:a.hasOwnProperty("group")?a.group:this.getGroupName(e.group),className:a.hasOwnProperty("className")?a.className:e.className,editable:a.hasOwnProperty("editable")?a.editable:e.editable});this.items[b]=c;this.renderQueue.hide.push(e);this.renderQueue.show.push(c);this.updateData(b,a);if(this.options.cluster){this.clusterGenerator.updateData()}if(!d){this.render({animate:false});c.select()}};links.Timeline.prototype.deleteGroups=function(){this.groups=[];this.groupIndexes={}};links.Timeline.prototype.getGroup=function(g){var b=this.groups,c=this.groupIndexes,e=undefined;var f=c[g];if(f==undefined&&g!=undefined){e={content:g,labelTop:0,lineTop:0};b.push(e);b=b.sort(function(j,h){if(j.content>h.content){return 1}if(j.content<h.content){return -1}return 0});for(var d=0,a=b.length;d<a;d++){c[b[d].content]=d}}else{e=b[f]}return e};links.Timeline.prototype.getGroupName=function(a){return a?a.content:undefined};links.Timeline.prototype.cancelChange=function(){this.applyChange=false};links.Timeline.prototype.cancelDelete=function(){this.applyDelete=false};links.Timeline.prototype.cancelAdd=function(){this.applyAdd=false};links.Timeline.prototype.setSelection=function(g,h){if(g!=undefined&&g.length>0){if(g[0].row!=undefined){var e=g[0].row;if(this.items[e]){var j=this.items[e];this.selectItem(e);var a=j.start;var c=j.end;var k;if(c!=undefined){k=(c.valueOf()+a.valueOf())/2}else{k=a.valueOf()}var f=(this.end.valueOf()-this.start.valueOf()),d=new Date(k-f/2),b=new Date(k+f/2);if(!h){this.setVisibleChartRange(d,b)}return true}}}else{this.unselectItem()}return false};links.Timeline.prototype.getSelection=function(){var a=[];if(this.selection){a.push({row:this.selection.index})}return a};links.Timeline.prototype.selectItem=function(a){this.unselectItem();this.selection=undefined;if(this.items[a]!=undefined){var c=this.items[a],b=c.dom;this.selection={index:a};if(c&&c.dom){if(this.isEditable(c)){c.dom.style.cursor="move"}c.select()}this.repaintDeleteButton();this.repaintDragAreas()}};links.Timeline.prototype.isSelected=function(a){return(this.selection&&this.selection.index==a)};links.Timeline.prototype.unselectItem=function(){if(this.selection){var b=this.items[this.selection.index];if(b&&b.dom){var a=b.dom;a.style.cursor="";b.unselect()}this.selection=undefined;this.repaintDeleteButton();this.repaintDragAreas()}};links.Timeline.prototype.stackItems=function(b){if(this.groups.length>0){return}if(b==undefined){b=false}var a=this.stack;if(!a){a={};this.stack=a}a.sortedItems=this.stackOrder(this.renderedItems);a.finalItems=this.stackCalculateFinal(a.sortedItems);if(b||a.timer){var d=this;var c=function(){var e=d.stackMoveOneStep(a.sortedItems,a.finalItems);d.repaint();if(!e){a.timer=setTimeout(c,30)}else{delete a.timer}};if(!a.timer){a.timer=setTimeout(c,30)}}else{this.stackMoveToFinal(a.sortedItems,a.finalItems)}};links.Timeline.prototype.stackCancelAnimation=function(){if(this.stack&&this.stack.timer){clearTimeout(this.stack.timer);delete this.stack.timer}};links.Timeline.prototype.stackOrder=function(a){var c=a.concat([]);var b=this.options.customStackOrder&&(typeof this.options.customStackOrder==="function")?this.options.customStackOrder:function(e,d){if((e instanceof links.Timeline.ItemRange)&&!(d instanceof links.Timeline.ItemRange)){return -1}if(!(e instanceof links.Timeline.ItemRange)&&(d instanceof links.Timeline.ItemRange)){return 1}result=(e.start-d.start);if(!result){result=(d.width-e.width)}if(!result){result=(d.bottom-e.bottom)}return result};c.sort(b);return c};links.Timeline.prototype.stackCalculateFinal=function(l){var p,o,j=this.size,d=j.axis.top,g=j.axis.height,a=this.options,t=a.axisOnTop,c=a.eventMargin,n=a.eventMarginAxis,f=[];for(p=0,o=l.length;p<o;p++){var r=l[p],h,e,k=r.height,m=r.getWidth(this),s=r.getRight(this),b=s-m;if(t){h=g+n+c/2}else{h=d-k-n-c/2}e=h+k;f[p]={left:b,top:h,right:s,bottom:e,height:k,item:r}}if(this.options.stackEvents){for(p=0,o=f.length;p<o;p++){var u=f[p];var q=null;do{q=this.stackItemsCheckOverlap(f,p,0,p-1);if(q!=null){if(t){u.top=q.top+q.height+c}else{u.top=q.top-u.height-c}u.bottom=u.top+u.height}}while(q)}}return f};links.Timeline.prototype.stackMoveOneStep=function(e,j){var c=true;for(i=0,iMax=j.length;i<iMax;i++){var d=j[i],k=d.item;var h=parseInt(k.top);var f=parseInt(d.top);var g=(f-h);if(g){var a=(f==h)?0:((f>h)?1:-1);if(Math.abs(g)>4){a=g/4}var b=parseInt(h+a);if(b!=f){c=false}k.top=b;k.bottom=k.top+k.height}else{k.top=d.top;k.bottom=d.bottom}k.left=d.left;k.right=d.right}return c};links.Timeline.prototype.stackMoveToFinal=function(a,b){for(i=0,iMax=b.length;i<iMax;i++){var d=b[i],c=d.item;c.left=d.left;c.top=d.top;c.right=d.right;c.bottom=d.bottom}};links.Timeline.prototype.stackItemsCheckOverlap=function(h,a,g,f){var b=this.options.eventMargin,j=this.collision;var e=h[a];for(var c=f;c>=g;c--){var d=h[c];if(j(e,d,b)){if(c!=a){return d}}}return undefined};links.Timeline.prototype.collision=function(b,a,c){if(c==undefined){c=0}return(b.left-c<a.right&&b.right+c>a.left&&b.top-c<a.bottom&&b.bottom+c>a.top)};links.Timeline.prototype.trigger=function(d){var c=null,b,a;switch(d){case"rangechange":case"rangechanged":c={start:new Date(this.start.valueOf()),end:new Date(this.end.valueOf())};break;case"timechange":case"timechanged":c={time:new Date(this.customTime.valueOf())};break;case"add":b=this.eventParams.mouseX-links.Timeline.getAbsoluteLeft(this.dom.content);a=this.screenToTime(b);c={start:a};break}links.events.trigger(this,d,c);if(google&&google.visualization){google.visualization.events.trigger(this,d,c)}};links.Timeline.prototype.clusterItems=function(){if(!this.options.cluster){return}var b=this.clusterGenerator.getClusters(this.conversion.factor);if(this.clusters!=b){var a=this.renderQueue;if(this.clusters){AJS.$.each(this.clusters,function(d,c){a.hide.push(c);AJS.$.each(c.items,function(f,e){e.cluster=undefined})})}AJS.$.each(b,function(d,c){AJS.$.each(c.items,function(f,e){e.cluster=c})});this.clusters=b}};links.Timeline.prototype.filterItems=function(){var a=this.renderQueue,d=(this.end-this.start),e=new Date(this.start.valueOf()-d),b=new Date(this.end.valueOf()+d);function c(f){AJS.$.each(f,function(h,g){var k=g.rendered;var j=g.isVisible(e,b);if(k!=j){if(k){a.hide.push(g)}if(j&&AJS.$.inArray(g,a.show)==-1){a.show.push(g)}}})}c(this.items);if(this.clusters){c(this.clusters)}};links.Timeline.ClusterGenerator=function(a){this.timeline=a;this.clear()};links.Timeline.ClusterGenerator.prototype.clear=function(){this.items=[];this.groups={};this.clearCache()};links.Timeline.ClusterGenerator.prototype.clearCache=function(){this.cache={};this.cacheLevel=-1;this.cache[this.cacheLevel]=[]};links.Timeline.ClusterGenerator.prototype.setData=function(a,b){this.items=a||[];this.dataChanged=true;this.applyOnChangedLevel=true;if(b&&b.applyOnChangedLevel){this.applyOnChangedLevel=b.applyOnChangedLevel}};links.Timeline.ClusterGenerator.prototype.updateData=function(){this.dataChanged=true;this.applyOnChangedLevel=false};links.Timeline.ClusterGenerator.prototype.filterData=function(){var b=this.items||[];var a={};this.groups=a;AJS.$.each(b,function(e,d){var g=d.group?d.group.content:"";var f=a[g];if(!f){f=[];a[g]=f}f.push(d);if(d.start){if(d.end){d.center=(d.start.valueOf()+d.end.valueOf())/2}else{d.center=d.start.valueOf()}}});for(var c in a){if(a.hasOwnProperty(c)){a[c].sort(function(e,d){return(e.center-d.center)})}}this.dataChanged=false};links.Timeline.ClusterGenerator.prototype.getClusters=function(K){var a=-1,b=2,x=0,H=5;if(K>0){a=Math.round(Math.log(100/K)/Math.log(b));x=Math.pow(b,a);if(this.timeline.groups&&this.timeline.groups.length){x*=4}}if(this.dataChanged){var w=(a!=this.cacheLevel);var D=this.applyOnChangedLevel?w:true;if(D){this.clearCache();this.filterData()}}this.cacheLevel=a;var h=this.cache[a];if(!h){h=[];for(var q in this.groups){if(this.groups.hasOwnProperty(q)){var r=this.groups[q];var z=r.length;var G=0;while(G<z){var J=r[G];var v=1;var E=G-1;while(E>=0&&(J.center-r[E].center)<x/2){if(!r[E].cluster){v++}E--}var C=G+1;while(C<r.length&&(r[C].center-J.center)<x/2){v++;C++}var A=h.length-1;while(A>=0&&(J.center-h[A].center)<x/2){if(J.group==h[A].group){v++}A--}if(v>H){var n=v-H+1;var d=[];var t=undefined;var y=undefined;var F=undefined;var f=false;var g=0;var u=G;while(d.length<n&&u<r.length){var s=r[u];var e=s.start.valueOf();var c=s.end?s.end.valueOf():s.start.valueOf();d.push(s);if(g){t=(g/(g+1))*t+(1/(g+1))*s.center}else{t=s.center}y=(y!=undefined)?Math.min(y,e):e;F=(F!=undefined)?Math.max(F,c):c;f=f||(s instanceof links.Timeline.ItemRange);g++;u++}var I;var L="Cluster containing "+g+" events. Zoom in to see the individual events.";var B='<div title="'+L+'">'+g+" events</div>";var o=J.group?J.group.content:undefined;if(f){I=this.timeline.createItem({start:new Date(y),end:new Date(F),content:B,group:o})}else{I=this.timeline.createItem({start:new Date(t),content:B,group:o})}I.isCluster=true;I.items=d;AJS.$.each(I.items,function(k,j){j.cluster=I});h.push(I);G+=n}else{delete J.cluster;G+=1}}}}this.cache[a]=h}return h};links.events=links.events||{listeners:[],indexOf:function(b){var d=this.listeners;for(var c=0,a=this.listeners.length;c<a;c++){var e=d[c];if(e&&e.object==b){return c}}return -1},addListener:function(b,d,f){var a=this.indexOf(b);var e=this.listeners[a];if(!e){e={object:b,events:{}};this.listeners.push(e)}var c=e.events[d];if(!c){c=[];e.events[d]=c}if(AJS.$.inArray(f,c)==-1){c.push(f)}},removeListener:function(c,a,j){var f=this.indexOf(c);var b=this.listeners[f];if(b){var h=b.events[a];if(h){var f=AJS.$.inArray(j,h);if(f!=-1){h.splice(f,1)}if(h.length==0){delete b.events[a]}}var d=0;var k=b.events;for(var g in k){if(k.hasOwnProperty(g)){d++}}if(d==0){delete this.listeners[f]}}},removeAllListeners:function(){this.listeners=[]},trigger:function(c,g,e){var b=this.indexOf(c);var h=this.listeners[b];if(h){var f=h.events[g];if(f){for(var d=0,a=f.length;d<a;d++){f[d](e)}}}}};links.Timeline.StepDate=function(c,a,b){this.current=new Date();this._start=new Date();this._end=new Date();this.autoScale=true;this.scale=links.Timeline.StepDate.SCALE.DAY;this.step=1;this.setRange(c,a,b)};links.Timeline.StepDate.SCALE={MILLISECOND:1,SECOND:2,MINUTE:3,HOUR:4,DAY:5,WEEKDAY:6,MONTH:7,YEAR:8};links.Timeline.StepDate.prototype.setRange=function(c,a,b){if(!(c instanceof Date)||!(a instanceof Date)){return}this._start=(c!=undefined)?new Date(c.valueOf()):new Date();this._end=(a!=undefined)?new Date(a.valueOf()):new Date();if(this.autoScale){this.setMinimumStep(b)}};links.Timeline.StepDate.prototype.start=function(){this.current=new Date(this._start.valueOf());this.roundToMinor()};links.Timeline.StepDate.prototype.roundToMinor=function(){switch(this.scale){case links.Timeline.StepDate.SCALE.YEAR:this.current.setFullYear(this.step*Math.floor(this.current.getFullYear()/this.step));this.current.setMonth(0);case links.Timeline.StepDate.SCALE.MONTH:this.current.setDate(1);case links.Timeline.StepDate.SCALE.DAY:case links.Timeline.StepDate.SCALE.WEEKDAY:this.current.setHours(0);case links.Timeline.StepDate.SCALE.HOUR:this.current.setMinutes(0);case links.Timeline.StepDate.SCALE.MINUTE:this.current.setSeconds(0);case links.Timeline.StepDate.SCALE.SECOND:this.current.setMilliseconds(0)}if(this.step!=1){switch(this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:this.current.setMilliseconds(this.current.getMilliseconds()-this.current.getMilliseconds()%this.step);break;case links.Timeline.StepDate.SCALE.SECOND:this.current.setSeconds(this.current.getSeconds()-this.current.getSeconds()%this.step);break;case links.Timeline.StepDate.SCALE.MINUTE:this.current.setMinutes(this.current.getMinutes()-this.current.getMinutes()%this.step);break;case links.Timeline.StepDate.SCALE.HOUR:this.current.setHours(this.current.getHours()-this.current.getHours()%this.step);break;case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:this.current.setDate((this.current.getDate()-1)-(this.current.getDate()-1)%this.step+1);break;case links.Timeline.StepDate.SCALE.MONTH:this.current.setMonth(this.current.getMonth()-this.current.getMonth()%this.step);break;case links.Timeline.StepDate.SCALE.YEAR:this.current.setFullYear(this.current.getFullYear()-this.current.getFullYear()%this.step);break;default:break}}};links.Timeline.StepDate.prototype.end=function(){return(this.current.valueOf()>this._end.valueOf())};links.Timeline.StepDate.prototype.next=function(){var b=this.current.valueOf();if(this.current.getMonth()<6){switch(this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:this.current=new Date(this.current.valueOf()+this.step);break;case links.Timeline.StepDate.SCALE.SECOND:this.current=new Date(this.current.valueOf()+this.step*1000);break;case links.Timeline.StepDate.SCALE.MINUTE:this.current=new Date(this.current.valueOf()+this.step*1000*60);break;case links.Timeline.StepDate.SCALE.HOUR:this.current=new Date(this.current.valueOf()+this.step*1000*60*60);var a=this.current.getHours();this.current.setHours(a-(a%this.step));break;case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:this.current.setDate(this.current.getDate()+this.step);break;case links.Timeline.StepDate.SCALE.MONTH:this.current.setMonth(this.current.getMonth()+this.step);break;case links.Timeline.StepDate.SCALE.YEAR:this.current.setFullYear(this.current.getFullYear()+this.step);break;default:break}}else{switch(this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:this.current=new Date(this.current.valueOf()+this.step);break;case links.Timeline.StepDate.SCALE.SECOND:this.current.setSeconds(this.current.getSeconds()+this.step);break;case links.Timeline.StepDate.SCALE.MINUTE:this.current.setMinutes(this.current.getMinutes()+this.step);break;case links.Timeline.StepDate.SCALE.HOUR:this.current.setHours(this.current.getHours()+this.step);break;case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:this.current.setDate(this.current.getDate()+this.step);break;case links.Timeline.StepDate.SCALE.MONTH:this.current.setMonth(this.current.getMonth()+this.step);break;case links.Timeline.StepDate.SCALE.YEAR:this.current.setFullYear(this.current.getFullYear()+this.step);break;default:break}}if(this.step!=1){switch(this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:if(this.current.getMilliseconds()<this.step){this.current.setMilliseconds(0)}break;case links.Timeline.StepDate.SCALE.SECOND:if(this.current.getSeconds()<this.step){this.current.setSeconds(0)}break;case links.Timeline.StepDate.SCALE.MINUTE:if(this.current.getMinutes()<this.step){this.current.setMinutes(0)}break;case links.Timeline.StepDate.SCALE.HOUR:if(this.current.getHours()<this.step){this.current.setHours(0)}break;case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:if(this.current.getDate()<this.step+1){this.current.setDate(1)}break;case links.Timeline.StepDate.SCALE.MONTH:if(this.current.getMonth()<this.step){this.current.setMonth(0)}break;case links.Timeline.StepDate.SCALE.YEAR:break;default:break}}if(this.current.valueOf()==b){this.current=new Date(this._end.valueOf())}};links.Timeline.StepDate.prototype.getCurrent=function(){return this.current};links.Timeline.StepDate.prototype.setScale=function(b,a){this.scale=b;if(a>0){this.step=a}this.autoScale=false};links.Timeline.StepDate.prototype.setAutoScale=function(a){this.autoScale=a};links.Timeline.StepDate.prototype.setMinimumStep=function(f){if(f==undefined){return}var b=(1000*60*60*24*30*12);var a=(1000*60*60*24*30);var e=(1000*60*60*24);var g=(1000*60*60);var d=(1000*60);var h=(1000);var c=(1);if(b*1000>f){this.scale=links.Timeline.StepDate.SCALE.YEAR;this.step=1000}if(b*500>f){this.scale=links.Timeline.StepDate.SCALE.YEAR;this.step=500}if(b*100>f){this.scale=links.Timeline.StepDate.SCALE.YEAR;this.step=100}if(b*50>f){this.scale=links.Timeline.StepDate.SCALE.YEAR;this.step=50}if(b*10>f){this.scale=links.Timeline.StepDate.SCALE.YEAR;this.step=10}if(b*5>f){this.scale=links.Timeline.StepDate.SCALE.YEAR;this.step=5}if(b>f){this.scale=links.Timeline.StepDate.SCALE.YEAR;this.step=1}if(a*3>f){this.scale=links.Timeline.StepDate.SCALE.MONTH;this.step=3}if(a>f){this.scale=links.Timeline.StepDate.SCALE.MONTH;this.step=1}if(e*5>f){this.scale=links.Timeline.StepDate.SCALE.DAY;this.step=5}if(e*2>f){this.scale=links.Timeline.StepDate.SCALE.DAY;this.step=2}if(e>f){this.scale=links.Timeline.StepDate.SCALE.DAY;this.step=1}if(e/2>f){this.scale=links.Timeline.StepDate.SCALE.WEEKDAY;this.step=1}if(g*4>f){this.scale=links.Timeline.StepDate.SCALE.HOUR;this.step=4}if(g>f){this.scale=links.Timeline.StepDate.SCALE.HOUR;this.step=1}if(d*15>f){this.scale=links.Timeline.StepDate.SCALE.MINUTE;this.step=15}if(d*10>f){this.scale=links.Timeline.StepDate.SCALE.MINUTE;this.step=10}if(d*5>f){this.scale=links.Timeline.StepDate.SCALE.MINUTE;this.step=5}if(d>f){this.scale=links.Timeline.StepDate.SCALE.MINUTE;this.step=1}if(h*15>f){this.scale=links.Timeline.StepDate.SCALE.SECOND;this.step=15}if(h*10>f){this.scale=links.Timeline.StepDate.SCALE.SECOND;this.step=10}if(h*5>f){this.scale=links.Timeline.StepDate.SCALE.SECOND;this.step=5}if(h>f){this.scale=links.Timeline.StepDate.SCALE.SECOND;this.step=1}if(c*200>f){this.scale=links.Timeline.StepDate.SCALE.MILLISECOND;this.step=200}if(c*100>f){this.scale=links.Timeline.StepDate.SCALE.MILLISECOND;this.step=100}if(c*50>f){this.scale=links.Timeline.StepDate.SCALE.MILLISECOND;this.step=50}if(c*10>f){this.scale=links.Timeline.StepDate.SCALE.MILLISECOND;this.step=10}if(c*5>f){this.scale=links.Timeline.StepDate.SCALE.MILLISECOND;this.step=5}if(c>f){this.scale=links.Timeline.StepDate.SCALE.MILLISECOND;this.step=1}};links.Timeline.StepDate.prototype.snap=function(a){if(this.scale==links.Timeline.StepDate.SCALE.YEAR){var b=a.getFullYear()+Math.round(a.getMonth()/12);a.setFullYear(Math.round(b/this.step)*this.step);a.setMonth(0);a.setDate(0);a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0)}else{if(this.scale==links.Timeline.StepDate.SCALE.MONTH){if(a.getDate()>15){a.setDate(1);a.setMonth(a.getMonth()+1)}else{a.setDate(1)}a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0)}else{if(this.scale==links.Timeline.StepDate.SCALE.DAY||this.scale==links.Timeline.StepDate.SCALE.WEEKDAY){switch(this.step){case 5:case 2:a.setHours(Math.round(a.getHours()/24)*24);break;default:a.setHours(Math.round(a.getHours()/12)*12);break}a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0)}else{if(this.scale==links.Timeline.StepDate.SCALE.HOUR){switch(this.step){case 4:a.setMinutes(Math.round(a.getMinutes()/60)*60);break;default:a.setMinutes(Math.round(a.getMinutes()/30)*30);break}a.setSeconds(0);a.setMilliseconds(0)}else{if(this.scale==links.Timeline.StepDate.SCALE.MINUTE){switch(this.step){case 15:case 10:a.setMinutes(Math.round(a.getMinutes()/5)*5);a.setSeconds(0);break;case 5:a.setSeconds(Math.round(a.getSeconds()/60)*60);break;default:a.setSeconds(Math.round(a.getSeconds()/30)*30);break}a.setMilliseconds(0)}else{if(this.scale==links.Timeline.StepDate.SCALE.SECOND){switch(this.step){case 15:case 10:a.setSeconds(Math.round(a.getSeconds()/5)*5);a.setMilliseconds(0);break;case 5:a.setMilliseconds(Math.round(a.getMilliseconds()/1000)*1000);break;default:a.setMilliseconds(Math.round(a.getMilliseconds()/500)*500);break}}else{if(this.scale==links.Timeline.StepDate.SCALE.MILLISECOND){var c=this.step>5?this.step/2:1;a.setMilliseconds(Math.round(a.getMilliseconds()/c)*c)}}}}}}}};links.Timeline.StepDate.prototype.isMajor=function(){switch(this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:return(this.current.getMilliseconds()==0);case links.Timeline.StepDate.SCALE.SECOND:return(this.current.getSeconds()==0);case links.Timeline.StepDate.SCALE.MINUTE:return(this.current.getHours()==0)&&(this.current.getMinutes()==0);case links.Timeline.StepDate.SCALE.HOUR:return(this.current.getHours()==0);case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:return(this.current.getDate()==1);case links.Timeline.StepDate.SCALE.MONTH:return(this.current.getMonth()==0);case links.Timeline.StepDate.SCALE.YEAR:return false;default:return false}};links.Timeline.StepDate.prototype.getLabelMinor=function(b,a){if(a==undefined){a=this.current}switch(this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:return String(a.getMilliseconds());case links.Timeline.StepDate.SCALE.SECOND:return String(a.getSeconds());case links.Timeline.StepDate.SCALE.MINUTE:return this.addZeros(a.getHours(),2)+":"+this.addZeros(a.getMinutes(),2);case links.Timeline.StepDate.SCALE.HOUR:return this.addZeros(a.getHours(),2)+":"+this.addZeros(a.getMinutes(),2);case links.Timeline.StepDate.SCALE.WEEKDAY:return b.DAYS_SHORT[a.getDay()]+" "+a.getDate();case links.Timeline.StepDate.SCALE.DAY:return String(a.getDate());case links.Timeline.StepDate.SCALE.MONTH:return b.MONTHS_SHORT[a.getMonth()];case links.Timeline.StepDate.SCALE.YEAR:return String(a.getFullYear());default:return""}};links.Timeline.StepDate.prototype.getLabelMajor=function(b,a){if(a==undefined){a=this.current}switch(this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:return this.addZeros(a.getHours(),2)+":"+this.addZeros(a.getMinutes(),2)+":"+this.addZeros(a.getSeconds(),2);case links.Timeline.StepDate.SCALE.SECOND:return a.getDate()+" "+b.MONTHS[a.getMonth()]+" "+this.addZeros(a.getHours(),2)+":"+this.addZeros(a.getMinutes(),2);case links.Timeline.StepDate.SCALE.MINUTE:return b.DAYS[a.getDay()]+" "+a.getDate()+" "+b.MONTHS[a.getMonth()]+" "+a.getFullYear();case links.Timeline.StepDate.SCALE.HOUR:return b.DAYS[a.getDay()]+" "+a.getDate()+" "+b.MONTHS[a.getMonth()]+" "+a.getFullYear();case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:return b.MONTHS[a.getMonth()]+" "+a.getFullYear();case links.Timeline.StepDate.SCALE.MONTH:return String(a.getFullYear());default:return""}};links.Timeline.StepDate.prototype.addZeros=function(b,a){var c=""+b;while(c.length<a){c="0"+c}return c};links.imageloader=(function(){var g={};var c={};function a(h){if(g[h]==true){return true}var j=new Image();j.src=h;if(j.complete){return true}return false}function b(h){return(c[h]!=undefined)}function f(h,m,j){if(j==undefined){j=true}if(a(h)){if(j){m(h)}return}if(b(h)&&!j){return}var l=c[h];if(!l){var k=new Image();k.src=h;l=[];c[h]=l;k.onload=function(o){g[h]=true;delete c[h];for(var n=0;n<l.length;n++){l[n](h)}}}if(AJS.$.inArray(m,l)==-1){l.push(m)}}function e(k,m,j){var l=[];AJS.$.each(k,function(o,n){if(!a(n)){l.push(n)}});if(l.length){var h=l.length;AJS.$.each(l,function(o,n){f(n,function(){h--;if(h==0){m()}},j)})}else{if(j){m()}}}function d(j,k){var l=j.firstChild;while(l){if(l.tagName=="IMG"){var h=l.src;if(AJS.$.inArray(h,k)==-1){k.push(h)}}d(l,k);l=l.nextSibling}}return{isLoaded:a,isLoading:b,load:f,loadAll:e,filterImageUrls:d}})();links.Timeline.addEventListener=function(b,d,c,a){if(b.addEventListener){if(a===undefined){a=false}if(d==="mousewheel"&&navigator.userAgent.indexOf("Firefox")>=0){d="DOMMouseScroll"}b.addEventListener(d,c,a)}else{b.attachEvent("on"+d,c)}};links.Timeline.removeEventListener=function(b,d,c,a){if(b.removeEventListener){if(a===undefined){a=false}if(d==="mousewheel"&&navigator.userAgent.indexOf("Firefox")>=0){d="DOMMouseScroll"}b.removeEventListener(d,c,a)}else{b.detachEvent("on"+d,c)}};links.Timeline.getTarget=function(a){if(!a){a=window.event}var b;if(a.target){b=a.target}else{if(a.srcElement){b=a.srcElement}}if(b.nodeType!=undefined&&b.nodeType==3){b=b.parentNode}return b};links.Timeline.stopPropagation=function(a){if(!a){a=window.event}if(a.stopPropagation){a.stopPropagation()}else{a.cancelBubble=true}};links.Timeline.preventDefault=function(a){if(!a){a=window.event}if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}};links.Timeline.getAbsoluteLeft=function(b){var f=document.documentElement;var a=document.body;var d=b.offsetLeft;var c=b.offsetParent;while(c!=null&&c!=a&&c!=f){d+=c.offsetLeft;d-=c.scrollLeft;c=c.offsetParent}return d};links.Timeline.getAbsoluteTop=function(b){var f=document.documentElement;var a=document.body;var d=b.offsetTop;var c=b.offsetParent;while(c!=null&&c!=a&&c!=f){d+=c.offsetTop;d-=c.scrollTop;c=c.offsetParent}return d};links.Timeline.getPageY=function(c){if("pageY" in c){return c.pageY}else{var b;if(("targetTouches" in c)&&c.targetTouches.length){b=c.targetTouches[0].clientY}else{b=c.clientY}var d=document.documentElement;var a=document.body;return b+(d&&d.scrollTop||a&&a.scrollTop||0)-(d&&d.clientTop||a&&a.clientTop||0)}};links.Timeline.getPageX=function(c){if("pageY" in c){return c.pageX}else{var b;if(("targetTouches" in c)&&c.targetTouches.length){b=c.targetTouches[0].clientX}else{b=c.clientX}var d=document.documentElement;var a=document.body;return b+(d&&d.scrollLeft||a&&a.scrollLeft||0)-(d&&d.clientLeft||a&&a.clientLeft||0)}};links.Timeline.addClassName=function(c,b){var a=c.className.split(" ");if(AJS.$.inArray(b,a)==-1){a.push(b);c.className=a.join(" ")}};links.Timeline.removeClassName=function(d,c){var b=d.className.split(" ");var a=AJS.$.inArray(c,b);if(a!=-1){b.splice(a,1);d.className=b.join(" ")}};links.Timeline.isArray=function(a){if(a instanceof Array){return true}return(Object.prototype.toString.call(a)==="[object Array]")};links.Timeline.parseJSONDate=function(b){if(b==undefined){return undefined}if(b instanceof Date){return b}var a=b.match(/\/Date\((-?\d+)([-\+]?\d{2})?(\d{2})?\)\//i);if(a){var c=a[2]?(3600000*a[2])+(60000*a[3]*(a[2]/Math.abs(a[2]))):0;return new Date((1*a[1])+c)}return Date.parse(b)};
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:util', location = '/com/atlassian/confluence/extra/calendar3/util/util.js' */
define("tc/util",["jquery"],function(b){var a={};a.showDialogInUpdatedHeight=function(c){if(!c.getCurrentPanel().body.is(":visible")){c.show()}c.updateHeight();c.popup.element.css("height","");c.popup.element.find("div.dialog-panel-body").css("height","");c.popup.element.find("form, div.buttons-container").css("margin-bottom","0");c.popup.changeSize(undefined,c.popup.element.outerHeight());c.hide();c.show()};a.getRestBaseUrl=function(){return Confluence.getContextPath()+"/rest/calendar-services/1.0"};return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-util', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-util/calendar-util-component.js' */
define("tc/calendar-util",["jquery","ajs","tc-backbone","tc/templates"],function(e,c,f,d){function b(h){var g={};e("li",h).each(function(){var i=e(this).text();if(g[i]){e(this).remove()}else{g[i]=true}})}var a={panelEditCalendar:{GENERAL_PANEL:0,EVENT_TYPE_PANEL:1,RESTRICTION_PANEL:2,SHARE_EMBEDDED_PANEL:3,SUBSCRIBE_PANEL:4},ajaxTimeout:120000,isCalendarSearchDisabled:e("#team-calendars-search-disabled").length,hasJiraLink:e("#team-calendars-has-jira-link").length,getParameter:function(h,g){return this.getParameters(h)[g]},getParameters:function(h){if(!h.data("parameters")){var g={};e("fieldset.parameters input",h).each(function(){if(g[this.name]){if(e.isArray(g[this.name])){g[this.name].push(this.value)}else{g[this.name]=[g[this.name],this.value]}}else{g[this.name]=this.value}});h.data("parameters",g)}return h.data("parameters")},setParameter:function(j,g,i){j.removeData("parameters");var h=e("fieldset.parameters",j);e("input[name='"+g+"']",h).remove();if(e.isArray(i)){e.each(i,function(k,l){e("<input type='hidden'/>").attr("name",g).val(l).appendTo(h)})}else{e("<input type='hidden'/>").attr("name",g).val(i).appendTo(h)}},getSortedSubCalendarsByTypeAndName:function(h){if(!h){return[]}var g={};e.each(h,function(m,k){var j=k.subscriptionType||k.type,l;if(!g[j]){l=[];g[j]=l}else{l=g[j]}l.push(k)});e.each(g,function(j,k){k.sort(function(o,m){var l=(o.name||"").toLowerCase(),n=(m.name||"").toLowerCase();return l>n?-1:(n>l?1:0)})});var i=[];e.each(e.grep((function(){var j=[];e.each(Confluence.TeamCalendars.subcalendar,function(k,l){j.push(k)});j.sort(function(l,k){return Confluence.TeamCalendars.subcalendar[l].weight-Confluence.TeamCalendars.subcalendar[k].weight});return j})(),function(j){return g[j]}),function(k,j){e.each(g[j],function(m,l){i.push(l)})});e.each(i,function(k,j){if(e.isArray(j.childSubCalendars)&&j.childSubCalendars.length){j.childSubCalendars.sort(function(m,o){var n=window.Confluence.TeamCalendars.subcalendar[m.subscriptionType||m.type].weight,l=window.Confluence.TeamCalendars.subcalendar[o.subscriptionType||o.type].weight;return n<l?-1:(n>l?1:0)})}});return i},getAsArray:function(){var g=[];e.each(arguments,function(h,i){if(e.isArray(i)){e.each(i,function(j,k){if(typeof k==="string"){g.push(k)}else{if(e.isPlainObject(k)&&k.id&&typeof k.id==="string"){g.push(k.id)}else{g.push(k.toString())}}})}else{g.push(i.toString())}});return g},populateTimeZoneDropDown:function(g,k,j,h){var i=e(".spinner",g.parent());i.removeClass("hidden");e.ajax({type:"GET",timeout:this.ajaxTimeout,url:this.getRestBaseUrl()+"/timezones/calendar",success:function(l){g.html(d.timeZoneDropDown(l)).val(k);i.addClass("hidden");j()},error:function(l,n,m){i.addClass("hidden");h(l,n,m)}})},getRestBaseUrl:function(){return Confluence.getContextPath()+"/rest/calendar-services/1.0"},getCalendarServiceBaseUrl:function(g){return this.getRestBaseUrl()+"/calendar"+g},mergeSubCalendarObjectsToArray:function(j){var i=this;if(j&&e.isArray(j)){var h=function(k){e.extend(k,k.subCalendar);delete k.subCalendar};e.each(j,function(k,l){h(l);e.each(l.childSubCalendars||[],function(m,n){h(n)})})}var g=function(n){if(!(n&&n.length)){return}var m={name:"Abonnements",type:"subscription",dummy:true,id:"dummy"},k=[],l=[];e.each(n,function(o,p){if(i.isSubscriptionSubCalendar(p)){k.push(p)}else{l.push(p)}});if(k.length){m.childSubCalendars=k;l.push(m)}n.length=0;e.merge(n,l)};g(j);return j},isRequireOauth:function(i){var h=i.getResponseHeader("WWW-Authenticate")||"";var g=/OAuth realm\=\"([^\"]+)\"/;var j=g.exec(h);if(j){return j[1]}else{return null}},setFieldErrors:function(h,g){e("div.error",h).empty();if(!g){return}var k=e.isArray(g)?g:[g];if(e.isArray(g)){for(var n=0;n<k.length;++n){var m=k[n].field;var l=e.isArray(k[n].errorMessages)?k[n].errorMessages:[k[n].errorMessages];if(m&&l){var j=e("div."+m+"-error");for(var i=0;i<l.length;++i){e(document.createElement("div")).html(l[i]).appendTo(j)}}}}},showHTMLGenericError:function(g,o,k,n){var l=o[0]==="html-error-type"||o[0]==="error-jql-wrong";var m=l===true?e(".calendar-error",g):e(".calendar-warning",g);var j=k||"general";var h=l===true?e("ul.error-messages",m):e("ul.warning-messages",m);var i=e("li."+k,h);if(!i.length){i=e(document.createElement("li")).addClass(j).appendTo(h)}if(o[0]==="error-jql-wrong"){i.text(o[1]);if(n&&n.eventsEditable){i.data("jiraCalendarId",n.id);i.append("Versuchen Sie \u003ca href=\u0022#\u0022 id=\u0022calendar-change-jql\u0022\u003edie Abfrage zu \u00e4ndern.\u003c/a\u003e")}}else{i.html(o[1])}b(h);if(h.children().length){h.removeClass("hidden");m.removeClass("hidden")}else{h.addClass("hidden");m.addClass("hidden")}},setGenericErrors:function(g,n,l){var j=e(".calendar-error",g);var m=l||"general";var k=e("ul.error-messages",j);var h=e("li."+l,k);if(n){if(!h.length){h=e(document.createElement("li")).addClass(m).appendTo(k)}if(e.isArray(n)){if(n.length>1){var o=e(document.createElement("ul"));e.each(n,function(p,q){e(document.createElement("li")).text(q).appendTo(o)});o.appendTo(h)}else{h.text(n[0])}}else{if(e.isPlainObject(n)){var i=n.message||"";if(n["status-code"]){h.text(n["status-code"]+" - "+i)}else{h.text(i)}}else{h.text(n)}}b(k);if(n.length>1&&e("ul",h).children().length===0){h.remove()}}else{h.remove()}if(k.children().length){k.removeClass("hidden");j.removeClass("hidden")}else{k.addClass("hidden");j.addClass("hidden")}},showAjaxError:function(g,o,h,k,l,n){if("application/json"===o.getResponseHeader("Content-Type")){var i;try{i=JSON.parse(o.responseText)}catch(m){i=o.responseText}if(o.status===405&&i.reason&&i.reason==="READ_ONLY"){var j=["html-error-type","Diese Seite ist schreibgesch\u00fctzt. Sie k\u00f6nnen momentan keine \u00c4nderungen vornehmen."];this.showHTMLGenericError(g,j,l,n)}else{if(e.isArray(i)&&i.length===2&&(i[0]==="warning-type"||i[0]==="html-error-type"||i[0]==="error-jql-wrong")){this.showHTMLGenericError(g,i,l,n)}else{this.setGenericErrors(g,i,l)}}}else{this.setGenericErrors(g,k||h||o.responseText||"Uh oh. Es sieht aus, als ob etwas unerwartet schief gelaufen ist. Bitte \u00fcberpr\u00fcfen Sie die Confluence Log-Datei.",l)}},getUserTimeZone:function(){return e("input[name='userTimeZoneId']").val()||e("#team-calendars-user-timezone").attr("content")},shouldShowTimezoneSetup:function(){var g=!e("#team-calendars-timezone-setup-dialog").length&&e("#team-calendars-show-timezone-setup").length;if(c.Meta.get("space-key")){var h=e(".plugin-calendar-container.spaceCalendars").length;return g&&h}return g},suppressMessage:function(h,i,g){var j=this;e.ajax({cache:false,data:{messageKey:i},error:function(k,m,l){j.showAjaxError(h,k,m,l,"error-config-update")},success:function(){j.setGenericErrors(h,null,"error-config-update");if(g&&e.isFunction(g)){g()}},type:"DELETE",url:this.getCalendarServiceBaseUrl("/preferences/messagekey.json")})},fireEventForAnalytics:function(g,h){c.EventQueue=c.EventQueue||[];c.EventQueue.push({name:"teamcalendars."+g,properties:h||{}})},isPDLEnabled:function(){return c.Meta.getNumber("build-number")>=4000},isJiraSubCalendar:function(g){return g.type==="jira"||g.subscriptionType==="jira"||g.type==="jira-agile-sprint"||g.subscriptionType==="jira-agile-sprint"||g.type==="jira-project-releases"||g.subscriptionType==="jira-project-releases"},isSubscriptionSubCalendar:function(g){return g.type==="subscription"||g.subscriptionType==="subscription"},isInternalSubscriptionSubCalendar:function(g){return g.type==="internal-subscription"},isDummySubscriptionParentSubCalendar:function(g){return g.dummy&&this.isSubscriptionSubCalendar(g)},hasRestriction:function(g){return g.usersPermittedToView.length>0||g.usersPermittedToEdit.length>0||g.groupsPermittedToView.length>0||g.groupsPermittedToEdit.length>0},updateDateDisplay:function(h,g){e(".date-display",h).html(g||"")},showCalendarPopupHaveAnEmptySubcalendar:function(h,g){e.ajax({dataType:"json",success:function(i){if(i){h()}else{g()}},type:"GET",timeout:this.ajaxTimeout,url:this.getCalendarServiceBaseUrl("/haspopular.json")})},disableButton:function(h,g){h.text(g).attr("disabled","disabled").addClass("ui-state-disabled")},enableButton:function(h,g){h.text(g).removeAttr("disabled").removeClass("ui-state-disabled")},isJiraEventStream:function(g){return g==="jira-calendar"||g==="jira-agile-sprint-calendar"||g==="jira-project-releases-calendar"},isCustomEventType:function(g){return !this.isJiraEventStream(g)&&!this.isJiraType(g)&&!this.isEventTypeSanbox(g)},isEventTypeSanbox:function(g){return g==="other"||g==="leaves"||g==="birthdays"||g==="travel"},isJiraEvent:function(h){var g=h.eventType;return this.isJiraType(g)},isJiraType:function(g){return g==="jira"||g==="jira-agile-sprint"||g==="jira-project-releases"},showInforReminder:function(g){var i=null,l=g!==""?parseInt(g):0;if(l===0){i="Kein(e)"}else{if(l<60){i=c.format("{0} Minuten",l)}else{var k=Math.floor(l/60);if(k<24){i=c.format(k===1?"{0} Stunde":"{0} Stunden",k)}else{var h=Math.floor(k/24);if(h<7){i=c.format(h===1?"{0} Tag":"{0} Tage",h)}else{var j=Math.floor(h/7);i=c.format(j===1?"{0} Woche":"{0} Wochen",j)}}}}return i},getPeriodReminderEventTypeSanboxOrJira:function(g,h){var j=g.sanboxEventTypeReminders;if(j!=undefined&&j.length>0){if(this.isJiraType(h)){h+="-calendar"}for(var i in j){if(h===j[i].eventTypeId){return j[i].periodInMins}}}},getCalendarContext:function(h){var g;if(h){g=this.getParameter(h,"calendarContext")}return g||(c.Meta.get("space-key")?"spaceCalendars":"myCalendars")},isSingleCalendarView:function(g){return"singleCalendar"===this.getParameter(g,"calendarContext")},isSpaceCalendarView:function(g){return"spaceCalendars"===this.getParameter(g,"calendarContext")},isEmbeddedCalendarView:function(g){return"page"===this.getParameter(g,"calendarContext")},isMyCalendarView:function(g){return"myCalendars"===this.getParameter(g,"calendarContext")},getCustomContentType:function(g){if(this.isSingleCalendarView(g)){return"com.atlassian.confluence.extra.team-calendars:calendar-content-type"}else{if(this.isSpaceCalendarView(g)){return"com.atlassian.confluence.extra.team-calendars:space-calendars-view-content-type"}else{return undefined}}},putCalendarContextParams:function(g){g.calendarContext=this.getCalendarContext();g.viewingSpaceKey=c.Meta.get("space-key")||""},toggleNoCalendarPage:function(g){if(g){e(".no-calendar-page").removeClass("hidden");e(".space-calendar-wrapper").addClass("hidden");e(".space-calendar-buttons").addClass("hidden")}else{e(".no-calendar-page").addClass("hidden");e(".space-calendar-buttons").removeClass("hidden");e(".space-calendar-wrapper").removeClass("hidden")}},isValidLicense:function(){var g=e(".aui-message.error.license-invalid");return g.size()===0},getParamsFromUrl:function(){var k=[],j;var h=window.location.href.split("?")[1];if(h!=undefined){h=h.split("&");for(var g=0;g<h.length;g++){j=h[g].split("=");k.push(j[1]);k[j[0]]=j[1]}}return k},isCalendarNameTruncated:function(h){var g=false;var i=h.clone().css({display:"inline",width:"auto",visibility:"hidden"}).appendTo("body");if(i.width()>h.width()){g=true}i.remove();return g}};return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-util', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-util/calendar-util-component-compat.js' */
(function(a){if(!Confluence.TeamCalendars){Confluence.TeamCalendars={}}if(!Confluence.TeamCalendars.Dialogs){Confluence.TeamCalendars.Dialogs={}}if(!Confluence.TeamCalendars.hasJiraLink){Confluence.TeamCalendars.hasJiraLink=a("#team-calendars-has-jira-link").length}if(!Confluence.TeamCalendars.getRestBaseUrl){Confluence.TeamCalendars.getRestBaseUrl=function(){return Confluence.getContextPath()+"/rest/calendar-services/1.0"}}})(AJS.$);require(["tc/calendar-util"],function(a){if(!Confluence.TeamCalendars.Dialogs){Confluence.TeamCalendars.Dialogs={}}for(var b in a){if(a.hasOwnProperty(b)){Confluence.TeamCalendars[b]=a[b]}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:auto-complete-search-helper', location = 'com/atlassian/confluence/extra/calendar3/components/auto-complete-search-helper/auto-complete-search-helper.js' */
define("tc/auto-complete-search-helper",["jquery","tc/calendar-util"],function(b,a){return{makeAutoCompleteSearch:function(f,e,d,h,c,g){e.keydown(function(j){var i=b("li.active",h);if(27==j.keyCode){if(!h.hasClass("hidden")){h.addClass("hidden");return false}}if(38==j.keyCode){if(!h.hasClass("hidden")){if(i.length){if(i.prev().length){i.removeClass("active").prev().addClass("active")}}else{b(".aui-dropdown li:last",h).addClass("active")}return false}}if(40==j.keyCode){if(!h.hasClass("hidden")){if(i.length){if(i.next().length){i.removeClass("active").next().addClass("active")}}else{b(".aui-dropdown li:first",h).addClass("active")}return false}return false}if(13==j.keyCode){if(!h.hasClass("hidden")){b(".aui-dropdown li.active a",h).trigger("click");return false}}if(b.trim(e.val())){setTimeout(function(){if(!b.trim(e.val())){h.addClass("hidden");return}b.ajax({cache:false,data:b.extend({search:"name",query:e.val()},d),dataType:"json",error:function(k,m,l){if(k.status!==400){a.showAjaxError(f,k,m,l)}},success:function(m){var n=b(document.createElement("ol"));var p=function(s){return k.id?a.getParameter(f,"baseUrl")+"/pages/viewpage.action?pageId="+encodeURIComponent(s.id):"#"};for(var r=0;r<m.group.length;++r){var l=m.group[r];if(l.result){for(var q=0;q<l.result.length;++q){var k=l.result[q];if(g&&!g(k)){continue}var o=b(document.createElement("li")).mouseover(function(){b("li.active",h).removeClass("active");b(this).addClass("active")});if(k.thumbnailLink){b(document.createElement("img")).attr("src",k.thumbnailLink.href).appendTo(o)}if(k.link&&k.link.length){b(document.createElement("span")).attr("title",k.title||(k.space?" "+k.space.name:"")).text(k.title).appendTo(b(document.createElement("a")).data("result",k).attr("href",p(k)||"").addClass(k.type?"content-type-"+k.type:"").click(function(){if(c){c(e,b(this))}h.addClass("hidden");return false}).appendTo(o))}o.appendTo(n)}}}if(n.children().length){b("li",n).each(function(s){if(s>4){b(this).remove()}});b(".aui-dropdown",h).empty().append(n);h.removeClass("hidden").dropDown("Standard")}else{h.addClass("hidden")}},timeout:a.ajaxTimeout,url:a.getParameter(f,"baseUrl")+"/rest/prototype/1/search.json"})},300)}}).focus(function(){if(e.hasClass("with-hint")){e.removeClass("with-hint").val("")}}).blur(function(){if(!b.trim(e.val())){e.addClass("with-hint").val("Confluence-Seite oder URL")}})}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-delete-dialog', location = 'com/atlassian/confluence/extra/calendar3/components/event-delete-dialog/event-delete-dialog.js' */
define("tc/event-delete-dialog",["jquery"],function(a){return function(f,c,e){var i;var h=function(k,j){if(!e.isProcessingEvent(f)){e.setProcessingEvent(f,true,j);e.deleteEvent(f,k,function(l,n,m){e.showAjaxError(f,l,n,m,e.ERROR_CLASS_EVENT_DELETE);j.hide();e.setProcessingEvent(f,false,j)},function(l){if(l.success){var o=e.getSubCalendar(f,c.subCalendarId);var m=c.eventType;var n;if(m==="custom"&&o&&o.customEventTypes&&o.customEventTypes.length){a.each(o.customEventTypes,function(p,q){if(q.customEventTypeId===c.customEventTypeId){n={customEventTypeName:q.title}}})}Confluence.TeamCalendars.fireEventForAnalytics("event.delete.default."+m+".context."+e.getParameter(f,"calendarContext"),n);e.setGenericErrors(f,null,e.ERROR_CLASS_EVENT_DELETE);if(k.singleInstance){e.getCalendarPanel(f).fullCalendar("removeEvents",[c.id])}else{e.reloadSubCalendar(f,o.id||o.parentId)}}else{e.setGenericErrors(f,"Uh oh. Es sieht aus, als ob etwas unerwartet schief gelaufen ist. Bitte \u00fcberpr\u00fcfen Sie die Confluence Log-Datei.",e.ERROR_CLASS_EVENT_DELETE)}j.hide();e.setProcessingEvent(f,false,j)});return false}};if(c.recur||c.rruleStr){i=new AJS.Dialog({width:550,height:270,id:"tc-confirm-event-delete"});i.addHeader("Wiederkehrendes Ereignis l\u00f6schen");i.addPanel("",Confluence.TeamCalendars.Templates.confirmRecurringEventDelete({elementIdSuffix:e.getParameter(f,"elementIdSuffix")}),"tc-delete-event-confirmation-panel");var d=i.getCurrentPanel().body;var g=a("<span class='spinner hidden aui-icon aui-icon-wait'></span>");var b=function(k){var j=k.getPage(0).buttonpanel;g.prependTo(j)};i.enableOkButton=function(){a(":button",d).each(function(j,k){a(k).removeAttr("disabled").removeClass("ui-state-disabled")});g.addClass("hidden")};i.disableOkButton=function(){a(":button",d).each(function(j,k){a(k).attr("disabled","disabled").addClass("ui-state-disabled")});g.removeClass("hidden")};a(".tc-delete-this-instance-only",d).click(function(){h({subCalendarId:c.subCalendarId,uid:c.id,recurrenceId:c.recurId||"",originalStart:c.originalStart||"",singleInstance:true},i);return false});a(".tc-delete-future-instances-only",d).click(function(){h({subCalendarId:c.subCalendarId,uid:c.id,recurUntil:a.fullCalendar.formatDate(c.start,"yyyyMMdd")},i);return false});a(".tc-delete-all-instances",d).click(function(){h({subCalendarId:c.subCalendarId,uid:c.id},i);return false});i.addLink("Abbrechen",function(){i.hide();return false});b(i)}else{i=new AJS.Dialog(280,170);i.addHeader("Ereignis l\u00f6schen");i.addPanel("",Confluence.TeamCalendars.Templates.confirmEventDelete(),"tc-delete-event-confirmation-panel");i.addButton("Ja",function(){h({subCalendarId:c.subCalendarId,uid:c.id},i)});i.addLink("Abbrechen",function(){i.hide();return false})}return i}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-delete-dialog', location = '/com/atlassian/confluence/extra/calendar3/components/event-delete-dialog/event-delete-dialog.soy' */
// This file was automatically generated from event-delete-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.confirmEventDelete = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml('Sind Sie sicher? Dies kann nicht r\xfcckg\xe4ngig gemacht werden') + '</p>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.confirmEventDelete.soyTemplateName = 'Confluence.TeamCalendars.Templates.confirmEventDelete';
}


Confluence.TeamCalendars.Templates.confirmRecurringEventDelete = function(opt_data, opt_ignored) {
  return '<ul class="tc-delete-recurring-event-options"><li><input type="button" value="' + soy.$$escapeHtml('Nur diese Instanz') + '" class="tc-delete-this-instance-only tc-delete-button aui-button"><span class="tc-delete-description">' + soy.$$escapeHtml('Alle anderen Ereignisse in dieser Serie bleiben unver\xe4ndert.') + '</span></li><li><input type="button" value="' + soy.$$escapeHtml('Alle zuk\xfcnftigen Instanzen in dieser Serie') + '" class="tc-delete-future-instances-only tc-delete-button aui-button"><span class="tc-delete-description">' + soy.$$escapeHtml('Diese und alle zuk\xfcnftigen Instanzen werden entfernt.') + '</span></li><li class="tc-last-delete-option"><input type="button" value="' + soy.$$escapeHtml('Alle in dieser Serie') + '" class="tc-delete-all-instances tc-delete-button aui-button"><span class="tc-delete-description">' + soy.$$escapeHtml('Die gesamte Serie wird entfernt.') + '</span></li></ul>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.confirmRecurringEventDelete.soyTemplateName = 'Confluence.TeamCalendars.Templates.confirmRecurringEventDelete';
}


Confluence.TeamCalendars.Templates.confirmCustomEventNameDelete = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml('Es wird alles gel\xf6scht werden') + ' <strong>' + soy.$$escapeHtml(opt_data.customEventName) + '</strong> ' + soy.$$escapeHtml('Events und diesen Event-Typ aus dem Kalender entfernen. Das l\xe4sst sich nicht r\xfcckg\xe4ngig machen. Sind Sie sicher?') + '</p>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.confirmCustomEventNameDelete.soyTemplateName = 'Confluence.TeamCalendars.Templates.confirmCustomEventNameDelete';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:form-state-control', location = '/com/atlassian/confluence/extra/calendar3/util/form-state-control.js' */
define("tc/form-state-control",["jquery","ajs"],function(f,b){var a;try{a=require("confluence/form-state-control")}catch(g){b.log('[TEAMCAL] No module "confluence/form-state-control", falling back to default enable/disableElement')}function d(e){if(a){a.enableElement(e)}else{f(e).enable()}}function c(e){if(a){a.disableElement(e)}else{f(e).disable()}}return{enableElement:d,disableElement:c}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:user-timezone-setup', location = 'com/atlassian/confluence/extra/calendar3/components/user-timezone-setup/user-timezone-setup.soy' */
// This file was automatically generated from user-timezone-setup.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.userTimezoneSetup = function(opt_data, opt_ignored) {
  return '<div class="user-time-zone-desc"></div><div class="user-time-zone-select hidden"><select name="userTimeZoneSetupSelect" id="userTimeZoneSetupSelect" disabled="disabled"></select>&nbsp;<span class="spinner aui-icon aui-icon-wait"></span></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.userTimezoneSetup.soyTemplateName = 'Confluence.TeamCalendars.Templates.userTimezoneSetup';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:user-timezone-setup', location = 'com/atlassian/confluence/extra/calendar3/components/user-timezone-setup/user-timezone-setup.js' */
define("tc/user-timezone-setup",["jquery","tc/util","tc-backbone","tc/templates","tc/form-state-control"],function(c,e,f,b,a){var d=f.View.extend({dialog:null,options:null,$userTimeZoneSelectContainer:null,userTimeZone:"",isPDLEnabled:false,baseUrlRest:"",baseUrlCalendarService:"",ajaxTimeout:120000,template:b.userTimezoneSetup(),defaults:{callbackHandler:null,textTitleDialog:"Team Calendars einrichten",textDescTimeZoneSetup:"Ihre Zeitzone ist derzeit auf {0}eingestellt. Wenn das nicht Ihre Zeitzone ist, stellen Sie bitte die richtige ein.",textBtnOk:"OK"},initialize:function(g){this.options=c.extend({},this.defaults,g);if(!this.options.callbackHandler){AJS.debug("tc/user-timezone-setup: requires 'callbackHandler' object")}var h=Confluence.TeamCalendars;this.userTimeZone=h.getUserTimeZone();this.isPDLEnabled=h.isPDLEnabled();this.baseUrlRest=h.getRestBaseUrl();this.baseUrlCalendarService=h.getCalendarServiceBaseUrl("/preferences/timezone.json");this.ajaxTimeout=h.ajaxTimeout;this.options.textDescTimeZoneSetup=AJS.format(this.options.textDescTimeZoneSetup,this.userTimeZone)},render:function(){this._createDialog();this._populateTimeZoneDropDown();return this.dialog},_createDialog:function(){var g=this;this.dialog=new AJS.Dialog({width:512,height:this.isPDLEnabled?220:200,id:"team-calendars-timezone-setup-dialog"});this.dialog.addHeader(this.options.textTitleDialog);this.dialog.addPanel("",this.template,"setup-calendar-panel");this.dialog.addButton(this.options.textBtnOk,function(){g.dialog.hide();g.dialog.remove();c("#team-calendars-show-timezone-setup").remove();g.options.callbackHandler.showCalendarWizard()},"set-timezone-button");this.el=this.dialog.getCurrentPanel().body;this.$el=c(this.el);this.$el.find(".user-time-zone-desc").text(this.options.textDescTimeZoneSetup);this.$userTimeZoneSelectContainer=this.$el.find(".user-time-zone-select");this.$userTimeZoneSelectContainer.removeClass("hidden");this.$userTimeZoneSelectContainer.find("select").change(_.bind(this._changeSelectionTimeZone,this));this.options.callbackHandler.suppressMessage("MESSAGE_KEY_TIMEZONE_SETUP");return this.dialog},_populateTimeZoneDropDown:function(){var h=this,g=this.$el.find("#userTimeZoneSetupSelect"),i=this.dialog.popup.element.find(".set-timezone-button");a.disableElement(i);h.$userTimeZoneSelectContainer.addClass("loading");c.ajax({type:"GET",url:this.baseUrlRest+"/timezones/user",success:function(j){g.html(b.timeZoneDropDown(j)).val(h.userTimeZone).removeAttr("disabled");h.$userTimeZoneSelectContainer.removeClass("loading");a.enableElement(i)},error:function(j,l,k){h.options.callbackHandler.showAjaxError(j,l,k);h.$userTimeZoneSelectContainer.removeClass("loading")},timeout:this.ajaxTimeout})},_changeSelectionTimeZone:function(){var i=this;this.$userTimeZoneSelectContainer.addClass("loading");var h=this.dialog.popup.element.find(".set-timezone-button").attr("disabled","disabled");var g=this.$userTimeZoneSelectContainer.find("option:selected");c.ajax({url:this.baseUrlCalendarService,cache:false,data:{timeZoneId:g.val()},error:function(j,l,k){i.options.callbackHandler.showAjaxError(j,l,k,"error-config-update");h.removeAttr("disabled");i.$userTimeZoneSelectContainer.removeClass("loading")},success:function(){i.options.callbackHandler.setGenericErrors(null,"error-config-update");i.options.callbackHandler.setParameter("userTimeZoneId",g.val());i.$el.find(".user-time-zone-desc").text(i.options.textDescTimeZoneSetup);h.removeAttr("disabled");i.$userTimeZoneSelectContainer.removeClass("loading")},type:"PUT",timeout:this.ajaxTimeout})}});return d});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:user-timezone-setup', location = 'com/atlassian/confluence/extra/calendar3/components/user-timezone-setup/user-timezone-setup-combat.js' */
require(["tc/user-timezone-setup"],function(a){if(!Confluence.TeamCalendars.Dialogs){Confluence.TeamCalendars.Dialogs={}}Confluence.TeamCalendars.Dialogs.getTimeZoneSetupDialog=function(b){return new a({callbackHandler:b}).render()}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:import-subcalendar', location = 'com/atlassian/confluence/extra/calendar3/components/import-subcalendar/import-subcalendar.soy' */
// This file was automatically generated from import-subcalendar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.importSubcalendar = function(opt_data, opt_ignored) {
  return '<div class="aui-message aui-message-error error calendar-error hidden"><p class="title"><strong>' + soy.$$escapeHtml('Es ist mindestens ein Fehler aufgetreten.') + '</strong></p><div class="error-content"><ul class="error-messages hidden"></ul></div></div><div class="aui-message aui-message-warning warning tc-need-timezone hidden"><p class="title"><strong>' + soy.$$escapeHtml('Bestimmen der Kalender-Zeitzone nicht m\xf6glich') + '</strong></p><p>' + soy.$$escapeHtml('Die Zeitzone dieses Kalenders konnte nicht bestimmt werden. Bitte legen Sie die Zeitzone unten fest.') + '</p></div><form name="importSubCalendarForm" class="sub-calendar-import-form aui" method="POST" action="' + soy.$$escapeHtml("") + '/plugins/calendar/importsubcalendar.action" enctype="multipart/form-data" target="import-iframe-sink"><input type="hidden" name="calendarId" value=""><input type="hidden" name="decorator" value="none"><input type="hidden" name="color" value=""><input type="hidden" name="spaceKey" value=""><div class="field-group"><label for="import-name">' + soy.$$escapeHtml('Name') + '<span class="aui-icon icon-required"></span></label><input name="name" id="import-name"  type="text" class="text" value="" autocomplete="off"><div class="description">' + soy.$$escapeHtml('Lassen dieses Feld leer, um den Kalendernamen aus der ICS-Datei zu verwenden.') + '</div><div class="error name-error"></div></div><div class="field-group"><label for="import-description">' + soy.$$escapeHtml('Beschreibung') + '</label><textarea name="description" id="import-description" rows="4" class="textarea"></textarea></div><div class="field-group field-group-space-permission"><label for="spaceKeyAutocomplete">' + soy.$$escapeHtml('Verkn\xfcpfter Bereich') + '<span class="aui-icon icon-required"></span></label><input name="spaceKeyAutocomplete" id="spaceKeyAutocomplete" type="text" class="autocomplete-space text" data-max="5" data-none-message="' + soy.$$escapeHtml('Keine Bereiche gefunden') + '"><div class="description">' + soy.$$escapeHtml('Diesen Kalender mit einem Bereich verkn\xfcpfen') + '</div><div class="error spaceKeyAutocomplete-error"></div></div><div class="field-group"><label for="ical-file">' + soy.$$escapeHtml('iCal hochladen') + '<span class="aui-icon icon-required"></span></label><input type="file" class="file upfile" name="file_0" size="25"><div class="error file_0-error"></div></div><div class="field-group tc-field-group-timezone hidden"><label for="timeZone">' + soy.$$escapeHtml('Zeitzone') + '<span class="aui-icon icon-required"></span></label><select name="timeZoneId" class="select timeZone"></select><span class="spinner aui-icon aui-icon-wait"></span><div class="error timeZoneId-error"></div></div></form>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.importSubcalendar.soyTemplateName = 'Confluence.TeamCalendars.Templates.importSubcalendar';
}


Confluence.TeamCalendars.Templates.importWarningGeneral = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(AJS.format('\x3cp\x3eDie Daten in der ICS-Datei m\xfcssen richtig formatiert sein.\x3c/p\x3e \x3cp\x3e\x3ca href\x3d\x22{0}\x22\x3eMehr erfahren\x3c/a\x3e\x3c/p\x3e',"https://confluence.atlassian.com/display/CONFKB/Team+Calendars+fails+to+import+all+events+from+an+ICS+file"));
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.importWarningGeneral.soyTemplateName = 'Confluence.TeamCalendars.Templates.importWarningGeneral';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:import-subcalendar', location = 'com/atlassian/confluence/extra/calendar3/components/import-subcalendar/import-subcalendar.js' */
define("tc/import-subcalendar",["jquery","underscore","document","tc/util","tc-backbone","tc/templates","tc/calendar-util","confluence/flag"],function(a,g,d,e,f,i,c,h){var b=f.View.extend({dialog:null,$uploadIframe:null,$submitButton:null,options:null,template:i.importSubcalendar(),events:{"selected.autocomplete-content input[name='spaceKeyAutocomplete']":"_selectSpace"},defaults:{callbackHandler:null,textTitleDialog:"Kalender importieren",textBtnImport:"Importieren",textLinkCancel:"Abbrechen"},initialize:function(j){this.options=a.extend({},this.defaults,j);if(!this.options.callbackHandler){AJS.debug("tc/import-subcalendar: requires 'callbackHandler' object")}},render:function(){this._createSubCalendarImportDialog();this._populateSubCalendarImportForm();this.$submitButton=this.dialog.popup.element.find(".submit");return this.dialog},_createSubCalendarImportDialog:function(){var j=this;var l=false;var k=function(){if(l){return}var m=j.$el.find("form.sub-calendar-import-form");l=true;a.ajax({type:"POST",headers:{"X-Atlassian-Token":"no-check"},url:Confluence.getContextPath()+"/plugins/calendar/importsubcalendar.action",cache:false,contentType:false,processData:false,data:new FormData(m[0]),success:function(n){l=false;j._loadedResultImport(n)},error:function(){l=false}});j._submit();return false};if(this.dialog){return}this.dialog=new AJS.ConfluenceDialog({height:429,width:512,onSubmit:k,id:"import-calendar-dialog"});this.dialog.addHeader(this.options.textTitleDialog);this.dialog.addPanel("",this.template,"calendar-dialog-panel");this.dialog.addButton(this.options.textBtnImport,k,"submit");this.dialog.addLink(this.options.textLinkCancel,g.bind(this._cancelDialog,this));this.el=this.dialog.getCurrentPanel().body;this.$el=a(this.el);this.$uploadIframe=this.$el.find(".subcalendar-import-result");this.delegateEvents()},_populateSubCalendarImportForm:function(){this.$el.find("input[name='name'], textarea[name='description'], input[name='spaceKey'], input[name='spaceKeyAutocomplete']").val("");this.$el.find("input[name='color']").val(this.options.callbackHandler.getNextCalendarColor());this.$el.find(".field-group .error").empty();if(AJS.Meta.get("space-key")){this.$el.find("input[name='spaceKey']").val(AJS.Meta.get("space-key"));var j=a(".field-group-space-permission",this.$el);j.css("display","none")}},_submit:function(){this.options.callbackHandler.setProcessingSubCalendar(true);this.spinnerDefer=this.options.callbackHandler.setSubCalendarSpinnerIconVisible(true);c.disableButton(this.$submitButton,"Importing...\r\n\r\nImportiere ...\r\n\r\nImport l\u00e4uft ...")},_selectSpace:function(k,j){this.$el.find("input[name='spaceKey']").val(j.content.key);this.$el.find("input[name='spaceKeyAutocomplete']").val(j.content.name)},_cancelDialog:function(){this.dialog.remove();this.dialog=null;return false},_showImportJiraWarningFlag:function(){var k="Es konnten nicht alle Jira-Ereignisse importiert werden.";var j=i.importWarningGeneral();this._showFlag(k,j,"warning","manual")},_showImportWarningFlag:function(){var k="Es konnten nicht alle Ereignisse importiert werden.";var j=i.importWarningGeneral();this._showFlag(k,j,"warning","manual")},_showImportSuccessFlag:function(){var k="Erfolgreicher Kalender-Import";var j="\u003cp\u003eAlle Ereignisse in Ihrer ICS-Datei wurden importiert.\u003c/p\u003e";this._showFlag(k,j,"success","auto")},_showFlag:function(m,j,k,l){new h({close:l,type:k,extraClasses:"qr-flag",fifo:true,stack:"teamcal",body:j,title:m})},_loadedResultImport:function(n){var o=this;var j=d.createElement("html");j.innerHTML=n;var p=a(j).find(".subcalendar-id").text();var l;var k;if(a(".import-timezone-required",j).length){c.disableButton(this.$submitButton);o.$el.find(".tc-need-timezone").removeClass("hidden");o.$el.find(".tc-field-group-timezone").removeClass("hidden");Confluence.TeamCalendars.populateTimeZoneDropDown(o.$el.find(".tc-field-group-timezone .timeZone"),Confluence.TeamCalendars.getUserTimeZone(),function(){c.enableButton(o.$submitButton,"Importieren")},function(s,u,t){o.options.callbackHandler.showAjaxError(s,u,t)});o.dialog.updateHeight()}else{if(!a(".import-successful",j).length){var q=[];a(".field-errors input",j).each(function(){q.push({field:this.name,errorMessages:[this.value]})});if(q.length){Confluence.TeamCalendars.setFieldErrors(o.$el.find(".sub-calendar-import-form")[0],q);o.dialog.updateHeight()}var r=[];a(".action-error",j).each(function(){r.push(a(this).text())});if(r.length){AJS.error("Error importing calendar",j);Confluence.TeamCalendars.setGenericErrors(o.el,r,"error-subcalendar-update");var m=!!(a(".action-error-events-of-type:contains('jira-')",j).length);if(m){k=o._showImportJiraWarningFlag}else{k=o._showImportWarningFlag}if(!q.length){l=true}}}else{l=true;k=this._showImportSuccessFlag}}c.enableButton(this.$submitButton,"Importieren");if(this.spinnerDefer){this.spinnerDefer.resolve()}this.options.callbackHandler.setProcessingSubCalendar(false);if(l){this.dialog.remove();this.options.callbackHandler.handleImport(p)}if(k){k.call(this)}}});return b});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:import-subcalendar', location = 'com/atlassian/confluence/extra/calendar3/components/import-subcalendar/import-subcalendar-compat.js' */
require(["tc/import-subcalendar"],function(a){if(!Confluence.TeamCalendars.Dialogs){Confluence.TeamCalendars.Dialogs={}}Confluence.TeamCalendars.Dialogs.getSubCalendarImportDialog=function(b){return new a({callbackHandler:b}).render()}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:customeventtype-edit', location = 'com/atlassian/confluence/extra/calendar3/components/customeventype/customeventtype-model.js' */
define("tc/customeventtype-model",["jquery","tc-backbone"],function(b,c){var a=c.Model.extend({defaults:function(){return{title:"",icon:"",subCalendar:"",disable:false,isCustomEvent:false,id:"",created:"",periodInMins:""}},validate:function(d){if(!d.isCustomEvent){return false}var e=[];if(!d.title){e.push({field:"title",message:"Ereignisname ist erforderlich"})}d.title=b.trim(d.title);if(d.title.length<=0){e.push({field:"title",message:"Ereignisname ist erforderlich"})}else{if(d.title.length>256){e.push({field:"title",message:"Der Veranstaltungsname sollte h\u00f6chstens 256 Zeichen lang sein"})}}if(!d.icon){e.push({field:"icon",message:"Ereignissymbol erforderlich"})}return e.length>0?e:false},toggle:function(){this.set({disable:!this.get("disable")})}});return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:customeventtype-edit', location = 'com/atlassian/confluence/extra/calendar3/components/customeventype/customeventtype-edit/customeventtype-edit.soy' */
// This file was automatically generated from customeventtype-edit.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.editCustomEventType = function(opt_data, opt_ignored) {
  var output = '<tr id="edit-custom-event-type-form"><td colspan="3"><div class="aui-message aui-message-warning warning tooltip-warning hidden"><span class="title">' + soy.$$escapeHtml('Save or cancel your custom event type before continuing.\r\n\r\nSpeichere oder verwirf deinen angepassten Ereignistyp bevor du fortf\xe4hrst.') + '</span></div><form class="aui form-add-custom">';
  if (opt_data.isCustomEventType) {
    output += '<fieldset class="field-group custom-event-title"><label for="event-title">' + soy.$$escapeHtml('Veranstaltungsname') + '<span class="aui-icon icon-required">required</span></label><input class="text medium-field" type="text" id="custom-eventtype-title" name="event-title" title="Event Title" value="' + soy.$$escapeHtml(opt_data.title) + '"/><p class="hidden error custom_event_type_field_error" data-field-name="title"></p></fieldset><fieldset class="field-group select-avatar tc-event-type-item"><label for="event-title">' + soy.$$escapeHtml('Termin Icon') + '<span class="aui-icon icon-required">required</span></label><div class = "custom-eventtype-icons">';
    var eventTypeList15 = ['campaign', 'conference', 'deployment', 'home', 'marketing_email', 'meeting', 'milestone', 'outage', 'party', 'sporting_event', 'testing', 'training', 'workshop', 'events', 'travel', 'leaves', 'jira_box', 'sprints'];
    var eventTypeListLen15 = eventTypeList15.length;
    for (var eventTypeIndex15 = 0; eventTypeIndex15 < eventTypeListLen15; eventTypeIndex15++) {
      var eventTypeData15 = eventTypeList15[eventTypeIndex15];
      output += '<button class="' + ((opt_data.icon == eventTypeData15) ? 'selected' : '') + '">' + Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: eventTypeData15, customClasses: ['aui-icon', 'icon-teamcals', eventTypeData15], dataIcon: eventTypeData15}) + '</button>';
    }
    output += '</div><p class="hidden error custom_event_type_field_error" data-field-name="icon"></p></fieldset>';
  } else {
    output += '<fieldset class="field-group"><span class="event-type-link" title="' + soy.$$escapeHtml(opt_data.title) + '">' + Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: opt_data.icon, customClasses: ['event-type-table-item', opt_data.icon]}) + '<span class="event-type-label">' + soy.$$escapeHtml(opt_data.title) + '</span></span></fieldset>';
  }
  output += '<fieldset><div class="field-group"><label for="dBase">' + soy.$$escapeHtml('Erinnerung') + '</label><select class="select" id="period-reminder" name="period" title="database select"><option value="0" ' + ((opt_data.periodInMins == 0) ? 'selected' : '') + '>' + soy.$$escapeHtml('Kein(e)') + '</option><option value="5" ' + ((opt_data.periodInMins == 5) ? 'selected' : '') + '>' + soy.$$escapeHtml(AJS.format('{0} Minuten','5')) + ' ' + soy.$$escapeHtml('vorher') + '</option><option value="10" ' + ((opt_data.periodInMins == 10) ? 'selected' : '') + '>' + soy.$$escapeHtml(AJS.format('{0} Minuten','10')) + ' ' + soy.$$escapeHtml('vorher') + '</option><option value="20" ' + ((opt_data.periodInMins == 20) ? 'selected' : '') + '>' + soy.$$escapeHtml(AJS.format('{0} Minuten','20')) + ' ' + soy.$$escapeHtml('vorher') + '</option><option value="30" ' + ((opt_data.periodInMins == 30) ? 'selected' : '') + '>' + soy.$$escapeHtml(AJS.format('{0} Minuten','30')) + ' ' + soy.$$escapeHtml('vorher') + '</option><option value="60" ' + ((opt_data.periodInMins == 60) ? 'selected' : '') + '>' + soy.$$escapeHtml(AJS.format('{0} Stunde','1')) + ' ' + soy.$$escapeHtml('vorher') + '</option><option value="120" ' + ((opt_data.periodInMins == 120) ? 'selected' : '') + '>' + soy.$$escapeHtml(AJS.format('{0} Stunden','2')) + ' ' + soy.$$escapeHtml('vorher') + '</option><option value="240" ' + ((opt_data.periodInMins == 240) ? 'selected' : '') + '>' + soy.$$escapeHtml(AJS.format('{0} Stunden','4')) + ' ' + soy.$$escapeHtml('vorher') + '</option><option value="480" ' + ((opt_data.periodInMins == 480) ? 'selected' : '') + '>' + soy.$$escapeHtml(AJS.format('{0} Stunden','8')) + ' ' + soy.$$escapeHtml('vorher') + '</option><option value="1440" ' + ((opt_data.periodInMins == 1440) ? 'selected' : '') + '>' + soy.$$escapeHtml(AJS.format('{0} Tag','1')) + ' ' + soy.$$escapeHtml('vorher') + '</option><option value="2880" ' + ((opt_data.periodInMins == 2880) ? 'selected' : '') + '>' + soy.$$escapeHtml(AJS.format('{0} Tage','2')) + ' ' + soy.$$escapeHtml('vorher') + '</option><option value="4320" ' + ((opt_data.periodInMins == 4320) ? 'selected' : '') + '>' + soy.$$escapeHtml(AJS.format('{0} Tage','3')) + ' ' + soy.$$escapeHtml('vorher') + '</option><option value="10080" ' + ((opt_data.periodInMins == 10080) ? 'selected' : '') + '>' + soy.$$escapeHtml(AJS.format('{0} Woche','1')) + ' ' + soy.$$escapeHtml('vorher') + '</option><option value="20160" ' + ((opt_data.periodInMins == 20160) ? 'selected' : '') + '>' + soy.$$escapeHtml(AJS.format('{0} Wochen','2')) + ' ' + soy.$$escapeHtml('vorher') + '</option><option value="30240" ' + ((opt_data.periodInMins == 30240) ? 'selected' : '') + '>' + soy.$$escapeHtml(AJS.format('{0} Wochen','3')) + ' ' + soy.$$escapeHtml('vorher') + '</option><option value="40320" ' + ((opt_data.periodInMins == 40320) ? 'selected' : '') + '>' + soy.$$escapeHtml(AJS.format('{0} Wochen','4')) + ' ' + soy.$$escapeHtml('vorher') + '</option></select></div></fieldset><div class="event-type-info"><div class="tc-aui-help-content"><div class="event-type-info-text"><span>' + soy.$$escapeHtml('Changes will affect everyone that uses this calendar; including reminder times.\r\n\r\n\xc4nderungen betreffen alle Benutzer dieses Kalenders, Erinnerungen eingeschlossen.') + '</span></div></div></div><span class="buttons-container"><span class="buttons"><input class="button button-panel-button save" tabindex="30" type="button" value="' + soy.$$escapeHtml('Speichern') + '" id="save-custom-event-type"><a class="cancel" tabindex="31"  href="#">' + soy.$$escapeHtml('Abbrechen') + '</a></span></span></form></td></tr>';
  return output;
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.editCustomEventType.soyTemplateName = 'Confluence.TeamCalendars.Templates.editCustomEventType';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:customeventtype-edit', location = 'com/atlassian/confluence/extra/calendar3/components/customeventype/customeventtype-edit/customeventtype-edit.js' */
define("tc/customeventtype-edit",["jquery","underscore","tc-backbone"],function(c,a,d){var b=d.View.extend({parentCustomEventTypeDiv:null,mediator:null,isOpen:null,events:{"click input.save":"_updateCustomEventType","click a.cancel":"_closeInlineDialog","click .select-avatar button":"_selectIconCustomEventType",keydown:"handleKey"},initialize:function(e){if(!e){return}this.mediator=e.mediator;this.parentCustomEventTypeDiv=e.parentCustomEventTypeDiv;this.model.on("invalid",a.bind(this._handleError,this));this.mediator.on("Custom-Event-Type.edit.open",a.bind(this.shouldRemoveMe,this));this.mediator.trigger("Custom-Event-Type.edit.open",this)},render:function(){var e=this;var f=e.model.get("isCustomEvent")===true;c(".custom-event-type-items-instructional").addClass("hidden");c(e.parentCustomEventTypeDiv).addClass("hidden");c(e.parentCustomEventTypeDiv).after(Confluence.TeamCalendars.Templates.editCustomEventType({title:e.model.get("title"),icon:e.model.get("icon"),periodInMins:e.model.get("periodInMins"),isCustomEventType:f}));e.$editCustomEventTypeForm=c("#edit-custom-event-type-form");e.el=e.$editCustomEventTypeForm;e.$el=c(e.el);e.delegateEvents();e.$editCustomEventTypeForm.find(".custom-event-title input").focus();this.isOpen=true},shouldRemoveMe:function(){if(this.isOpen){this.remove()}},remove:function(){this._closeInlineDialog()},handleKey:function(f){if(f.which===13){f.preventDefault();f.stopPropagation();this._updateCustomEventType()}if(f.which===27){f.preventDefault();f.stopPropagation();this._closeInlineDialog()}},_closeInlineDialog:function(){c(this.parentCustomEventTypeDiv).removeClass("hidden");if(this.model.collection&&this.model.collection.customEventTypes().length===0){c(".custom-event-type-items-instructional").removeClass("hidden")}this.$editCustomEventTypeForm.remove()},_updateCustomEventType:function(){this.$editCustomEventTypeForm.find(".custom_event_type_field_error").each(function(l,m){var k=c(m);if(!k.hasClass("hidden")){k.addClass("hidden")}});var j=this.$editCustomEventTypeForm.find(".custom-event-title input").val();var f=this.$editCustomEventTypeForm.find(".select-avatar button.selected span").data("icon");var e=this.$editCustomEventTypeForm.find("#period-reminder").val();var h=this.model.get("title");var g=this.model.get("icon");var i=this.model.get("periodInMins");this.model.set({title:j!==undefined?j:h,icon:f!==undefined?f:g,periodInMins:e});if(!this.model.isValid()){this.model.set({title:h,icon:g,periodInMins:i});return}this.mediator.trigger("Custom-Event-Type.save",this.model);this._closeInlineDialog()},_handleError:function(f,h){var g=this;var e=function(j){var i=a.where(h,{field:j});if(i.length>0){return i[0].message}return""};this.$editCustomEventTypeForm.find(".custom_event_type_field_error").each(function(j,k){var i=c(k);var l=i.data("field-name");i.html(e(l));if(i.hasClass("hidden")){i.removeClass("hidden")}if(l==="title"){g.$editCustomEventTypeForm.find("#custom-eventtype-title").focus()}})},_selectIconCustomEventType:function(e){if(!e){e=window.event}e.preventDefault();c(".select-avatar.tc-event-type-item button").removeClass("selected");var f=e.target||e.srcElement;if(f.nodeName==="SPAN"){c(f).parent().addClass("selected")}else{c(f).addClass("selected")}}});return b});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:customeventtype-edit', location = 'com/atlassian/confluence/extra/calendar3/components/customeventype/customeventtype-edit/customeventtype-edit-compat.js' */
require(["tc/customeventtype-edit","tc/customeventtype-model"],function(a,b){if(!Confluence.TeamCalendars.Dialogs){Confluence.TeamCalendars.Dialogs={}}Confluence.TeamCalendars.Dialogs.getCustomEventTypeEdit=function(f,c){var e=$(f).parent().parent();var g=$(e).find("span.custom-event-type").data();var d=new b({title:g.title,icon:g.icon,subCalendar:c,periodInMins:g.periodInMins});return new a({parentCustomEventTypeDiv:e,dataCustomEventType:g,model:d}).render()}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:tc-jquery-datepicker', location = 'com/atlassian/confluence/extra/calendar3/lib/jquery-plugins/jquery.ui.datepicker.js' */
(function($,undefined){$.extend($.ui,{datepicker:{version:"1.8.11"}});var PROP_NAME="datepicker";var dpuuid=new Date().getTime();function Datepicker(){this.debug=false;this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false};$.extend(this._defaults,this.regional[""]);this.dpDiv=$('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')}$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",log:function(){if(this.debug){console.log.apply("",arguments)}},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(settings){extendRemove(this._defaults,settings||{});return this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase();var inline=(nodeName=="div"||nodeName=="span");if(!target.id){this.uuid+=1;target.id="dp"+this.uuid}var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{});if(nodeName=="input"){this._connectDatepicker(target,inst)}else{if(inline){this._inlineDatepicker(target,inst)}}},_newInst:function(target,inline){var id=target[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:id,input:target,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:inline,dpDiv:(!inline?this.dpDiv:$('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}},_connectDatepicker:function(target,inst){var input=$(target);inst.append=$([]);inst.trigger=$([]);if(input.hasClass(this.markerClassName)){return}this._attachments(input,inst);input.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.tcDatePicker",function(event,key,value){inst.settings[key]=value}).bind("getData.tcDatePicker",function(event,key){return this._get(inst,key)});this._autoSize(inst);$.data(target,PROP_NAME,inst)},_attachments:function(input,inst){var appendText=this._get(inst,"appendText");var isRTL=this._get(inst,"isRTL");if(inst.append){inst.append.remove()}if(appendText){inst.append=$('<span class="'+this._appendClass+'">'+appendText+"</span>");input[isRTL?"before":"after"](inst.append)}input.unbind("focus",this._showDatepicker);if(inst.trigger){inst.trigger.remove()}var showOn=this._get(inst,"showOn");if(showOn=="focus"||showOn=="both"){input.focus(this._showDatepicker)}if(showOn=="button"||showOn=="both"){var buttonText=this._get(inst,"buttonText");var buttonImage=this._get(inst,"buttonImage");inst.trigger=$(this._get(inst,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText}):$('<button type="button"></button>').addClass(this._triggerClass).html(buttonImage==""?buttonText:$("<img/>").attr({src:buttonImage,alt:buttonText,title:buttonText})));input[isRTL?"before":"after"](inst.trigger);inst.trigger.click(function(){if(TC_DATE_PICKER._datepickerShowing&&TC_DATE_PICKER._lastInput==input[0]){TC_DATE_PICKER._hideDatepicker()}else{TC_DATE_PICKER._showDatepicker(input[0])}return false})}},_autoSize:function(inst){if(this._get(inst,"autoSize")&&!inst.inline){var date=new Date(2009,12-1,20);var dateFormat=this._get(inst,"dateFormat");if(dateFormat.match(/[DM]/)){var findMax=function(names){var max=0;var maxI=0;for(var i=0;i<names.length;i++){if(names[i].length>max){max=names[i].length;maxI=i}}return maxI};date.setMonth(findMax(this._get(inst,(dateFormat.match(/MM/)?"monthNames":"monthNamesShort"))));date.setDate(findMax(this._get(inst,(dateFormat.match(/DD/)?"dayNames":"dayNamesShort")))+20-date.getDay())}inst.input.attr("size",this._formatDate(inst,date).length)}},_inlineDatepicker:function(target,inst){var divSpan=$(target);if(divSpan.hasClass(this.markerClassName)){return}divSpan.addClass(this.markerClassName).append(inst.dpDiv).bind("setData.tcDatePicker",function(event,key,value){inst.settings[key]=value}).bind("getData.tcDatePicker",function(event,key){return this._get(inst,key)});$.data(target,PROP_NAME,inst);this._setDate(inst,this._getDefaultDate(inst),true);this._updateDatepicker(inst);this._updateAlternate(inst);inst.dpDiv.show()},_dialogDatepicker:function(input,date,onSelect,settings,pos){var inst=this._dialogInst;if(!inst){this.uuid+=1;var id="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+id+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>');this._dialogInput.keydown(this._doKeyDown);$("body").append(this._dialogInput);inst=this._dialogInst=this._newInst(this._dialogInput,false);inst.settings={};$.data(this._dialogInput[0],PROP_NAME,inst)}extendRemove(inst.settings,settings||{});date=(date&&date.constructor==Date?this._formatDate(inst,date):date);this._dialogInput.val(date);this._pos=(pos?(pos.length?pos:[pos.pageX,pos.pageY]):null);if(!this._pos){var browserWidth=document.documentElement.clientWidth;var browserHeight=document.documentElement.clientHeight;var scrollX=document.documentElement.scrollLeft||document.body.scrollLeft;var scrollY=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[(browserWidth/2)-100+scrollX,(browserHeight/2)-150+scrollY]}this._dialogInput.css("left",(this._pos[0]+20)+"px").css("top",this._pos[1]+"px");inst.settings.onSelect=onSelect;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if($.blockUI){$.blockUI(this.dpDiv)}$.data(this._dialogInput[0],PROP_NAME,inst);return this},_destroyDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return}var nodeName=target.nodeName.toLowerCase();$.removeData(target,PROP_NAME);if(nodeName=="input"){inst.append.remove();inst.trigger.remove();$target.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)}else{if(nodeName=="div"||nodeName=="span"){$target.removeClass(this.markerClassName).empty()}}},_enableDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return}var nodeName=target.nodeName.toLowerCase();if(nodeName=="input"){target.disabled=false;inst.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else{if(nodeName=="div"||nodeName=="span"){var inline=$target.children("."+this._inlineClass);inline.children().removeClass("ui-state-disabled")}}this._disabledInputs=$.map(this._disabledInputs,function(value){return(value==target?null:value)})},_disableDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return}var nodeName=target.nodeName.toLowerCase();if(nodeName=="input"){target.disabled=true;inst.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else{if(nodeName=="div"||nodeName=="span"){var inline=$target.children("."+this._inlineClass);inline.children().addClass("ui-state-disabled")}}this._disabledInputs=$.map(this._disabledInputs,function(value){return(value==target?null:value)});this._disabledInputs[this._disabledInputs.length]=target},_isDisabledDatepicker:function(target){if(!target){return false}for(var i=0;i<this._disabledInputs.length;i++){if(this._disabledInputs[i]==target){return true}}return false},_getInst:function(target){try{return $.data(target,PROP_NAME)}catch(err){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(target,name,value){var inst=this._getInst(target);if(arguments.length==2&&typeof name=="string"){return(name=="defaults"?$.extend({},TC_DATE_PICKER._defaults):(inst?(name=="all"?$.extend({},inst.settings):this._get(inst,name)):null))}var settings=name||{};if(typeof name=="string"){settings={};settings[name]=value}if(inst){if(this._curInst==inst){this._hideDatepicker()}var date=this._getDateDatepicker(target,true);var minDate=this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");extendRemove(inst.settings,settings);if(minDate!==null&&settings.dateFormat!==undefined&&settings.minDate===undefined){inst.settings.minDate=this._formatDate(inst,minDate)}if(maxDate!==null&&settings.dateFormat!==undefined&&settings.maxDate===undefined){inst.settings.maxDate=this._formatDate(inst,maxDate)}this._attachments($(target),inst);this._autoSize(inst);this._setDateDatepicker(target,date);this._updateDatepicker(inst)}},_changeDatepicker:function(target,name,value){this._optionDatepicker(target,name,value)},_refreshDatepicker:function(target){var inst=this._getInst(target);if(inst){this._updateDatepicker(inst)}},_setDateDatepicker:function(target,date){var inst=this._getInst(target);if(inst){this._setDate(inst,date);this._updateDatepicker(inst);this._updateAlternate(inst)}},_getDateDatepicker:function(target,noDefault){var inst=this._getInst(target);if(inst&&!inst.inline){this._setDateFromField(inst,noDefault)}return(inst?this._getDate(inst):null)},_doKeyDown:function(event){var inst=TC_DATE_PICKER._getInst(event.target);var handled=true;var isRTL=inst.dpDiv.is(".ui-datepicker-rtl");inst._keyEvent=true;if(TC_DATE_PICKER._datepickerShowing){switch(event.keyCode){case 9:TC_DATE_PICKER._hideDatepicker();handled=false;break;case 13:var sel=$("td."+TC_DATE_PICKER._dayOverClass+":not(."+TC_DATE_PICKER._currentClass+")",inst.dpDiv);if(sel[0]){TC_DATE_PICKER._selectDay(event.target,inst.selectedMonth,inst.selectedYear,sel[0])}else{TC_DATE_PICKER._hideDatepicker()}return false;break;case 27:TC_DATE_PICKER._hideDatepicker();break;case 33:TC_DATE_PICKER._adjustDate(event.target,(event.ctrlKey?-TC_DATE_PICKER._get(inst,"stepBigMonths"):-TC_DATE_PICKER._get(inst,"stepMonths")),"M");break;case 34:TC_DATE_PICKER._adjustDate(event.target,(event.ctrlKey?+TC_DATE_PICKER._get(inst,"stepBigMonths"):+TC_DATE_PICKER._get(inst,"stepMonths")),"M");break;case 35:if(event.ctrlKey||event.metaKey){TC_DATE_PICKER._clearDate(event.target)}handled=event.ctrlKey||event.metaKey;break;case 36:if(event.ctrlKey||event.metaKey){TC_DATE_PICKER._gotoToday(event.target)}handled=event.ctrlKey||event.metaKey;break;case 37:if(event.ctrlKey||event.metaKey){TC_DATE_PICKER._adjustDate(event.target,(isRTL?+1:-1),"D")}handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){TC_DATE_PICKER._adjustDate(event.target,(event.ctrlKey?-TC_DATE_PICKER._get(inst,"stepBigMonths"):-TC_DATE_PICKER._get(inst,"stepMonths")),"M")}break;case 38:if(event.ctrlKey||event.metaKey){TC_DATE_PICKER._adjustDate(event.target,-7,"D")}handled=event.ctrlKey||event.metaKey;break;case 39:if(event.ctrlKey||event.metaKey){TC_DATE_PICKER._adjustDate(event.target,(isRTL?-1:+1),"D")}handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){TC_DATE_PICKER._adjustDate(event.target,(event.ctrlKey?+TC_DATE_PICKER._get(inst,"stepBigMonths"):+TC_DATE_PICKER._get(inst,"stepMonths")),"M")}break;case 40:if(event.ctrlKey||event.metaKey){TC_DATE_PICKER._adjustDate(event.target,+7,"D")}handled=event.ctrlKey||event.metaKey;break;default:handled=false}}else{if(event.keyCode==36&&event.ctrlKey){TC_DATE_PICKER._showDatepicker(this)}else{handled=false}}if(handled){event.preventDefault();event.stopPropagation()}},_doKeyPress:function(event){var inst=TC_DATE_PICKER._getInst(event.target);if(TC_DATE_PICKER._get(inst,"constrainInput")){var chars=TC_DATE_PICKER._possibleChars(TC_DATE_PICKER._get(inst,"dateFormat"));var chr=String.fromCharCode(event.charCode==undefined?event.keyCode:event.charCode);return event.ctrlKey||event.metaKey||(chr<" "||!chars||chars.indexOf(chr)>-1)}},_doKeyUp:function(event){var inst=TC_DATE_PICKER._getInst(event.target);if(inst.input.val()!=inst.lastVal){try{var date=TC_DATE_PICKER.parseDate(TC_DATE_PICKER._get(inst,"dateFormat"),(inst.input?inst.input.val():null),TC_DATE_PICKER._getFormatConfig(inst));if(date){TC_DATE_PICKER._setDateFromField(inst);TC_DATE_PICKER._updateAlternate(inst);TC_DATE_PICKER._updateDatepicker(inst)}}catch(event){TC_DATE_PICKER.log(event)}}return true},_showDatepicker:function(input){input=input.target||input;if(input.nodeName.toLowerCase()!="input"){input=$("input",input.parentNode)[0]}if(TC_DATE_PICKER._isDisabledDatepicker(input)||TC_DATE_PICKER._lastInput==input){return}var inst=TC_DATE_PICKER._getInst(input);if(TC_DATE_PICKER._curInst&&TC_DATE_PICKER._curInst!=inst){TC_DATE_PICKER._curInst.dpDiv.stop(true,true)}var beforeShow=TC_DATE_PICKER._get(inst,"beforeShow");extendRemove(inst.settings,(beforeShow?beforeShow.apply(input,[input,inst]):{}));inst.lastVal=null;TC_DATE_PICKER._lastInput=input;TC_DATE_PICKER._setDateFromField(inst);if(TC_DATE_PICKER._inDialog){input.value=""}if(!TC_DATE_PICKER._pos){TC_DATE_PICKER._pos=TC_DATE_PICKER._findPos(input);TC_DATE_PICKER._pos[1]+=input.offsetHeight}var isFixed=false;$(input).parents().each(function(){isFixed|=$(this).css("position")=="fixed";return !isFixed});if(isFixed&&$.browser.opera){TC_DATE_PICKER._pos[0]-=document.documentElement.scrollLeft;TC_DATE_PICKER._pos[1]-=document.documentElement.scrollTop}var offset={left:TC_DATE_PICKER._pos[0],top:TC_DATE_PICKER._pos[1]};TC_DATE_PICKER._pos=null;inst.dpDiv.empty();inst.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});TC_DATE_PICKER._updateDatepicker(inst);offset=TC_DATE_PICKER._checkOffset(inst,offset,isFixed);inst.dpDiv.css({position:(TC_DATE_PICKER._inDialog&&$.blockUI?"static":(isFixed?"fixed":"absolute")),display:"none",left:offset.left+"px",top:offset.top+"px"});if(!inst.inline){var showAnim=TC_DATE_PICKER._get(inst,"showAnim");var duration=TC_DATE_PICKER._get(inst,"duration");var postProcess=function(){TC_DATE_PICKER._datepickerShowing=true;var cover=inst.dpDiv.find("iframe.ui-datepicker-cover");if(!!cover.length){var borders=TC_DATE_PICKER._getBorders(inst.dpDiv);cover.css({left:-borders[0],top:-borders[1],width:inst.dpDiv.outerWidth(),height:inst.dpDiv.outerHeight()})}};inst.dpDiv.zIndex($(input).zIndex()+1);if($.effects&&$.effects[showAnim]){inst.dpDiv.show(showAnim,TC_DATE_PICKER._get(inst,"showOptions"),duration,postProcess)}else{inst.dpDiv[showAnim||"show"]((showAnim?duration:null),postProcess)}if(!showAnim||!duration){postProcess()}if(inst.input.is(":visible")&&!inst.input.is(":disabled")){inst.input.focus()}TC_DATE_PICKER._curInst=inst}},_updateDatepicker:function(inst){var self=this;var borders=TC_DATE_PICKER._getBorders(inst.dpDiv);inst.dpDiv.empty().append(this._generateHTML(inst));var cover=inst.dpDiv.find("iframe.ui-datepicker-cover");if(!!cover.length){cover.css({left:-borders[0],top:-borders[1],width:inst.dpDiv.outerWidth(),height:inst.dpDiv.outerHeight()})}inst.dpDiv.find("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a").bind("mouseout",function(){$(this).removeClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!=-1){$(this).removeClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!=-1){$(this).removeClass("ui-datepicker-next-hover")}}).bind("mouseover",function(){if(!self._isDisabledDatepicker(inst.inline?inst.dpDiv.parent()[0]:inst.input[0])){$(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");$(this).addClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!=-1){$(this).addClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!=-1){$(this).addClass("ui-datepicker-next-hover")}}}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end();var numMonths=this._getNumberOfMonths(inst);var cols=numMonths[1];var width=17;if(cols>1){inst.dpDiv.addClass("ui-datepicker-multi-"+cols).css("width",(width*cols)+"em")}else{inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("")}inst.dpDiv[(numMonths[0]!=1||numMonths[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");inst.dpDiv[(this._get(inst,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(inst==TC_DATE_PICKER._curInst&&TC_DATE_PICKER._datepickerShowing&&inst.input&&inst.input.is(":visible")&&!inst.input.is(":disabled")&&inst.input[0]!=document.activeElement){inst.input.focus()}if(inst.yearshtml){var origyearshtml=inst.yearshtml;setTimeout(function(){if(origyearshtml===inst.yearshtml){inst.dpDiv.find("select.ui-datepicker-year:first").replaceWith(inst.yearshtml)}origyearshtml=inst.yearshtml=null},0)}},_getBorders:function(elem){var convert=function(value){return{thin:1,medium:2,thick:3}[value]||value};return[parseFloat(convert(elem.css("border-left-width"))),parseFloat(convert(elem.css("border-top-width")))]},_checkOffset:function(inst,offset,isFixed){var dpWidth=inst.dpDiv.outerWidth();var dpHeight=inst.dpDiv.outerHeight();var inputWidth=inst.input?inst.input.outerWidth():0;var inputHeight=inst.input?inst.input.outerHeight():0;var viewWidth=document.documentElement.clientWidth+$(document).scrollLeft();var viewHeight=document.documentElement.clientHeight+$(document).scrollTop();offset.left-=(this._get(inst,"isRTL")?(dpWidth-inputWidth):0);offset.left-=(isFixed&&offset.left==inst.input.offset().left)?$(document).scrollLeft():0;offset.top-=(isFixed&&offset.top==(inst.input.offset().top+inputHeight))?$(document).scrollTop():0;offset.left-=Math.min(offset.left,(offset.left+dpWidth>viewWidth&&viewWidth>dpWidth)?Math.abs(offset.left+dpWidth-viewWidth):0);offset.top-=Math.min(offset.top,(offset.top+dpHeight>viewHeight&&viewHeight>dpHeight)?Math.abs(dpHeight+inputHeight):0);return offset},_findPos:function(obj){var inst=this._getInst(obj);var isRTL=this._get(inst,"isRTL");while(obj&&(obj.type=="hidden"||obj.nodeType!=1||$.expr.filters.hidden(obj))){obj=obj[isRTL?"previousSibling":"nextSibling"]}var position=$(obj).offset();return[position.left,position.top]},_hideDatepicker:function(input){var inst=this._curInst;if(!inst||(input&&inst!=$.data(input,PROP_NAME))){return}if(this._datepickerShowing){var showAnim=this._get(inst,"showAnim");var duration=this._get(inst,"duration");var postProcess=function(){TC_DATE_PICKER._tidyDialog(inst);this._curInst=null};if($.effects&&$.effects[showAnim]){inst.dpDiv.hide(showAnim,TC_DATE_PICKER._get(inst,"showOptions"),duration,postProcess)}else{inst.dpDiv[(showAnim=="slideDown"?"slideUp":(showAnim=="fadeIn"?"fadeOut":"hide"))]((showAnim?duration:null),postProcess)}if(!showAnim){postProcess()}var onClose=this._get(inst,"onClose");if(onClose){onClose.apply((inst.input?inst.input[0]:null),[(inst.input?inst.input.val():""),inst])}this._datepickerShowing=false;this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if($.blockUI){$.unblockUI();$("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(inst){inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(event){if(!TC_DATE_PICKER._curInst){return}var $target=$(event.target);if($target[0].id!=TC_DATE_PICKER._mainDivId&&$target.parents("#"+TC_DATE_PICKER._mainDivId).length==0&&!$target.hasClass(TC_DATE_PICKER.markerClassName)&&!$target.hasClass(TC_DATE_PICKER._triggerClass)&&TC_DATE_PICKER._datepickerShowing&&!(TC_DATE_PICKER._inDialog&&$.blockUI)){TC_DATE_PICKER._hideDatepicker()}},_adjustDate:function(id,offset,period){var target=$(id);var inst=this._getInst(target[0]);if(this._isDisabledDatepicker(target[0])){return}this._adjustInstDate(inst,offset+(period=="M"?this._get(inst,"showCurrentAtPos"):0),period);this._updateDatepicker(inst)},_gotoToday:function(id){var target=$(id);var inst=this._getInst(target[0]);if(this._get(inst,"gotoCurrent")&&inst.currentDay){inst.selectedDay=inst.currentDay;inst.drawMonth=inst.selectedMonth=inst.currentMonth;inst.drawYear=inst.selectedYear=inst.currentYear}else{var date=new Date();inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear()}this._notifyChange(inst);this._adjustDate(target)},_selectMonthYear:function(id,select,period){var target=$(id);var inst=this._getInst(target[0]);inst._selectingMonthYear=false;inst["selected"+(period=="M"?"Month":"Year")]=inst["draw"+(period=="M"?"Month":"Year")]=parseInt(select.options[select.selectedIndex].value,10);this._notifyChange(inst);this._adjustDate(target)},_clickMonthYear:function(id){var target=$(id);var inst=this._getInst(target[0]);if(inst.input&&inst._selectingMonthYear){setTimeout(function(){inst.input.focus()},0)}inst._selectingMonthYear=!inst._selectingMonthYear},_selectDay:function(id,month,year,td){var target=$(id);if($(td).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0])){return}var inst=this._getInst(target[0]);inst.selectedDay=inst.currentDay=$("a",td).html();inst.selectedMonth=inst.currentMonth=month;inst.selectedYear=inst.currentYear=year;this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear))},_clearDate:function(id){var target=$(id);var inst=this._getInst(target[0]);this._selectDate(target,"")},_selectDate:function(id,dateStr){var target=$(id);var inst=this._getInst(target[0]);dateStr=(dateStr!=null?dateStr:this._formatDate(inst));if(inst.input){inst.input.val(dateStr)}this._updateAlternate(inst);var onSelect=this._get(inst,"onSelect");if(onSelect){onSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst])}else{if(inst.input){inst.input.trigger("change")}}if(inst.inline){this._updateDatepicker(inst)}else{this._hideDatepicker();this._lastInput=inst.input[0];if(typeof(inst.input[0])!="object"){inst.input.focus()}this._lastInput=null}},_updateAlternate:function(inst){var altField=this._get(inst,"altField");if(altField){var altFormat=this._get(inst,"altFormat")||this._get(inst,"dateFormat");var date=this._getDate(inst);var dateStr=this.formatDate(altFormat,date,this._getFormatConfig(inst));$(altField).each(function(){$(this).val(dateStr)})}},noWeekends:function(date){var day=date.getDay();return[(day>0&&day<6),""]},iso8601Week:function(date){var checkDate=new Date(date.getTime());checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));var time=checkDate.getTime();checkDate.setMonth(0);checkDate.setDate(1);return Math.floor(Math.round((time-checkDate)/86400000)/7)+1},parseDate:function(format,value,settings){if(format==null||value==null){throw"Invalid arguments"}value=(typeof value=="object"?value.toString():value+"");if(value==""){return null}var shortYearCutoff=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff;shortYearCutoff=(typeof shortYearCutoff!="string"?shortYearCutoff:new Date().getFullYear()%100+parseInt(shortYearCutoff,10));var dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort;var dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames;var monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort;var monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames;var year=-1;var month=-1;var day=-1;var doy=-1;var literal=false;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches){iFormat++}return matches};var getNumber=function(match){var isDoubled=lookAhead(match);var size=(match=="@"?14:(match=="!"?20:(match=="y"&&isDoubled?4:(match=="o"?3:2))));var digits=new RegExp("^\\d{1,"+size+"}");var num=value.substring(iValue).match(digits);if(!num){throw"Missing number at position "+iValue}iValue+=num[0].length;return parseInt(num[0],10)};var getName=function(match,shortNames,longNames){var names=(lookAhead(match)?longNames:shortNames);for(var i=0;i<names.length;i++){if(value.substr(iValue,names[i].length).toLowerCase()==names[i].toLowerCase()){iValue+=names[i].length;return i+1}}throw"Unknown name at position "+iValue};var checkLiteral=function(){if(value.charAt(iValue)!=format.charAt(iFormat)){throw"Unexpected literal at position "+iValue}iValue++};var iValue=0;for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false}else{checkLiteral()}}else{switch(format.charAt(iFormat)){case"d":day=getNumber("d");break;case"D":getName("D",dayNamesShort,dayNames);break;case"o":doy=getNumber("o");break;case"m":month=getNumber("m");break;case"M":month=getName("M",monthNamesShort,monthNames);break;case"y":year=getNumber("y");break;case"@":var date=new Date(getNumber("@"));year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"!":var date=new Date((getNumber("!")-this._ticksTo1970)/10000);year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"'":if(lookAhead("'")){checkLiteral()}else{literal=true}break;default:checkLiteral()}}}if(year==-1){year=new Date().getFullYear()}else{if(year<100){year+=new Date().getFullYear()-new Date().getFullYear()%100+(year<=shortYearCutoff?0:-100)}}if(doy>-1){month=1;day=doy;do{var dim=this._getDaysInMonth(year,month-1);if(day<=dim){break}month++;day-=dim}while(true)}var date=this._daylightSavingAdjust(new Date(year,month-1,day));if(date.getFullYear()!=year||date.getMonth()+1!=month||date.getDate()!=day){throw"Invalid date"}return date},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*10000000),formatDate:function(format,date,settings){if(!date){return""}var dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort;var dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames;var monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort;var monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches){iFormat++}return matches};var formatNumber=function(match,value,len){var num=""+value;if(lookAhead(match)){while(num.length<len){num="0"+num}}return num};var formatName=function(match,value,shortNames,longNames){return(lookAhead(match)?longNames[value]:shortNames[value])};var output="";var literal=false;if(date){for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false}else{output+=format.charAt(iFormat)}}else{switch(format.charAt(iFormat)){case"d":output+=formatNumber("d",date.getDate(),2);break;case"D":output+=formatName("D",date.getDay(),dayNamesShort,dayNames);break;case"o":output+=formatNumber("o",(date.getTime()-new Date(date.getFullYear(),0,0).getTime())/86400000,3);break;case"m":output+=formatNumber("m",date.getMonth()+1,2);break;case"M":output+=formatName("M",date.getMonth(),monthNamesShort,monthNames);break;case"y":output+=(lookAhead("y")?date.getFullYear():(date.getYear()%100<10?"0":"")+date.getYear()%100);break;case"@":output+=date.getTime();break;case"!":output+=date.getTime()*10000+this._ticksTo1970;break;case"'":if(lookAhead("'")){output+="'"}else{literal=true}break;default:output+=format.charAt(iFormat)}}}}return output},_possibleChars:function(format){var chars="";var literal=false;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches){iFormat++}return matches};for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false}else{chars+=format.charAt(iFormat)}}else{switch(format.charAt(iFormat)){case"d":case"m":case"y":case"@":chars+="0123456789";break;case"D":case"M":return null;case"'":if(lookAhead("'")){chars+="'"}else{literal=true}break;default:chars+=format.charAt(iFormat)}}}return chars},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name]},_setDateFromField:function(inst,noDefault){if(inst.input.val()==inst.lastVal){return}var dateFormat=this._get(inst,"dateFormat");var dates=inst.lastVal=inst.input?inst.input.val():null;var date,defaultDate;date=defaultDate=this._getDefaultDate(inst);var settings=this._getFormatConfig(inst);try{date=this.parseDate(dateFormat,dates,settings)||defaultDate}catch(event){this.log(event);dates=(noDefault?"":dates)}inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();inst.currentDay=(dates?date.getDate():0);inst.currentMonth=(dates?date.getMonth():0);inst.currentYear=(dates?date.getFullYear():0);this._adjustInstDate(inst)},_getDefaultDate:function(inst){return this._restrictMinMax(inst,this._determineDate(inst,this._get(inst,"defaultDate"),new Date()))},_determineDate:function(inst,date,defaultDate){var offsetNumeric=function(offset){var date=new Date();date.setDate(date.getDate()+offset);return date};var offsetString=function(offset){try{return TC_DATE_PICKER.parseDate(TC_DATE_PICKER._get(inst,"dateFormat"),offset,TC_DATE_PICKER._getFormatConfig(inst))}catch(e){}var date=(offset.toLowerCase().match(/^c/)?TC_DATE_PICKER._getDate(inst):null)||new Date();var year=date.getFullYear();var month=date.getMonth();var day=date.getDate();var pattern=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g;var matches=pattern.exec(offset);while(matches){switch(matches[2]||"d"){case"d":case"D":day+=parseInt(matches[1],10);break;case"w":case"W":day+=parseInt(matches[1],10)*7;break;case"m":case"M":month+=parseInt(matches[1],10);day=Math.min(day,TC_DATE_PICKER._getDaysInMonth(year,month));break;case"y":case"Y":year+=parseInt(matches[1],10);day=Math.min(day,TC_DATE_PICKER._getDaysInMonth(year,month));break}matches=pattern.exec(offset)}return new Date(year,month,day)};var newDate=(date==null||date===""?defaultDate:(typeof date=="string"?offsetString(date):(typeof date=="number"?(isNaN(date)?defaultDate:offsetNumeric(date)):new Date(date.getTime()))));newDate=(newDate&&newDate.toString()=="Invalid Date"?defaultDate:newDate);if(newDate){newDate.setHours(0);newDate.setMinutes(0);newDate.setSeconds(0);newDate.setMilliseconds(0)}return this._daylightSavingAdjust(newDate)},_daylightSavingAdjust:function(date){if(!date){return null}date.setHours(date.getHours()>12?date.getHours()+2:0);return date},_setDate:function(inst,date,noChange){var clear=!date;var origMonth=inst.selectedMonth;var origYear=inst.selectedYear;var newDate=this._restrictMinMax(inst,this._determineDate(inst,date,new Date()));inst.selectedDay=inst.currentDay=newDate.getDate();inst.drawMonth=inst.selectedMonth=inst.currentMonth=newDate.getMonth();inst.drawYear=inst.selectedYear=inst.currentYear=newDate.getFullYear();if((origMonth!=inst.selectedMonth||origYear!=inst.selectedYear)&&!noChange){this._notifyChange(inst)}this._adjustInstDate(inst);if(inst.input){inst.input.val(clear?"":this._formatDate(inst))}},_getDate:function(inst){var startDate=(!inst.currentYear||(inst.input&&inst.input.val()=="")?null:this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return startDate},_generateHTML:function(inst){var today=new Date();today=this._daylightSavingAdjust(new Date(today.getFullYear(),today.getMonth(),today.getDate()));var isRTL=this._get(inst,"isRTL");var showButtonPanel=this._get(inst,"showButtonPanel");var hideIfNoPrevNext=this._get(inst,"hideIfNoPrevNext");var navigationAsDateFormat=this._get(inst,"navigationAsDateFormat");var numMonths=this._getNumberOfMonths(inst);var showCurrentAtPos=this._get(inst,"showCurrentAtPos");var stepMonths=this._get(inst,"stepMonths");var isMultiMonth=(numMonths[0]!=1||numMonths[1]!=1);var currentDate=this._daylightSavingAdjust((!inst.currentDay?new Date(9999,9,9):new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));var minDate=this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");var drawMonth=inst.drawMonth-showCurrentAtPos;var drawYear=inst.drawYear;if(drawMonth<0){drawMonth+=12;drawYear--}if(maxDate){var maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-(numMonths[0]*numMonths[1])+1,maxDate.getDate()));maxDraw=(minDate&&maxDraw<minDate?minDate:maxDraw);while(this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw){drawMonth--;if(drawMonth<0){drawMonth=11;drawYear--}}}inst.drawMonth=drawMonth;inst.drawYear=drawYear;var prevText=this._get(inst,"prevText");prevText=(!navigationAsDateFormat?prevText:this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst)));var prev=(this._canAdjustMonth(inst,-1,drawYear,drawMonth)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+dpuuid+".tcDatePicker._adjustDate('#"+inst.id+"', -"+stepMonths+", 'M');\" title=\""+prevText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"e":"w")+'">'+prevText+"</span></a>":(hideIfNoPrevNext?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+prevText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"e":"w")+'">'+prevText+"</span></a>"));var nextText=this._get(inst,"nextText");nextText=(!navigationAsDateFormat?nextText:this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst)));var next=(this._canAdjustMonth(inst,+1,drawYear,drawMonth)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+dpuuid+".tcDatePicker._adjustDate('#"+inst.id+"', +"+stepMonths+", 'M');\" title=\""+nextText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"w":"e")+'">'+nextText+"</span></a>":(hideIfNoPrevNext?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+nextText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"w":"e")+'">'+nextText+"</span></a>"));var currentText=this._get(inst,"currentText");var gotoDate=(this._get(inst,"gotoCurrent")&&inst.currentDay?currentDate:today);currentText=(!navigationAsDateFormat?currentText:this.formatDate(currentText,gotoDate,this._getFormatConfig(inst)));var controls=(!inst.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+dpuuid+'.tcDatePicker._hideDatepicker();">'+this._get(inst,"closeText")+"</button>":"");var buttonPanel=(showButtonPanel)?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(isRTL?controls:"")+(this._isInRange(inst,gotoDate)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+dpuuid+".tcDatePicker._gotoToday('#"+inst.id+"');\">"+currentText+"</button>":"")+(isRTL?"":controls)+"</div>":"";var firstDay=parseInt(this._get(inst,"firstDay"),10);firstDay=(isNaN(firstDay)?0:firstDay);var showWeek=this._get(inst,"showWeek");var dayNames=this._get(inst,"dayNames");var dayNamesShort=this._get(inst,"dayNamesShort");var dayNamesMin=this._get(inst,"dayNamesMin");var monthNames=this._get(inst,"monthNames");var monthNamesShort=this._get(inst,"monthNamesShort");var beforeShowDay=this._get(inst,"beforeShowDay");var showOtherMonths=this._get(inst,"showOtherMonths");var selectOtherMonths=this._get(inst,"selectOtherMonths");var calculateWeek=this._get(inst,"calculateWeek")||this.iso8601Week;var defaultDate=this._getDefaultDate(inst);var html="";for(var row=0;row<numMonths[0];row++){var group="";for(var col=0;col<numMonths[1];col++){var selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay));var cornerClass=" ui-corner-all";var calender="";if(isMultiMonth){calender+='<div class="ui-datepicker-group';if(numMonths[1]>1){switch(col){case 0:calender+=" ui-datepicker-group-first";cornerClass=" ui-corner-"+(isRTL?"right":"left");break;case numMonths[1]-1:calender+=" ui-datepicker-group-last";cornerClass=" ui-corner-"+(isRTL?"left":"right");break;default:calender+=" ui-datepicker-group-middle";cornerClass="";break}}calender+='">'}calender+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+cornerClass+'">'+(/all|left/.test(cornerClass)&&row==0?(isRTL?next:prev):"")+(/all|right/.test(cornerClass)&&row==0?(isRTL?prev:next):"")+this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,row>0||col>0,monthNames,monthNamesShort)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var thead=(showWeek?'<th class="ui-datepicker-week-col">'+this._get(inst,"weekHeader")+"</th>":"");for(var dow=0;dow<7;dow++){var day=(dow+firstDay)%7;thead+="<th"+((dow+firstDay+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+dayNames[day]+'">'+dayNamesMin[day]+"</span></th>"}calender+=thead+"</tr></thead><tbody>";var daysInMonth=this._getDaysInMonth(drawYear,drawMonth);if(drawYear==inst.selectedYear&&drawMonth==inst.selectedMonth){inst.selectedDay=Math.min(inst.selectedDay,daysInMonth)}var leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7;var numRows=(isMultiMonth?6:Math.ceil((leadDays+daysInMonth)/7));var printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays));for(var dRow=0;dRow<numRows;dRow++){calender+="<tr>";var tbody=(!showWeek?"":'<td class="ui-datepicker-week-col">'+this._get(inst,"calculateWeek")(printDate)+"</td>");for(var dow=0;dow<7;dow++){var daySettings=(beforeShowDay?beforeShowDay.apply((inst.input?inst.input[0]:null),[printDate]):[true,""]);var otherMonth=(printDate.getMonth()!=drawMonth);var unselectable=(otherMonth&&!selectOtherMonths)||!daySettings[0]||(minDate&&printDate<minDate)||(maxDate&&printDate>maxDate);tbody+='<td class="'+((dow+firstDay+6)%7>=5?" ui-datepicker-week-end":"")+(otherMonth?" ui-datepicker-other-month":"")+((printDate.getTime()==selectedDate.getTime()&&drawMonth==inst.selectedMonth&&inst._keyEvent)||(defaultDate.getTime()==printDate.getTime()&&defaultDate.getTime()==selectedDate.getTime())?" "+this._dayOverClass:"")+(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+(printDate.getTime()==currentDate.getTime()?" "+this._currentClass:"")+(printDate.getTime()==today.getTime()?" ui-datepicker-today":""))+'"'+((!otherMonth||showOtherMonths)&&daySettings[2]?' title="'+daySettings[2]+'"':"")+(unselectable?"":' onclick="DP_jQuery_'+dpuuid+".tcDatePicker._selectDay('#"+inst.id+"',"+printDate.getMonth()+","+printDate.getFullYear()+', this);return false;"')+">"+(otherMonth&&!showOtherMonths?"&#xa0;":(unselectable?'<span class="ui-state-default">'+printDate.getDate()+"</span>":'<a class="ui-state-default'+(printDate.getTime()==today.getTime()?" ui-state-highlight":"")+(printDate.getTime()==currentDate.getTime()?" ui-state-active":"")+(otherMonth?" ui-priority-secondary":"")+'" href="#">'+printDate.getDate()+"</a>"))+"</td>";printDate.setDate(printDate.getDate()+1);printDate=this._daylightSavingAdjust(printDate)}calender+=tbody+"</tr>"}drawMonth++;if(drawMonth>11){drawMonth=0;drawYear++}calender+="</tbody></table>"+(isMultiMonth?"</div>"+((numMonths[0]>0&&col==numMonths[1]-1)?'<div class="ui-datepicker-row-break"></div>':""):"");group+=calender}html+=group}html+=buttonPanel+($.browser.msie&&parseInt($.browser.version,10)<7&&!inst.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");inst._keyEvent=false;return html},_generateMonthYearHeader:function(inst,drawMonth,drawYear,minDate,maxDate,secondary,monthNames,monthNamesShort){var changeMonth=this._get(inst,"changeMonth");var changeYear=this._get(inst,"changeYear");var showMonthAfterYear=this._get(inst,"showMonthAfterYear");var html='<div class="ui-datepicker-title">';var monthHtml="";if(secondary||!changeMonth){monthHtml+='<span class="ui-datepicker-month">'+monthNames[drawMonth]+"</span>"}else{var inMinYear=(minDate&&minDate.getFullYear()==drawYear);var inMaxYear=(maxDate&&maxDate.getFullYear()==drawYear);monthHtml+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+dpuuid+".tcDatePicker._selectMonthYear('#"+inst.id+"', this, 'M');\" onclick=\"DP_jQuery_"+dpuuid+".tcDatePicker._clickMonthYear('#"+inst.id+"');\">";for(var month=0;month<12;month++){if((!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth())){monthHtml+='<option value="'+month+'"'+(month==drawMonth?' selected="selected"':"")+">"+monthNamesShort[month]+"</option>"}}monthHtml+="</select>"}if(!showMonthAfterYear){html+=monthHtml+(secondary||!(changeMonth&&changeYear)?"&#xa0;":"")}inst.yearshtml="";if(secondary||!changeYear){html+='<span class="ui-datepicker-year">'+drawYear+"</span>"}else{var years=this._get(inst,"yearRange").split(":");var thisYear=new Date().getFullYear();var determineYear=function(value){var year=(value.match(/c[+-].*/)?drawYear+parseInt(value.substring(1),10):(value.match(/[+-].*/)?thisYear+parseInt(value,10):parseInt(value,10)));return(isNaN(year)?thisYear:year)};var year=determineYear(years[0]);var endYear=Math.max(year,determineYear(years[1]||""));year=(minDate?Math.max(year,minDate.getFullYear()):year);endYear=(maxDate?Math.min(endYear,maxDate.getFullYear()):endYear);inst.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+dpuuid+".tcDatePicker._selectMonthYear('#"+inst.id+"', this, 'Y');\" onclick=\"DP_jQuery_"+dpuuid+".tcDatePicker._clickMonthYear('#"+inst.id+"');\">";for(;year<=endYear;year++){inst.yearshtml+='<option value="'+year+'"'+(year==drawYear?' selected="selected"':"")+">"+year+"</option>"}inst.yearshtml+="</select>";if(!$.browser.mozilla){html+=inst.yearshtml;inst.yearshtml=null}else{html+='<select class="ui-datepicker-year"><option value="'+drawYear+'" selected="selected">'+drawYear+"</option></select>"}}html+=this._get(inst,"yearSuffix");if(showMonthAfterYear){html+=(secondary||!(changeMonth&&changeYear)?"&#xa0;":"")+monthHtml}html+="</div>";return html},_adjustInstDate:function(inst,offset,period){var year=inst.drawYear+(period=="Y"?offset:0);var month=inst.drawMonth+(period=="M"?offset:0);var day=Math.min(inst.selectedDay,this._getDaysInMonth(year,month))+(period=="D"?offset:0);var date=this._restrictMinMax(inst,this._daylightSavingAdjust(new Date(year,month,day)));inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();if(period=="M"||period=="Y"){this._notifyChange(inst)}},_restrictMinMax:function(inst,date){var minDate=this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");var newDate=(minDate&&date<minDate?minDate:date);newDate=(maxDate&&newDate>maxDate?maxDate:newDate);return newDate},_notifyChange:function(inst){var onChange=this._get(inst,"onChangeMonthYear");if(onChange){onChange.apply((inst.input?inst.input[0]:null),[inst.selectedYear,inst.selectedMonth+1,inst])}},_getNumberOfMonths:function(inst){var numMonths=this._get(inst,"numberOfMonths");return(numMonths==null?[1,1]:(typeof numMonths=="number"?[1,numMonths]:numMonths))},_getMinMaxDate:function(inst,minMax){return this._determineDate(inst,this._get(inst,minMax+"Date"),null)},_getDaysInMonth:function(year,month){return 32-this._daylightSavingAdjust(new Date(year,month,32)).getDate()},_getFirstDayOfMonth:function(year,month){return new Date(year,month,1).getDay()},_canAdjustMonth:function(inst,offset,curYear,curMonth){var numMonths=this._getNumberOfMonths(inst);var date=this._daylightSavingAdjust(new Date(curYear,curMonth+(offset<0?offset:numMonths[0]*numMonths[1]),1));if(offset<0){date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth()))}return this._isInRange(inst,date)},_isInRange:function(inst,date){var minDate=this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");return((!minDate||date.getTime()>=minDate.getTime())&&(!maxDate||date.getTime()<=maxDate.getTime()))},_getFormatConfig:function(inst){var shortYearCutoff=this._get(inst,"shortYearCutoff");shortYearCutoff=(typeof shortYearCutoff!="string"?shortYearCutoff:new Date().getFullYear()%100+parseInt(shortYearCutoff,10));return{shortYearCutoff:shortYearCutoff,dayNamesShort:this._get(inst,"dayNamesShort"),dayNames:this._get(inst,"dayNames"),monthNamesShort:this._get(inst,"monthNamesShort"),monthNames:this._get(inst,"monthNames")}},_formatDate:function(inst,day,month,year){if(!day){inst.currentDay=inst.selectedDay;inst.currentMonth=inst.selectedMonth;inst.currentYear=inst.selectedYear}var date=(day?(typeof day=="object"?day:this._daylightSavingAdjust(new Date(year,month,day))):this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return this.formatDate(this._get(inst,"dateFormat"),date,this._getFormatConfig(inst))}});function extendRemove(target,props){$.extend(target,props);for(var name in props){if(props[name]==null||props[name]==undefined){target[name]=props[name]}}return target}function isArray(a){return(a&&(($.browser.safari&&typeof a=="object"&&a.length)||(a.constructor&&a.constructor.toString().match(/\Array\(\)/))))}var oldFnDatepicker=$.fn.tcDatePicker;$.fn.tcDatePicker=function(options){if(!this.length){return this}if(!TC_DATE_PICKER.initialized){$(document).mousedown(TC_DATE_PICKER._checkExternalClick).find("body").append(TC_DATE_PICKER.dpDiv);TC_DATE_PICKER.initialized=true}var otherArgs=Array.prototype.slice.call(arguments,1);if(typeof options=="string"&&(options=="isDisabled"||options=="getDate"||options=="widget")){return TC_DATE_PICKER["_"+options+"Datepicker"].apply(TC_DATE_PICKER,[this[0]].concat(otherArgs))}if(options=="option"&&arguments.length==2&&typeof arguments[1]=="string"){return TC_DATE_PICKER["_"+options+"Datepicker"].apply(TC_DATE_PICKER,[this[0]].concat(otherArgs))}return this.each(function(){typeof options=="string"?TC_DATE_PICKER["_"+options+"Datepicker"].apply(TC_DATE_PICKER,[this].concat(otherArgs)):TC_DATE_PICKER._attachDatepicker(this,options)})};$.fn.tcDatePicker.noConflict=function(){$.fn.tcDatePicker=oldFnDatepicker||$.fn.tcDatePicker;return this};var TC_DATE_PICKER=new Datepicker();var oldDatepicker=$.tcDatePicker;$.tcDatePicker=TC_DATE_PICKER;TC_DATE_PICKER.initialized=false;TC_DATE_PICKER.uuid=new Date().getTime();TC_DATE_PICKER.version="1.8.11";TC_DATE_PICKER.noConflict=function(){$.tcDatePicker=oldDatepicker||$.tcDatePicker;return this};window["DP_jQuery_"+dpuuid]=$})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/event-edit/event-edit-dialog.soy' */
// This file was automatically generated from event-edit-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.eventEdit = function(opt_data, opt_ignored) {
  return '<form name="event-edit" class="aui event-edit" method="POST" action="#"><input type="hidden" name="uid" value=""><input type="hidden" name="originalStartDate" value=""><input type="hidden" name="originalSubCalendarId" value=""><input type="hidden" name="originalEventType" value=""><input type="hidden" name="originalCustomEventTypeId" value=""><input type="hidden" name="childSubCalendarId" value=""><div class="event-type subcalendar-event"><div class="aui-message aui-message-error error calendar-error hidden"><p class="title"><strong>' + soy.$$escapeHtml('Es ist mindestens ein Fehler aufgetreten.') + '</strong></p><div class="error-content"><ul class="error-messages hidden"></ul></div></div><div class="field-group field-group-calendar"><label for="calendar">' + soy.$$escapeHtml('Kalender') + '<span class="aui-icon icon-required"></span></label><select name="calendar" id="calendar" class="sub-calendar-select select"></select><a href="#" id="calendar-tooltip" class="aui-icon icon-help hidden" original-title="show tooltip" title="' + soy.$$escapeHtml('This field is enabled when the field \x22Edit this instance only\x22 is unchecked\r\n\r\nDieses Feld wird nur aktiviert, wenn das Feld \x22Edit this instance only\x22 deaktiviert ist.') + '"></a></div><div class="field-group field-group-event-type"><label for="event-type">' + soy.$$escapeHtml('Ereignis-Typ') + '<span class="aui-icon icon-required"></span></label><select name="event-type" id="event-type" class="event-type-select select"></select><a href="#" id="calendar-tooltip" class="aui-icon icon-help hidden" original-title="show tooltip" title="' + soy.$$escapeHtml('This field is enabled when the field \x22Edit this instance only\x22 is unchecked\r\n\r\nDieses Feld wird nur aktiviert, wenn das Feld \x22Edit this instance only\x22 deaktiviert ist.') + '"></a><div class="error type-error"></div></div><div id="event-fields-container"></div></form>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.eventEdit.soyTemplateName = 'Confluence.TeamCalendars.Templates.eventEdit';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/event-edit/event-fields.soy' */
// This file was automatically generated from event-fields.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.Fields.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }
if (typeof Confluence.TeamCalendars.Templates.Fields == 'undefined') { Confluence.TeamCalendars.Templates.Fields = {}; }


Confluence.TeamCalendars.Templates.Fields.text = function(opt_data, opt_ignored) {
  return '<div class="field-group field-' + soy.$$escapeHtml(opt_data.id) + '" id="field-text-' + soy.$$escapeHtml(opt_data.id) + '"><label for="' + soy.$$escapeHtml(opt_data.id) + '">' + soy.$$escapeHtml(opt_data.label) + ((opt_data.required) ? '<span class="aui-icon icon-required"></span>' : '') + '</label><input type="text" class="text" name="' + soy.$$escapeHtml(opt_data.id) + '" id="' + soy.$$escapeHtml(opt_data.id) + '-text" value="" ' + ((opt_data.readOnly) ? ' readonly="readonly"' : '') + '><div class="error ' + soy.$$escapeHtml(opt_data.id) + '-error"></div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.text.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.text';
}


Confluence.TeamCalendars.Templates.Fields.inforReminderLabel = function(opt_data, opt_ignored) {
  return '<div class="field-group field-' + soy.$$escapeHtml(opt_data.id) + '" id="field-text-' + soy.$$escapeHtml(opt_data.id) + '"><label for="' + soy.$$escapeHtml(opt_data.id) + '">' + soy.$$escapeHtml(opt_data.label) + '</label><div class="bodyInforReminderLabel">' + Confluence.TeamCalendars.Templates.Fields.bodyInforReminderLabel(opt_data) + '</div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.inforReminderLabel.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.inforReminderLabel';
}


Confluence.TeamCalendars.Templates.Fields.bodyInforReminderLabel = function(opt_data, opt_ignored) {
  return '' + ((opt_data.reminderPeriod > 0) ? '<span class="span-label field-value-normal">' + soy.$$filterNoAutoescape(opt_data.reminderPeriodText) + '</span><p></p><div class="reminder-info"><div class="reminder-info-icon"><span class="aui-icon aui-icon-small aui-iconfont-info">Info</span></div><div class="reminder-info-text"><span>' + soy.$$filterNoAutoescape('Erinnerungen werden vom Event-Typ vererbt. \x3ca href\x3d\x22#\x22 id\x3d\x22calendar-reminder-setting\x22\x3eEvent-Typ bearbeiten\x3c/a\x3e') + '</span></div></div>' : '<span class="span-label field-value-normal">' + soy.$$escapeHtml(opt_data.reminderPeriodText) + ' ' + soy.$$filterNoAutoescape('\x3ca href\x3d\x22#\x22 id\x3d\x22calendar-reminder-setting\x22 class\x3d\x22add-reminder-setting\x22\x3eErinnerungen hinzuf\xfcgen\x3c/a\x3e') + '</span>');
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.bodyInforReminderLabel.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.bodyInforReminderLabel';
}


Confluence.TeamCalendars.Templates.Fields.textarea = function(opt_data, opt_ignored) {
  return '<div class="field-group field-' + soy.$$escapeHtml(opt_data.id) + '" id="field-textarea-' + soy.$$escapeHtml(opt_data.id) + '"><label for="' + soy.$$escapeHtml(opt_data.id) + '">' + soy.$$escapeHtml(opt_data.label) + ((opt_data.required) ? '<span class="aui-icon icon-required"></span>' : '') + '</label><textarea name="' + soy.$$escapeHtml(opt_data.id) + '" id="' + soy.$$escapeHtml(opt_data.id) + '-textarea" class="textarea" rows="' + soy.$$escapeHtml(opt_data.size) + '" ' + ((opt_data.readOnly) ? ' readonly="readonly"' : '') + '></textarea><div class="error ' + soy.$$escapeHtml(opt_data.id) + '-error"></div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.textarea.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.textarea';
}


Confluence.TeamCalendars.Templates.Fields.page = function(opt_data, opt_ignored) {
  return '<div class="field-group field-' + soy.$$escapeHtml(opt_data.id) + ' field-group-eventlink" id="field-page-' + soy.$$escapeHtml(opt_data.id) + '"><label for="' + soy.$$escapeHtml(opt_data.id) + '">' + soy.$$escapeHtml(opt_data.label) + ((opt_data.required) ? '<span class="aui-icon icon-required"></span>' : '') + '</label><input type="text" class="text" name="' + soy.$$escapeHtml(opt_data.id) + '" id="' + soy.$$escapeHtml(opt_data.id) + '-text" value="" ' + ((opt_data.readOnly) ? ' readonly="readonly"' : '') + '><div class="' + soy.$$escapeHtml(opt_data.id) + '-suggestions aui-dd-parent hidden" ><div class="aui-dropdown"></div></div><div class="error ' + soy.$$escapeHtml(opt_data.id) + '-error"></div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.page.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.page';
}


Confluence.TeamCalendars.Templates.Fields.when = function(opt_data, opt_ignored) {
  return '<div id="field-when"><fieldset class="date-select"><div class="field-group date-field-group"><legend>' + ((opt_data.end.hideField) ? '<span>' + soy.$$escapeHtml('Wann') + '<span class="aui-icon icon-required"></span></span>' : '<span>' + soy.$$escapeHtml('Start') + '<span class="aui-icon icon-required"></span></span>') + '</legend><label for="' + soy.$$escapeHtml(opt_data.id) + '-startDate">' + soy.$$escapeHtml('Startdatum') + '</label><input class="datepicker-field date-field start text" type="text" name="startDate" id="' + soy.$$escapeHtml(opt_data.id) + '-startDate" size="10" value="" autocomplete="off" ' + ((opt_data.start.disableDate) ? ' disabled="disabled"' : '') + '><label for="' + soy.$$escapeHtml(opt_data.id) + '-startTime">' + soy.$$escapeHtml('Startzeit') + '</label><input type="text" class="time-field text" name="startTime" id="' + soy.$$escapeHtml(opt_data.id) + '-startTime" size="8"' + ((opt_data.start.disableTime) ? ' disabled="disabled"' : (opt_data.start.hideTime) ? ' style="display: none"' : '') + '>' + ((opt_data.start.fieldName) ? '<label for="info-text-start">' + soy.$$escapeHtml('Start date Jira field') + '</label><div><span class="info-text" id="info-text-start">' + soy.$$escapeHtml(opt_data.start.fieldName) + '</span></div>' : '') + '</div><div class="field-group date-field-group" ' + ((opt_data.end.hideField) ? ' style="display: none"' : '') + '><legend><span>' + soy.$$escapeHtml('End') + '<span class="aui-icon icon-required"></span></span></legend><label for="' + soy.$$escapeHtml(opt_data.id) + '-endDate">' + soy.$$escapeHtml('Ende-Datum') + '</label><input class="datepicker-field date-field end text" type="text" name="endDate" id="' + soy.$$escapeHtml(opt_data.id) + '-endDate" size="10" value="" autocomplete="off" ' + ((opt_data.end.disableDate) ? ' disabled="disabled"' : '') + '><label for="' + soy.$$escapeHtml(opt_data.id) + '-endTime">' + soy.$$escapeHtml('Endzeit') + '</label><input type="text" class="time-field text" name="endTime" id="' + soy.$$escapeHtml(opt_data.id) + '-endTime" size="8"' + ((opt_data.end.disableTime) ? ' disabled="disabled"' : (opt_data.end.hideTime) ? ' style="display: none"' : '') + '>' + ((opt_data.end.fieldName) ? '<label for="info-text-end">' + soy.$$escapeHtml('End date Jira field') + '</label><div><span class="info-text" id="info-text-end">' + soy.$$escapeHtml(opt_data.end.fieldName) + '</span></div>' : '') + '</div><div class="field-group error-field"><div class="error when-error"></div></div></fieldset><div class="field-group field-group-allday"><label for="' + soy.$$escapeHtml(opt_data.id) + '-allDayEvent">' + soy.$$escapeHtml('Ganzt\xe4gig') + '</label><input type="checkbox" class="checkbox" name="allDayEvent" id="' + soy.$$escapeHtml(opt_data.id) + '-allDayEvent" value="true" ' + ((opt_data.disableAllDay) ? ' disabled="disabled"' : '') + '><a href="#" id="calendar-tooltip" class="aui-icon icon-help hidden checkbox-tooltip" original-title="show tooltip" title="' + soy.$$escapeHtml('This field is enabled when the field \x22Edit this instance only\x22 is unchecked\r\n\r\nDieses Feld wird nur aktiviert, wenn das Feld \x22Edit this instance only\x22 deaktiviert ist.') + '"></a></div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.when.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.when';
}


Confluence.TeamCalendars.Templates.Fields.repeats = function(opt_data, opt_ignored) {
  return '<div id="field-repeats"><input type="hidden" name="freq" value=""><input type="hidden" name="byday" value=""><input type="hidden" name="recurrenceId" value=""><div class="field-group edit-this-instance-only-container hidden"><label for="editthisinstanceonly">' + soy.$$escapeHtml('Nur diese Instanz bearbeiten') + '</label><input type="checkbox" class="checkbox" name="editthisinstanceonly" id="editthisinstanceonly" value="true" checked="checked"></div><div class="field-group field-group-frequency"><label for="' + soy.$$escapeHtml(opt_data.id) + '-freq-select">' + soy.$$escapeHtml('Wiederholen') + '</label><select name="freq-select" id="' + soy.$$escapeHtml(opt_data.id) + '-freq-select" class="select"><option value="">' + soy.$$escapeHtml('Ohne Wiederholung') + '</option><option value="DAILY">' + soy.$$escapeHtml('T\xe4glich') + '</option><option value="WEEKLY-BYDAY">' + soy.$$escapeHtml('Wochentags') + '</option><option value="WEEKLY">' + soy.$$escapeHtml('W\xf6chentlich') + '</option><option value="MONTHLY">' + soy.$$escapeHtml('Monatlich') + '</option><option value="YEARLY">' + soy.$$escapeHtml('J\xe4hrlich') + '</option></select></div><div class="hidden field-group interval-container"><label for="' + soy.$$escapeHtml(opt_data.id) + '-interval">' + soy.$$escapeHtml('Wiederholen alle') + '</label><input type="text" class="text" name="interval" id="' + soy.$$escapeHtml(opt_data.id) + '-interval" maxlength="2"><span class="interval-label"></span><div class="error interval-error"></div></div><fieldset class="date-select recur-ends hidden"><legend><span>' + soy.$$escapeHtml('End repeat\r\n\r\nBeende Wiederholung') + '</span></legend><div class="field-group"><label for="' + soy.$$escapeHtml(opt_data.id) + '-recur-end-never">' + soy.$$escapeHtml('Nie') + '</label><input type="radio" class="radio recur-ends-never" name="recur-end" id="' + soy.$$escapeHtml(opt_data.id) + '-recur-end-never" checked="checked"><span class="label">' + soy.$$escapeHtml('Nie') + '</span><label for="' + soy.$$escapeHtml(opt_data.id) + '-recur-end-until">' + soy.$$escapeHtml('Am') + '</label><input type="radio" class="radio recur-ends-until" name="recur-end" id="' + soy.$$escapeHtml(opt_data.id) + '-recur-end-until" disabled="disabled"><span class="label">' + soy.$$escapeHtml('Am') + '</span><input class="datepicker-field date-field text" type="text" class="" name="until" id="' + soy.$$escapeHtml(opt_data.id) + '-until" value="" size="10" disabled="disabled"  autocomplete="off"><div class="error until-error"></div></div></fieldset></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.repeats.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.repeats';
}


Confluence.TeamCalendars.Templates.Fields.repeatComponentUnSupported = function(opt_data, opt_ignored) {
  return '<div class="field-group field-group-frequency"><label for="freq-select">' + soy.$$escapeHtml('Wiederholen') + '</label><div class="aui-message aui-message-info info repeat-unsupported"><p>' + soy.$$escapeHtml('F\xfcr dieses Ereignis wurde in einer anderen Kalender-App eine Wiederholung festgelegt. Um \xc4nderungen vornehmen zu k\xf6nnen, m\xfcssen Sie dieses Ereignis in der App \xe4ndern.') + '</p></div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.repeatComponentUnSupported.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.repeatComponentUnSupported';
}


Confluence.TeamCalendars.Templates.Fields.repeatComponent = function(opt_data, opt_ignored) {
  return '<div id="field-repeats"><input type="hidden" name="rruleStr" value=""><div class="field-group edit-this-instance-only-container hidden"><label for="editthisinstanceonly">' + soy.$$escapeHtml('Nur diese Instanz bearbeiten') + '</label><input type="checkbox" class="checkbox" name="editthisinstanceonly" id="editthisinstanceonly" value="true" checked="checked"></div><div class="field-group hidden frequency-container"><!-- just a placeholder will be replaced by actuall template --></div><fieldset class="group hidden repeat-on-container"><!-- just a placeholder will be replaced by actuall template --></fieldset><div class="hidden field-group interval-container"><!-- just a placeholder will be replaced by actuall template --></div><fieldset class="hidden date-select recur-ends-container"><!-- just a placeholder will be replaced by actuall template --></fieldset></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.repeatComponent.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.repeatComponent';
}


Confluence.TeamCalendars.Templates.Fields.repeatFrequency = function(opt_data, opt_ignored) {
  return '<div class="hidden field-group frequency-container"><label for="freq-select">' + soy.$$escapeHtml('Wiederholen') + '</label><select name="freq-select" id="freq-select" class="select"><option value="">' + soy.$$escapeHtml('Ohne Wiederholung') + '</option><option value="DAILY">' + soy.$$escapeHtml('T\xe4glich') + '</option><option value="WEEKLY">' + soy.$$escapeHtml('W\xf6chentlich') + '</option><option value="MONTHLY">' + soy.$$escapeHtml('Monatlich') + '</option><option value="YEARLY">' + soy.$$escapeHtml('J\xe4hrlich') + '</option></select></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.repeatFrequency.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.repeatFrequency';
}


Confluence.TeamCalendars.Templates.Fields.repeatOnMonthly = function(opt_data, opt_ignored) {
  return '<fieldset class="group hidden repeat-on-container"><legend><span>' + soy.$$escapeHtml('Wiederholen am') + '</span></legend><div class="radio"><input class="radio" name="monthlyRepeatOn" id="monthlyRepeatOnSameDate" type="radio"><label for="irTwo">' + soy.$$escapeHtml('Gleichen Datum') + '</label></div><div class="radio"><input class="radio" name="monthlyRepeatOn" id="monthlyRepeatOnSameDay" type="radio"><label for="irTwo">' + soy.$$escapeHtml('Gleichen Tag jeden Monat') + '</label></div><div class="radio hidden" id="monthlyRepeatOnSameDayContainer"><select id="monthlyRepeatOnSameDayByMonthDay" class="select"><option value="1">' + soy.$$escapeHtml('Ersten') + '</option><option value="2">' + soy.$$escapeHtml('Zweiten') + '</option><option value="3">' + soy.$$escapeHtml('Dritten') + '</option><option value="4">' + soy.$$escapeHtml('Vierten') + '</option><option value="-1">' + soy.$$escapeHtml('Letzten') + '</option></select><select id="monthlyRepeatOnSameDayByWeekDay" class="select"><option value="0">' + soy.$$escapeHtml('Montag') + '</option><option value="1">' + soy.$$escapeHtml('Dienstag') + '</option><option value="2">' + soy.$$escapeHtml('Mittwoch') + '</option><option value="3">' + soy.$$escapeHtml('Donnerstag') + '</option><option value="4">' + soy.$$escapeHtml('Freitag') + '</option><option value="5">' + soy.$$escapeHtml('Samstag') + '</option><option value="6">' + soy.$$escapeHtml('Sonntag') + '</option><option class="with-separator" value="day">' + soy.$$escapeHtml('Tag') + '</option></select></div></fieldset>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.repeatOnMonthly.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.repeatOnMonthly';
}


Confluence.TeamCalendars.Templates.Fields.repeatOnWeekly = function(opt_data, opt_ignored) {
  return '<fieldset class="group hidden repeat-on-container"><legend><span>' + soy.$$escapeHtml('Wiederholen am') + '</span></legend><div class="checkbox"><input name="repeatOnMon" id="repeatOnMon" value="0" class="" type="checkbox"><label for="repeatOnMon">' + soy.$$escapeHtml('Mo') + '</label><input name="repeatOnTues" id="repeatOnTues" value="1" class="" type="checkbox"><label for="repeatOnTues">' + soy.$$escapeHtml('Di') + '</label><input name="repeatOnWeds" id="repeatOnWeds" value="2" class="" type="checkbox"><label for="repeatOnWeds">' + soy.$$escapeHtml('Mi') + '</label><input name="repeatOnThurs" id="repeatOnThurs" value="3" class="" type="checkbox"><label for="repeatOnThurs">' + soy.$$escapeHtml('Do') + '</label></div><div class="checkbox"><input name="repeatOnFri" id="repeatOnFri" value="4" class="" type="checkbox"><label for="repeatOnFri">' + soy.$$escapeHtml('Fr') + '</label><input name="repeatOnSat" id="repeatOnSat" value="5" class="" type="checkbox"><label for="repeatOnSat">' + soy.$$escapeHtml('Sa') + '</label><input name="repeatOnSun" id="repeatOnSun" value="6" class="" type="checkbox"><label for="repeatOnSun">' + soy.$$escapeHtml('So') + '</label></div></fieldset>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.repeatOnWeekly.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.repeatOnWeekly';
}


Confluence.TeamCalendars.Templates.Fields.repeatInterval = function(opt_data, opt_ignored) {
  return '<div class="hidden field-group interval-container"><label for="interval">' + soy.$$escapeHtml('Wiederholen alle') + '</label><input type="text" class="text" name="interval" id="repeat-interval-txtField" maxlength="2"><span class="interval-label"></span><div class="error interval-error"></div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.repeatInterval.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.repeatInterval';
}


Confluence.TeamCalendars.Templates.Fields.repeatRecurEnd = function(opt_data, opt_ignored) {
  return '<fieldset class="hidden date-select recur-ends-container"><legend><span>' + soy.$$escapeHtml('End repeat\r\n\r\nBeende Wiederholung') + '</span></legend><div class="radio"><input type="radio" class="radio recur-ends-never" name="recur-end" id="recur-end-never"><span class="label">' + soy.$$escapeHtml('Nie') + '</span></div><div class="radio"><input type="radio" class="radio recur-ends-times" name="recur-end" id="recur-end-times"><span class="label">' + soy.$$escapeHtml('Nach') + '</span><input type="text" class="text" name="recur-end-times" id="recur-end-times-txtField" maxlength="2"><span class="interval-label">' + soy.$$escapeHtml('mal') + '</span></div><div class="radio"><input type="radio" class="radio recur-ends-until" name="recur-end" id="recur-end-until"><span class="label">' + soy.$$escapeHtml('Am') + '</span><input class="datepicker-field date-field text" type="text" class="" name="until" id="until" value="" size="10" disabled="disabled"  autocomplete="off"></div><div class="error until-error"></div></fieldset>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.repeatRecurEnd.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.repeatRecurEnd';
}


Confluence.TeamCalendars.Templates.Fields.user = function(opt_data, opt_ignored) {
  return '<div class="field-group field-group-' + soy.$$escapeHtml(opt_data.id) + '" id="field-user-' + soy.$$escapeHtml(opt_data.id) + '"><label for="' + soy.$$escapeHtml(opt_data.id) + '">' + soy.$$escapeHtml(opt_data.label) + ((opt_data.required) ? '<span class="aui-icon icon-required"></span>' : '') + '</label><input type="text" class="text autocomplete-user" name="' + soy.$$escapeHtml(opt_data.id) + '" id="' + soy.$$escapeHtml(opt_data.id) + '-user-picker" value="" data-max="10" data-none-message="' + soy.$$escapeHtml('Keine Benutzer gefunden.') + '" data-template="{title}"><ul class="invitees hidden"></ul><div class="error ' + soy.$$escapeHtml(opt_data.id) + '-error"></div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.user.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.user';
}


Confluence.TeamCalendars.Templates.Fields.userSelection = function(opt_data, opt_ignored) {
  return '<li class="invitee" title="' + soy.$$escapeHtml(opt_data.fullName) + ' (' + soy.$$escapeHtml(opt_data.userName) + ')"><div class="invitee-left" threedots="' + soy.$$escapeHtml(opt_data.fullName) + ' (' + soy.$$escapeHtml(opt_data.userName) + ')"><img src="' + soy.$$escapeHtml(opt_data.imgPath) + '"><span class="invitee-name-display">' + soy.$$escapeHtml(opt_data.fullName) + '<span class="user-name">(' + soy.$$escapeHtml(opt_data.userName) + ')</span></span></div><div class="invitee-right"><a class="delete-invitee" title="' + soy.$$escapeHtml('L\xf6schen') + '"></a></div><div class="clear"></div></li>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.userSelection.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.userSelection';
}


Confluence.TeamCalendars.Templates.Fields.serverSelector = function(opt_data, opt_ignored) {
  return '<div class="field-group field-group-jira field-group-jira-server" id="field-serverSelector"><label for="tc-jira-server">' + soy.$$escapeHtml('Server') + '<span class="aui-icon icon-required"></span></label><select name="tc-jira-server" class="select tc-jira-server"></select><span class="spinner aui-icon aui-icon-wait"></span><div class="error server-error"></div><div class="error oauth-error hidden"></div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.serverSelector.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.serverSelector';
}


Confluence.TeamCalendars.Templates.Fields.projectSelector = function(opt_data, opt_ignored) {
  return '<div class="field-group field-group-jira field-group-jira-project" id="field-projectSelector"><label for="tc-jira-project">' + soy.$$escapeHtml('Projekt') + '<span class="aui-icon icon-required"></span></label><select name="tc-jira-project" class="select tc-jira-project"></select><span class="spinner aui-icon aui-icon-wait"></span><div class="error project-error"></div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.Fields.projectSelector.soyTemplateName = 'Confluence.TeamCalendars.Templates.Fields.projectSelector';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/event-edit/event-edit-dialog.js' */
define("tc/event-edit-dialog",["jquery","tc/event-field-handlers","tc/event-types","tc-backbone","tc/calendar-util","tc/form-state-control"],function(c,f,j,h,e,b){var k,i,d,g={};var a=h.View.extend({disableCalSelect:function(){if(c.fn.auiSelect2){c("select#calendar").auiSelect2("disable")}else{c("select#calendar").attr("disabled",true)}if(AJS.Meta.get("build-number")>=4520){c("#event-type").auiSelect2("enable",false)}else{c("#event-type").auiSelect2("disable")}},enableCalSelect:function(){if(c.fn.auiSelect2){c("select#calendar").auiSelect2("enable")}else{c("select#calendar").attr("disabled",false)}if(AJS.Meta.get("build-number")>=4520){c("#event-type").auiSelect2("enable",true)}else{c("#event-type").auiSelect2("enable")}},showToolTip:function(){c("#edit-event-dialog .subcalendar-event select.event-type-select").css("display","none");c("#calendar-tooltip.icon-help").removeClass("hidden").tooltip({aria:true})},hideToolTip:function(){c("#calendar-tooltip.icon-help").addClass("hidden")},getField:function(l,m){return c("input[name='"+m+"']",l)},getSelect:function(l,m){return c("select[name='"+m+"']",l)},getTextSelect:function(l,m){return c("select[name='"+m+"'] option:selected",l).text()},getTextArea:function(l,m){return c("textarea[name='"+m+"']",l)},show:function(){d.show()},hide:function(){d.hide()},remove:function(){d.remove()},getEditEventDialog:function(J,B,q,M){var E,z,p,P,v,K=[],Q,L=Confluence.TeamCalendars.LocalStorage,y=J.originalEventSubCalendarId,n=this;var F=580,C=700;var D=J&&J.eventType==="jira"&&J.extraProperties&&J.extraProperties.startDateFieldEditable==="false"&&(J.end===null||J.extraProperties.endDateFieldEditable==="false");if(d&&d.isVisible()){return d}if(d){d.remove();d=null;AJS.log("Warning: old event edit dialog was not destroyed before creating a new one.")}k=q;i=M;v=j.DefaultEventType;function A(R){var S={};c.each(R,function(T,U){if(U===undefined){S[T]=""}else{S[T]=U}});return S}function x(aa,T){var ab,S,X,Y,ag,V,Z,U,af,W,ae,ac,ad;if(k.isProcessingEvent(i)){return false}k.setProcessingEvent(i,true,E);ab=n.getField(P,"originalSubCalendarId").val();ac=n.getField(P,"childSubCalendarId").val();S=n.getField(P,"originalStartDate").val();X=c("option:selected",n.getSelect(P,"calendar")).val();Y=n.getField(P,"uid").val();Z=n.getSelect(P,"event-type").val();U=e.isCustomEventType(Z)?j.CustomEventType:v[Z];ag=n.getField(P,"allDayEvent").is(":checked");V=n.getField(P,"until");af=n.getField(P,"originalEventType").val();W=n.getField(P,"originalCustomEventTypeId").val();ae=e.isCustomEventType(Z)?Z:"";ad=J&&(J.eventType==="jira-project-releases"||(J.eventType==="jira"&&J.end==null));L.setItem("last-selected-calendar",X);L.setItem("last-selected-calendar-type",Z);if(!Y){i.data(k.PREF_LAST_ALL_DAY_USED,ag.toString())}if(!U){return}var R=function(ah){if(!Y){console.log("rrule : "+ah.rrule);l(ah)}};if(U.customHandler){U.customHandler.submitForm(aa,n.getField(aa,"name").val(),X,k.getRenderedMacroCallbackHandler(i),function(){d.remove();k.setProcessingEvent(i,false,E);k.updateAvailableSubCalendarsInSubCalendarPanel(i);R({rrule:""})},function(){k.setProcessingEvent(i,false,E)});return}k.updateEvent(i,(function(){var ah={originalSubCalendarId:ab,originalStartDate:S,subCalendarId:X,uid:Y,eventType:e.isCustomEventType(Z)?"custom":Z,originalEventType:af,customEventTypeId:ae,originalCustomEventTypeId:W,childSubCalendarId:ac,recurrenceId:J.recurId||"",isSingleJiraDate:ad};c.each(T,function(ai,aj){c.extend(ah,A(aj.getData()))});R({rrule:ah.rruleStr||""});return ah})(),function(ah,aj,ai){k.getCalendarPanel(i).fullCalendar("unselect");k.showAjaxError(i,ah,aj,ai,k.ERROR_CLASS_EVENT_UPDATE);k.setProcessingEvent(i,false,E)},function(ak){k.getCalendarPanel(i).fullCalendar("unselect");k.setGenericErrors(i,null,k.ERROR_CLASS_EVENT_UPDATE);if(ak.success){Confluence.TeamCalendars.setFieldErrors(aa,null);var al=k.getSubCalendar(i,ak.subCalendar.id);if(!al){var aj=k.getSubCalendar(i,ak.subCalendar.parentId);al=ak.subCalendar;if(al.type==="custom"||al.subscriptionType==="custom"){var an=al.customEventTypes;var ao=aj.customEventTypes;if(an&&an.length){if(ao&&ao.length){var ai=false;for(var am=0;am<ao.length;am++){if(ao[am].customEventTypeId===an[0].customEventTypeId){ai=true;break}}if(!ai){ao.push(an[0])}}else{aj.customEventTypes.push(an[0])}}}aj.childSubCalendars=c.merge([al],aj.childSubCalendars||[]);k.updateAvailableSubCalendarsInSubCalendarPanel(i);k.addSubCalendarEventSource(i,al.id);if(y&&ak.subCalendar&&(ak.subCalendar.parentId!==ab||al.id!==y)){k.reloadSubCalendar(i,y)}}else{var ah=[al.id];if(y&&(al.id!==y||ak.subCalendar.parentId!==ab)){ah.push(y)}k.reloadSubCalendar(i,ah)}d.remove()}else{Confluence.TeamCalendars.setFieldErrors(aa,ak.fieldErrors)}k.setProcessingEvent(i,false,E)});return false}function I(T,U){var V=k.getSubCalendarsWhichCanAddEvents(i);V.sort(function(ac,ab){var aa=ac.name.toLowerCase(),Z=ab.name.toLowerCase();return aa.localeCompare(Z)});var Y=n.getSelect(T,"calendar");c.each(V,function(aa,Z){Y.append(c("<option/>",{value:Z.id,text:Z.name}))});if(c.fn.auiSelect2){console.log("Enable select2 for calendar selection");Y.auiSelect2({minimumResultsForSearch:-1})}if(V.length===1){Y.parent().hide()}var R=function(Z){if(Y.find("option[value='"+Z+"']").length>0){console.log("Enable select2 for calendar selection "+Z);if(c.fn.auiSelect2){Y.auiSelect2("val",Z)}else{Y.val(Z)}}};if(U.subCalendarId){var S=k.getSubCalendar(i,U.subCalendarId);if(S){var X=S.parentId||U.subCalendarId;R(X)}}else{var W=L.getItem("last-selected-calendar");if(W){console.log("Enable select2 for last calendar selection "+W);R(W)}}if(U!==undefined&&(e.isJiraEvent(U)||e.isJiraEventStream(U.eventType))){b.disableElement(Y)}Y.change(function(){var ac=n.getField(T,"originalSubCalendarId").val();var aa=n.getField(T,"originalEventType").val();if(V.length>1&&ac!==""&&aa!==""){var ab=c(this).find("option:selected");var Z=n.getSelect(T,"event-type").val();if(ac===ab.val()&&Z===aa){b.enableElement(c("#editthisinstanceonly"))}else{b.disableElement(c("#editthisinstanceonly"))}}w(T,true)})}function u(T){var U=e.isCustomEventType(T.id)?T.css:T.id;var S=Confluence.TeamCalendars.Templates.renderCustomImagePrinting({eventType:U});var R=c("<div/>",{"class":"tc-event-type-item",title:T.text}).append(S).append(c("<span/>",{"class":"ellipsis_text",text:T.text}));return c("<div/>").append(R).html()}function m(T){var R=k.getSubCalendarsWhichCanAddEvents(i);for(var S in R){if(R[S].id===T){return R[S].disableEventTypes}}}function r(T){var R=k.getSubCalendarsWhichCanAddEvents(i);for(var S in R){if(R[S].id===T){return R[S].customEventTypes}}}function H(V,S){var U;if(!S){return U}var T=r(V);if(T&&T.length){for(var R=0;R<T.length;R++){if(T[R].customEventTypeId===S){U=T[R];break}}}return U}function t(R){R.sort(function(T,S){return T.title.toUpperCase().localeCompare(S.title.toUpperCase())});return R}function w(T,U){var aa=n.getSelect(T,"event-type");if(U){aa.empty()}var ab=n.getField(T,"originalEventType").val();var S=n.getField(T,"originalSubCalendarId").val();var X=n.getSelect(T,"calendar").find("option:selected").val();var ac=m(X);var ae=t(r(X));var ad=[];var W=H(S,J.customEventTypeId);var Y=function(af){for(var ag in ac){if(af===ac[ag]){return true}}return false};if(J.id){c.each(v,function(af,ag){if((ab===ag.id||!Y(ag.id)&&(e.isJiraEvent(J)||ag.hiddenFromEventCreation===undefined))){aa.append(c("<option/>",{value:ag.id,text:ag.name}));ad.push(ag.id)}});c.each(ae,function(af,ag){if(!Y(ag.customEventTypeId)){aa.append(c("<option/>",{value:ag.customEventTypeId,"class":ag.icon,"data-custom-id":ag.customEventTypeId,text:ag.title}));ad.push(ag.customEventTypeId)}});if(U&&W){var R=false;for(var V=0;V<ae.length;V++){if(ae[V].title===W.title){R=true;break}}if(!R){aa.append(c("<option/>",{value:W.customEventTypeId,"class":W.icon,"data-custom-id":W.customEventTypeId,text:W.title}));ad.push(W.customEventTypeId)}}if(aa.children().length>0){c(".field-group-event-type .type-error",T).empty();c("#event-fields-container",T).show();n.enableOkButton()}else{aa.append(c("<option/>",{value:"",text:""}));c(".field-group-event-type .type-error",T).append(c("<span/>",{text:"All event types are disabled. Please add new event type to the calendar.\r\n\r\nAlle Ereignistypen sind deaktiviert. Bitte f\u00fcge einen neuen Ereignistyp zum Kalender hinzu."}));c("#event-fields-container",T).hide();E.disableOkButton({buttonText:"OK"})}}else{c.each(v,function(af,ag){if(!Y(ag.id)&&(e.isJiraEvent(J)||ag.hiddenFromEventCreation===undefined)){aa.append(c("<option/>",{value:ag.id,text:ag.name}));ad.push(ag.id)}});c.each(ae,function(af,ag){if(!Y(ag.customEventTypeId)){aa.append(c("<option/>",{value:ag.customEventTypeId,"class":ag.icon,"data-custom-id":ag.customEventTypeId,text:ag.title}));ad.push(ag.customEventTypeId)}});c.each(v,function(af,ag){if(ag.hiddenFromEventCreation!==undefined&&ag.hiddenFromEventCreation===false&&!Y(ag.id)){aa.append(c("<option/>",{value:ag.id,text:ag.name}));ad.push(ag.id)}});if(aa.children().length>0){c(".field-group-event-type .type-error",T).empty();c("#event-fields-container",T).show();n.enableOkButton()}else{aa.append(c("<option/>",{value:"",text:""}));c(".field-group-event-type .type-error",T).append(c("<span/>",{text:"All event types are disabled. Please add new event type to the calendar.\r\n\r\nAlle Ereignistypen sind deaktiviert. Bitte f\u00fcge einen neuen Ereignistyp zum Kalender hinzu."}));c("#event-fields-container",T).hide();E.disableOkButton({buttonText:D?"OK":"Save"})}aa.append(c("<option/>",{value:"addNewCustomEventType","class":"addNewCustomEventType",text:"Neuen Event-Typ hinzuf\u00fcgen"}))}if(AJS.$.fn.auiSelect2){c(".event-edit #event-type").auiSelect2({formatSelection:u,formatResult:u,minimumResultsForSearch:-1});if(J.id&&e.isJiraEvent(J)){if(AJS.Meta.get("build-number")>=4520){c("#event-type").auiSelect2("enable",false)}else{c("#event-type").auiSelect2("disable")}}}if(J.eventType&&J.eventType==="custom"){aa.change(N).val(J.customEventTypeId).trigger("change")}else{var Z=J.eventType||L.getItem("last-selected-calendar-type");if(!Z||Z===""||Z==="null"){Z="other"}if(!ad.includes(Z)||Y(Z)){if(J||!Y("other")){Z="other"}else{Z=aa.val()}}aa.change(N).val(Z).trigger("change")}}function o(){n.getField(P,"uid").val(J.id||"");n.getField(P,"originalStartDate").val(J.originalStart||"");n.getField(P,"originalSubCalendarId").val(J.subCalendarId||"");n.getField(P,"originalEventType").val(J.eventType||"");n.getField(P,"originalCustomEventTypeId").val(J.customEventTypeId||"");n.getField(P,"childSubCalendarId").val(J.childSubCalendarId||"")}function N(T){if(!d){return}var S=T.target.value;if(S==="addNewCustomEventType"){var V=c("option:selected",n.getSelect(P,"calendar")).val();d.remove();var R=k.getSubCalendar(i,V);var U=k.showCustomEventEditForm(i,R);return}s(S);if(!e.isJiraEventStream(S)){n.getSelect(P,"event-type").data("previous",S)}O()}function O(){if(d){d.getCurrentPanel().body.css({height:"auto"});c("#"+d.id).css({height:"auto"})}}function s(aa){if(!aa){return}var W=e.isCustomEventType(aa)?j.CustomEventType.fields:v[aa].fields,S=[],ad=c("#event-fields-container"),X=e.isJiraEventStream(aa),Z=X?c("#"+aa+"-event-fields",ad):c("#tc-event-fields",ad),Y=n.getSelect(P,"event-type").val(),U=n.getSelect(P,"event-type").data("previous"),R,ae=n.getField(P,"originalEventType").val();if(J&&e.isJiraEventStream(J.eventType)){n.getSelect(P,"event-type").attr("disabled","disabled")}if(!X&&U){var ab=e.isCustomEventType(U)?j.CustomEventType.fields:v[U].fields;c.each(c.grep(ab,function(af){return af.type==="text"&&af.copyto}),function(ag,af){R=n.getField(Z,af.id).val()})}c(".event-fields",ad).each(function(){c(this).hide()});if(Z.length&&X){Z.show();S=K[aa]}else{if(Z.length){Z.show();c("#tc-event-fields >div").hide()}else{if(X){Z=c("<div/>",{id:aa+"-event-fields","class":"event-fields"})}else{Z=c("<div/>",{id:"tc-event-fields","class":"event-fields"})}ad.append(Z)}c.each(W,function(af,ag){if(X){S[af]=f[ag.type](ag,Z,J,k,i,n);S[af].add();S[af].init()}else{S[af]=f.getEventField(ag,Z,J,k,i,n,R)}});K[aa]=S}var V=function(){return g[Y]!==false};if(V()){E.enableOkButton()}else{E.disableOkButton({buttonText:D?"OK":"Save"})}E.unbind("submit").submit(function(){x(Z,S);return false});if(ae!==undefined&&ae!==""){var T=n.getField(P,"originalSubCalendarId").val();var ac=n.getSelect(P,"calendar").val();if(ae===aa&&ac===T){b.enableElement(c("#editthisinstanceonly"))}else{b.disableElement(c("#editthisinstanceonly"))}}c(Z).off("click.calendar-reminder-setting").on("click.calendar-reminder-setting","#calendar-reminder-setting",function(){var af=n.getSelect(P,"calendar").val();d.hide();var ag=k.getSubCalendar(i,af);k.showCustomEventEditForm(i,ag,Y);return})}AJS.unbind("show-dialog-edit-event.teamcalendar").bind("show-dialog-edit-event.teamcalendar",function(T){var U=e.isJiraEventStream(n.getSelectedEventType())?"#"+n.getSelectedEventType()+"-event-fields":"#tc-event-fields";var S=c("#field-text-reminder .bodyInforReminderLabel",c(U,P));var V=k.getCurrentReminderForEventType(i,n);var R=V&&V.periodInMins>0;c(S).empty().append(Confluence.TeamCalendars.Templates.Fields.bodyInforReminderLabel({reminderPeriodText:R?AJS.format("{0} vor",e.showInforReminder(V.periodInMins)):"Keine.",reminderPeriod:R?V.periodInMins:0}));d.show()});AJS.unbind("remove-dialog-edit-event.teamcalendar").bind("remove-dialog-edit-event.teamcalendar",function(R){if(d){d.remove()}});AJS.bind("remove.dialog",function(S,R){if(R.dialog.id=="edit-event-dialog"){d=null}});z=function(){E.submit();AJS.unbind("show-dialog-edit-event.teamcalendar");return false};p=function(){d.remove();AJS.unbind("show-dialog-edit-event.teamcalendar");return false};d=new AJS.ConfluenceDialog({id:"edit-event-dialog",width:F,height:C,onSubmit:z,onCancel:p});d.addHeader(J.title||"Erstelle neues Event");if(D){d.addButton("OK",z,"submit")}else{d.addLink("Abbrechen",p);d.addButton("Save",z,"submit")}Q=d.popup.element.find(".submit");d.addPanel("",Confluence.TeamCalendars.Templates.eventEdit(),"calendar-dialog-panel");P=d.getCurrentPanel().body;var G=function(R){g[n.getSelect(P,"event-type").val()]=R};var l=function(S){var R="myCalendars";if(AJS.Meta.get("space-key")){if(AJS.Meta.get("content-id")){R="embedded"}else{if(e.isSingleCalendarView(M)){R="singleCalendar"}else{R="spaceCalendars"}}}Confluence.TeamCalendars.fireEventForAnalytics("add.event."+R,S)};E=c("form[name='event-edit']",P);E.disableOkButton=function(R){var S=c.extend({buttonText:"Wird hinzugef\u00fcgt..."},R);Q.text(S.buttonText).attr("disabled","disabled").addClass("ui-state-disabled");G(false)};E.enableOkButton=function(R){var S=c.extend({buttonText:D?"OK":"Save"},R);Q.removeAttr("disabled").removeClass("ui-state-disabled").text(S.buttonText);G(true)};I(P,J);d.disableOkButton=E.disableOkButton;d.enableOkButton=E.enableOkButton;w(P);o();return d},disableOkButton:function(l){d.disableOkButton(l)},enableOkButton:function(l){d.enableOkButton(l)},getSelectedEventType:function(){return this.getSelect(d.popup.element,"event-type").val()},getSelectedSubCalendarId:function(){return this.getSelect(d.popup.element,"calendar").val()},getTextSelectedEventType:function(){return this.getTextSelect(d.popup.element,"event-type")},getTextSelectedSubCalendar:function(){return this.getTextSelect(d.popup.element,"calendar")}});return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/lib/rrule.js' */
/*!
 * rrule.js - Library for working with recurrence rules for calendar dates.
 * https://github.com/jakubroztocil/rrule
 *
 * Copyright 2010, Jakub Roztocil and Lars Schoning
 * Licenced under the BSD licence.
 * https://github.com/jakubroztocil/rrule/blob/master/LICENCE
 *
 * Based on:
 * python-dateutil - Extensions to the standard Python datetime module.
 * Copyright (c) 2003-2011 - Gustavo Niemeyer <gustavo@niemeyer.net>
 * Copyright (c) 2012 - Tomi Pieviläinen <tomi.pievilainen@iki.fi>
 * https://github.com/jakubroztocil/rrule/blob/master/LICENCE
 *
 */
(function(a,b){if(typeof module==="object"&&module.exports){module.exports=b()}else{if(typeof define==="function"&&define.amd){define([],b)}else{a.RRule=b(a);a.RRuleSet=a.RRule.RRuleSet;a.rrulestr=a.RRule.rrulestr}}}(typeof window==="object"?window:this,function(z){var B={MONTH_DAYS:[31,28,31,30,31,30,31,31,30,31,30,31],ONE_DAY:1000*60*60*24,MAXYEAR:9999,ORDINAL_BASE:new Date(1970,0,1),PY_WEEKDAYS:[6,0,1,2,3,4,5],getYearDay:function(H){var I=new Date(H.getFullYear(),H.getMonth(),H.getDate());return Math.ceil((I-new Date(H.getFullYear(),0,1))/B.ONE_DAY)+1},isLeapYear:function(H){if(H instanceof Date){H=H.getFullYear()}return((H%4===0)&&(H%100!==0))||(H%400===0)},tzOffset:function(H){return H.getTimezoneOffset()*60*1000},daysBetween:function(L,K){var J=L.getTime()-B.tzOffset(L);var I=K.getTime()-B.tzOffset(K);var H=Math.abs(J-I);return Math.round(H/B.ONE_DAY)},toOrdinal:function(H){return B.daysBetween(H,B.ORDINAL_BASE)},fromOrdinal:function(H){var I=H*B.ONE_DAY;return new Date(B.ORDINAL_BASE.getTime()-B.tzOffset(B.ORDINAL_BASE)+I+B.tzOffset(new Date(I)))},monthRange:function(I,J){var H=new Date(I,J,1);return[B.getWeekday(H),B.getMonthDays(H)]},getMonthDays:function(H){var I=H.getMonth();return I===1&&B.isLeapYear(H)?29:B.MONTH_DAYS[I]},getWeekday:function(H){return B.PY_WEEKDAYS[H.getDay()]},combine:function(H,I){I=I||H;return new Date(H.getFullYear(),H.getMonth(),H.getDate(),I.getHours(),I.getMinutes(),I.getSeconds(),I.getMilliseconds())},clone:function(H){var I=new Date(H.getTime());return I},cloneDates:function(J){var I=[];for(var H=0;H<J.length;H++){I.push(B.clone(J[H]))}return I},sort:function(H){H.sort(function(J,I){return J.getTime()-I.getTime()})},timeToUntilString:function(K){var H;var I=new Date(K);var L=[I.getUTCFullYear(),I.getUTCMonth()+1,I.getUTCDate(),"T",I.getUTCHours(),I.getUTCMinutes(),I.getUTCSeconds(),"Z"];for(var J=0;J<L.length;J++){H=L[J];if(!/[TZ]/.test(H)&&H<10){L[J]="0"+String(H)}}return L.join("")},untilStringToDate:function(J){var H=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z)?$/;var I=H.exec(J);if(!I){throw new Error("Invalid UNTIL value: "+J)}return new Date(Date.UTC(I[1],I[2]-1,I[3],I[5]||0,I[6]||0,I[7]||0))}};B.Time=function(H,K,I,J){this.hour=H;this.minute=K;this.second=I;this.millisecond=J||0};B.Time.prototype={constructor:B.Time,getHours:function(){return this.hour},getMinutes:function(){return this.minute},getSeconds:function(){return this.second},getMilliseconds:function(){return this.millisecond},getTime:function(){return((this.hour*60*60)+(this.minute*60)+this.second)*1000+this.millisecond}};var t=function(K,H){if(arguments.length===1){H=K;K=0}var I=[];for(var J=K;J<H;J++){I.push(J)}return I};var o=function(I,J){var H=0;var K=[];if(I instanceof Array){for(;H<J;H++){K[H]=[].concat(I)}}else{for(;H<J;H++){K[H]=I}}return K};var y=function(K,I,H){var J=K.split(I);return H?J.slice(0,H).concat([J.slice(H).join(I)]):J};var c=function(I,H){var J=I%H;return(J*H<0)?J+H:J};var s=function(I,H){return{div:Math.floor(I/H),mod:c(I,H)}};var w=function(H){return(H instanceof Array&&H.length===0)?false:Boolean(H)};var j=function(H,I){return H.indexOf(I)!==-1};var h=[].concat(o(1,31),o(2,28),o(3,31),o(4,30),o(5,31),o(6,30),o(7,31),o(8,31),o(9,30),o(10,31),o(11,30),o(12,31),o(1,7));var E=[].concat(o(1,31),o(2,29),o(3,31),o(4,30),o(5,31),o(6,30),o(7,31),o(8,31),o(9,30),o(10,31),o(11,30),o(12,31),o(1,7));var n=t(1,29);var l=t(1,30);var D=t(1,31);var C=t(1,32);var d=[].concat(C,l,C,D,C,D,C,C,D,C,D,C,C.slice(0,7));var p=[].concat(C,n,C,D,C,D,C,C,D,C,D,C,C.slice(0,7));n=t(-28,0);l=t(-29,0);D=t(-30,0);C=t(-31,0);var v=[].concat(C,l,C,D,C,D,C,C,D,C,D,C,C.slice(0,7));var G=[].concat(C,n,C,D,C,D,C,C,D,C,D,C,C.slice(0,7));var r=[0,31,60,91,121,152,182,213,244,274,305,335,366];var k=[0,31,59,90,120,151,181,212,243,273,304,334,365];var i=(function(){for(var H=[],I=0;I<55;I++){H=H.concat(t(7))}return H}());var A=function(H,I){if(I===0){throw new Error("Can't create weekday with n == 0")}this.weekday=H;this.n=I};A.prototype={constructor:A,nth:function(H){return this.n===H?this:new A(this.weekday,H)},equals:function(H){return this.weekday===H.weekday&&this.n===H.n},toString:function(){var H=["MO","TU","WE","TH","FR","SA","SU"][this.weekday];if(this.n){H=(this.n>0?"+":"")+String(this.n)+H}return H},getJsWeekday:function(){return this.weekday===6?0:this.weekday+1}};var e=function(H,X){H=H||{};this._string=null;this._cache=X?null:{all:false,before:[],after:[],between:[]};this.origOptions={};var V=[];var O=Object.keys(H);var Q=Object.keys(e.DEFAULT_OPTIONS);O.forEach(function(aa){this.origOptions[aa]=H[aa];if(!j(Q,aa)){V.push(aa)}},this);if(V.length){throw new Error("Invalid options: "+V.join(", "))}if(!e.FREQUENCIES[H.freq]&&H.byeaster===null){throw new Error("Invalid frequency: "+String(H.freq))}Q.forEach(function(aa){if(!j(O,aa)){H[aa]=e.DEFAULT_OPTIONS[aa]}});var N=this.options=H;if(N.byeaster!==null){N.freq=e.YEARLY}if(!N.dtstart){N.dtstart=new Date()}var U=N.dtstart.getTime()%1000;if(N.wkst===null){N.wkst=e.MO.weekday}else{if(typeof N.wkst==="number"){}else{N.wkst=N.wkst.weekday}}if(N.bysetpos!==null){if(typeof N.bysetpos==="number"){N.bysetpos=[N.bysetpos]}for(var T=0;T<N.bysetpos.length;T++){var L=N.bysetpos[T];if(L===0||!(L>=-366&&L<=366)){throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}}if(!(w(N.byweekno)||w(N.byyearday)||w(N.bymonthday)||N.byweekday!==null||N.byeaster!==null)){switch(N.freq){case e.YEARLY:if(!N.bymonth){N.bymonth=N.dtstart.getMonth()+1}N.bymonthday=N.dtstart.getDate();break;case e.MONTHLY:N.bymonthday=N.dtstart.getDate();break;case e.WEEKLY:N.byweekday=B.getWeekday(N.dtstart);break}}if(N.bymonth!==null&&!(N.bymonth instanceof Array)){N.bymonth=[N.bymonth]}if(N.byyearday!==null&&!(N.byyearday instanceof Array)){N.byyearday=[N.byyearday]}if(N.bymonthday===null){N.bymonthday=[];N.bynmonthday=[]}else{if(N.bymonthday instanceof Array){var W=[];var Y=[];for(T=0;T<N.bymonthday.length;T++){L=N.bymonthday[T];if(L>0){W.push(L)}else{if(L<0){Y.push(L)}}}N.bymonthday=W;N.bynmonthday=Y}else{if(N.bymonthday<0){N.bynmonthday=[N.bymonthday];N.bymonthday=[]}else{N.bynmonthday=[];N.bymonthday=[N.bymonthday]}}}if(N.byweekno!==null&&!(N.byweekno instanceof Array)){N.byweekno=[N.byweekno]}if(N.byweekday===null){N.bynweekday=null}else{if(typeof N.byweekday==="number"){N.byweekday=[N.byweekday];N.bynweekday=null}else{if(N.byweekday instanceof A){if(!N.byweekday.n||N.freq>e.MONTHLY){N.byweekday=[N.byweekday.weekday];N.bynweekday=null}else{N.bynweekday=[[N.byweekday.weekday,N.byweekday.n]];N.byweekday=null}}else{var I=[];var K=[];for(T=0;T<N.byweekday.length;T++){var M=N.byweekday[T];if(typeof M==="number"){I.push(M)}else{if(!M.n||N.freq>e.MONTHLY){I.push(M.weekday)}else{K.push([M.weekday,M.n])}}}N.byweekday=w(I)?I:null;N.bynweekday=w(K)?K:null}}}if(N.byhour===null){N.byhour=(N.freq<e.HOURLY)?[N.dtstart.getHours()]:null}else{if(typeof N.byhour==="number"){N.byhour=[N.byhour]}}if(N.byminute===null){N.byminute=(N.freq<e.MINUTELY)?[N.dtstart.getMinutes()]:null}else{if(typeof N.byminute==="number"){N.byminute=[N.byminute]}}if(N.bysecond===null){N.bysecond=(N.freq<e.SECONDLY)?[N.dtstart.getSeconds()]:null}else{if(typeof N.bysecond==="number"){N.bysecond=[N.bysecond]}}if(N.freq>=e.HOURLY){this.timeset=null}else{this.timeset=[];for(T=0;T<N.byhour.length;T++){var J=N.byhour[T];for(var S=0;S<N.byminute.length;S++){var P=N.byminute[S];for(var R=0;R<N.bysecond.length;R++){var Z=N.bysecond[R];this.timeset.push(new B.Time(J,P,Z,U))}}}B.sort(this.timeset)}};e.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"];e.YEARLY=0;e.MONTHLY=1;e.WEEKLY=2;e.DAILY=3;e.HOURLY=4;e.MINUTELY=5;e.SECONDLY=6;e.MO=new A(0);e.TU=new A(1);e.WE=new A(2);e.TH=new A(3);e.FR=new A(4);e.SA=new A(5);e.SU=new A(6);e.DEFAULT_OPTIONS={freq:null,dtstart:null,interval:1,wkst:e.MO,count:null,until:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null};e.parseText=function(H,I){return m().parseText(H,I)};e.fromText=function(H,I){return m().fromText(H,I)};e.optionsToString=function(S){var Q,O,M;var H=[];var R=Object.keys(S);var N=Object.keys(e.DEFAULT_OPTIONS);for(var J=0;J<R.length;J++){if(!j(N,R[J])){continue}Q=R[J].toUpperCase();O=S[R[J]];M=[];if(O===null||O instanceof Array&&!O.length){continue}switch(Q){case"FREQ":O=e.FREQUENCIES[S.freq];break;case"WKST":O=O.toString();break;case"BYWEEKDAY":Q="BYDAY";if(!(O instanceof Array)){O=[O]}for(var L,I=0;I<O.length;I++){L=O[I];if(L instanceof A){}else{if(L instanceof Array){L=new A(L[0],L[1])}else{L=new A(L)}}M[I]=L.toString()}O=M;break;case"DTSTART":case"UNTIL":O=B.timeToUntilString(O);break;default:if(O instanceof Array){for(I=0;I<O.length;I++){M[I]=String(O[I])}O=M}else{O=String(O)}}H.push([Q,O])}var P=[];for(J=0;J<H.length;J++){var K=H[J];P.push(K[0]+"="+K[1].toString())}return P.join(";")};e.prototype={constructor:e,all:function(I){if(I){return this._iter(new F("all",{},I))}else{var H=this._cacheGet("all");if(H===false){H=this._iter(new x("all",{}));this._cacheAdd("all",H)}return H}},between:function(M,K,L,J){var I={before:K,after:M,inc:L};if(J){return this._iter(new F("between",I,J))}var H=this._cacheGet("between",I);if(H===false){H=this._iter(new x("between",I));this._cacheAdd("between",H,I)}return H},before:function(J,K){var I={dt:J,inc:K};var H=this._cacheGet("before",I);if(H===false){H=this._iter(new x("before",I));this._cacheAdd("before",H,I)}return H},after:function(J,K){var I={dt:J,inc:K};var H=this._cacheGet("after",I);if(H===false){H=this._iter(new x("after",I));this._cacheAdd("after",H,I)}return H},count:function(){return this.all().length},toString:function(){return e.optionsToString(this.origOptions)},toText:function(H,I){return m().toText(this,H,I)},isFullyConvertibleToText:function(){return m().isFullyConvertible(this)},_cacheAdd:function(J,I,H){if(!this._cache){return}if(I){I=(I instanceof Date)?B.clone(I):B.cloneDates(I)}if(J==="all"){this._cache.all=I}else{H._value=I;this._cache[J].push(H)}},_cacheGet:function(N,I){if(!this._cache){return false}var K=false;var O=I?Object.keys(I):[];var M=function(R){for(var Q,P=0;P<O.length;P++){Q=O[P];if(String(I[Q])!==String(R[Q])){return true}}return false};if(N==="all"){K=this._cache.all}else{for(var L,J=0;J<this._cache[N].length;J++){L=this._cache[N][J];if(O.length&&M(L)){continue}K=L._value;break}}if(!K&&this._cache.all){var H=new x(N,I);for(J=0;J<this._cache.all.length;J++){if(!H.accept(this._cache.all[J])){break}}K=H.getValue();this._cacheAdd(N,K,I)}return K instanceof Array?B.cloneDates(K):(K instanceof Date?B.clone(K):K)},clone:function(){return new e(this.origOptions)},_iter:function(S){var am=this.options.dtstart;var X=this.options.dtstart%1000;var K=am.getFullYear();var H=am.getMonth()+1;var ae=am.getDate();var ab=am.getHours();var P=am.getMinutes();var aj=am.getSeconds();var O=B.getWeekday(am);var ag=this.options.freq;var I=this.options.interval;var at=this.options.wkst;var T=this.options.until;var au=this.options.bymonth;var av=this.options.byweekno;var Y=this.options.byyearday;var Z=this.options.byweekday;var M=this.options.byeaster;var aI=this.options.bymonthday;var ay=this.options.bynmonthday;var aF=this.options.bysetpos;var aG=this.options.byhour;var N=this.options.byminute;var ah=this.options.bysecond;var ap=new q(this);ap.rebuild(K,H);var U={};U[e.YEARLY]=ap.ydayset;U[e.MONTHLY]=ap.mdayset;U[e.WEEKLY]=ap.wdayset;U[e.DAILY]=ap.ddayset;U[e.HOURLY]=ap.ddayset;U[e.MINUTELY]=ap.ddayset;U[e.SECONDLY]=ap.ddayset;U=U[ag];var an;if(ag<e.HOURLY){an=this.timeset}else{var L={};L[e.HOURLY]=ap.htimeset;L[e.MINUTELY]=ap.mtimeset;L[e.SECONDLY]=ap.stimeset;L=L[ag];if((ag>=e.HOURLY&&w(aG)&&!j(aG,ab))||(ag>=e.MINUTELY&&w(N)&&!j(N,P))||(ag>=e.SECONDLY&&w(ah)&&!j(ah,P))){an=[]}else{an=L.call(ap,ab,P,aj,X)}}var al=0;var aw=this.options.count;var aC,aB,aA,Q,aE,J,ax,ak,R,ad,W,aq,ac;while(true){ax=U.call(ap,K,H,ae);R=ax[0];ad=ax[1];W=ax[2];ac=false;for(aB=ad;aB<W;aB++){aC=R[aB];ac=(w(au)&&!j(au,ap.mmask[aC]))||(w(av)&&!ap.wnomask[aC])||(w(Z)&&!j(Z,ap.wdaymask[aC]))||(w(ap.nwdaymask)&&!ap.nwdaymask[aC])||(M!==null&&!j(ap.eastermask,aC))||((w(aI)||w(ay))&&!j(aI,ap.mdaymask[aC])&&!j(ay,ap.nmdaymask[aC]))||(w(Y)&&((aC<ap.yearlen&&!j(Y,aC+1)&&!j(Y,-ap.yearlen+aC))||(aC>=ap.yearlen&&!j(Y,aC+1-ap.yearlen)&&!j(Y,-ap.nextyearlen+aC-ap.yearlen))));if(ac){R[aC]=null}}if(w(aF)&&w(an)){var V,ar;var af=[];for(aC,aB=0;aB<aF.length;aB++){ak=aF[aB];if(ak<0){V=Math.floor(ak/an.length);ar=c(ak,an.length)}else{V=Math.floor((ak-1)/an.length);ar=c((ak-1),an.length)}try{ax=[];for(aA=ad;aA<W;aA++){var ai=R[aA];if(ai===null){continue}ax.push(ai)}if(V<0){aC=ax.slice(V)[0]}else{aC=ax[V]}var az=an[ar];var aD=B.fromOrdinal(ap.yearordinal+aC);var ao=B.combine(aD,az);if(!j(af,ao)){af.push(ao)}}catch(aH){}}B.sort(af);for(aB=0;aB<af.length;aB++){ao=af[aB];if(T&&ao>T){this._len=al;return S.getValue()}else{if(ao>=am){++al;if(!S.accept(ao)){return S.getValue()}if(aw){--aw;if(!aw){this._len=al;return S.getValue()}}}}}}else{for(aB=ad;aB<W;aB++){aC=R[aB];if(aC!==null){aD=B.fromOrdinal(ap.yearordinal+aC);for(aA=0;aA<an.length;aA++){az=an[aA];ao=B.combine(aD,az);if(T&&ao>T){this._len=al;return S.getValue()}else{if(ao>=am){++al;if(!S.accept(ao)){return S.getValue()}if(aw){--aw;if(!aw){this._len=al;return S.getValue()}}}}}}}}aq=false;if(ag===e.YEARLY){K+=I;if(K>B.MAXYEAR){this._len=al;return S.getValue()}ap.rebuild(K,H)}else{if(ag===e.MONTHLY){H+=I;if(H>12){aE=Math.floor(H/12);J=c(H,12);H=J;K+=aE;if(H===0){H=12;--K}if(K>B.MAXYEAR){this._len=al;return S.getValue()}}ap.rebuild(K,H)}else{if(ag===e.WEEKLY){if(at>O){ae+=-(O+1+(6-at))+I*7}else{ae+=-(O-at)+I*7}O=at;aq=true}else{if(ag===e.DAILY){ae+=I;aq=true}else{if(ag===e.HOURLY){if(ac){ab+=Math.floor((23-ab)/I)*I}while(true){ab+=I;Q=s(ab,24);aE=Q.div;J=Q.mod;if(aE){ab=J;ae+=aE;aq=true}if(!w(aG)||j(aG,ab)){break}}an=L.call(ap,ab,P,aj)}else{if(ag===e.MINUTELY){if(ac){P+=Math.floor((1439-(ab*60+P))/I)*I}while(true){P+=I;Q=s(P,60);aE=Q.div;J=Q.mod;if(aE){P=J;ab+=aE;Q=s(ab,24);aE=Q.div;J=Q.mod;if(aE){ab=J;ae+=aE;aq=true;ac=false}}if((!w(aG)||j(aG,ab))&&(!w(N)||j(N,P))){break}}an=L.call(ap,ab,P,aj)}else{if(ag===e.SECONDLY){if(ac){aj+=Math.floor((86399-(ab*3600+P*60+aj))/I)*I}while(true){aj+=I;Q=s(aj,60);aE=Q.div;J=Q.mod;if(aE){aj=J;P+=aE;Q=s(P,60);aE=Q.div;J=Q.mod;if(aE){P=J;ab+=aE;Q=s(ab,24);aE=Q.div;J=Q.mod;if(aE){ab=J;ae+=aE;aq=true}}}if((!w(aG)||j(aG,ab))&&(!w(N)||j(N,P))&&(!w(ah)||j(ah,aj))){break}}an=L.call(ap,ab,P,aj)}}}}}}}if(aq&&ae>28){var aa=B.monthRange(K,H-1)[1];if(ae>aa){while(ae>aa){ae-=aa;++H;if(H===13){H=1;++K;if(K>B.MAXYEAR){this._len=al;return S.getValue()}}aa=B.monthRange(K,H-1)[1]}ap.rebuild(K,H)}}}}};e.parseString=function(I){I=I.replace(/^\s+|\s+$/,"");if(!I.length){return null}var K,J,P,O,L;var Q=I.split(";");var S={};for(K=0;K<Q.length;K++){L=Q[K].split("=");P=L[0];O=L[1];switch(P){case"FREQ":S.freq=e[O];break;case"WKST":S.wkst=e[O];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":if(O.indexOf(",")!==-1){O=O.split(",");for(J=0;J<O.length;J++){if(/^[+-]?\d+$/.test(O[J])){O[J]=Number(O[J])}}}else{if(/^[+-]?\d+$/.test(O)){O=Number(O)}}P=P.toLowerCase();S[P]=O;break;case"BYDAY":var H,M,N;var R=O.split(",");S.byweekday=[];for(J=0;J<R.length;J++){N=R[J];if(N.length===2){M=e[N];S.byweekday.push(M)}else{N=N.match(/^([+-]?\d)([A-Z]{2})$/);H=Number(N[1]);M=N[2];M=e[M].weekday;S.byweekday.push(new A(M,H))}}break;case"DTSTART":S.dtstart=B.untilStringToDate(O);break;case"UNTIL":S.until=B.untilStringToDate(O);break;case"BYEASTER":S.byeaster=Number(O);break;default:throw new Error("Unknown RRULE property '"+P+"'")}}return S};e.fromString=function(H){return new e(e.parseString(H))};var q=function(H){this.rrule=H;this.lastyear=null;this.lastmonth=null;this.yearlen=null;this.nextyearlen=null;this.yearordinal=null;this.yearweekday=null;this.mmask=null;this.mrange=null;this.mdaymask=null;this.nmdaymask=null;this.wdaymask=null;this.wnomask=null;this.nwdaymask=null;this.eastermask=null};q.prototype.easter=function(I,H){H=H||0;var Y=I%19;var W=Math.floor(I/100);var U=I%100;var T=Math.floor(W/4);var R=W%4;var Q=Math.floor((W+8)/25);var P=Math.floor((W-Q+1)/3);var O=Math.floor(19*Y+W-T-P+15)%30;var N=Math.floor(U/4);var L=U%4;var K=Math.floor(32+2*R+2*N-O-L)%7;var J=Math.floor((Y+11*O+22*K)/451);var X=Math.floor((O+K-7*J+114)/31);var M=(O+K-7*J+114)%31+1;var V=Date.UTC(I,X-1,M+H);var S=Date.UTC(I,0,1);return[Math.ceil((V-S)/(1000*60*60*24))]};q.prototype.rebuild=function(Q,ac){var M=this.rrule;if(Q!==this.lastyear){this.yearlen=B.isLeapYear(Q)?366:365;this.nextyearlen=B.isLeapYear(Q+1)?366:365;var T=new Date(Q,0,1);this.yearordinal=B.toOrdinal(T);this.yearweekday=B.getWeekday(T);var R=B.getWeekday(new Date(Q,0,1));if(this.yearlen===365){this.mmask=[].concat(h);this.mdaymask=[].concat(p);this.nmdaymask=[].concat(G);this.wdaymask=i.slice(R);this.mrange=[].concat(k)}else{this.mmask=[].concat(E);this.mdaymask=[].concat(d);this.nmdaymask=[].concat(v);this.wdaymask=i.slice(R);this.mrange=[].concat(r)}if(!w(M.options.byweekno)){this.wnomask=null}else{this.wnomask=o(0,this.yearlen+7);var aa,N,J;aa=N=c(7-this.yearweekday+M.options.wkst,7);if(aa>=4){aa=0;J=this.yearlen+c(this.yearweekday-M.options.wkst,7)}else{J=this.yearlen-aa}var S=Math.floor(J/7);var ad=c(J,7);var H=Math.floor(S+(ad/4));for(var U,Y,X=0;X<M.options.byweekno.length;X++){U=M.options.byweekno[X];if(U<0){U+=H+1}if(!(U>0&&U<=H)){continue}if(U>1){Y=aa+(U-1)*7;if(aa!==N){Y-=7-N}}else{Y=aa}for(var V=0;V<7;V++){this.wnomask[Y]=1;Y++;if(this.wdaymask[Y]===M.options.wkst){break}}}if(j(M.options.byweekno,1)){Y=aa+H*7;if(aa!==N){Y-=7-N}if(Y<this.yearlen){for(X=0;X<7;X++){this.wnomask[Y]=1;Y+=1;if(this.wdaymask[Y]===M.options.wkst){break}}}}if(aa){var P;if(!j(M.options.byweekno,-1)){var W=B.getWeekday(new Date(Q-1,0,1));var Z=c(7-W+M.options.wkst,7);var I=B.isLeapYear(Q-1)?366:365;if(Z>=4){Z=0;P=Math.floor(52+c(I+c(W-M.options.wkst,7),7)/4)}else{P=Math.floor(52+c(this.yearlen-aa,7)/4)}}else{P=-1}if(j(M.options.byweekno,P)){for(Y=0;Y<aa;Y++){this.wnomask[Y]=1}}}}}if(w(M.options.bynweekday)&&(ac!==this.lastmonth||Q!==this.lastyear)){var K=[];if(M.options.freq===e.YEARLY){if(w(M.options.bymonth)){for(X=0;X<M.options.bymonth.length;X++){ac=M.options.bymonth[X];K.push(this.mrange.slice(ac-1,ac+1))}}else{K=[[0,this.yearlen]]}}else{if(M.options.freq===e.MONTHLY){K=[this.mrange.slice(ac-1,ac+1)]}}if(w(K)){this.nwdaymask=o(0,this.yearlen);for(X=0;X<K.length;X++){var ab=K[X];var L=ab[0];var O=ab[1];O-=1;for(V=0;V<M.options.bynweekday.length;V++){R=M.options.bynweekday[V][0];U=M.options.bynweekday[V][1];if(U<0){Y=O+(U+1)*7;Y-=c(this.wdaymask[Y]-R,7)}else{Y=L+(U-1)*7;Y+=c(7-this.wdaymask[Y]+R,7)}if(L<=Y&&Y<=O){this.nwdaymask[Y]=1}}}}this.lastyear=Q;this.lastmonth=ac}if(M.options.byeaster!==null){this.eastermask=this.easter(Q,M.options.byeaster)}};q.prototype.ydayset=function(I,J,H){return[t(this.yearlen),0,this.yearlen]};q.prototype.mdayset=function(K,L,I){var N=o(null,this.yearlen);var M=this.mrange[L-1];var H=this.mrange[L];for(var J=M;J<H;J++){N[J]=J}return[N,M,H]};q.prototype.wdayset=function(K,L,H){var N=o(null,this.yearlen+7);var J=B.toOrdinal(new Date(K,L-1,H))-this.yearordinal;var M=J;for(var I=0;I<7;I++){N[J]=J;++J;if(this.wdaymask[J]===this.rrule.options.wkst){break}}return[N,M,J]};q.prototype.ddayset=function(J,K,H){var L=o(null,this.yearlen);var I=B.toOrdinal(new Date(J,K-1,H))-this.yearordinal;L[I]=I;return[L,I,I+1]};q.prototype.htimeset=function(H,N,K,M){var O=[];var J=this.rrule;for(var L=0;L<J.options.byminute.length;L++){N=J.options.byminute[L];for(var I=0;I<J.options.bysecond.length;I++){K=J.options.bysecond[I];O.push(new B.Time(H,N,K,M))}}B.sort(O);return O};q.prototype.mtimeset=function(H,M,K,L){var N=[];var J=this.rrule;for(var I=0;I<J.options.bysecond.length;I++){K=J.options.bysecond[I];N.push(new B.Time(H,M,K,L))}B.sort(N);return N};q.prototype.stimeset=function(H,K,I,J){return[new B.Time(H,K,I,J)]};var x=function(I,H){this.init(I,H)};x.prototype={constructor:x,init:function(I,H){this.method=I;this.args=H;this.minDate=null;this.maxDate=null;this._result=[];if(I==="between"){this.maxDate=H.inc?H.before:new Date(H.before.getTime()-1);this.minDate=H.inc?H.after:new Date(H.after.getTime()+1)}else{if(I==="before"){this.maxDate=H.inc?H.dt:new Date(H.dt.getTime()-1)}else{if(I==="after"){this.minDate=H.inc?H.dt:new Date(H.dt.getTime()+1)}}}},accept:function(I){var J=this.minDate&&I<this.minDate;var H=this.maxDate&&I>this.maxDate;if(this.method==="between"){if(J){return true}if(H){return false}}else{if(this.method==="before"){if(H){return false}}else{if(this.method==="after"){if(J){return true}this.add(I);return false}}}return this.add(I)},add:function(H){this._result.push(H);return true},getValue:function(){var H=this._result;switch(this.method){case"all":case"between":return H;case"before":case"after":return H.length?H[H.length-1]:null}},clone:function(){return new x(this.method,this.args)}};var F=function(K,I,J){var H=["all","between"];if(!j(H,K)){throw new Error('Invalid method "'+K+'". Only all and between works with iterator.')}this.add=function(L){if(J(L,this._result.length)){this._result.push(L);return true}return false};this.init(K,I)};F.prototype=x.prototype;var a=function(H){this._cache=H?null:{all:false,before:[],after:[],between:[]};this._rrule=[];this._rdate=[];this._exrule=[];this._exdate=[]};a.prototype={constructor:a,rrule:function(H){if(!(H instanceof e)){throw new TypeError(String(H)+" is not RRule instance")}if(!j(this._rrule.map(String),String(H))){this._rrule.push(H)}},rdate:function(H){if(!(H instanceof Date)){throw new TypeError(String(H)+" is not Date instance")}if(!j(this._rdate.map(Number),Number(H))){this._rdate.push(H);B.sort(this._rdate)}},exrule:function(H){if(!(H instanceof e)){throw new TypeError(String(H)+" is not RRule instance")}if(!j(this._exrule.map(String),String(H))){this._exrule.push(H)}},exdate:function(H){if(!(H instanceof Date)){throw new TypeError(String(H)+" is not Date instance")}if(!j(this._exdate.map(Number),Number(H))){this._exdate.push(H);B.sort(this._exdate)}},valueOf:function(){var H=[];if(this._rrule.length){this._rrule.forEach(function(I){H.push("RRULE:"+I)})}if(this._rdate.length){H.push("RDATE:"+this._rdate.map(function(I){return B.timeToUntilString(I)}).join(","))}if(this._exrule.length){this._exrule.forEach(function(I){H.push("EXRULE:"+I)})}if(this._exdate.length){H.push("EXDATE:"+this._exdate.map(function(I){return B.timeToUntilString(I)}).join(","))}return H},toString:function(){return JSON.stringify(this.valueOf())},_iter:function(I){var M={};var L=this._exrule;var N=I.accept;function H(P,O){L.forEach(function(Q){Q.between(P,O,true).forEach(function(R){M[Number(R)]=true})})}this._exdate.forEach(function(O){M[Number(O)]=true});I.accept=function(O){var P=Number(O);if(!M[P]){H(new Date(P-1),new Date(P+1));if(!M[P]){M[P]=true;return N.call(this,O)}}return true};if(I.method==="between"){H(I.args.after,I.args.before);I.accept=function(O){var P=Number(O);if(!M[P]){M[P]=true;return N.call(this,O)}return true}}for(var K=0;K<this._rdate.length;K++){if(!I.accept(new Date(this._rdate[K]))){break}}this._rrule.forEach(function(O){O._iter(I)});var J=I._result;B.sort(J);switch(I.method){case"all":case"between":return J;case"before":return(J.length&&J[J.length-1])||null;case"after":return(J.length&&J[0])||null;default:return null}},clone:function(){var I=new a(!!this._cache);var H;for(H=0;H<this._rrule.length;H++){I.rrule(this._rrule[H].clone())}for(H=0;H<this._rdate.length;H++){I.rdate(new Date(this._rdate[H]))}for(H=0;H<this._exrule.length;H++){I.exrule(this._exrule[H].clone())}for(H=0;H<this._exdate.length;H++){I.exdate(new Date(this._exdate[H]))}return I}};var b=["all","between","before","after","count","_cacheAdd","_cacheGet"];b.forEach(function(H){a.prototype[H]=e.prototype[H]});var f=function(){};f.DEFAULT_OPTIONS={dtstart:null,cache:false,unfold:false,forceset:false,compatible:false,ignoretz:false,tzinfos:null};f._freq_map={YEARLY:e.YEARLY,MONTHLY:e.MONTHLY,WEEKLY:e.WEEKLY,DAILY:e.DAILY,HOURLY:e.HOURLY,MINUTELY:e.MINUTELY,SECONDLY:e.SECONDLY};f._weekday_map={MO:0,TU:1,WE:2,TH:3,FR:4,SA:5,SU:6};f.prototype={constructor:f,_handle_int:function(H,J,K,I){H[J.toLowerCase()]=parseInt(K,10)},_handle_int_list:function(H,J,K,I){H[J.toLowerCase()]=K.split(",").map(function(L){return parseInt(L,10)})},_handle_FREQ:function(H,J,K,I){H.freq=f._freq_map[K]},_handle_UNTIL:function(H,K,L,J){try{H.until=B.untilStringToDate(L)}catch(I){throw new Error("invalid until date")}},_handle_WKST:function(H,J,K,I){H.wkst=f._weekday_map[K]},_handle_BYWEEKDAY:function(O,H,S,T){var Q,L,K,I,R,P;var J=[];var N=S.split(",");for(L=0;L<N.length;L++){P=N[L];if(P.indexOf("(")>-1){Q=P.split("(");R=Q[0];I=parseInt(Q.slice(1,-1),10)}else{for(K=0;K<P.length;K++){if("+-0123456789".indexOf(P[K])===-1){break}}I=P.slice(0,K)||null;R=P.slice(K);if(I){I=parseInt(I,10)}}var M=new A(f._weekday_map[R],I);J.push(M)}O.byweekday=J},_parseRfcRRule:function(P,O){O=O||{};O.dtstart=O.dtstart||null;O.cache=O.cache||false;O.ignoretz=O.ignoretz||false;O.tzinfos=O.tzinfos||null;var H,N,J;if(P.indexOf(":")!==-1){J=P.split(":");H=J[0];N=J[1];if(H!=="RRULE"){throw new Error("unknown parameter name")}}else{N=P}var K;var L={};var I=N.split(";");for(K=0;K<I.length;K++){J=I[K].split("=");H=J[0].toUpperCase();N=J[1].toUpperCase();try{this["_handle_"+H](L,H,N,{ignoretz:O.ignoretz,tzinfos:O.tzinfos})}catch(M){throw new Error("unknown parameter '"+H+"':"+N)}}L.dtstart=L.dtstart||O.dtstart;return new e(L,!O.cache)},_parseRfc:function(Q,K){if(K.compatible){K.forceset=true;K.unfold=true}Q=Q&&Q.toUpperCase().trim();if(!Q){throw new Error("Invalid empty string")}var W=0;var O,H;if(K.unfold){H=Q.split("\n");while(W<H.length){O=H[W]=H[W].replace(/\s+$/g,"");if(!O){H.splice(W,1)}else{if(W>0&&O[0]===" "){H[W-1]+=O.slice(1);H.splice(W,1)}else{W+=1}}}}else{H=Q.split(/\s/)}var X=[];var I=[];var Z=[];var M=[];var aa,T,S,L,Y,R,P,V,U,N,J;if(!K.forceset&&H.length===1&&(Q.indexOf(":")===-1||Q.indexOf("RRULE:")===0)){return this._parseRfcRRule(H[0],{cache:K.cache,dtstart:K.dtstart,ignoretz:K.ignoretz,tzinfos:K.tzinfos})}else{for(W=0;W<H.length;W++){O=H[W];if(!O){continue}if(O.indexOf(":")===-1){aa="RRULE";T=O}else{S=y(O,":",1);aa=S[0];T=S[1]}L=aa.split(";");if(!L){throw new Error("empty property name")}aa=L[0];L=L.slice(1);if(aa==="RRULE"){for(V=0;V<L.length;V++){Y=L[V];throw new Error("unsupported RRULE parm: "+Y)}X.push(T)}else{if(aa==="RDATE"){for(V=0;V<L.length;V++){Y=L[V];if(Y!=="VALUE=DATE-TIME"){throw new Error("unsupported RDATE parm: "+Y)}}I.push(T)}else{if(aa==="EXRULE"){for(V=0;V<L.length;V++){Y=L[V];throw new Error("unsupported EXRULE parm: "+Y)}Z.push(T)}else{if(aa==="EXDATE"){for(V=0;V<L.length;V++){Y=L[V];if(Y!=="VALUE=DATE-TIME"){throw new Error("unsupported RDATE parm: "+Y)}}M.push(T)}else{if(aa==="DTSTART"){R=B.untilStringToDate(T)}else{throw new Error("unsupported property: "+aa)}}}}}}if(K.forceset||X.length>1||I.length||Z.length||M.length){P=new a(!K.cache);for(V=0;V<X.length;V++){P.rrule(this._parseRfcRRule(X[V],{dtstart:K.dtstart||R,ignoretz:K.ignoretz,tzinfos:K.tzinfos}))}for(V=0;V<I.length;V++){N=I[V].split(",");for(U=0;U<N.length;U++){J=N[U];P.rdate(B.untilStringToDate(J))}}for(V=0;V<Z.length;V++){P.exrule(this._parseRfcRRule(Z[V],{dtstart:K.dtstart||R,ignoretz:K.ignoretz,tzinfos:K.tzinfos}))}for(V=0;V<M.length;V++){N=M[V].split(",");for(U=0;U<N.length;U++){J=N[U];P.exdate(B.untilStringToDate(J))}}if(K.campatiable&&K.dtstart){P.rdate(R)}return P}else{return this._parseRfcRRule(X[0],{dtstart:K.dtstart||R,cache:K.cache,ignoretz:K.ignoretz,tzinfos:K.tzinfos})}}},parse:function(J,I){I=I||{};var L=[];var K=Object.keys(I);var H=Object.keys(f.DEFAULT_OPTIONS);K.forEach(function(M){if(!j(H,M)){L.push(M)}},this);if(L.length){throw new Error("Invalid options: "+L.join(", "))}H.forEach(function(M){if(!j(K,M)){I[M]=f.DEFAULT_OPTIONS[M]}});return this._parseRfc(J,I)}};f.prototype._handle_DTSTART=function(H,J,K,I){H[J.toLowerCase()]=B.untilStringToDate(K)};f.prototype._handle_BYDAY=f.prototype._handle_BYWEEKDAY;f.prototype._handle_INTERVAL=f.prototype._handle_int;f.prototype._handle_COUNT=f.prototype._handle_int;["_handle_BYSETPOS","_handle_BYMONTH","_handle_BYMONTHDAY","_handle_BYYEARDAY","_handle_BYEASTER","_handle_BYWEEKNO","_handle_BYHOUR","_handle_BYMINUTE","_handle_BYSECOND"].forEach(function(H){f.prototype[H]=f.prototype._handle_int_list});var u=new f();var g=function(){return u.parse.apply(u,arguments)};e.RRule=e;e.RRuleSet=a;e.rrulestr=g;return e;function m(){if(!m._nlp){if(z&&z._getRRuleNLP){m._nlp=z._getRRuleNLP(e)}else{if(typeof require==="function"){m._nlp=require("./nlp")(e)}else{throw new Error("You need to include rrule/nlp.js for fromText/toText to work.")}}}return m._nlp}}));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/lib/nlp.js' */
/*!
 * rrule.js - Library for working with recurrence rules for calendar dates.
 * https://github.com/jakubroztocil/rrule
 *
 * Copyright 2010, Jakub Roztocil and Lars Schoning
 * Licenced under the BSD licence.
 * https://github.com/jakubroztocil/rrule/blob/master/LICENCE
 *
 */
(function(a,b){if(typeof module==="object"&&module.exports){module.exports=b()}else{if(typeof define==="function"&&define.amd){define([],b)}else{a._getRRuleNLP=b()}}}(typeof window==="object"?window:this,function(){var a=function(b,c){return b.indexOf(c)!==-1};return function(b){var f=function(p,j,o){this.text="";this.language=o||e;this.gettext=j||function(q){return q};this.rrule=p;this.freq=p.options.freq;this.options=p.options;this.origOptions=p.origOptions;if(this.origOptions.bymonthday){var n=[].concat(this.options.bymonthday);var m=[].concat(this.options.bynmonthday);n.sort();m.sort();m.reverse();this.bymonthday=n.concat(m);if(!this.bymonthday.length){this.bymonthday=null}}if(this.origOptions.byweekday){var i=!(this.origOptions.byweekday instanceof Array)?[this.origOptions.byweekday]:this.origOptions.byweekday;var l=String(i);this.byweekday={allWeeks:i.filter(function(q){return !Boolean(q.n)}),someWeeks:i.filter(function(q){return Boolean(q.n)}),isWeekdays:(l.indexOf("MO")!==-1&&l.indexOf("TU")!==-1&&l.indexOf("WE")!==-1&&l.indexOf("TH")!==-1&&l.indexOf("FR")!==-1&&l.indexOf("SA")===-1&&l.indexOf("SU")===-1)};var k=function(r,q){return r.weekday-q.weekday};this.byweekday.allWeeks.sort(k);this.byweekday.someWeeks.sort(k);if(!this.byweekday.allWeeks.length){this.byweekday.allWeeks=null}if(!this.byweekday.someWeeks.length){this.byweekday.someWeeks=null}}else{this.byweekday=null}};var d=["count","until","interval","byweekday","bymonthday","bymonth"];f.IMPLEMENTED=[];f.IMPLEMENTED[b.HOURLY]=d;f.IMPLEMENTED[b.DAILY]=["byhour"].concat(d);f.IMPLEMENTED[b.WEEKLY]=d;f.IMPLEMENTED[b.MONTHLY]=d;f.IMPLEMENTED[b.YEARLY]=["byweekno","byyearday"].concat(d);f.isFullyConvertible=function(k){var i=true;if(!(k.options.freq in f.IMPLEMENTED)){return false}if(k.origOptions.until&&k.origOptions.count){return false}for(var j in k.origOptions){if(a(["dtstart","wkst","freq"],j)){return true}if(!a(f.IMPLEMENTED[k.options.freq],j)){return false}}return i};f.prototype={constructor:f,isFullyConvertible:function(){return f.isFullyConvertible(this.rrule)},toString:function(){var i=this.gettext;if(!(this.options.freq in f.IMPLEMENTED)){return i("RRule error: Unable to fully convert this rrule to text")}this.text=[i("every")];this[b.FREQUENCIES[this.options.freq]]();if(this.options.until){this.add(i("until"));var j=this.options.until;this.add(this.language.monthNames[j.getMonth()]).add(j.getDate()+",").add(j.getFullYear())}else{if(this.options.count){this.add(i("for")).add(this.options.count).add(this.plural(this.options.count)?i("times"):i("time"))}}if(!this.isFullyConvertible()){this.add(i("(~ approximate)"))}return this.text.join("")},HOURLY:function(){var i=this.gettext;if(this.options.interval!==1){this.add(this.options.interval)}this.add(this.plural(this.options.interval)?i("hours"):i("hour"))},DAILY:function(){var i=this.gettext;if(this.options.interval!==1){this.add(this.options.interval)}if(this.byweekday&&this.byweekday.isWeekdays){this.add(this.plural(this.options.interval)?i("weekdays"):i("weekday"))}else{this.add(this.plural(this.options.interval)?i("days"):i("day"))}if(this.origOptions.bymonth){this.add(i("in"));this._bymonth()}if(this.bymonthday){this._bymonthday()}else{if(this.byweekday){this._byweekday()}else{if(this.origOptions.byhour){this._byhour()}}}},WEEKLY:function(){var i=this.gettext;if(this.options.interval!==1){this.add(this.options.interval).add(this.plural(this.options.interval)?i("weeks"):i("week"))}if(this.byweekday&&this.byweekday.isWeekdays){if(this.options.interval===1){this.add(this.plural(this.options.interval)?i("weekdays"):i("weekday"))}else{this.add(i("on")).add(i("weekdays"))}}else{if(this.options.interval===1){this.add(i("week"))}if(this.origOptions.bymonth){this.add(i("in"));this._bymonth()}if(this.bymonthday){this._bymonthday()}else{if(this.byweekday){this._byweekday()}}}},MONTHLY:function(){var i=this.gettext;if(this.origOptions.bymonth){if(this.options.interval!==1){this.add(this.options.interval).add(i("months"));if(this.plural(this.options.interval)){this.add(i("in"))}}else{}this._bymonth()}else{if(this.options.interval!==1){this.add(this.options.interval)}this.add(this.plural(this.options.interval)?i("months"):i("month"))}if(this.bymonthday){this._bymonthday()}else{if(this.byweekday&&this.byweekday.isWeekdays){this.add(i("on")).add(i("weekdays"))}else{if(this.byweekday){this._byweekday()}}}},YEARLY:function(){var i=this.gettext;if(this.origOptions.bymonth){if(this.options.interval!==1){this.add(this.options.interval);this.add(i("years"))}else{}this._bymonth()}else{if(this.options.interval!==1){this.add(this.options.interval)}this.add(this.plural(this.options.interval)?i("years"):i("year"))}if(this.bymonthday){this._bymonthday()}else{if(this.byweekday){this._byweekday()}}if(this.options.byyearday){this.add(i("on the")).add(this.list(this.options.byyearday,this.nth,i("and"))).add(i("day"))}if(this.options.byweekno){this.add(i("in")).add(this.plural(this.options.byweekno.length)?i("weeks"):i("week")).add(this.list(this.options.byweekno,null,i("and")))}},_bymonthday:function(){var i=this.gettext;if(this.byweekday&&this.byweekday.allWeeks){this.add(i("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,i("or"))).add(i("the")).add(this.list(this.bymonthday,this.nth,i("or")))}else{this.add(i("on the")).add(this.list(this.bymonthday,this.nth,i("and")))}},_byweekday:function(){var i=this.gettext;if(this.byweekday.allWeeks&&!this.byweekday.isWeekdays){this.add(i("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext))}if(this.byweekday.someWeeks){if(this.byweekday.allWeeks){this.add(i("and"))}this.add(i("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,i("and")))}},_byhour:function(){var i=this.gettext;this.add(i("at")).add(this.list(this.origOptions.byhour,null,i("and")))},_bymonth:function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},nth:function(l){var j,k;var i=this.gettext;if(l===-1){return i("last")}k=Math.abs(l);switch(k){case 1:case 21:case 31:j=k+i("st");break;case 2:case 22:j=k+i("nd");break;case 3:case 23:j=k+i("rd");break;default:j=k+i("th")}return l<0?j+" "+i("last"):j},monthtext:function(i){return this.language.monthNames[i-1]},weekdaytext:function(j){var i=typeof j==="number"?j:j.getJsWeekday();return(j.n?this.nth(j.n)+" ":"")+this.language.dayNames[i]},plural:function(i){return i%100!==1},add:function(i){this.text.push(" ");this.text.push(i);return this},list:function(j,o,i,n){var l=function(t,p,s){var r="";for(var q=0;q<t.length;q++){if(q!==0){if(q===t.length-1){r+=" "+s+" "}else{r+=p+" "}}r+=t[q]}return r};n=n||",";o=o||function(p){return p};var k=this;var m=function(p){return o.call(k,p)};if(i){return l(j.map(m),n,i)}else{return j.map(m).join(n+" ")}}};var h=function(i,j){return new b(c(i,j))};var c=function(q,k){var t={};var r=new g((k||e).tokens);if(!r.start(q)){return null}j();return t;function j(){var w;r.expect("every");if((w=r.accept("number"))){t.interval=parseInt(w[0],10)}if(r.isDone()){throw new Error("Unexpected end")}switch(r.symbol){case"day(s)":t.freq=b.DAILY;if(r.nextSymbol()){n();s()}break;case"weekday(s)":t.freq=b.WEEKLY;t.byweekday=[b.MO,b.TU,b.WE,b.TH,b.FR];r.nextSymbol();s();break;case"week(s)":t.freq=b.WEEKLY;if(r.nextSymbol()){i();s()}break;case"hour(s)":t.freq=b.HOURLY;if(r.nextSymbol()){i();s()}break;case"month(s)":t.freq=b.MONTHLY;if(r.nextSymbol()){i();s()}break;case"year(s)":t.freq=b.YEARLY;if(r.nextSymbol()){i();s()}break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":t.freq=b.WEEKLY;t.byweekday=[b[r.symbol.substr(0,2).toUpperCase()]];if(!r.nextSymbol()){return}while(r.accept("comma")){if(r.isDone()){throw new Error("Unexpected end")}var v;if(!(v=o())){throw new Error("Unexpected symbol "+r.symbol+", expected weekday")}t.byweekday.push(b[v]);r.nextSymbol()}m();s();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":t.freq=b.YEARLY;t.bymonth=[p()];if(!r.nextSymbol()){return}while(r.accept("comma")){if(r.isDone()){throw new Error("Unexpected end")}var u;if(!(u=p())){throw new Error("Unexpected symbol "+r.symbol+", expected month")}t.bymonth.push(u);r.nextSymbol()}i();s();break;default:throw new Error("Unknown symbol")}}function i(){var w=r.accept("on");var x=r.accept("the");if(!(w||x)){return}do{var y,v,u;if((y=l())){if((v=o())){r.nextSymbol();if(!t.byweekday){t.byweekday=[]}t.byweekday.push(b[v].nth(y))}else{if(!t.bymonthday){t.bymonthday=[]}t.bymonthday.push(y);r.accept("day(s)")}}else{if((v=o())){r.nextSymbol();if(!t.byweekday){t.byweekday=[]}t.byweekday.push(b[v])}else{if(r.symbol==="weekday(s)"){r.nextSymbol();if(!t.byweekday){t.byweekday=[]}t.byweekday.push(b.MO);t.byweekday.push(b.TU);t.byweekday.push(b.WE);t.byweekday.push(b.TH);t.byweekday.push(b.FR)}else{if(r.symbol==="week(s)"){r.nextSymbol();var z;if(!(z=r.accept("number"))){throw new Error("Unexpected symbol "+r.symbol+", expected week number")}t.byweekno=[z[0]];while(r.accept("comma")){if(!(z=r.accept("number"))){throw new Error("Unexpected symbol "+r.symbol+"; expected monthday")}t.byweekno.push(z[0])}}else{if((u=p())){r.nextSymbol();if(!t.bymonth){t.bymonth=[]}t.bymonth.push(u)}else{return}}}}}}while(r.accept("comma")||r.accept("the")||r.accept("on"))}function n(){var u=r.accept("at");if(!u){return}do{var v;if(!(v=r.accept("number"))){throw new Error("Unexpected symbol "+r.symbol+", expected hour")}t.byhour=[v[0]];while(r.accept("comma")){if(!(v=r.accept("number"))){throw new Error("Unexpected symbol "+r.symbol+"; expected hour")}t.byhour.push(v[0])}}while(r.accept("comma")||r.accept("at"))}function p(){switch(r.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return false}}function o(){switch(r.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return r.symbol.substr(0,2).toUpperCase();default:return false}}function l(){switch(r.symbol){case"last":r.nextSymbol();return -1;case"first":r.nextSymbol();return 1;case"second":r.nextSymbol();return r.accept("last")?-2:2;case"third":r.nextSymbol();return r.accept("last")?-3:3;case"nth":var u=parseInt(r.value[1],10);if(u<-366||u>366){throw new Error("Nth out of range: "+u)}r.nextSymbol();return r.accept("last")?-u:u;default:return false}}function m(){r.accept("on");r.accept("the");var u;if(!(u=l())){return}t.bymonthday=[u];r.nextSymbol();while(r.accept("comma")){if(!(u=l())){throw new Error("Unexpected symbol "+r.symbol+"; expected monthday")}t.bymonthday.push(u);r.nextSymbol()}}function s(){if(r.symbol==="until"){var u=Date.parse(r.text);if(!u){throw new Error("Cannot parse until date:"+r.text)}t.until=new Date(u)}else{if(r.accept("for")){t.count=r.value[0];r.expect("number")}}}};var g=function(i){this.rules=i};g.prototype.start=function(i){this.text=i;this.done=false;return this.nextSymbol()};g.prototype.isDone=function(){return this.done&&this.symbol==null};g.prototype.nextSymbol=function(){var n,k;var m=this;this.symbol=null;this.value=null;do{if(this.done){return false}var j,l;n=null;for(var i in this.rules){l=this.rules[i];if((j=l.exec(m.text))){if(n==null||j[0].length>n[0].length){n=j;k=i}}}if(n!=null){this.text=this.text.substr(n[0].length);if(this.text===""){this.done=true}}if(n==null){this.done=true;this.symbol=null;this.value=null;return}}while(k==="SKIP");this.symbol=k;this.value=n;return true};g.prototype.accept=function(j){if(this.symbol===j){if(this.value){var i=this.value;this.nextSymbol();return i}this.nextSymbol();return true}return false};g.prototype.expect=function(i){if(this.accept(i)){return true}throw new Error("expected "+i+" but found "+this.symbol)};var e={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,"for":/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}};return{fromText:h,parseText:c,isFullyConvertible:f.isFullyConvertible,toText:function(k,i,j){return new f(k,i,j).toString()}}}}));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/amd/shim/rrule-amd.js' */
define("tc/rrule",function(){var b=null;try{b=require("rrule")}catch(a){}return b||RRule});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/event-edit/repeat-field/repeat-model.js' */
define("tc/repeat-model",["jquery","tc/rrule","tc-backbone","tc/calendar-util"],function(b,c,e,a){var d=e.Model.extend({defaults:{isUnsupportedRrule:false,isDisable:false,freq:null,dtstart:null,interval:null,wkst:null,count:null,until:null,bysetpos:null,bymonth:null,bymonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},initialize:function(f){this.rruleStr=f.rruleStr?f.rruleStr:"";this.event=f.event;this._rrule=c.RRule.fromString(this.rruleStr);this.set({isDisable:f.isDisable,isUnsupportedRrule:false});this.set(this._rrule.origOptions)},getRRuleAsString:function(){this.trigger("rrule-string",{model:this});if(this.attributes.freq===null||this.attributes.freq===-1){return""}if(this.attributes.isDisable){return this.rruleStr}var f=new c.RRule({freq:this.attributes.freq,dtstart:this.attributes.dtstart,interval:this.attributes.interval,wkst:this.attributes.wkst,count:this.attributes.count,until:this.attributes.until,bysetpos:this.attributes.bysetpos,bymonth:this.attributes.bymonth,bymonthday:this.attributes.bymonthday,byyearday:this.attributes.byyearday,byweekno:this.attributes.byweekno,byweekday:this.attributes.byweekday,bynweekday:this.attributes.bynweekday,byhour:this.attributes.byhour,byminute:this.attributes.byminute,bysecond:this.attributes.bysecond,byeaster:this.attributes.byeaster});var g=f.toString();console.log("Computed RRULE: "+g);return g},trigger:function(){console.debug("Event",arguments);e.Model.prototype.trigger.apply(this,arguments)}});return d});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/event-edit/repeat-field/repeat-base-child-component.js' */
define("tc/repeat-base-child-component",["jquery","tc/rrule","tc-backbone"],function(b,c,d){var a=d.View.extend({setJQueryEl:function(e){this.undelegateEvents();this.$el=e;this.delegateEvents()},hideIfNotMatch:function(g,f,e){if(g&&g.indexOf(f)>=0){if(!e.hasClass("hidden")){e.addClass("hidden")}return true}if(e.hasClass("hidden")){e.removeClass("hidden")}return false}});return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/event-edit/repeat-field/repeat-frequency.js' */
define("tc/repeat-frequency",["jquery","tc/rrule","tc-backbone","tc/calendar-util","underscore","tc/repeat-base-child-component"],function(e,f,g,d,c,b){var a=b.extend({template:Confluence.TeamCalendars.Templates.Fields.repeatFrequency,_freqSelect:null,events:{"change select#freq-select":"updateModel"},initialize:function(i){var h=this.model.attributes;this.setJQueryEl(i.$el);this.$el.html(e(this.template()).html());this._freqSelect=this.$el.find("select#freq-select");if(e.fn.auiSelect2){this._freqSelect.auiSelect2({minimumResultsForSearch:-1})}var j="";switch(f.FREQUENCIES[h.freq]){case f.FREQUENCIES[f.WEEKLY]:case f.FREQUENCIES[f.DAILY]:case f.FREQUENCIES[f.MONTHLY]:case f.FREQUENCIES[f.YEARLY]:j=f.FREQUENCIES[h.freq];break;case f.FREQUENCIES[f.HOURLY]:case f.FREQUENCIES[f.MINUTELY]:case f.FREQUENCIES[f.SECONDLY]:default:j=""}this.model.set({frequencySelection:j});this.model.on("change:isDisable",this.render,this);this.model.on("change:frequencySelection",this.render,this);this.model.on("rrule-string",this.updateModel,this)},updateModel:function(){var h=this.model.attributes;if(h.isDisable){console.debug("Won't update model for repeat frequency component because model is disable state");return}var i=this._freqSelect.val();this.model.set({frequencySelection:i});this.model.set({freq:f.FREQUENCIES.indexOf(i)});console.debug("Update model for repeat frequency component")},render:function(){var h=this.model.attributes;if(this.hideIfNotMatch&&this.hideIfNotMatch(this._notShowInFrequency,h.frequencySelection,this.$el)){return}if(e.fn.auiSelect2){this._freqSelect.auiSelect2("enable");this._freqSelect.auiSelect2("val",h.frequencySelection)}else{this._freqSelect.removeAttr("disabled");this._freqSelect.val(h.frequencySelection)}console.debug("Render repeat frequency component: "+JSON.stringify({innerHtml:this.$el.html(),modelAttrs:h}));if(h.isDisable){console.debug("Disable repeat frequency component because model is disable state");if(e.fn.auiSelect2){console.debug("AUI disable only");this._freqSelect.auiSelect2("disable")}else{console.debug("Normal disable");this._freqSelect.attr("disabled","disabled")}}}});return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/event-edit/repeat-field/repeat-interval.js' */
define("tc/repeat-interval",["jquery","tc/rrule","tc-backbone","tc/calendar-util","underscore","tc/repeat-base-child-component"],function(e,f,g,d,c,a){var b=a.extend({template:Confluence.TeamCalendars.Templates.Fields.repeatInterval,_intervalTxtField:null,_intervalLabel:null,_notShowInFrequency:[""],events:{"change input#repeat-interval-txtField":"updateModel"},initialize:function(h){this.setJQueryEl(h.$el);this.$el.html(e(this.template()).html());this._intervalLabel=this.$el.find(".interval-label");this._intervalTxtField=this.$el.find("#repeat-interval-txtField");this.model.on("change:frequencySelection",this.render,this);this.model.on("change:isDisable",this.render,this);this.model.on("rrule-string",this.updateModel,this);this.model.set({interval:this.model.attributes.interval||1})},updateModel:function(){var i=this.model.attributes;if(this.hideIfNotMatch&&this.hideIfNotMatch(this._notShowInFrequency,i.frequencySelection,this.$el)){this.model.set({interval:null});return}var i=this.model.attributes;if(i.isDisable){console.debug("Won't update model for repeat interval component because model is disable state");return}var h=this._intervalTxtField.val();h=parseInt(h);h=h>=1?h:1;this.model.set({interval:h});console.debug("update model for repeat interval component");this.render()},render:function(){var h=this.model.attributes;if(this.hideIfNotMatch&&this.hideIfNotMatch(this._notShowInFrequency,h.frequencySelection,this.$el)){return}this._intervalTxtField.removeAttr("readonly","readonly");this._intervalTxtField.val(h.interval);this._createLabelInterval(h.frequencySelection,this._intervalTxtField.val(),this._intervalLabel);console.debug("Render repeat interval component: "+JSON.stringify({innerHtml:this.$el.html(),modelAttrs:h}));if(h.isDisable){console.debug("Disable repeat interval because model is disable state");this._intervalTxtField.attr("readonly","readonly");this._intervalTxtField.attr("disabled","disabled")}else{this._intervalTxtField.removeAttr("readonly","readonly");this._intervalTxtField.removeAttr("disabled","disabled")}},_createLabelInterval:function(j,h,i){if(/^[1-9]\d*$/.test(h)||h==="0"){if(j==="DAILY"){i.text(parseInt(h)>1?"Tage":"Tag")}else{if(j===f.FREQUENCIES[f.WEEKLY]){i.text(parseInt(h)>1?"Wochen":"Woche")}else{if(j===f.FREQUENCIES[f.MONTHLY]){i.text(parseInt(h)>1?"Monate":"Monat")}else{if(j===f.FREQUENCIES[f.YEARLY]){i.text(parseInt(h)>1?"Jahre":"Jahr")}}}}}else{i.text("")}}});return b});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/event-edit/repeat-field/repeat-on.js' */
define("tc/repeat-on",["jquery","tc/rrule","tc-backbone","tc/calendar-util","underscore","tc/repeat-base-child-component"],function(e,f,g,c,b,a){var d=a.extend({_WEEKDAY:[f.MO,f.TU,f.WE,f.TH,f.FR,f.SA,f.SU],_templates:{WEEKLY:Confluence.TeamCalendars.Templates.Fields.repeatOnWeekly,MONTHLY:Confluence.TeamCalendars.Templates.Fields.repeatOnMonthly},_notShowInFrequency:["","DAILY","YEARLY"],_monthlyFreq:"MONTHLY",_weeklyFreq:"WEEKLY",_supportingFrequencies:["MONTHLY","WEEKLY"],options:null,events:{"change .repeat-on-container input[type='checkbox']":"updateModel"},initialize:function(h){this.setJQueryEl(h.$el);this.options=h;this.initializeTemplate(this.options);if(!this.validateInput()){this.model.set({isUnsupportedRrule:true});return}this.model.on("change:isDisable",this.render,this);this.model.on("change:frequencySelection",this.initializeTemplateAndRender,this);this.model.on("rrule-string",this.updateModel,this)},initializeTemplateAndRender:function(){this.initializeTemplate(this.options);this.render()},initializeTemplate:function(j){var h=this.model.attributes;if(this.hideIfNotMatch&&this.hideIfNotMatch(this._notShowInFrequency,h.frequencySelection,this.$el)){return}var k=this._templates[h.frequencySelection];this.$el.html(e(k()).html());var i=this;var l=this.$el;if(this._weeklyFreq===h.frequencySelection){l.on("change","input[type='checkbox']",function(){var m=e(this);m.bind(i.updateModel(),this)});if(!h.byweekday){h.byweekday=[this.model.event?this._dateToWeekday(e.fullCalendar.parseDate(this.model.event.start)):f.MO];console.debug("The default value of weekday is ===========> "+h.byweekday)}}if(this._monthlyFreq===h.frequencySelection){if(e.fn.auiSelect2){l.find("select.select").each(function(m,n){e(n).auiSelect2({minimumResultsForSearch:-1,})})}l.on("change","select.select",function(){var m=e(this);m.bind(i.updateModel(),this)});l.on("change","input.radio",function(){var m=e(this);m.bind(i.updateModel(),this)});if(!this.model.rruleStr||this.model.rruleStr===""){if(!h.bymonthday&&this.model.event){if(!h.byweekday){h.byweekday=[this._dateToWeekday(e.fullCalendar.parseDate(this.model.event.start))];console.debug("The default value of weekday is ===========> "+h.byweekday)}}}}},validateInput:function(){var h=this.model.attributes;if(this._supportingFrequencies.indexOf(h.frequencySelection)===-1&&h.byweekday){console.debug("Validate failed on repeat on because of invalid frequencySelection");return false}if(h.byweekday&&h.bymonthday){console.debug("Validate failed on repeat on because of 'byweekday' and 'bymonthday could not exist at the same time'");return false}if(this._monthlyFreq===h.frequencySelection){var h=this.model.attributes;if(!h.bymonthday&&h.byweekday){var k=h.byweekday[0].n;var j=[1,2,3,4,-1];if(j.indexOf(k)===-1){console.debug("Validate failed on repeat on because of invalid pos in 'byweekday' on monthly: "+k);return false}}}if(this._weeklyFreq===h.frequencySelection){if(!h.byweekday){return false}var i=true;e.each(h.byweekday,function(l,m){var n=m.n;if(n>1){console.debug("Validate failed on repeat on because of invalid pos "+n+" in 'byweekday' on weekly: "+m);i=false;return}});if(!i){return i}}return true},updateModel:function(){var h=this.model.attributes;if(this.hideIfNotMatch&&this.hideIfNotMatch(this._notShowInFrequency,h.frequencySelection,this.$el)){this.model.set({byweekday:null,bymonthday:null});return}if(h.isDisable){console.debug("Won't update model for repeat on component because model is disable state");return}if("WEEKLY"===h.frequencySelection){this._updateModelOnRepeatOnWeekly();return}if("MONTHLY"===h.frequencySelection){this._updateModelOnRepeatOnMonthly()}console.debug("Update model for repeat on component"+JSON.stringify({innerHtml:this.$el.html(),modelAttrs:h}));this.render()},_dateToWeekday:function(h){if(!h){return f.MO}switch(h.getDay()){case 1:return f.MO;case 2:return f.TU;case 3:return f.WE;case 4:return f.TH;case 5:return f.FR;case 6:return f.SA;case 0:return f.SU;default:return f.MO}},_updateModelOnRepeatOnWeekly:function(){var i=[];var h=this;var j=this.$el;j.find("input[type='checkbox']").each(function(k,l){if(l.checked){i.push(h._WEEKDAY[e(l).val()])}});this.model.set({byweekday:i,bymonthday:null})},_updateModelOnRepeatOnMonthly:function(){var h=null;var i=null;if(this.$el.find("#monthlyRepeatOnSameDay").is(":checked")){h=this.$el.find("#monthlyRepeatOnSameDayByMonthDay").val();i=this.$el.find("#monthlyRepeatOnSameDayByWeekDay").val()}if("day"===i){this.model.set({bymonthday:h,byweekday:null})}else{this.model.set({bymonthday:null,byweekday:this._WEEKDAY[i]?this._WEEKDAY[i].nth(h):null})}},render:function(){var h=this.model.attributes;var i=this.$el;if(this.hideIfNotMatch&&this.hideIfNotMatch(this._notShowInFrequency,h.frequencySelection,this.$el)){return}if("WEEKLY"===h.frequencySelection){this._renderRepeatOnWeekly(i)}if("MONTHLY"===h.frequencySelection){this._renderRepeatOnMonthly(i)}if(h.isDisable){this._disable(i);console.debug("Disable repeat on because model is disable state")}console.debug("Render repeat on component: "+JSON.stringify({innerHtml:this.$el.html(),modelAttrs:h}))},_disable:function(i){var h=this.model.attributes;if("WEEKLY"===h.frequencySelection){i.find("input[type='checkbox']").attr("disabled","disabled")}if("MONTHLY"===h.frequencySelection){i.find("#monthlyRepeatOnSameDate").attr("disabled","disabled");i.find("#monthlyRepeatOnSameDay").attr("disabled","disabled");if(e.fn.auiSelect2){i.find("#monthlyRepeatOnSameDayByMonthDay").auiSelect2("disable");i.find("#monthlyRepeatOnSameDayByWeekDay").auiSelect2("disable")}else{i.find("#monthlyRepeatOnSameDayByMonthDay").attr("disabled","disabled");i.find("#monthlyRepeatOnSameDayByWeekDay").attr("disabled","disabled")}}},_renderRepeatOnMonthly:function(m){var h=this.model.attributes;var i=m.find("#monthlyRepeatOnSameDayContainer");i.removeClass("hidden");m.find("#monthlyRepeatOnSameDate").removeAttr("disabled","disabled");m.find("#monthlyRepeatOnSameDay").removeAttr("disabled","disabled");if(e.fn.auiSelect2){m.find("#monthlyRepeatOnSameDayByMonthDay").auiSelect2("enable");m.find("#monthlyRepeatOnSameDayByWeekDay").auiSelect2("enable")}else{m.find("#monthlyRepeatOnSameDayByMonthDay").removeAttr("disabled","disabled");m.find("#monthlyRepeatOnSameDayByWeekDay").removeAttr("disabled","disabled")}if(!h.byweekday&&!h.bymonthday){m.find("#monthlyRepeatOnSameDate").prop("checked",true);m.find("#monthlyRepeatOnSameDay").prop("checked",false);i.addClass("hidden")}else{m.find("#monthlyRepeatOnSameDate").prop("checked",false);m.find("#monthlyRepeatOnSameDay").prop("checked",true);i.removeClass("hidden");var j=function(o,n){if(e.fn.auiSelect2){i.find("#monthlyRepeatOnSameDayByMonthDay").auiSelect2("val",o);i.find("#monthlyRepeatOnSameDayByWeekDay").auiSelect2("val",n)}else{i.find("#monthlyRepeatOnSameDayByMonthDay").val(o);i.find("#monthlyRepeatOnSameDayByWeekDay").val(n)}};if(h.byweekday&&h.bymonthday){return}else{if(h.bymonthday){var l=h.bymonthday;j(l,"day")}else{var k=h.byweekday[0]||h.byweekday;var l=k.n;j(l,k.weekday)}}}},_renderRepeatOnWeekly:function(i){var h=this.model.attributes;i.find("input[type='checkbox']").removeAttr("disabled","disabled");if(h.byweekday){h.byweekday.forEach(function(k){var j=i.find("input[value='"+k.weekday+"']");e(j).prop("checked",true)})}}});return d});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/event-edit/repeat-field/repeat-recur-end.js' */
define("tc/repeat-recur-end",["jquery","tc/rrule","tc-backbone","tc/calendar-util","underscore","tc/repeat-base-child-component"],function(d,f,g,c,b,a){var e=a.extend({template:Confluence.TeamCalendars.Templates.Fields.repeatRecurEnd,_recurEndNeverChbox:null,_recurEndTimesChBox:null,_recurEndTimesTxt:null,_recurEndUtilChBox:null,_recurEndUtilDatePicker:null,_notShowInFrequency:[""],_calendarDiv:null,_calendarPlugin:null,createDatePicker:null,events:{"change input#recur-end-times-txtField":"updateModel","change input[type='radio']":"updateModel",},initialize:function(i){if(!this.validateInput()){this.model.set({isUnsupportedRrule:true});return}this.setJQueryEl(i.$el);this.$el.html(d(this.template()).html());this._calendarDiv=i._calendarDiv;this._calendarPlugin=i._calendarPlugin;this._recurEndNeverChbox=this.$el.find("#recur-end-never");this._recurEndTimesChBox=this.$el.find("#recur-end-times");this._recurEndTimesTxt=this.$el.find("#recur-end-times-txtField");this._recurEndUtilChBox=this.$el.find("#recur-end-until");this._recurEndUtilDatePicker=this.$el.find("input.datepicker-field#until");this.createDatePicker=i.createDatePicker;this.createDatePicker(this._recurEndUtilDatePicker,b.bind(this.updateModel,this));this._isInitDatePicker=false;var h=this.model.attributes;var j=(h.count===null||h.count===0)&&h.until===null;var l=j?!j:h.count>0;var k=j?!j:h.until!==null;if(h.until==null){this.model.set({until:d.fullCalendar.parseDate(this.model.event.start)})}this.model.set({isSelectedEndNever:j});this.model.set({isSelectedEndTimes:l});this.model.set({isSelectedEndUntil:k});this.model.on("change:isDisable",this.render,this);this.model.on("change:frequencySelection",this.recalculateRecurEndDate,this);this.model.on("change:startDate",this.recalculateRecurEndDate,this);this.model.on("rrule-string",this.updateModel,this)},recalculateRecurEndDate:function(){var i=this.model.attributes;var h=i.startDate;var j=i.frequencySelection;if(!i.isDisable&&h&&j){var k=new Date(h);switch(j){case"DAILY":k.setMonth(h.getMonth()+1);break;case"WEEKLY":k.setMonth(h.getMonth()+3);break;case"MONTHLY":k.setMonth(h.getMonth()+12);break;case"YEARLY":k.setMonth(h.getMonth()+12*5);break}if(i.isSelectedEndUntil){this.model.set({until:k})}else{this._lastCalculatedUntil=k}}this.render()},validateInput:function(){var h=this.model.attributes;if(h.count>0&&h.until){console.debug("Validate failed on repeat end because having both 'count' and 'until'");return false}return true},updateModel:function(){var j=this.model.attributes;if(this.hideIfNotMatch&&this.hideIfNotMatch(this._notShowInFrequency,j.frequencySelection,this.$el)){this.model.set({count:null,until:null});return}if(j.isDisable){console.debug("Won't update model for repeat recur end component because model is disable state");return}var h=this._recurEndNeverChbox.is(":checked");var k=this._recurEndTimesChBox.is(":checked");var n=this._recurEndUtilChBox.is(":checked");var i=j.count>0?j.count:1;var o=j.until||d.fullCalendar.parseDate(this.model.event.start);if(h){i=null;o=null}else{if(k){var l=this._recurEndTimesTxt.val();i=l&&l>=1?l:i;o=null}else{if(n){if(this._lastCalculatedUntil){o=this._lastCalculatedUntil;this._lastCalculatedUntil=null}else{var m=this._recurEndUtilDatePicker.tcDatePicker("getDate");var p=m?m:null;if(p){o=p}}i=null}}}this.model.set({count:i});this.model.set({until:o});this.model.set({isSelectedEndNever:h});this.model.set({isSelectedEndTimes:k});this.model.set({isSelectedEndUntil:n});console.debug("Update model for repeat recur end component: "+JSON.stringify({innerHtml:this.$el.html(),modelAttrs:j}));this.render()},render:function(){var h=this.model.attributes;if(this.hideIfNotMatch&&this.hideIfNotMatch(this._notShowInFrequency,h.frequencySelection,this.$el)){return}this._recurEndNeverChbox.removeAttr("disabled","disabled");this._recurEndTimesChBox.removeAttr("disabled","disabled");this._recurEndTimesTxt.removeAttr("disabled","disabled");this._recurEndTimesTxt.removeAttr("readonly","readonly");this._recurEndUtilChBox.removeAttr("disabled","disabled");if(h.isSelectedEndNever){this.changeStateOfEndNever(true);this.changeStateOfEndTimes(false);this.changeStateOfEndUtil(false)}if(h.isSelectedEndTimes){this.changeStateOfEndNever(false);this.changeStateOfEndTimes(true);this.changeStateOfEndUtil(false)}if(h.isSelectedEndUntil){this.changeStateOfEndNever(false);this.changeStateOfEndTimes(false);this.changeStateOfEndUtil(true)}if(h.isDisable){console.debug("Disable repeat recur end because model is disable state");this._recurEndNeverChbox.attr("disabled","disabled");this._recurEndTimesChBox.attr("disabled","disabled");this._recurEndTimesTxt.attr("disabled","disabled");this._recurEndTimesTxt.attr("readonly","readonly");this._recurEndUtilChBox.attr("disabled","disabled");this._recurEndUtilDatePicker.attr("readonly","readonly").tcDatePicker("disable")}console.debug("Render repeat recur end component: "+JSON.stringify({innerHtml:this.$el.html(),modelAttrs:h}))},changeStateOfEndNever:function(h){this._recurEndNeverChbox.prop("checked",h)},changeStateOfEndTimes:function(h){var i=this.model.attributes;var j=this._recurEndTimesTxt;this._recurEndTimesChBox.prop("checked",h);if(h){j.removeAttr("disabled","disabled");j.removeAttr("readonly","readonly");j.val(i.count>0?i.count:1)}else{j.attr("disabled","disabled");j.attr("readonly","readonly");j.val("")}},changeStateOfEndUtil:function(h){var j=this.model.attributes;var i=this._recurEndUtilDatePicker;this._recurEndUtilChBox.prop("checked",h);if(h){i.removeAttr("readonly").tcDatePicker("enable");var l=j.until;var k=null;if(this.model.event){k=this.model.event.localisedDate}i.tcDatePicker("setDate",l);i.tcDatePicker("option","defaultDate",l);i.data("date",k||this._formatDate(i,l))}else{if(!i.is("[readonly]")){i.attr("readonly","readonly").tcDatePicker("disable")}}},_formatDate:function(h,i){if(this._calendarPlugin){this._calendarPlugin.formatDate(this._calendarDiv,i,"date",function(j){h.val(j)})}return "Formatierung ..."}});return e});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/event-edit/repeat-field/repeat-component.js' */
define("tc/repeat-component",["jquery","tc/rrule","tc-backbone","tc/calendar-util","tc/repeat-frequency","tc/repeat-interval","tc/repeat-recur-end","tc/repeat-on","underscore"],function(a,i,h,d,e,f,c,j,g){var b=h.View.extend({template:Confluence.TeamCalendars.Templates.Fields.repeatComponent,unsupportedTemplate:Confluence.TeamCalendars.Templates.Fields.repeatComponentUnSupported,fieldsDiv:null,_calendarDiv:null,_calendarPlugin:null,_editThisInstanceOnlyContainer:null,_isEditRecurrenceEvent:false,frequencyView:null,intervalView:null,recurEndView:null,repeatOnView:null,initialize:function(k){if(!this.validateInput()){this.model.set({isUnsupportedRrule:true})}this.$el=a(this.template(this.model.attributes));this.fieldsDiv=k.fieldsDiv;this._calendarDiv=k._calendarDiv;this._calendarPlugin=k._calendarPlugin;this._isEditRecurrenceEvent=this.model.event.recur?true:false;this._editThisInstanceOnlyContainer=this.$el.find(".edit-this-instance-only-container");this._editThisInstanceOnlyContainer.change(g.bind(this.updateModel,this));this.frequencyView=new e({model:this.model,$el:this.$el.find(".field-group.frequency-container")});this.intervalView=new f({model:this.model,$el:this.$el.find(".field-group.interval-container")});this.repeatOnView=new j({model:this.model,$el:this.$el.find(".group.repeat-on-container")});this.recurEndView=new c({model:this.model,$el:this.$el.find(".date-select.recur-ends-container"),createDatePicker:k.createDatePicker,_calendarDiv:this._calendarDiv,_calendarPlugin:this._calendarPlugin});this.model.set({isDisable:this._isEditRecurrenceEvent});this.model.on("change:isUnsupportedRrule",this.render,this)},validateInput:function(){var l=this.model.attributes;var m=["bysetpos","bymonth","byyearday","byweekno","bynweekday","byhour","byminute","bysecond","byeaster"];for(var k in l){if(m.indexOf(k)!==-1){if(l[k]){return false}}}return true},updateModel:function(){if(this._isEditRecurrenceEvent){var k=this._editThisInstanceOnlyContainer.find("#editthisinstanceonly").prop("checked");this.model.set({isDisable:k})}console.debug("Update model for repeat component")},render:function(){if(this.model.attributes.isUnsupportedRrule){this.$el.html(a(this.unsupportedTemplate()).html());this.$el.addClass("field-group");if(!a.contains(this.fieldsDiv[0],this.$el[0])){this.fieldsDiv.append(this.$el)}return}if(this._isEditRecurrenceEvent){if(this._editThisInstanceOnlyContainer.hasClass("hidden")){this._editThisInstanceOnlyContainer.removeClass("hidden")}this._editThisInstanceOnlyContainer.find("#editthisinstanceonly").prop("checked",this.model.attributes.isDisable)}else{if(!this._editThisInstanceOnlyContainer.hasClass("hidden")){this._editThisInstanceOnlyContainer.addClass("hidden")}}this.frequencyView.render();this.intervalView.render();this.recurEndView.render();this.repeatOnView.render();this.fieldsDiv.append(this.$el);console.debug("Render repeat component: "+JSON.stringify({innerHtml:this.$el.html(),modelAttrs:this.model.attributes}))}});return b});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/event-edit/event-field-handlers.js' */
define("tc/event-field-handlers",["jquery","tc/jira-event-field-process","tc/calendar-util","tc/repeat-model","tc/repeat-component","tc/form-state-control"],function(e,g,h,j,b,a){e.fn.tcDatePicker=e.fn.tcDatePicker.noConflict();var f=e.tcDatePicker.noConflict();function d(m,k){var l=m instanceof e?m:e(m);l.tcDatePicker(k)}function c(m,k,l){if(/^[1-9]\d*$/.test(k)||k==="0"){if(m==="DAILY"){l.text(parseInt(k)>1?"Tage":"Tag")}else{if(m==="WEEKLY"){l.text(parseInt(k)>1?"Wochen":"Woche")}else{if(m==="MONTHLY"){l.text(parseInt(k)>1?"Monate":"Monat")}else{if(m==="YEARLY"){l.text(parseInt(k)>1?"Jahre":"Jahr")}}}}}else{l.text("")}}var i={text:function(p,k,m,o,n,l){return{add:function(){k.append(Confluence.TeamCalendars.Templates.Fields.text({id:p.id,label:p.label,required:p.required,readOnly:p.readOnly}))},init:function(){e("#"+p.id+"-text",k).val(m[p.property]||"").keydown(function(){var r=e(this),q=r.val();if(!r.data("valueChangedByUser")){setTimeout(function(){if(q!==r.val()){r.data("valueChangedByUser",true)}},300)}})},setData:function(q){l.getField(k,p.id).val(q)},getData:function(){var q={};q[p.id]=l.getField(k,p.id).val();return q},getElementId:function(){return"#field-text-"+p.id}}},textarea:function(p,k,m,o,n,l){return{add:function(){k.append(Confluence.TeamCalendars.Templates.Fields.textarea({id:p.id,size:p.size,required:p.required,label:p.label,readOnly:p.readOnly}))},init:function(){e("#"+p.id+"-textarea",k).val(m[p.property]||"")},getData:function(){var q={};q[p.id]=e("textarea[name="+p.id+"]",k).val();return q},getElementId:function(){return"#field-textarea-"+p.id}}},page:function(p,k,m,o,n,l){return{add:function(){k.append(Confluence.TeamCalendars.Templates.Fields.page({id:p.id,label:p.label,required:p.required,readOnly:p.readOnly}))},init:function(){e("#"+p.id+"-text",k).val(m[p.property]||"");o.makeAutoCompleteSearch(n,e("input[name='"+p.id+"']",k),{type:["page","blogpost"]},e("."+p.id+"-suggestions",k),function(r,q){r.val(q.attr("href"))})},getData:function(){var r={},q=l.getField(k,p.id);r[p.id]=q.hasClass("with-hint")?"":q.val();return r},getElementId:function(){return"#field-page-"+p.id}}},getRepeatModel:function(k){if(!k){throw"eventFieldHandlers.getRepeatModel: event is empty"}if(!this._repeats2Models){this._repeats2Models=new Map()}if(!this._repeats2Models.has(k)){this._repeats2Models.set(k,new j({rruleStr:k.rruleStr?k.rruleStr:"",event:k}))}return this._repeats2Models.get(k)},when:function(p,k,m,o,n,l){return{add:function(){var r,z,u,w;var A=m&&(m.eventType==="jira-project-releases"||(m.eventType==="jira"&&m.end==null));var y,v,s,t,q,x;if(m&&m.extraProperties){y=m.extraProperties.dateFieldStartName;v=m.extraProperties.dateFieldEndName;s=m.extraProperties.startDateFieldEditable!=="false";t=m.extraProperties.startDateFieldHasTime!=="false";q=m.extraProperties.endDateFieldEditable!=="false";x=m.extraProperties.endDateFieldHasTime!=="false"}k.append(Confluence.TeamCalendars.Templates.Fields.when({id:p.id,disableAllDay:p.disableAllDay,start:{fieldName:y||null,disableDate:p.disableStartDateTime||s===false,disableTime:p.disableStartDateTime||s===false,hideTime:t===false,hideField:false},end:{fieldName:v||null,disableDate:p.disableEndDateTime||q===false,disableTime:p.disableEndDateTime||q===false,hideTime:x===false,hideField:A}}));r=l.getField(k,"startTime");z=l.getField(k,"endTime");u=l.getField(k,"allDayEvent");w=o.getParameter(n,"timeSuggestion");r.autocompleteTC({source:w,minLength:2});z.autocompleteTC({source:w,minLength:2});u.click(function(){if(this.checked){r.addClass("hidden");z.addClass("hidden")}else{r.removeClass("hidden");z.removeClass("hidden");if(!r.val()){r.val(o.getDefaultStartTime(n))}if(!z.val()){z.val(o.getDefaultEndTime(n))}}})},init:function(){e(".start, .end",k).each(function(){var u=e(this);d(u,{dateFormat:"ddmmyy",dayNames:o.getDayNames(),dayNamesMin:o.getDayNamesShort(),dayNamesShort:o.getDayNamesShort(),firstDay:Number.parseInt(o.getParameter(n,"firstDayOfWeek")),monthNames:o.getMonthNames(),monthNamesShort:o.getMonthNamesShort(),beforeShow:function(){e("#ui-datepicker-div").addClass("tc-datepicker")},onClose:function(){e("#ui-datepicker-div").removeClass("tc-datepicker")},onSelect:function(z){var x=f.parseDate("ddmmyy",z);if(u.hasClass("start")){i.getRepeatModel(m).set({startDate:x});var w=e(".end",k);if(!w.is(":disabled")){var y=new Date(parseInt(u.data("date")));var v=new Date(w.data("date")-(y.getTime()-x.getTime()));w.tcDatePicker("option","defaultDate",v);w.tcDatePicker("setDate",v);w.data("date",v.getTime()).val(function(){o.formatDate(n,v,"date",function(A){w.val(A)});return "Formatierung ..."})}}u.tcDatePicker("option","defaultDate",x);u.tcDatePicker("setDate",x);u.data("date",x.getTime()).val(function(){o.formatDate(n,x,"date",function(A){u.val(A)});return "Formatierung ..."})},showAnim:""})});var s=l.getField(k,"startTime"),t=l.getField(k,"endTime"),q=l.getField(k,"allDayEvent"),r=function(v,u,x){if(v==="startDate"){i.getRepeatModel(m).set({startDate:u})}var w=e("input[name="+v+"]",k);w.tcDatePicker("option","defaultDate",u);w.tcDatePicker("setDate",u);w.data("date",u.getTime()).val(x||function(){o.formatDate(n,u,"date",function(y){w.val(y)});return "Formatierung ..."})};m.start&&r("startDate",m.start,m.localizedStartDate);r("endDate",m.end||m.start,m.localizedEndDate);if(m.allDay){s.val("").addClass("hidden");t.val("").addClass("hidden");q.attr("checked","checked")}else{s.val(m.localizedStartTime||m.originalStartTime||function(){o.formatDate(n,m.start,"time",function(u){s.val(u)});return "Formatierung ..."}).removeClass("hidden");t.val(m.localizedEndTime||m.originalEndTime||function(){o.formatDate(n,m.end||new Date(m.start.getTime()+3600000),"time",function(u){t.val(u)});return "Formatierung ..."}).removeClass("hidden");q.removeAttr("checked","checked")}},getData:function(){return{startDate:l.getField(k,"startDate").val(),startTime:l.getField(k,"startTime").val(),endDate:l.getField(k,"endDate").val(),endTime:l.getField(k,"endTime").val(),allDayEvent:l.getField(k,"allDayEvent").is(":checked")}},getElementId:function(){return"#field-when"}}},repeats2:function(q,k,n,p,o,l){var m=this;return{model:null,view:null,add:function(){var r=function(s,t){d(s,{dateFormat:"ddmmyy",dayNames:p.getDayNames(),dayNamesMin:p.getDayNamesShort(),dayNamesShort:p.getDayNamesShort(),firstDay:Number.parseInt(p.getParameter(o,"firstDayOfWeek")),monthNames:p.getMonthNames(),monthNamesShort:p.getMonthNamesShort(),beforeShow:function(){e("#ui-datepicker-div").addClass("tc-datepicker")},onClose:function(){e("#ui-datepicker-div").removeClass("tc-datepicker")},onSelect:function(w){var v=e(this),u=f.parseDate("ddmmyy",w);v.tcDatePicker("option","defaultDate",u);v.tcDatePicker("setDate",u);v.data("date",u.getTime()).val(function(){p.formatDate(o,u,"date",function(x){v.val(x)});return "Formatierung ..."});if(t){t()}},showAnim:""})};this.view=new b({model:m.getRepeatModel(n),fieldsDiv:k,_calendarDiv:o,_calendarPlugin:p,createDatePicker:r})},init:function(){var u=function(w,v,y){if(w==="startDate"){i.getRepeatModel(n).set({startDate:v})}var x=e("input[name="+w+"]",k);x.tcDatePicker("option","defaultDate",v);x.tcDatePicker("setDate",v);x.data("date",v.getTime()).val(y)};var t=function(w,v){l.disableCalSelect();l.showToolTip();v.attr("disabled","disabled");u("startDate",n.start,n.localizedStartDate);u("endDate",n.end||n.start,n.localizedEndDate);l.getField(k,"allDayEvent").disable()};var s=function(y,x){l.enableCalSelect();l.hideToolTip();x.removeAttr("disabled");var w=f.parseDate("yy-mm-dd",n.originalStartDateTime.split("T")[0]);var v=f.parseDate("yy-mm-dd",n.originalEndDateTime.split("T")[0]);u("startDate",w,n.localizedOriginalStartDate);u("endDate",v,n.localizedOriginalEndDate);l.getField(k,"allDayEvent").enable()};this.view.render();var r=e("select[name='calendar']",k);if(n.recur){t(m,r)}e("input[name='editthisinstanceonly']",k).change(function(){if(e(this).is(":checked")){t(m,r)}else{s(m,r)}})},getData:function(){var r=m.getRepeatModel(n);var s=r.getRRuleAsString();console.log("Final RRULE string is "+s);return{rruleStr:s,editAllInRecurrenceSeries:!r.attributes.isDisable}},getElementId:function(){return"#field-repeats"}}},user:function(p,k,m,o,n,l){return{add:function(){k.append(Confluence.TeamCalendars.Templates.Fields.user({id:p.id,label:p.label,required:p.required}));Confluence.runBinderComponents()},init:function(){var s=e(".invitees",k),r=function(){e(this).closest("li").remove();if(!e("li",s).length){s.addClass("hidden")}},q=function(){e(".invitee-left",s).filter(function(){return !e(this).attr("threedots")}).ThreeDots({max_rows:1,text_span_class:"invitee-name-display",whole_word:false})};e("#"+p.id+"-user-picker",k).bind("selected.autocomplete-user",function(x,v){var u=v.content.userKey||v.content.username,t,y=e(".invitee",s).filter(function(){return e(this).data("entity").id===u}).length>0;if(!y){if(e("li",s).length===3){s.addClass("boxed")}t=e(Confluence.TeamCalendars.Templates.Fields.userSelection({fullName:v.content.title,userName:v.content.username,imgPath:v.content.thumbnailLink.href}));t.data("entity",{id:u,displayName:v.content.title}).find(".delete-invitee").click(r);s.prepend(t).removeClass("hidden");q()}e(this).val("").focus();var w=e(".who-error",k);if(w.children().length){w.empty()}});if(m.invitees&&m.invitees.length){e.each(m.invitees,function(u,t){s.append(e(Confluence.TeamCalendars.Templates.Fields.userSelection({fullName:t.displayName,userName:t.name,imgPath:t.avatarIconUrl})).data("entity",{id:t.id,displayName:t.displayName}))});e(".delete-invitee",s.removeClass("hidden")).unbind("click").click(r);q()}},getData:function(){var q={};var r=e(".invitee",k);if(r.length){q.person=e.map(r,function(s){return e(s).data("entity").id})}if(p.setTitle){q.what=r.length?e.map(r,function(s){return e(s).data("entity").displayName}).join(", "):""}return q},getElementId:function(){return"#field-user-"+p.id}}},getEventField:function(r,o,k,t,s,l,n){var p=i[r.type](r,o,k,t,s,l);var m=e(p.getElementId(),o);if(m.length){if(r.required){var q=m.find("label:first span.icon-required");if(q.length===0){m.find("label:first").append(e("<span/>",{"class":"aui-icon icon icon-required"}))}}else{m.find("label:first span.icon-required").remove()}o.append(m.show());if(r.type==="repeats2"){if(r.defaultRecur){i.getRepeatModel(k).set({frequencySelection:r.defaultRecur.freq})}}}else{p.add();p.init()}if(r.copyto&&n!==undefined){p.setData(n)}return p},reminder:function(p,k,m,o,n,l){return{add:function(){var r=o.getCurrentReminderForEventType(n,l);e(k).find("#field-text-"+p.id).remove();var q=r&&r.periodInMins>0;k.append(Confluence.TeamCalendars.Templates.Fields.inforReminderLabel({id:p.id,label:p.label,reminderPeriodText:q?AJS.format("{0} vor",h.showInforReminder(r.periodInMins)):"Keine.",reminderPeriod:q?r.periodInMins:0}))},init:function(){},getData:function(){return{}},getElementId:function(){return""}}},"jira-hidden-fields":function(p,k,m,o,n,l){return{add:function(){k.append(Confluence.TeamCalendars.Templates.hiddenJiraFields())},init:function(){var r=g.getSubCalendarForEvent(o,n,m),q=o.getRenderedMacroCallbackHandler(n),s=Confluence.TeamCalendars.getEditCalendarDialogHelper(k,r,q);if(!r||!r.id){s.setSubCalendarIdField("");s.setNameField("");s.setColorField("");s.setSpaceToDefault()}else{s.setSubCalendarIdField(r.id);s.setNameField(r.name);s.setColorField(r.color);s.setSpaceKeyField(r.spaceKey)}},getData:function(){}}},"jira-server-select":function(p,k,m,o,n,l){return{add:function(){k.append(Confluence.TeamCalendars.Templates.Fields.serverSelector());a.disableElement(g.getServerSelect(k))},init:function(){var r=g.getServerSelect(k),s=e(".field-group-jira-server .spinner");AJS.unbind("server-select-ready.teamcalendars");AJS.unbind("server-select-change.teamcalendars");function q(u){var t=g.getSubCalendarForEvent(o,n,m);e.each(u.jiraLinks,function(v,w){var x=e("<option/>",{value:w.id,text:w.name,"data-display-url":w.displayUrl});if(u.jiraLinks.length===1){x.prop("selected",true);var y=r.parent();y.children().hide();y.css("min-height",0);e(".oauth-error",y).show()}x.appendTo(r)});if(u.jiraLinks.length>1){e(".field-group-jira-server",k).removeClass("hidden")}if(t){if(t.applicationId){r.val(t.applicationId)}else{if(t.sourceSubCalendar&&t.sourceSubCalendar.applicationId){r.val(t.sourceSubCalendar.applicationId)}}}}r.change(function(){AJS.trigger("server-select-change.teamcalendars",k)});e.ajax({cache:false,error:function(t,v,u){o.showAjaxError(k.parent().parent(),t,v,u)},success:function(t){q(t);AJS.trigger("server-select-ready.teamcalendars",k)},complete:function(){a.enableElement(r);s.hide()},timeout:Confluence.TeamCalendars.ajaxTimeout,url:Confluence.TeamCalendars.getCalendarServiceBaseUrl("/jira/jiraLinks")})},getData:function(){}}},"jira-project-select":function(p,k,m,o,n,l){return{add:function(){k.append(Confluence.TeamCalendars.Templates.Fields.projectSelector());a.disableElement(e(".tc-jira-project",k))},init:function(){function q(r){if(r.id===k[0].id){e(".oauth-approve",k).remove();g.populateProjectList(p,k,m,o,n,l)}}AJS.bind("server-select-ready.teamcalendars",function(s,r){q(r)});AJS.bind("server-select-change.teamcalendars",function(s,r){q(r)})},getData:function(){}}},"jira-dates":function(p,k,m,o,n,l){return{add:function(){k.append(Confluence.TeamCalendars.Templates.editJiraCalendar())},init:function(){AJS.bind("server-select-ready.teamcalendars",function(){g.initJiraDate(p,k,m,o,n,l)});AJS.bind("server-select-change.teamcalendars",function(){g.initJiraDate(p,k,m,o,n,l)})},getData:function(){}}}};return i});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/event-edit/jira-event-field-process.js' */
define("tc/jira-event-field-process",["jquery","tc/calendar-util","tc/form-state-control"],function(d,b,a){function f(l,g,k,m,j){function h(){if(!d("input[name='subCalendarId']",g).val()){Confluence.TeamCalendars.fireEventForAnalytics("event.create.default."+l.type+".context."+k.getParameter("calendarContext"),{})}}if(k.isProcessingSubCalendar()){return false}var i=k.setSubCalendarSpinnerIconVisible(true);h();if(k.getIncludedCalendars()){l.include=k.getIncludedCalendars()}var n=l.subCalendarId;b.putCalendarContextParams(l);d.ajax({cache:false,converters:{"text json":function(o){return o}},data:l,dataFilter:function(o){var p=d.parseJSON(o);if(p.success){Confluence.TeamCalendars.mergeSubCalendarObjectsToArray(p.payload)}return p},dataType:"json",error:function(o,q,p){k.showAjaxUpdateError(o,q,p);m()},success:function(p){k.setGenericUpdateError();if(p.success){Confluence.TeamCalendars.setFieldErrors(g,null);var o=n;if(o){k.setSubCalendars(n,p.payload);k.reloadSubCalendar(n)}else{n=p.modifiedSubCalendarId;k.setSubCalendars(n,p.payload)}j();if(!p.modifiedSubCalendarId&&k.shouldShowFeatureDiscoveryDialog(n)){k.getSubCalendarFeatureDiscoveryDialog(n)}}else{Confluence.TeamCalendars.setFieldErrors(g,p.fieldErrors);m()}},complete:function(){if(i){i.resolve()}},type:"PUT",timeout:Confluence.TeamCalendars.ajaxTimeout,url:Confluence.TeamCalendars.getCalendarServiceBaseUrl("/subcalendars.json")});return false}function c(g,h,j,k,i){return{type:i,parentId:j,subCalendarId:d("input[name='subCalendarId']",g).val(),name:h,description:"",color:d("input[name='color']",g).val(),location:"jira://".concat(encodeURIComponent(e.getServerSelect(g).val()||""),"?projectKey=",encodeURIComponent(d("select[name='tc-jira-project'] option:selected",g).val()),"&dateFieldName=",k)}}var e={getServerSelect:function(g){return d(".tc-jira-server",g)},getJiraOptions:function(g,i,h){d.ajax({cache:false,dataType:"json",error:function(j,l,k){g(j,l,k)},success:function(j){i(j);var k=AJS.format("Es gibt bis jetzt keine Projekte. \u003ca href=\u0022{0}\u0022 target=\u0022_blank\u0022\u003eErstelle ein neues KIRA Projekt\u003c/a\u003e bevor es weiter geht.",d(".tc-jira-server option:selected").data("display-url"));d(".option-project .unavailable-message").html(k)},timeout:Confluence.TeamCalendars.ajaxTimeout,url:Confluence.getBaseUrl()+"/rest/calendar-services/1.0/calendar/jira/"+encodeURIComponent(h)+"/query/options.json"})},getSubCalendarForEvent:function(i,h,g){if(g.eventType==="jira-calendar"||g.eventType==="jira-agile-sprint-calendar"||g.eventType==="jira-project-releases-calendar"){return i.getSubCalendar(h,g.subCalendarId)}return null},showOauthRequitedMessage:function(k,h,j,m,l){var i=d.parseJSON(k.responseText);var g=d(".oauth-error",h).empty().removeClass("hidden");j.disableOkButton({buttonText:"OK"});d(document.createElement("div")).addClass("oauth-approve aui-message aui-message-hint hint").html(AJS.format("\u003cp class=\u0022title\u0022\u003e\u003cspan class=\u0022aui-icon aui-icon-info\u0022\u003e\u003c/span\u003e\u003c/p\u003e\u003cp class=\u0022info-approve\u0022\u003e\u003ca href=\u0022#\u0022 class=\u0022approve-dance\u0022\u003e{0}\u003c/a\u003e to see list of projects\u003c/p\u003e",d(document.createElement("span")).text("Anmelden und Genehmigen").html())).appendTo(g).find(".approve-dance").click(function(){AppLinks.authenticateRemoteCredentials(i.oAuthUrl,function(){m.removeClass("hidden");g.addClass("hidden");j.enableOkButton();l()},function(){alert("Best\u00e4tigung erfolglos. K\u00f6nnten Sie es bitte noch einmal versuchen?")});return false})},populateProjectList:function(n,k,h,q,p,j){var m=d(".tc-jira-project",k),o=d(".field-group-jira-project .spinner"),g=j.getSelectedEventType(),i=e.getServerSelect().val(),l=function(){var t=d("input[name='name']",k),r=e.getSubCalendarForEvent(q,p,h),s=function(u){if(!t.data("valueChangedByUser")){return u}return t.val()};if(!r){if(g==="jira-agile-sprint-calendar"){t.val(s(AJS.format("{0} - Sprints",d("option:selected",m).text())))}else{if(g==="jira-project-releases-calendar"){t.val(s(AJS.format("{0} - Releases",d("option:selected",m).text())))}}}};m.change(l);a.disableElement(m);o.show();e.getJiraOptions(function(r,t,s){o.hide();if(Confluence.TeamCalendars.isRequireOauth(r)){m.empty();e.showOauthRequitedMessage(r,k,j,m,function(){e.populateProjectList(i)})}else{a.enableElement(m);q.showAjaxError(k.parent().parent(),r,t,s)}},function(r){var t=r.projects,u=m.empty(),s=e.getSubCalendarForEvent(q,p,h);o.hide();a.enableElement(m);d.each(t,function(v,w){d(document.createElement("option")).val(w.key).text(w.name).appendTo(u)});if(s){u.val(s.projectKey)}else{l()}},i)},initJiraDate:function(r,o,i,v,u,n){var q=e.getSubCalendarForEvent(v,u,i),k=v.getRenderedMacroCallbackHandler(u),s=d("select[name='project']",o),t=function(){if(!q){var w=d("input[name='name']",o);w.val(function(){if(!w.data("valueChangedByUser")){return d("option:selected",s).val()?AJS.format("{0} - Vorg\u00e4nge",d("option:selected",s).text()):""}return w.val()});p()}};s.off("change").on("change",t);var p=function(){d(".project-error",o).empty();d(".name-error",o).empty();d(".dateFieldName-error",o).empty()};var l=function(x){var w=d(".field-group-jira-show",o);if(x){w.css("display","none")}else{w.css("display","block")}};var m=function(){var C=d(".form-mode",o),x=e.getServerSelect(o),w=d(".jira-query-options .option-project",o),A=d("select[name='project']",w),z=d(".timeZoneIdDisplay",o),y=Confluence.TeamCalendars.getEditCalendarDialogHelper(o,q,k);Confluence.TeamCalendars.setFieldErrors(o,null);d("input[name='searchFilterName']",o).addClass("with-hint").val("Suchfilter");d("textarea[name='jql']",o).addClass("with-hint").val("JQL-Abfrage");if(!q||!q.id){y.setFormModeCreate();y.setSubCalendarIdField("");y.setNameField("");y.setDescriptionField("");y.setColorField("");y.setSpaceToDefault();y.setTimeZoneIdDisplayField("");z.hide();j(null,function(){g(function(){t()})})}else{y.setFormModeEdit();y.setSubCalendarIdField(q.id);y.setNameField(q.name);y.setDescriptionField(q.description);y.setColorField(q.color);y.setSpaceKeyField(q.spaceKey);y.setSpaceKeyAutocompleteField(q.spaceName);j(null,function(){var I=d(".jira-query-options",o),J="option-project-selected option-search-filter-selected option-jql-selected",E;d(".matrix input.radio",I).removeAttr("checked");var M=q.sourceSubCalendar||q;if(M.projectKey){var L=false;d("option",A).removeAttr("selected").each(function(){var N=d(this);if(N.val()===M.projectKey){N.attr("selected","selected");L=true;return false}});if(!L){A.append(d(document.createElement("option")).val(M.projectKey).text(M.projectName||M.projectKey).attr("selected","selected"))}d(".radio-project input.radio",I.removeClass(J).addClass("option-project-selected")).attr("checked","checked");E=w.data("hiddenDateFields")}else{if(M.searchFilterId){var F=d(".option-search-filter",I);var H=d("input[name='searchFilterName']",F);d("input[name='searchFilter']",F).val(M.searchFilterId);var D=M.searchFilterName||M.searchFilterId;var G=d(H).data("searchFilters");if(G){D=d.map(G,function(N){if(N.id===M.searchFilterId&&N.name.length>0){return N.name}})}d(H).removeClass("with-hint").val(D);d(".radio-search-filter input.radio",I.removeClass(J).addClass("option-search-filter-selected")).attr("checked","checked");E=F.data("hideDateFields")}else{if(M.jql){var K=d(".option-jql",I);d("textarea[name='jql']",K).removeClass("with-hint").val(M.jql);d(".radio-jql input.radio",I.removeClass(J).addClass("option-jql-selected")).attr("checked","checked")}}}g(function(){var O=d(".field-group-jira-show .single-dates .date-fields div.checkbox",o),N={},P=M.dateFieldNames||[];d(".date-fields input",o).removeAttr("checked");O.each(function(){var R=d("input",this),Q=R.val();if(d.inArray(Q,P)!==-1){R.attr("checked","checked")}N[Q]=d("label",this).text()});d.each(M.durations||[],function(Q,W){var R=N[W.startDateFieldName||""],V=N[W.endDateFieldName||""];if(R&&V){var U=d(".field-group-jira-show .duration .date-fields",o),T=W.startDateFieldName+"/"+W.endDateFieldName,S="duration-"+T;d(Confluence.TeamCalendars.Templates.editJiraSubCalendarDateDuration({durationFieldId:S,isChecked:true,selectedDurationFieldKey:T,selectedStartDateFieldName:AJS.format("Start: {0}",R),selectedEndDateFieldName:AJS.format("Ende: {0}",V),})).appendTo(U);U.parent().addClass("has-selected-duration")}});if(E){l(E)}})});z.text(q.timeZoneId)}var B=d("input[name='name'], input[name='description'], input[name='spaceKeyAutocomplete'], input[name='searchFilterName'], textarea[name='jql']",o);if(k.isCalendarInEditMode()){B.removeAttr("readonly");x.removeAttr("disabled");A.removeAttr("disabled")}else{C.removeClass().addClass("form-mode read-only");B.attr("readonly","readonly");x.attr("disabled","disabled");A.attr("disabled","disabled")}};var h=function(){d("select[name='server']",o).change(function(){var y=d("select[name='server'] option:selected",o);if(y.length&&y.val()){j(null,function(){g()})}});d("input[name='spaceKeyAutocomplete']",o).bind("selected.autocomplete-content",function(z,y){d("input[name='spaceKey']",o).val(y.content.key);d(this).val(y.content.name);d(".spaceKeyAutocomplete-error",o).empty()});d(".jira-query-options .query-group input.radio",o).off("change").on("change",function(){var A=d(this).val(),z=d(".jira-query-options",o).removeClass("option-project-selected option-search-filter-selected option-jql-selected").addClass(A+"-selected"),y=d("."+A,z);d("input",y).focus(function(){var B=d(this);if(B.hasClass("with-hint")){B.removeClass("with-hint").val("")}});if("option-jql"===A){d("textarea",y).trigger("keydown",[true])}g(function(){l(y.data("hideDateFields")||!d(".option-value",y).val());var B=d(".duration",o);if(d(".date-fields",B).children().length){B.addClass("has-selected-duration")}else{B.removeClass("has-selected-duration")}})});var x=d(".option-search-filter",o);var w=d(".search-filter-suggestions",x);d("input[name='searchFilterName']",x).keydown(function(){var y=d(this);var z=y.val();setTimeout(function(){var B=y.val();if(!B||B!==z){w.empty()}if(B!==z){B=B.toLowerCase();var D=d.grep(y.data("searchFilters")||[],function(E){return E.name.toLowerCase().indexOf(B)!==-1});if(D.length){var A=d(document.createElement("div")).addClass("dropdown-container").append(d(document.createElement("div")).addClass("aui-dd-parent").append(d(document.createElement("a")).addClass("aui-dd-trigger").attr("href","#").text("Show autocomplete")).append(d(document.createElement("ul")).addClass("aui-dropdown")));var C=d(".aui-dropdown",A).appendTo(d(".aui-dd-parent",A));d.each(D,function(F,E){var G=d(document.createElement("li")).append(d(document.createElement("a")).attr("href","#").text(E.name)).data("searchFilter",E).appendTo(C).click(function(){y.val(E.name);d("input[name='searchFilter']",x).val(E.id);d(".error",x).empty();g()});if(E.description){G.attr("title",E.description)}});A.appendTo(w).dropDown("Standard",{alignment:"left"});w.removeClass("hidden")}}},300)});d("select[name='project']",o).change(function(){g()});d(".jira-query-options input[name='searchFilterName']",o).keydown(function(z){var C=z.keyCode;var y=d(this);if(!(C===38||C===40||C===13)){setTimeout(function(){o.click();var E=y.val().toLowerCase();if(E){var D=y.data("searchFilters");if(D&&d.isArray(D)){var F=d(".search-filter-suggestions .aui-dropdown li",o).each(function(){var G=d(this);if(G.data("searchFilter").name.toLowerCase().indexOf(E)===-1){G.addClass("hidden")}else{G.removeClass("hidden")}});if(F.filter(function(){return !d(this).hasClass("hidden")}).length){d(".search-filter-suggestions .aui-dd-trigger",o).trigger("click")}}}},300)}else{if(C===13){z.preventDefault();var B=d(".search-filter-suggestions .aui-dropdown li.active",o);if(B.length){var A=B.data("searchFilter");y.val(A.name);d("input[name='searchFilter']",o).val(A.id);d(".option-search-filter .error",o).empty();o.click();g()}}}});d(".add-duration",o).unbind().click(function(){AJS.log("Open Jira Duration Dialog");var A=new AJS.Dialog({height:423,width:520,id:"add-jira-duration-dialog"});A.addHeader("Dauer zwischen Vorgangsdaten hinzuf\u00fcgen");A.addPanel("",Confluence.TeamCalendars.Templates.editJiraSubCalendarDurations(),"calendar-dialog-panel");var F=A.getCurrentPanel().body,E=d(".field-group-jira-show .duration .date-fields",o),C=d(".field-group-jira-show .single-dates .date-fields",o);A.addSubmit("Hinzuf\u00fcgen",function(){var J=d(".duration-start select option:selected",F),H=d(".duration-end select option:selected",F),I=J.val()+"/"+H.val(),L=d("div.checkbox",E).filter(function(){return d("input",this).val()===I});if(L.length){d("input",L).attr("checked","checked")}else{var K="duration-"+I;d(Confluence.TeamCalendars.Templates.editJiraSubCalendarDateDuration({durationFieldId:K,isChecked:true,selectedDurationFieldKey:I,selectedStartDateFieldName:AJS.format("Start: {0}",J.html()),selectedEndDateFieldName:AJS.format("Ende: {0}",H.html())})).prependTo(E);E.parent().addClass("has-selected-duration")}A.remove();n.show()});A.addCancel("Abbrechen",function(){A.remove();n.show()});var z=d.map(d("div.checkbox",C).filter(function(){return d(this).data("mappableAsDuration")}),function(H){return d("<option/>",{value:d("input",H).val(),text:d("label",H).text()})}),B=d(".duration-start select",F),G=d(".duration-end select",F),y=function(I,H){var J=A.popup.element.find(".button-panel-submit-button");if(H&&I&&H!==I){J.prop("disabled",false).removeClass("ui-state-disabled")}else{J.prop("disabled",true).addClass("ui-state-disabled")}};d.each(z,function(I,H){d(H).appendTo(B).clone().appendTo(G)});if(!z.length){d(".duration-fields",F).addClass("hidden");d(".add-fields",d(".no-selectable-date-fields",F).removeClass("hidden")).html(AJS.format("Wenn Sie ein Jira-Administrator sind, \u003ca href=\u0027\u0027{0}/secure/admin/ViewCustomFields.jspa\u0027\u0027 target=\u0022_blank\u0022\u003ek\u00f6nnen Sie benutzerdefinierte Datenfelder erstellen\u003c/a\u003e. Sie erscheinen dann als Optionen f\u00fcr Start- und Enddaten von Vorg\u00e4ngen.",d(".field-group-jira-server select option:checked",o).data("display-url")))}var D=function(H,J){var I=d("option:selected",J).val();d("option",J).filter(function(){return d(this).val()}).remove();d.each(z,function(L,K){if(K.val()!==H){K.clone().appendTo(J)}});d("option",J).removeAttr("selected").filter(function(){return d(this).val()===I}).attr("selected","selected")};B.change(function(){var H=d("option:selected",this).val();D(H,G);y(H,d("option:selected",G).val())});G.change(function(){var H=d("option:selected",this).val();D(H,B);y(H,d("option:selected",B).val())});n.hide();y();A.show();return false});d(".subcalendar-cancel",o).click(function(){n.remove();return false});return o};var j=function(A,E){var B=d(".jira-query-options",o);var D=d(".query-group input.radio",B).attr("disabled","disabled").removeAttr("checked","checked");var w=d(".field-group .project-select-label",B);var z=d(".query-group",B);var G=d(".compatibility-group, .field-group-jira-show",B);var y=d(".form-mode",o).addClass("jira-query-options-loading");var x=e.getServerSelect(o).val();var C=function(H,J,I){y.removeClass("jira-query-options-loading");z.addClass("hidden");w.removeClass("hidden");G.addClass("hidden");if(Confluence.TeamCalendars.isRequireOauth(H)){e.showOauthRequitedMessage(H,o,n,G,m)}else{if(A&&d.isFunction(A)){A(H,J,I)}}};var F=function(J){G.removeClass("hidden");y.removeClass("jira-query-options-loading");D.removeAttr("disabled","disabled");if(!J.searchRequests){d(".radio-search-filer input",o).attr("disabled","disabled")}if(!B.hasClass("option-project-selected")){B.removeClass("option-search-filter-selected option-jql-selected").addClass("option-project-selected")}d(".radio-project input",B).attr("checked","checked");if(J.jqlNotSupported){z.addClass("hidden");w.removeClass("hidden")}else{w.addClass("hidden");z.removeClass("hidden");var P=new Date().getTime();var I="jql-"+P;d("textarea[name='jql']",B).before(d(document.createElement("textarea")).attr({autocomplete:"off",cols:"20",id:I,name:"jql",rows:1,wrap:"off",placeholder:"JQL-Abfrage"}).addClass("textarea with-hint").focus(function(){var T=d(this);if(T.hasClass("with-hint")){T.removeClass("with-hint").val("")}}).val("")).remove();var Q=/.+\/jql\/autocomplete.json\?fieldName=[^&]+&fieldValue=.*/;var S=d(".jqlAutoCompleteSpinner",B);B.ajaxSend(function(V,U,T){if(Q.test(T.url||"")){S.removeClass("hidden")}}).ajaxComplete(function(V,U,T){if(Q.test(T.url||"")){S.addClass("hidden")}});d(".option-jql label",B).attr("for",I);var M="jql-error-"+P;d(".jql-error",B).before(d(document.createElement("div")).addClass("error jql-error").attr("id",M)).remove();d(".dropdown-ready",B).remove();JIRA.JQLAutoComplete({fieldID:I,parser:JIRA.JQLAutoComplete.MyParser(d.parseJSON(J.jqlReservedKeywordsJson||"[]")),queryDelay:0.65,jqlFieldNames:d.parseJSON(J.visibleFieldNamesJson||"[]"),jqlFunctionNames:d.parseJSON(J.visibleFunctionNamesJson||"[]"),minQueryLength:0,allowArrowCarousel:true,autoSelectFirst:false,errorID:M,jiraApplicationId:e.getServerSelect().val(),baseUrl:Confluence.getBaseUrl()});d("textarea[name='jql']",o).keydown(function(V,U){var W=d(this);var T=W.val();if(U||V.keyCode!==27){setTimeout(function(){var Y=W.val();var Z=d(".jql-error",o);if(Y&&!W.hasClass("with-hint")&&(U||Y!==T)){d.ajax({cache:false,data:{jql:Y},error:function(){Z.empty().text("JQL konnte nicht gegen ausgew\u00e4hlte Jira-Instanz \u00fcberpr\u00fcft werden.")},success:function(ad){var ac=d(".jql-ok",o),ab=d(".jql-bad",o),aa=d(".duration",o);if(ad.valid){ac.removeClass("hidden");ab.addClass("hidden");g(function(){aa.addClass("can-add-duration");if(d(".date-fields div.checkbox",aa).length){aa.addClass("has-selected-duration")}else{aa.removeClass("has-selected-duration")}});W.focus()}else{ac.addClass("hidden");ab.removeClass("hidden");d(".date-fields",o).empty();l(true);aa.removeClass("can-add-duration")}},type:"PUT",url:Confluence.getBaseUrl().concat("/rest/calendar-services/1.0/calendar/jira/",encodeURIComponent(e.getServerSelect(o).val()),"/jql/validate.json"),timeout:Confluence.TeamCalendars.ajaxTimeout})}},300)}else{var X=d(".option-jql .suggestions",B);if(X.is(":visible")){X.hide();return false}}})}var R=J.searchRequests;var L=d(".option-search-filter",o);var H=d("input[name='searchFilterName']",L).removeData("searchFilters");if(R&&d.isArray(R)&&R.length){H.data("searchFilters",R);d(".option-content",L.removeData("hideDateFields")).removeClass("disabled")}else{H.attr("disabled","disabled");d(".option-content",L.data("hideDateFields",true)).addClass("disabled")}var K=J.projects;var O=d(".option-project",o);if(K&&d.isArray(K)&&K.length){var N=d("select",O).empty();d(document.createElement("option")).val("").text("Ausw\u00e4hlen").appendTo(N);d.each(K,function(T,U){d(document.createElement("option")).val(U.key).text(U.name).appendTo(N)});d(".option-content",O.removeData("hideDateFields")).removeClass("disabled")}else{d(".option-content",O.data("hideDateFields",true)).addClass("disabled")}if(!J.dateRangeSupported){d(".duration",o).css("visibility","hidden")}else{d(".duration",o).css("visibility","visible")}n.enableOkButton();if(E&&d.isFunction(E)){E(J)}};e.getJiraOptions(C,F,x)};var g=function(z){var y=d(".field-group-jira-show div.checkbox",o).filter(function(){return d("input",this).is(":checked")}),E=d(".jira-query-options .matrix .radio:checked",o).val(),G=d(".duration",o),B={},x="";if("option-project"===E){var w=encodeURIComponent(d(".jira-query-options .option-project select option:selected",o).val());if(w){x="/project/"+w}}else{if("option-search-filter"===E){var D=d(".jira-query-options .option-search-filter input[name='searchFilter']",o).val();if(D){x="/filter/"+encodeURIComponent(D)}}else{if("option-jql"===E){B.query=d(".jira-query-options .option-jql textarea",o).val()||"";if(B.query){x="/jql"}}}}G.removeClass("can-add-duration");if(x){var C=d(".date-fields-spinner-container",o).removeClass("hidden"),F=d(".single-dates .date-fields",o).empty(),A=d(".date-fields",G).empty();d.ajax({cache:false,data:B,dataType:"json",error:function(){C.addClass("hidden");d(".dateFieldName-error",o).text("Beim Abrufen der Liste von Datenfeldern ist ein Fehler aufgetreten.")},success:function(J){C.addClass("hidden");var L=d("<div/>"),I=d.map(y,function(M){return d("input",M).val()}),H=d.map(J,function(M){return M.key});d.each(J,K);function K(P,N){var O=d.inArray(N.key,I)!==-1;var M;if(!N.isSearchable){M="We can\u0027t search this field. Edit this custom field in Jira and specify a search template."}d(Confluence.TeamCalendars.Templates.editJiraSubCalendarDatefield({dateField:N,isChecked:O,warning:M})).data("mappableAsDuration",N.customfield||N.key==="duedate"||N.key==="created"||N.key==="resolution").appendTo(L)}y.filter(function(){var N=d("input",this).val();if(N.indexOf("/")!==-1){var M=N.split("/",2);return M.length===2&&d.inArray(M[0],H)!==-1&&d.inArray(M[1],H)!==-1}return false}).appendTo(A.empty());L.appendTo(F.empty());if(L.children().length){l(false);G.addClass("can-add-duration")}else{G.removeClass("can-add-duration")}if(z&&d.isFunction(z)){z(J)}},timeout:Confluence.TeamCalendars.ajaxTimeout,url:Confluence.getBaseUrl().concat("/rest/calendar-services/1.0/calendar/jira/",encodeURIComponent(e.getServerSelect(o).val()),"/date-fields",x,".json")})}else{l(true);if(z&&d.isFunction(z)){z()}}};h();m()},CustomSubmitter:{JiraIssues:{submitForm:function(g,j,k,i,h,l){function m(){var r="",o=d(".field-group-jira-show .date-fields div.checkbox").filter(function(){return d("input:checked",this).length});d.each(o,function(){var t=d("input",this).val();if(t.indexOf("/")!==-1){var s=t.split("/",2);if(r){r+="&"}r+="duration="+encodeURIComponent(s[0]+"/"+s[1])}else{if(r){r+="&"}r+="dateFieldName="+encodeURIComponent(t)}});var p={type:"jira",parentId:k,subCalendarId:d("input[name='subCalendarId']",g).val(),name:j,description:"",color:d("input[name='color']",g).val()},n="jira://"+encodeURIComponent(e.getServerSelect(g).val()||"")+"?",q=d(".jira-query-options .matrix input.radio:checked",g).val();if("option-project"===q){n+="projectKey="+encodeURIComponent(d("select[name='project'] option:selected",g).val())}else{if("option-search-filter"===q){n+="searchFilterId="+d("input[name='searchFilter']",g).val()}else{n+="jql="+encodeURIComponent(d("textarea[name='jql']",g).val())}}if(r){n+="&"+r}p.location=n;return p}f(m(),g,i,l,h)}},JiraAgileSprints:{submitForm:function(g,j,k,i,h,l){var m=c(g,j,k,"sprint","jira-agile-sprint");f(m,g,i,l,h)}},JiraProjectReleases:{submitForm:function(g,j,k,i,h,l){var m=c(g,j,k,"versiondue","jira-project-releases");f(m,g,i,l,h)}}}};return e});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/event-edit/event-types.js' */
define("tc/event-types",["jquery","tc/jira-event-field-process"],function(c,d){var b={fields:[{type:"user",id:"who",label:"Wer",required:true,property:"what",setTitle:true},{type:"text",id:"description",required:true,property:"description",label:"Zusammenfassung",copyto:"what"},{type:"when",id:"people"},{type:"repeats2",id:"people"},{type:"reminder",id:"reminder",label:"Erinnerung"},{type:"page",id:"url",property:"workingUrl",label:"Zugeh\u00f6rige Seite"}]};var a={DefaultEventType:{travel:c.extend({},b,{id:"travel",name:"Reise"}),leaves:c.extend({},b,{id:"leaves",name:"Urlaub"}),birthdays:c.extend(true,{},b,{id:"birthdays",name:"Geburtstage",fields:[{},{},{defaultRecur:{freq:"YEARLY"}}]}),jira:{id:"jira",name:"Jira Vorgangsdatum",hiddenFromEventCreation:true,fields:[{type:"text",id:"what",property:"title",label:"Was",required:true,readOnly:true},{type:"when",id:"simple",disableEndDateTime:false,disableAllDay:true},{type:"reminder",id:"reminder",label:"Erinnerung"},{type:"page",id:"url",property:"workingUrl",label:"Zugeh\u00f6rige Seite",readOnly:true},{type:"textarea",id:"description",property:"description",label:"Beschreibung",size:5,readOnly:true}]},"jira-agile-sprint":{id:"jira-agile-sprint",name:"Jira Agile Sprints",hiddenFromEventCreation:true,fields:[{type:"text",id:"what",property:"title",label:"Was",required:true,readOnly:true},{type:"when",id:"simple",disableEndDateTime:true,disableAllDay:true},{type:"reminder",id:"reminder",label:"Erinnerung"},{type:"page",id:"url",property:"workingUrl",label:"Zugeh\u00f6rige Seite",readOnly:true},{type:"textarea",id:"description",property:"description",label:"Beschreibung",size:5,readOnly:true}]},"jira-project-releases":{id:"jira-project-releases",name:"Jira Projekt-Ver\u00f6ffentlichungen",hiddenFromEventCreation:true,fields:[{type:"text",id:"what",property:"title",label:"Was",required:true,readOnly:true},{type:"when",id:"simple",disableEndDateTime:true,disableAllDay:true},{type:"reminder",id:"reminder",label:"Erinnerung"},{type:"page",id:"url",property:"workingUrl",label:"Zugeh\u00f6rige Seite",readOnly:true},{type:"textarea",id:"description",property:"description",label:"Beschreibung",size:5,readOnly:true}]},other:{id:"other",name:"Ereignisse",fields:[{type:"text",id:"what",property:"title",label:"Was",required:true,copyto:"description"},{type:"user",id:"who",label:"Wer",property:"what"},{type:"when",id:"simple"},{type:"repeats2",id:"simple"},{type:"reminder",id:"reminder",label:"Erinnerung"},{type:"text",id:"where",property:"where",label:"Wo"},{type:"page",id:"url",property:"workingUrl",label:"Zugeh\u00f6rige Seite"},{type:"textarea",id:"description",property:"description",label:"Beschreibung",size:5}]},"jira-calendar":{id:"jira-calendar",name:"Jira Vorgangsdatum",customHandler:d.CustomSubmitter.JiraIssues,hiddenFromEventCreation:!Confluence.TeamCalendars.hasJiraLink,fields:[{type:"jira-server-select",id:"server",property:"server",label:"Server",required:true},{type:"text",id:"name",property:"name",required:true,label:"Name"},{type:"reminder",id:"reminder",label:"Erinnerung"},{type:"jira-dates",id:"jira-dates"}]},"jira-agile-sprint-calendar":{id:"jira-agile-sprint-calendar",name:"Jira Agile Sprints",customHandler:d.CustomSubmitter.JiraAgileSprints,hiddenFromEventCreation:!Confluence.TeamCalendars.hasJiraLink,fields:[{type:"jira-hidden-fields",id:"",property:"",required:true,label:""},{type:"jira-server-select",id:"server",property:"server",label:"Server",required:true},{type:"jira-project-select",id:"project",property:"project",label:"Projekt",required:true},{type:"text",id:"name",property:"title",required:true,label:"Name"},{type:"reminder",id:"reminder",label:"Erinnerung"}]},"jira-project-releases-calendar":{id:"jira-project-releases-calendar",name:"Jira Projekt-Ver\u00f6ffentlichungen",customHandler:d.CustomSubmitter.JiraProjectReleases,hiddenFromEventCreation:!Confluence.TeamCalendars.hasJiraLink,fields:[{type:"jira-hidden-fields",id:"",property:"",required:true,label:""},{type:"jira-server-select",id:"server",property:"server",label:"Server",required:true},{type:"jira-project-select",id:"project",property:"project",label:"Projekt",required:true},{type:"text",id:"name",property:"title",required:true,label:"Name"},{type:"reminder",id:"reminder",label:"Erinnerung"}]}},CustomEventType:{id:"custom",name:"Ereignis",fields:[{type:"text",id:"what",property:"title",label:"Was",required:true,copyto:"description"},{type:"user",id:"who",label:"Wer",property:"what"},{type:"when",id:"simple"},{type:"repeats2",id:"simple"},{type:"reminder",id:"reminder",label:"Erinnerung"},{type:"text",id:"where",property:"where",label:"Wo"},{type:"page",id:"url",property:"workingUrl",label:"Zugeh\u00f6rige Seite"},{type:"textarea",id:"description",property:"description",label:"Beschreibung",size:5}]}};return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-edit', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/event-edit/event-edit-dialog-combat.js' */
require(["tc/event-edit-dialog"],function(a){if(!Confluence.TeamCalendars.Dialogs){Confluence.TeamCalendars.Dialogs={}}Confluence.TeamCalendars.Dialogs.getEditEventDialog=function(d,c,e,b){return new a().getEditEventDialog(d,c,e,b)}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:eventtypes-edit', location = 'com/atlassian/confluence/extra/calendar3/components/customeventype/customeventtype-list.js' */
define("tc/customeventtype-list",["jquery","tc-backbone","tc/customeventtype-model","underscore"],function(c,e,d,a){var b=e.Collection.extend({model:d,select:function(g){this.selectedId=g;var f=this.selectedItem();this.trigger("selected",this);return f},selectedItem:function(){if(this.selectedId){return this.findWhere({id:this.selectedId})}return undefined},defaultEventTypes:function(){return this.where({isCustomEvent:false})},customEventTypes:function(){return this.where({isCustomEvent:true})},initialize:function(){this.sortField="name";this.sortDirection="ASC"},setSortField:function(g,f){this.sortField=g;this.sortDirection=f},comparator:function(f){return f.get(this.sortField)},sortBy:function(g,f){var i=this.models,h=this.sortDirection;return a.pluck(a.map(i,function(l,j,k){return{value:l,index:j,criteria:g.call(f,l,j,k)}}).sort(function(m,j){var l=h==="ASC"?m.criteria:j.criteria,k=h==="ASC"?j.criteria:m.criteria;if(l!==k){if(l>k||l===void 0){return 1}if(l<k||k===void 0){return -1}}return m.index<j.index?-1:1}),"value")}});return b});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:eventtypes-edit', location = 'com/atlassian/confluence/extra/calendar3/components/customeventype/customeventtype-model.js' */
define("tc/customeventtype-model",["jquery","tc-backbone"],function(b,c){var a=c.Model.extend({defaults:function(){return{title:"",icon:"",subCalendar:"",disable:false,isCustomEvent:false,id:"",created:"",periodInMins:""}},validate:function(d){if(!d.isCustomEvent){return false}var e=[];if(!d.title){e.push({field:"title",message:"Ereignisname ist erforderlich"})}d.title=b.trim(d.title);if(d.title.length<=0){e.push({field:"title",message:"Ereignisname ist erforderlich"})}else{if(d.title.length>256){e.push({field:"title",message:"Der Veranstaltungsname sollte h\u00f6chstens 256 Zeichen lang sein"})}}if(!d.icon){e.push({field:"icon",message:"Ereignissymbol erforderlich"})}return e.length>0?e:false},toggle:function(){this.set({disable:!this.get("disable")})}});return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:eventtypes-edit', location = 'com/atlassian/confluence/extra/calendar3/components/customeventype/customeventtype-view/customeventtype-view.js' */
define("tc/customeventtype-view",["jquery","tc-backbone","tc/dialogs","tc/templates","tc/customeventtype-edit","tc/calendar-util"],function(f,g,b,d,e,c){var a=g.View.extend({tagName:"tr",mediator:null,confirmDialog:null,events:{"click .hidden-link":"_toggle","click .edit-eventtypes-link":"_edit","click .remove-eventtypes-link":"_removeFromCollection"},initialize:function(h){this.mediator=h.mediator;this.listenTo(this.model,"change",this.render);this.listenTo(this.model,"destroy",this.remove);this.listenTo(this.model.collection,"selected",this.selected)},render:function(){if(!this.$el.hasClass("event-type-item")){this.$el.addClass("event-type-item")}if(this.model.get("disable")){this.$el.addClass("event-type-item-hidden")}else{this.$el.removeClass("event-type-item-hidden")}this.$el.find(".eventtypes-icon-link a").each(function(j,k){var l=f(k).data("tipsy");if(l){l.disable();l.hide()}});var h=f.extend({},this.model,{showInforReminder:c.showInforReminder(this.model.attributes.periodInMins)});this.$el.html(Confluence.TeamCalendars.Templates.viewCustomEventType({eventTypeModel:h}));var i=this.$el.find(".eventtypes-icon-link a");if(i.tooltip){i.tooltip({aria:true})}return this},removeEventListener:function(){this.$el.off("click",".hide-eventtypes-link")},remove:function(){this.$el.remove()},selected:function(i){var h=i.selectedItem();if(h.id===this.model.id){this._edit()}},_toggle:function(){this.model.toggle()},_edit:function(){var h=new e({model:this.model,parentCustomEventTypeDiv:this.$el,mediator:this.mediator});h.render();f("#edit-calendar-dialog").find(".eventtypes-edit-dialog-panel").scrollTop(h.$el.position().top)},_removeFromCollection:function(){var h=this;h.mediator.trigger("close-edit-custom-event-dialog");h._showConfirmCustomEventTypeDeleteDialog(h.model)},_getCustomEventTypeData:function(h){return{subCalendarId:h.get("subCalendar").id,customEventTypeId:h.get("id")}},_showConfirmCustomEventTypeDeleteDialog:function(h){var j=this;function i(l){if(l.keyCode===27){j._calltrigerOpenEditCustomEventTypeDialog(i)}}f(document).keyup(i);var k=new AJS.Dialog(450,"auto","confirm-delete-custom-event-type");k.addHeader("Ereignistyp l\u00f6schen");k.addPanel("",Confluence.TeamCalendars.Templates.confirmCustomEventNameDelete({customEventName:h.get("title")}),"tc-confirm-delete-custom-event-type-dialog");k.addButton("Ja",function(){j._removeCustomEventType(h,k,i)});k.addLink("Abbrechen",function(){k.hide();j._calltrigerOpenEditCustomEventTypeDialog(i);return false});j.confirmDialog=k;j.confirmDialog.show();j.confirmDialog.updateHeight();return k},_removeCustomEventType:function(i,l,j){var k=this;var h=k._getCustomEventTypeData(i);f.ajax({cache:false,data:h,dataType:"json",error:function(m,o,n){l.hide()},success:function(){i.collection.remove(i);l.hide();k._calltrigerOpenEditCustomEventTypeDialog(j);var m={customEventTypeName:i.get("title")};Confluence.TeamCalendars.fireEventForAnalytics("customeventtype.delete",m)},type:"DELETE",timeout:Confluence.TeamCalendars.ajaxTimeout,url:Confluence.TeamCalendars.getCalendarServiceBaseUrl("/eventtype/custom.json")})},_calltrigerOpenEditCustomEventTypeDialog:function(h){this.mediator.trigger("open-edit-custom-event-dialog");if(this.confirmDialog){this.confirmDialog.hide();this.confirmDialog.remove()}f(document).unbind("keyup",h)}});return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:eventtypes-edit', location = 'com/atlassian/confluence/extra/calendar3/components/customeventype/customeventtype-view/customeventtype-view.soy' */
// This file was automatically generated from customeventtype-view.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.viewCustomEventType = function(opt_data, opt_ignored) {
  return '<td class="custom-event-type-title" data-id="' + soy.$$escapeHtml(opt_data.eventTypeModel.attributes.id) + '" data-title="' + soy.$$escapeHtml(opt_data.eventTypeModel.attributes.title) + '"><span class="event-type-link" title="' + soy.$$escapeHtml(opt_data.eventTypeModel.attributes.title) + '">' + Confluence.TeamCalendars.Templates.renderCustomImagePrinting({eventType: opt_data.eventTypeModel.attributes.icon, customClasses: ['event-type-table-item', opt_data.eventTypeModel.attributes.icon]}) + '<span class="event-type-label">' + soy.$$escapeHtml(opt_data.eventTypeModel.attributes.title) + '</span></span></td><td class="event-type-reminder-title"><span class="event-type-reminder-info" title="' + soy.$$escapeHtml(opt_data.eventTypeModel.showInforReminder) + '">' + soy.$$escapeHtml(opt_data.eventTypeModel.showInforReminder) + '</span></td><td class="eventtypes-icon-link">' + ((opt_data.eventTypeModel.attributes.isCustomEvent) ? '<a href="#" class="aui-icon edit-eventtypes-link" title="' + soy.$$escapeHtml('Ereignis bearbeiten') + '"></a><a href="#" class="aui-icon hidden-link ' + ((opt_data.eventTypeModel.attributes.disable) ? ' show-eventtypes-link ' : ' hide-eventtypes-link ') + '" title="' + ((opt_data.eventTypeModel.attributes.disable) ? ' ' + soy.$$escapeHtml('Termine anzeigen') + ' ' : ' ' + soy.$$escapeHtml('Veranstaltung verbergen') + ' ') + '"></a><a href="#" class="aui-icon remove-eventtypes-link" title="' + soy.$$escapeHtml('Ereignis l\xf6schen') + '"></a>' : '<a href="#" class="aui-icon edit-eventtypes-link" title="' + soy.$$escapeHtml('Ereignis bearbeiten') + '"></a><a href="#" class="aui-icon hidden-link ' + ((opt_data.eventTypeModel.attributes.disable) ? ' show-eventtypes-link ' : ' hide-eventtypes-link ') + '" title="' + ((opt_data.eventTypeModel.attributes.disable) ? ' ' + soy.$$escapeHtml('Termine anzeigen') + ' ' : ' ' + soy.$$escapeHtml('Veranstaltung verbergen') + ' ') + '"></a>') + '</td>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.viewCustomEventType.soyTemplateName = 'Confluence.TeamCalendars.Templates.viewCustomEventType';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:eventtypes-edit', location = 'com/atlassian/confluence/extra/calendar3/components/customeventype/customeventtypes-edit-dialog/customeventtypes-edit-dialog.js' */
define("tc/eventtypes-edit-dialog",["jquery","underscore","tc-backbone","tc/dialogs","tc/templates","tc/customeventtype-view","tc/customeventtype-edit","tc/customeventtype-model","tc/customeventtype-list","tc/event-types"],function(e,i,h,g,k,d,a,f,c,j){var b=h.View.extend({editDialog:null,subCalendar:null,callbackHandler:null,mediator:null,events:{"click .add-custom-event-type-item span":"_showAddEventypeForm"},initialize:function(l){this.options=e.extend({},this.defaults,l);this.mediator=i.extend({},h.Events);this.subCalendar=this.options.subCalendar;this.callbackHandler=this.options.callbackHandler;this.collection=this._buildCustomEventTypeCollection();this.editDialog=this.options.editDialog;this.listenTo(this.collection,"reset add remove",this.render);this.mediator.on("Custom-Event-Type.save",i.bind(this._updateEventType,this,this.callbackHandler));this.mediator.on("close-edit-custom-event-dialog",i.bind(this._closeEditCustomEventTypeDialog,this));this.mediator.on("open-edit-custom-event-dialog",i.bind(this._openEditCustomEventTypeDialog,this));this.$el.html(k.editCalendarEventTypes({subCalendarId:this.subCalendar.id,eventTypes:this.collection}));this.editDialog.addPanel("Veranstaltungstypen",this.$el,"eventtypes-edit-dialog-panel")},render:function(){if(this.collection.customEventTypes().length===0){this.$el.find(".custom-event-type-items-instructional").removeClass("hidden")}else{this.$el.find(".custom-event-type-items-instructional").addClass("hidden")}this.$el.find(".event-type-item").remove();this._renderCustomeEventTypes(this.$el.find(".default-event-type-items"),this.collection.defaultEventTypes());this.collection.setSortField("created","DESC");this.collection.sort();this._renderCustomeEventTypes(this.$el.find(".custom-event-type-items"),this.collection.customEventTypes());this.editDialog.getCurrentPanel().onselect=function(){e("#edit-calendar-dialog").find(".button-panel-button.submit").removeClass("hidden")};return this.editDialog},selectCustomEvent:function(l){this.collection.select(l)},getDisableEventTypes:function(){var l=this.collection.chain().filter(function(m){return m.get("disable")===true}).map(function(m){return m.id}).value();return l},showAddEventypeForm:function(){e(".add-custom-event-type-item span").click()},_renderCustomeEventTypes:function(l,n){var m=this;e(n).each(function(o,q){var p=new d({model:q,mediator:m.mediator});l.after(p.render().el)})},_buildCustomEventTypeCollection:function(){var o=this;var t=o.subCalendar.disableEventTypes;var s=o.subCalendar.customEventTypes;var m=o.subCalendar.sanboxEventTypeReminders;var l=j.DefaultEventType;var n=new c();var q=function(u){for(var v in t){if(u===t[v]){return true}}return false};var r=function(u){for(var v in m){if(u===m[v].eventTypeId){return m[v].periodInMins}}};var p=new Array();e.each(l,function(u,w){if(!w.hiddenFromEventCreation){var v=new f({title:w.name,subCalendar:o.subCalendar,disable:q(w.id),id:w.id,icon:w.id,periodInMins:r(w.id)});p.push(v)}});if(s){e.each(s,function(u,w){var v=new f({title:w.title,subCalendar:o.subCalendar,disable:q(w.customEventTypeId),id:w.customEventTypeId,icon:w.icon,isCustomEvent:true,created:w.created,periodInMins:w.periodInMins});p.push(v)})}n.add(p);return n},_showAddEventypeForm:function(n){var o=e(n.target).closest(".add-custom-event-type-item");var l=new f({id:null,subCalendar:this.subCalendar,isCustomEvent:true});l.collection=this.collection;var m=new a({model:l,parentCustomEventTypeDiv:o,mediator:this.mediator});m.render();this.$el.parent().scrollTop(this.$el.find("#edit-custom-event-type-form form").position().top)},_updateEventType:function(m,l){if(l.get("isCustomEvent")===true){this._updateCustomEventType(m,l)}else{this._updateSanboxEventType(m,l)}},_updateCustomEventType:function(n,p){var o=this;var l=o._getCustomEventTypes(p);var m=this.$el.find("#save-custom-event-type");e(m).val("Wird gespeichert\u2026").attr("disabled","disabled").addClass("ui-state-disabled");e.ajax({cache:false,data:l,dataType:"json",error:function(q,s,r){n.showAjaxUpdateError(q,s,r)},success:function(r){var t=new f({subCalendar:o.subCalendar,isCustomEvent:true,title:r.title,icon:r.icon,id:r.customEventTypeId,created:r.created,periodInMins:r.periodInMins});var u={customEventTypeName:r.title};var s=true;var q=o.collection.where({id:r.customEventTypeId});if(q&&q.length>0){s=false}if(s){Confluence.TeamCalendars.fireEventForAnalytics("customeventtype.create",u)}else{Confluence.TeamCalendars.fireEventForAnalytics("customeventtype.update",u)}o.collection.add(t);o.$el.parent().scrollTop(o.$el.find(".add-custom-event-type-item").position().top)},type:"PUT",timeout:Confluence.TeamCalendars.ajaxTimeout,url:Confluence.TeamCalendars.getCalendarServiceBaseUrl("/eventtype/custom.json")})},_updateSanboxEventType:function(o,n){var p=this;var l=p._getSanboxEventTypes(n);var m=this.$el.find("#save-custom-event-type");e(m).val("Wird gespeichert\u2026").attr("disabled","disabled").addClass("ui-state-disabled");e.ajax({cache:false,data:l,dataType:"json",error:function(q,s,r){o.showAjaxUpdateError(q,s,r)},success:function(q){p.collection.add(n);p.$el.parent().scrollTop(p.$el.find(".add-custom-event-type-item").position().top)},type:"PUT",timeout:Confluence.TeamCalendars.ajaxTimeout,url:Confluence.TeamCalendars.getCalendarServiceBaseUrl("/eventtype/sandbox.json")})},_selectIconCustomEventType:function(l){l.preventDefault();e(l.target).siblings(".icon-teamcals").removeClass("selected");e(l.target).addClass("selected")},_getCustomEventTypes:function(l){return{title:l.get("title"),icon:l.get("icon"),subCalendarId:l.get("subCalendar").id,customEventTypeId:l.get("id"),created:l.get("created"),periodInMins:l.get("periodInMins")}},_getSanboxEventTypes:function(l){return{title:l.get("title"),icon:l.get("icon"),subCalendarId:l.get("subCalendar").id,eventTypeId:l.get("id"),created:l.get("created"),periodInMins:l.get("periodInMins")}},_closeEditCustomEventTypeDialog:function(){this.editDialog.hide()},_openEditCustomEventTypeDialog:function(){this.editDialog.show()}});return b});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:eventtypes-edit', location = 'com/atlassian/confluence/extra/calendar3/components/customeventype/customeventtypes-edit-dialog/customeventtypes-edit-dialog.soy' */
// This file was automatically generated from customeventtypes-edit-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.editCalendarEventTypes = function(opt_data, opt_ignored) {
  return '<form name="editSubCalendarEventTypesForm" class="sub-calendar-edit-event-types-form aui" method="POST" action="#"><input type="hidden" name="subCalendarId" value="' + soy.$$escapeHtml(opt_data.subCalendarId) + '"><div class="form-mode create"><table id="eventtypes-edit-table" class="tc-event-type-item aui"><colgroup><col span="1" class="aui-restfultable-order"><col span="1"><col span="1" class="aui-restfultable-operations"></colgroup><tbody class="ui-sortable"><tr class="default-event-type-items"><td class="event-types-title">' + soy.$$escapeHtml('Standardereignistypen') + '</td><td class="event-types-title">' + soy.$$escapeHtml('Erinnerung') + '</td><td class="event-types-title"></td></tr><tr class="custom-event-type-items"><td class="event-types-title">' + soy.$$escapeHtml('Benutzerdefinierte Ereignistypen') + '</td><td class="event-types-title">' + soy.$$escapeHtml('Erinnerung') + '</td><td class="event-types-title"></td></tr><tr class="custom-event-type-items-instructional"><td class="custom-event-types-instructional" colspan="3">' + soy.$$escapeHtml('Planen Sie jede Art von Veranstaltung, wie Ausbildung, Dienstpl\xe4ne und Kampagnen!') + '</td></tr><tr class="add-custom-event-type-item"><td><span class="custom-event-type-link" title="' + soy.$$escapeHtml('Neuen Event-Typ hinzuf\xfcgen') + '"><span class="aui-icon aui-icon-small aui-iconfont-add add-event-type-icon">Add custom event</span><span class="add-event-type-label">' + soy.$$escapeHtml('Neuen Event-Typ hinzuf\xfcgen') + '</span></span></td><td class="event-types-title"></td></tr></tbody></table></div></form>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.editCalendarEventTypes.soyTemplateName = 'Confluence.TeamCalendars.Templates.editCalendarEventTypes';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:mycalendar-tour-resources', location = 'com/atlassian/confluence/extra/calendar3/components/local-storage/local-storage.js' */
define("tc/localStorage",["jquery"],function(e){var c=function(){return{getItem:function(h){e.cookie(h)},setItem:function(i,j,h){e.cookie(i,j,h)}}}();var g="team-calendars",a=Confluence.storageManager?Confluence.storageManager(g):(localStorage?localStorage:c),b=AJS.Meta.get("remote-user"),d="confluence."+b+"."+g;var f=function(h){return Confluence.storageManager?h:d+"."+h};return{getItem:function(h){return a.getItem(f(h))},setItem:function(i,j,h){try{a.setItem(f(i),j,h)}catch(k){console.log(k)}}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:mycalendar-tour-resources', location = 'com/atlassian/confluence/extra/calendar3/components/local-storage/local-storage-compat.js' */
require(["tc/localStorage"],function(a){Confluence.TeamCalendars.LocalStorage=a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:mycalendar-tour-resources', location = 'com/atlassian/confluence/extra/calendar3/components/my-calendar-tour/my-calendar-tour.js' */
define("tc/myCalendarTour",["jquery","underscore","tc/localStorage"],function(n,C,s){var j="team.calendar";var d=j+".tour";var h=false;var p=false;var r=true;var e=d+".currentLegIndex";var m=d+".currentAttachedCalendar";var x=d+".done";var l="div[data-sub-calendar-id='#calendarID']";var t=function(F){var G=F.calendarID;if(!G){return null}return l.replace("#calendarID",G)};var b={selectMenuItem:function(G,I){var H=t(G);if(!H){return}var F=H+I;n(F).parent().addClass("active")},unSelectMenuItem:function(G,I){var H=t(G);if(!H){return}var F=H+I;n(F).parent().removeClass("active")}};var c={openMenu:function(F){var G=t(F);if(n(G+" .subcalendar-dropdown-menu.parent-subCalendar.active").size()>0){return}n(G+" .subcalendar-dropdown-menu .subcalendar-dropdown-menu-button .aui-button.aui-button-compact").click()},closeMenu:function(F){var G=t(F);if(n(G+" .subcalendar-dropdown-menu.parent-subCalendar.active").size()>0){r=false;n(".calendar-panel").click()}},hightLightEditMenuItem:function(F){return b.selectMenuItem(F," .parent-subCalendar a.subcalendar-edit")},unHightLightEditMenuItem:function(F){return b.unSelectMenuItem(F," .parent-subCalendar a.subcalendar-edit")},hightLightRestrictionMenuItem:function(F){return b.selectMenuItem(F," .parent-subCalendar a.subcalendar-restrict")},unHightLightRestrictionMenuItem:function(F){return b.unSelectMenuItem(F," .parent-subCalendar a.subcalendar-restrict")},hightLightShareMenuItem:function(F){return b.selectMenuItem(F," .parent-subCalendar a.subcalendar-share-or-embed")},unHightLightShareMenuItem:function(F){return b.unSelectMenuItem(F," .parent-subCalendar a.subcalendar-share-or-embed")}};var z=function(F){i(F);a(F);A(F)};var k=function(F){w(F);E(F);D()};var a=function(F){n(document).on("keydown",B)};var E=function(F){n(document).off("keydown",B)};var B=function(F){if(F.keyCode===27){p=true;u.stop()}};var i=function(G){var F=this;if(!h){n("body").on("click."+d,function(I){var H=n(I.target);if(!r){r=true;return}if(H.closest(".tourbus-leg-inner").length===0){p=true;G.stop()}});h=true}};var w=function(F){if(h){n("body").off("click."+d)}h=false};var A=function(F){n(window).bind("resize."+d,function(G){F.repositionLegs()})};var D=function(){n(window).unbind("resize."+d)};var v=function(F){var G=t({calendarID:F});if(n(G).is(G)){C.each(n("ol.tourbus-legs li.tc-tour-dynamic"),function(J){var I=n(J);var H=I.data("el");I.attr("data-el",G+" "+H)});return true}return false};var g=function(G,F){if(!G||!F){AJS.log("Team Calendar tour - could not execute action because invalid calendarID or actionsString");return}C.each(F.split(" "),function(I){var H=c[I];if(H){AJS.log("Team Calendar tour - leg actions - "+I);H({calendarID:G});AJS.log("Team Calendar tour - leg actions - "+I+" done")}})};var o=function(){AJS.log("Team Calendar tour - mark as DONE");s.setItem(x,"done")};var y=function(){return s.getItem(x)==="done"};var q=function(){if(AJS.dropDown.current&&AJS.dropDown.current.hide){AJS.log("Team Calendar tour - hidding dropdown menu");AJS.dropDown.current.hide()}};var f=undefined;var u=undefined;return{tcStorage:s,tourBus:u,start:function(G){if(n(".aui-message.error.license-invalid").size()>0){AJS.log("Team Calendar tour - is available when license is valid");return}if(y()){AJS.log("Team Calendar tour - is already done");return}if(n(".plugin-calendar-container.page").size()>0){AJS.log("Team Calendar tour - is only available on MyCalendar");return}if(!G){G=s.getItem(m)}else{s.setItem(e,0);s.setItem(m,G)}var F=s.getItem(e);if(!F){F=0}if(!v(G)){AJS.log("Team Calendar tour - could not attached to target elements");return}if(u){p=true;q();u.stop();u.destroy();p=false}f=n("#my-calendar-tour").tourbus({startAt:F,onDepart:function(H){AJS.log("Team Calendar tour - depart");z(H)},onStop:function(H){AJS.log("Team Calendar tour - stop");k(H);c.closeMenu({calendarID:G});if(!p){o();s.setItem(e,0);Confluence.TeamCalendars.fireEventForAnalytics("tour.finish",{stepNumber:-1});p=false}},onLegStart:function(L,N){AJS.log("Team Calendar tour - leg start");s.setItem(e,N.currentLegIndex);var M=L.$el.find(".order");var I=N.currentLegIndex;var H=M.html();H=H.replace("#legIndex",++I);H=H.replace("#totalLegs",N.totalLegs);M.html(H);AJS.log("Team Calendar tour - leg - executing before actions");var J=L.$original.data("before-leg-actions");g(G,J);AJS.log("Team Calendar tour - leg start - before actions executed");L.reposition();var K={stepNumber:N.currentLegIndex};Confluence.TeamCalendars.fireEventForAnalytics("tour.step",K)},onLegEnd:function(I,J){AJS.log("Team Calendar tour - leg end");AJS.log("Team Calendar tour - leg - executing after actions");var H=I.$original.data("after-leg-actions");g(G,H);AJS.log("Team Calendar tour - leg end - after actions executed")},leg:{zindex:2400,width:270,margin:15}});u=f.data("tourbus");if(!u.running){u.depart()}},stop:function(){if(u){o();u.stop()}},softStop:function(){if(u){o();u.hideLeg()}},destroy:function(){if(u){u.destroy()}},showLeg:function(F){if(u){u.showLeg(F)}},hideLeg:function(){if(u){u.hideLeg();var F={stepNumber:u.currentLegIndex}}},isShowCustomEventTypeFrom:function(G){if(y()){return false}var F=s.getItem(m);if(F===""||!F){return false}var H=s.getItem(e);if(H!=="0"){return false}if(F!==G){return false}return true},reposition:function(){if(u&&!y()){u.repositionLegs()}}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:mycalendar-tour-resources', location = 'com/atlassian/confluence/extra/calendar3/components/my-calendar-tour/my-calendar-tour.soy' */
// This file was automatically generated from my-calendar-tour.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.calendarTourContent = function(opt_data, opt_ignored) {
  return '<ol class="tourbus-legs" id="my-calendar-tour" ><li class="tc-tour-dynamic" data-el=".parent-subCalendar a.subcalendar-edit" data-orientation="left" data-align="left" data-arrow="50%" data-before-leg-actions="openMenu hightLightEditMenuItem" data-after-leg-actions="unHightLightEditMenuItem closeMenu"><span class="tourbus-title">' + soy.$$escapeHtml('KALENDER BEARBEITEN') + '</span><p>' + soy.$$escapeHtml('Passen Sie die verschiedenen Event-Typen, die Sie in Ihrem Kalender verwalten wollen, individuell an.') + '</p><button class="tourbus-btn tourbus-next aui-button">Next</button><button class="tourbus-btn tourbus-stop aui-button aui-button-link">Skip tour</button><span class="order">#legIndex/#totalLegs</span></li><li class="tc-tour-dynamic" data-el=".parent-subCalendar a.subcalendar-restrict" data-orientation="left" data-align="left" data-arrow="50%" data-before-leg-actions="openMenu hightLightRestrictionMenuItem" data-after-leg-actions="unHightLightRestrictionMenuItem closeMenu"><span class="tourbus-title">' + soy.$$escapeHtml('KALENDERZUGRIFF EINSCHR\xc4NKEN') + '</span><p>' + soy.$$escapeHtml('Wahlweise k\xf6nnen Sie festlegen, wer Events im Team-Kalender ansehen oder hinzuf\xfcgen kann.') + '</p><button class="tourbus-btn tourbus-next aui-button">Next</button><button class="tourbus-btn tourbus-stop aui-button aui-button-link">Skip tour</button><span class="order">#legIndex/#totalLegs</span></li><li class="tc-tour-dynamic" data-el=".parent-subCalendar a.subcalendar-share-or-embed" data-orientation="left" data-align="left" data-arrow="50%" data-before-leg-actions="openMenu hightLightShareMenuItem" data-after-leg-actions="unHightLightShareMenuItem  closeMenu"><span class="tourbus-title">' + soy.$$escapeHtml('MIT DEINEM TEAM TEILEN') + '</span><p>' + soy.$$escapeHtml('Kopieren Sie die URL des Kalenders und schicken Sie sie per E-Mail an Ihr Team. Sie k\xf6nnen sie auch auf einer Seite einf\xfcgen, um den Kalender dort einzubetten.') + '</p><button class="tourbus-btn tourbus-next aui-button">Next</button><button class="tourbus-btn tourbus-stop aui-button aui-button-link">Skip tour</button><span class="order">#legIndex/#totalLegs</span></li><li data-el="#add-event-link" data-orientation="left" data-arrow="17%" ><span class="tourbus-title">' + soy.$$escapeHtml('TERMIN HINZUF\xdcGEN') + '</span><p>' + soy.$$escapeHtml('Dieser Kalender ist jetzt einsatzbereit! Klicken Sie auf einen beliebigen Tag im Kalender, um ein Event hinzuzuf\xfcgen. Sie k\xf6nnen daf\xfcr auch den Button \x22Event hinzuf\xfcgen\x22 nehmen.') + '</p><button class="tourbus-btn tourbus-next aui-button">Next</button><button class="tourbus-btn tourbus-stop aui-button aui-button-link">Skip tour</button><span class="order">#legIndex/#totalLegs</span></li><li data-el="#subscribe-calendar-link" data-orientation="left" data-arrow="17%" ><span class="tourbus-title">' + soy.$$escapeHtml('ABONNIEREN') + '</span><p>' + soy.$$escapeHtml('Abonnieren Sie Kalender mithilfe Ihres Lieblingskalender-Clients.') + '</p><button class="tourbus-btn tourbus-stop aui-button">Done</button><span class="order">#legIndex/#totalLegs</span></li></ol>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.calendarTourContent.soyTemplateName = 'Confluence.TeamCalendars.Templates.calendarTourContent';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:mycalendar-tour-resources', location = 'com/atlassian/confluence/extra/calendar3/components/my-calendar-tour/my-calendar-tour-compat.js' */
require(["tc/myCalendarTour"],function(a){if(!Confluence.TeamCalendars){Confluence.TeamCalendars={}}Confluence.TeamCalendars.CalendarTour=function(){return a}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-share-embedded', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-share-dialog/calendar-share-dialog.js' */
define("tc/calendar-share-dialog",["jquery","underscore","tc-backbone","tc/templates","tc/calendar-util"],function(e,a,f,c,b){var d=f.View.extend({_calendarDiv:null,subCalendar:null,_calendarPlugin:null,editDialog:null,initialize:function(g){this._calendarDiv=g._calendarDiv;this.subCalendar=g.subCalendar;this._calendarPlugin=g._calendarPlugin;this.editDialog=g.editDialog;this.$el.html(c.shareSubCalendar({elementIdSuffix:b.getParameter(this._calendarDiv,"elementIdSuffix")}));this.editDialog.addPanel("Einbetten",this.$el,"calendar-share-dialog-panel")},render:function(){var j=this;var k=this._calendarPlugin.doesSubCalendarHaveRestrictions(j.subCalendar),h,g;h=j.editDialog.getCurrentPanel().body;g=e(".share-restrictions-link",h);var i="";if(j.subCalendar.spaceKey){i=AJS.format("{0}/display/{1}/calendar/{2}?calendarName={3}",b.getParameter(j._calendarDiv,"baseUrl"),encodeURIComponent(j.subCalendar.spaceKey),encodeURIComponent(j.subCalendar.subscriptionId||j.subCalendar.id),encodeURIComponent(j.subCalendar.name))}else{i=AJS.format("{0}/calendar/previewcalendar.action?subCalendarId={1}",b.getParameter(j._calendarDiv,"baseUrl"),encodeURIComponent(j.subCalendar.subscriptionId||j.subCalendar.id))}e(".share-address-field",this.editDialog.getCurrentPanel().body).val(i);if(k){if(j._calendarPlugin.isSubCalendarAdministratable(j._calendarDiv,j.subCalendar)){g.click(function(){j.editDialog.hide();j._calendarPlugin.getSubCalendarRestrictionsDialog(j._calendarDiv,j.subCalendar).show()})}else{g.addClass("hidden")}}else{e(".description",h).addClass("hidden");var l=e(".autoconvert",h);if(j._calendarPlugin.isAutoConvertSupported(j._calendarDiv)){l.removeClass("hidden")}else{l.addClass("hidden")}}this.editDialog.getCurrentPanel().onselect=function(){e("#edit-calendar-dialog").find(".button-panel-button.submit").addClass("hidden");e(".share-address-field",j.editDialog.getCurrentPanel().body).focus().select()};return j.editDialog}});return d});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-share-embedded', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-share-dialog/subcalendar-share-dialog.soy' */
// This file was automatically generated from subcalendar-share-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.shareSubCalendar = function(opt_data, opt_ignored) {
  return '<div><label for="share-address-' + soy.$$escapeHtml(opt_data.elementIdSuffix) + '" class="share-address-label">' + soy.$$escapeHtml('Kalender Link:') + '</label><input type="text" name="share-address" id="share-address-' + soy.$$escapeHtml(opt_data.elementIdSuffix) + '" class="share-address-field"><div class="description autoconvert hidden">' + soy.$$escapeHtml('Kopieren Sie den Link und f\xfcgen Sie ihn auf einer Confluence-Seite ein, um den Kalender in den dortigen Inhalt einzubetten.') + '</div><div class="description icon-lock">' + soy.$$filterNoAutoescape('F\xfcr diesen Kalender gelten Beschr\xe4nkungen. \x3ca class\x3d\x22share-restrictions-link\x22 href\x3d\x22#\x22\x3e\xdcberpr\xfcfen Einschr\xe4nkungen.\x3c/a\x3e') + '</div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.shareSubCalendar.soyTemplateName = 'Confluence.TeamCalendars.Templates.shareSubCalendar';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-ical-address', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-reset-url-dialog/calendar-reset-url-dialog.js' */
define("tc/calendar-reset-url-dialog",["jquery","underscore","tc-backbone","tc/templates","tc/calendar-util","tc/util"],function(e,b,g,d,c,f){var a=g.View.extend({resetUrlSubCalendarDialog:null,_calendarDiv:null,_calendarPlugin:null,_subCalendar:null,_subCalendars:null,initialize:function(h){this._calendarDiv=h.calendarDiv;this._calendarPlugin=h.calendarPlugin;this._subCalendar=h.subCalendar;this._subCalendars=h.subCalendars;this.resetUrlSubCalendarDialog=e("#calendar-reset-private-urls-dialog")},render:function(){var k=this;if(this.resetUrlSubCalendarDialog){this.resetUrlSubCalendarDialog.remove()}var h=new AJS.Dialog({width:512,height:250,id:"calendar-reset-private-urls-dialog"}),i=function(){h.hide();h.remove()};h.addHeader("Abonnement zur\u00fccksetzen");h.addPanel("",d.resetSubCalendarPrivateUrl(),"calendar-private-url-reset-dialog-panel");var j=h.getCurrentPanel().body;h.addButton("Zur\u00fccksetzen",function(){var l=k._calendarPlugin.setSubCalendarSpinnerIconVisible(true);var n=e(".reset-progress",j).addClass("reset-in-progress");var m=e("#calendar-reset-private-urls-dialog .subcalendar-private-url-reset-button").attr("disabled","disabled");e.ajax({cache:false,success:function(){n.removeClass("reset-in-progress").addClass("reset-done");e("#calendar-reset-private-urls-dialog .reset-cancel").text("Schlie\u00dfen");m.removeAttr("disabled")},type:"PUT",timeout:c.ajaxTimeout,url:k._calendarPlugin.getCalendarServiceBaseUrl(k._calendarDiv,"/subcalendar/privateurl/reset/"+encodeURIComponent(k._subCalendar.id)),error:function(o,q,p){m.removeAttr("disabled");c.showAjaxError(k._calendarDiv,o,q,p,k._calendarPlugin.ERROR_CLASS_RESET_PRIVATE_URLS)},complete:function(){if(l){l.resolve()}}})},"subcalendar-private-url-reset-button");h.addLink("Abbrechen",function(){i();return false},"reset-cancel");e(".calendar-title",j).text(k._subCalendar.name);e(".subscribe-to-calendar",j).click(function(){i();k._calendarPlugin.getCalendarSubscribeDialog(k._calendarDiv,k._subCalendars,k._subCalendar);return false});h.show();return h}});return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-edit', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-restriction-dialog/calendar-restrictons-dialog.js' */
define("tc/calendar-restriction-dialog",["jquery","underscore","tc-backbone","tc/templates","tc/calendar-util"],function(e,a,f,c,b){var d=f.View.extend({restrictionDialog:null,_calendarDiv:null,subCalendar:null,_calendarPlugin:null,calendarCache:null,editDialog:null,initialize:function(g){this._calendarDiv=g._calendarDiv;this.subCalendar=g.subCalendar;this._calendarPlugin=g._calendarPlugin;this.calendarCache=g.calendarCache;this.editDialog=g.editDialog;this.$el.html(c.restrictSubCalendar({elementIdSuffix:this._calendarPlugin.getParameter(this._calendarDiv,"elementIdSuffix"),pdlEnabled:b.isPDLEnabled()}));this.editDialog.addPanel("Beschr\u00e4nkungen",this.$el,"setup-calendar-panel")},render:function(){var h=this;this.editDialog.getCurrentPanel().onselect=function(){e("#edit-calendar-dialog").find(".button-panel-button.submit").removeClass("hidden")};var g=e("form",h.editDialog.getCurrentPanel().body);e("input[name='subCalendarId']",g).val(h.subCalendar.id||"");e(".field-group-permissions",g).each(function(){var i=e(this);e(".permissions-details",i).each(function(k){var l=e(this);var j=e(".autocomplete-user",i);j.bind("selected.autocomplete-user",function(n,m){h._addUsersToPermissionFieldGroup(i,{id:m.content.userKey||m.content.username,name:m.content.username,fullName:m.content.title,avatarUrl:m.content.thumbnailLink.href},true);j.val("")}).focus(function(){if(j.hasClass("with-hint")){j.removeClass("with-hint").val("")}}).blur(function(){if(!j.val()){j.addClass("with-hint").val("Geben Sie den Benutzernamen ein")}}).keydown(function(m){if(m.keyCode===13&&!e(".autocomplete .aui-dropdown .active").length){setTimeout(function(){var n=j.val();if(n){h._addGroupsToPermissionFieldGroup(i,n.split(","),true,true);j.val("")}else{h.submitRestrictionsDialog(h.editDialog)}},300);e(".autocomplete .aui-dropdown .no-results").trigger("click");return false}});e(".group-picker-trigger",l).click(function(){var m="Team_Calendars_group_picker_callback_"+h._calendarPlugin.getParameter(h._calendarDiv,"elementIdSuffix")+"_"+k;window[m]=function(n){h._addGroupsToPermissionFieldGroup(i,n.split(","),false,true)};window.open(h._calendarPlugin.getParameter(h._calendarDiv,"baseUrl")+"/spaces/opengrouppicker.action?key=ds&startIndex=0&actionName=dosearchgroups.action&onPopupSubmit="+encodeURIComponent(m),m,"dependent=1,height=512,width=384,resizable=1,status=0").focus();return false})})});e(".field-group-permissions",g).each(function(){var j=e(this);var k=e(".option-view-restrictions",j);var i=e(".option-edit-restrictions",j);h._addUsersToPermissionFieldGroup(j,h.subCalendar.usersPermittedToEdit||[]);h._addGroupsToPermissionFieldGroup(j,h.subCalendar.groupsPermittedToEdit||[]);i.removeAttr("checked");k.attr("checked","checked");h._addUsersToPermissionFieldGroup(j,h.subCalendar.usersPermittedToView||[]);h._addGroupsToPermissionFieldGroup(j,h.subCalendar.groupsPermittedToView||[])});return h.editDialog},submitRestrictionsDialog:function(k){var l=this;var o=e("form",k.getCurrentPanel().body);var j=function(p){return e.map(e(".permitted-entity",p),function(r){var q=e(r).data("entity");return e.isPlainObject(q)?q.id:null})};var i=function(p){return e.map(e(".permitted-entity",p),function(r){var q=e(r).data("entity");return typeof q==="string"?q:null})};var h={subCalendarId:e("input[name='subCalendarId']",o).val()};b.putCalendarContextParams(h);var m=e(".view-permissions",o);if(m.length){h.updateUsersPermittedToView=true;h.usersPermittedToView=j(m);if(!h.usersPermittedToView.length){delete h.usersPermittedToView}h.updateGroupsPermittedToView=true;h.groupsPermittedToView=i(m);if(!h.groupsPermittedToView.length){delete h.groupsPermittedToView}}var n=e(".edit-permissions",o);if(n.length){h.updateUsersPermittedToEdit=true;h.usersPermittedToEdit=j(n);if(!h.usersPermittedToEdit.length){delete h.usersPermittedToEdit}h.updateGroupsPermittedToEdit=true;h.groupsPermittedToEdit=i(n);if(!h.groupsPermittedToEdit.length){delete h.groupsPermittedToEdit}}if(l._calendarPlugin.getParameter(l._calendarDiv,"include")){h.include=l._calendarPlugin.getParameter(l._calendarDiv,"include")}if(!l._calendarPlugin.isProcessingSubCalendar(l._calendarDiv)){var g=l._calendarPlugin.setSubCalendarSpinnerIconVisible(true);e.ajax({cache:false,converters:{"text json":function(p){return p}},data:h,dataType:"json",dataFilter:function(p){var q=e.parseJSON(p);if(q.success){l._calendarPlugin.mergeSubCalendarObjectsToArray(q.payload)}return q},error:function(p,r,q){l._calendarPlugin.showAjaxError(l._calendarDiv,p,r,q,l._calendarPlugin.ERROR_CLASS_SUB_CALENDAR_UPDATE);l._calendarPlugin.setProcessingSubCalendar(l._calendarDiv,false)},success:function(p){l.calendarCache.removeCalendar(l.subCalendar.id);l._calendarPlugin.setGenericErrors(l._calendarDiv,null,l._calendarPlugin.ERROR_CLASS_SUB_CALENDAR_UPDATE);l._calendarPlugin.setSubCalendars(l._calendarDiv,p.payload);l._calendarPlugin.updateAvailableSubCalendarsInSubCalendarPanel(l._calendarDiv);l._calendarPlugin.setProcessingSubCalendar(l._calendarDiv,false);k.hide()},complete:function(){if(g){g.resolve()}},type:"PUT",timeout:l._calendarPlugin.ajaxTimeout,url:l._calendarPlugin.getCalendarServiceBaseUrl(l._calendarDiv,"/subcalendars/restrictions.json")})}return false},_showHideHint:function(h){var g=e(".permission-table",h);var i=e(".permitted-entities",g);if(e(".permitted-entity",i).length){h.addClass("has-restrictions");g.removeClass("hidden")}else{h.removeClass("has-restrictions");g.addClass("hidden")}},_getRestrictionGroup:function(g){return e("input[name='restriction-type']:checked",g).val()==="view"?e(".view-permissions",g):e(".edit-permissions",g)},_addUsersToPermissionFieldGroup:function(l,n,h){var g=this;var j=g._getRestrictionGroup(l);var k=e(".permitted-entities",j);var m=function(o){return e(".permitted-entity",k).filter(function(){var p=e(this).data("entity");return e.isPlainObject(p)&&p.id===o.id}).length};var i;if(e.isPlainObject(n)){i=[n]}else{if(e.isArray(n)){i=n}}if(e.isArray(i)){e.each(i,function(p,o){if(!m(o)){var q=e(document.createElement("tr")).addClass("permitted-entity").append(e(document.createElement("td")).append(e(document.createElement("img")).attr("src",o.avatarUrl)).append(e(document.createElement("span")).text(o.fullName).append(e(document.createElement("span")).addClass("user-name").text("("+o.name+")")))).append(e(document.createElement("td")).addClass("delete-permitted-entity").append(e(document.createElement("a")).addClass("remove").attr("href","#").attr("title","L\u00f6schen").text("L\u00f6schen").click(function(){e(this).closest("tr").remove();g._showHideHint(j);return false}))).data("entity",o);if(h){q.prependTo(k)}else{k.append(q)}}});e(".error",l).empty()}g._showHideHint(j)},_addGroupsToPermissionFieldGroup:function(j,s,o,k){var m=this;var h=m._getRestrictionGroup(j),n=e(".permitted-entities",h),p=function(t){return e(".permitted-entity",n).filter(function(){var u=e(this).data("entity");return(typeof u==="string")&&u===t}).length},r=function(t){if(Confluence.TeamCalendars.isPDLEnabled()){return e("<td/>").append(e("<span/>",{"class":"group",text:t}))}else{return e("<td/>").append(e("<img/>",{src:Confluence.getBaseUrl()+"/images/icons/group_16.gif"})).append(e("<span/>",{text:t}))}};if(s.length){var g=function(t){e.each(t,function(u,w){w=e.trim(w);if(w&&!p(w)){var v=e(document.createElement("tr")).addClass("permitted-entity").append(r(w)).append(e(document.createElement("td")).addClass("delete-permitted-entity").append(e(document.createElement("a")).addClass("remove").attr("href","#").attr("title","L\u00f6schen").text("L\u00f6schen").click(function(){e(this).closest("tr").remove();m._showHideHint(h);return false}))).data("entity",w);if(k){v.prependTo(n)}else{n.append(v)}}})};var i=e(".error",j);if(o){var l;var q;e.ajax({cache:false,data:{groupNames:e.map(s,function(t){return e.trim(t)})},dataType:"json",success:function(t){l=t;q=e.map(s,function(u){return e.inArray(e.trim(u),l)===-1?e.trim(u):null});g(l);i.empty();if(q.length){i.text(AJS.format("Ung\u00fcltige(r) Gruppenname(n) angegeben: {0}",q.join(", ")))}m._showHideHint(h)},type:"GET",timeout:m._calendarPlugin.ajaxTimeout,url:m._calendarPlugin.getCalendarServiceBaseUrl(m._calendarDiv,"/util/validate/group.json")})}else{i.empty();g(s);m._showHideHint(h)}}}});return d});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-edit', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-edit-dialog/calendar-edit-dialog.js' */
define("tc/calendar-edit-dialog",["jquery","underscore","tc-backbone","tc/calendar-util","tc/util","tc/myCalendarTour","tc/eventtypes-edit-dialog","tc/calendar-restriction-dialog","tc/calendar-share-dialog",],function(d,j,i,f,h,g,b,e,a){var c=i.View.extend({subCalendarType:null,editForm:null,subCalendarTypeObj:null,editDialog:null,subCalendar:null,callbackHandler:null,submitButton:null,eventTypesEditDialogView:null,shareCalendarDialogView:null,calendarIcalAddressDialog:null,_calendarDiv:null,_calendarPlugin:null,calendarCache:null,restrictionDialog:null,initialize:function(k){this.options=d.extend({},this.defaults,k);if(!this.options.subCalendar){AJS.debug("tc/eventtypes-edit-dialog: requires 'subCalendar' object")}if(!this.options.callbackHandler){AJS.debug("tc/eventtypes-edit-dialog: requires 'callbackHandler' object")}this.callbackHandler=this.options.callbackHandler;this.subCalendar=this.options.subCalendar;this.subCalendarType=(typeof this.subCalendar==="string")?this.subCalendar:this.subCalendar.type;this.subCalendarTypeObj=Confluence.TeamCalendars.subcalendar[this.subCalendarType];this._calendarDiv=k._calendarDiv;this._calendarPlugin=k._calendarPlugin;this.calendarCache=k.calendarCache},render:function(){this._editCalendarDialog();if(f.isInternalSubscriptionSubCalendar(this.subCalendar)&&f.isJiraSubCalendar(this.subCalendar)){return this.editDialog}this.eventTypesEditDialogView=new b({editDialog:this.editDialog,subCalendar:this.subCalendar,callbackHandler:this.callbackHandler});this.eventTypesEditDialogView.render();this.restrictionDialog=new e({editDialog:this.editDialog,_calendarPlugin:this._calendarPlugin,_calendarDiv:this._calendarDiv,subCalendar:this.subCalendar,calendarCache:this.calendarCache});this.restrictionDialog.render();this.shareCalendarDialogView=new a({editDialog:this.editDialog,subCalendar:this.subCalendar,_calendarPlugin:this._calendarPlugin,_calendarDiv:this._calendarDiv});this.shareCalendarDialogView.render();return this.editDialog},showRestrictionOption:function(){this.editDialog.gotoPanel(f.panelEditCalendar.RESTRICTION_PANEL)},showShareOption:function(){this.editDialog.gotoPanel(f.panelEditCalendar.SHARE_EMBEDDED_PANEL)},showSubscriptionOption:function(){this.editDialog.gotoPanel(f.panelEditCalendar.SUBSCRIBE_PANEL)},selectCustomEvent:function(k){this.editDialog.gotoPanel(f.panelEditCalendar.EVENT_TYPE_PANEL);this.eventTypesEditDialogView.selectCustomEvent(k)},showAddEventTypeForm:function(){this.editDialog.gotoPanel(f.panelEditCalendar.EVENT_TYPE_PANEL);this.eventTypesEditDialogView.showAddEventypeForm()},_editCalendarDialog:function(){var k=this;k.editDialog=new AJS.ConfluenceDialog({width:k.subCalendarTypeObj.dialogWidth||630,height:k.subCalendarTypeObj.dialogHeight||537,onSubmit:function(){k.editForm.submit();return false},onCancel:function(){k._callBackCancel(k.editDialog,k.callbackHandler);k.editDialog.remove()},id:"edit-calendar-dialog"});k.subCalendarTypeHandler=k.subCalendarTypeObj.getDialog(k.editDialog,d.isPlainObject(k.subCalendar)?k.subCalendar:null,k.callbackHandler);k.editDialog.popup.element.css("overflow","visible");k.editForm=k.subCalendarTypeHandler.initializeForm(j.bind(k._callBackCancel,k,k.editDialog,k.callbackHandler));k.submitButton=k.editDialog.popup.element.find(".submit");k.editForm.submit(function(){if(k.editDialog.getCurrentPanel()!==undefined){if(k.editDialog.getCurrentPanel().id===f.panelEditCalendar.GENERAL_PANEL){return k._submitCalendarEdit(k.callbackHandler,k.subCalendarTypeHandler,k.editDialog,k.editForm,k.subCalendarTypeObj)}else{if(k.editDialog.getCurrentPanel().id===f.panelEditCalendar.EVENT_TYPE_PANEL){var n=k.editDialog.getCurrentPanel().body;var m=d("form.sub-calendar-edit-event-types-form",n);var l=d("#edit-custom-event-type-form",m);if(d(l).length){d(l).find(".tooltip-warning").removeClass("hidden");d(n).scrollTop(d(l).find("form.form-add-custom").position().top);d(l).find(".custom-event-title input").focus();return false}return k._submitEventTypesEdit(m,k.editDialog,k.callbackHandler,k.subCalendarTypeHandler,k.submitButton)}else{if(k.editDialog.getCurrentPanel().id===f.panelEditCalendar.RESTRICTION_PANEL){return k._submitRestrictionEdit(k.editDialog)}}}}})},_submitCalendarEdit:function(m,n,q,s,v){if(m.isProcessingSubCalendar()){return false}m.setProcessingSubCalendar(true);var k=m.setSubCalendarSpinnerIconVisible(true);n.onSubmitStart();var o=n.getFormDataAsAjaxData();if(m.getIncludedCalendars()){o.include=m.getIncludedCalendars()}var p=o.subCalendarId;var x=o.spaceKey;var r=o.viewingSpaceKey;var u=this.subCalendar.spaceKey;var l=this._calendarPlugin;var w=this._calendarDiv;var t=this.subCalendar.childSubCalendars;d.ajax({cache:false,converters:{"text json":function(y){return y}},data:o,dataFilter:function(y){var z=d.parseJSON(y);if(z.success){f.mergeSubCalendarObjectsToArray(z.payload)}return z},dataType:"json",error:function(y,A,z){m.showAjaxUpdateError(y,A,z);n.onSubmitEnd();m.setProcessingSubCalendar(false)},success:function(y){m.setGenericUpdateError();if(y.success){f.setFieldErrors(s,null);if((x!==u)&&(r!=="")){p=y.modifiedSubCalendarId;d("input[name='subCalendarId']",s).val(p);l.removeSubCalendarEventSource(w,p);l.removeSubCalendarEventSource(w,t);m.setSubCalendars(p,y.payload)}else{if(p){m.setSubCalendars(p,y.payload);m.reloadSubCalendar(p)}else{p=y.modifiedSubCalendarId;d("input[name='subCalendarId']",s).val(p);m.setSubCalendars(p,y.payload)}}m.refreshCalendarInfo(y.payload);m.updateAvailableSubCalendarsInSubCalendarPanel();n.onSubmitEnd();q.remove()}else{f.setFieldErrors(s,y.fieldErrors);n.onSubmitEnd();if(!v.dynamicDialogHeight){h.showDialogInUpdatedHeight(q)}}m.setProcessingSubCalendar(false)},complete:function(){if(k){k.resolve()}},type:"PUT",timeout:f.ajaxTimeout,url:f.getCalendarServiceBaseUrl("/subcalendars.json")});return false},_submitEventTypesEdit:function(l,q,o,k,p){var n=this._getEventTypeData(l);var r=n.subCalendarId;var m=o.setSubCalendarSpinnerIconVisible(true);d(p).text("Updating...").attr("disabled","disabled").addClass("ui-state-disabled");d.ajax({cache:false,converters:{"text json":function(s){return s}},data:n,dataFilter:function(s){var t=d.parseJSON(s);if(t.success){f.mergeSubCalendarObjectsToArray(t.payload)}return t},dataType:"json",error:function(s,u,t){o.showAjaxUpdateError(s,u,t);k.onSubmitEnd();d(p).text("OK").removeAttr("disabled").removeClass("ui-state-disabled");AJS.trigger("remove-dialog-edit-event.teamcalendar")},success:function(s){if(s.success){if(r){o.setSubCalendar(r,s.payload);o.reloadSubCalendar(r)}o.updateAvailableSubCalendarsInSubCalendarPanel();k.onSubmitEnd();q.remove();AJS.trigger("show-dialog-edit-event.teamcalendar")}},complete:function(){if(m){m.resolve()}},type:"PUT",timeout:f.ajaxTimeout,url:f.getCalendarServiceBaseUrl("/eventtype/disable.json")});return false},_getEventTypeData:function(k){var l=this.eventTypesEditDialogView.getDisableEventTypes();return{subCalendarId:d("input[name='subCalendarId']",k).val(),disableEventTypes:l}},_callBackCancel:function(m,l){if(this.CalendarTour){this.CalendarTour.start()}var k=l.setSubCalendarSpinnerIconVisible(true);var n=d("input[name='subCalendarId']",m.getCurrentPanel().body).val();d.ajax({cache:false,converters:{"text json":function(o){return o}},data:{subCalendarId:n},dataFilter:function(o){var p=d.parseJSON(o);if(p.success){f.mergeSubCalendarObjectsToArray(p.payload)}return p},dataType:"json",error:function(o,q,p){l.showAjaxUpdateError(o,q,p)},success:function(o){if(o.success){if(n&&o.payload&&o.payload.length){d.each(o.payload,function(p,q){if(q.id===n){l.setSubCalendar(n,q);l.reloadSubCalendar(n)}})}l.updateAvailableSubCalendarsInSubCalendarPanel();AJS.trigger("show-dialog-edit-event.teamcalendar")}},complete:function(){k.resolve()},type:"GET",timeout:f.ajaxTimeout,url:f.getCalendarServiceBaseUrl("/subcalendars.json")})},_submitRestrictionEdit:function(k){this.restrictionDialog.submitRestrictionsDialog(k);return false}});return c});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-edit', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-edit-dialog/calendar-edit-dialog-compat.js' */
require(["tc/calendar-edit-dialog"],function(a){if(!Confluence.TeamCalendars.Dialogs){Confluence.TeamCalendars.Dialogs={}}Confluence.TeamCalendars.Dialogs.getSubCalendarEditDialog=function(d,c,f,e,b){return new a({subCalendar:d,callbackHandler:c,_calendarDiv:f,_calendarPlugin:e,calendarCache:b})}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-caldav-subscribe-dialog', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-caldav-subscribe-dialog/calendar-caldav-subscribe-service.js' */
define("tc/calendar-caldav-subscribe-service",["jquery","tc/rrule","tc-backbone","tc/calendar-util"],function(c,d,e,a){var b=function(f,g){this.calendarPlugin=f;this.calendarDiv=g;return{calendarPlugin:this.calendarPlugin,calendarDiv:this.calendarDiv,getPrivateUrlProvider:function(h){return c.ajax({cache:false,type:"GET",timeout:a.ajaxTimeout,url:this.calendarPlugin.getCalendarServiceBaseUrl(this.calendarDiv,"/subcalendar/privateurl/"+encodeURIComponent(h))})},getSubCalendarsInUserView:function(){return c.ajax({cache:false,type:"GET",timeout:a.ajaxTimeout,url:this.calendarPlugin.getCalendarServiceBaseUrl(this.calendarDiv,"/subcalendars/user/view")})},updateSubCalendarInUserView:function(h){return c.ajax({cache:false,type:"PUT",dataType:"json",contentType:"application/json",data:JSON.stringify(h),timeout:a.ajaxTimeout,url:this.calendarPlugin.getCalendarServiceBaseUrl(this.calendarDiv,"/subcalendars/user/view")})}}};return b});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-caldav-subscribe-dialog', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-caldav-subscribe-dialog/calendar-caldav-subscribe-model.js' */
define("tc/calendar-caldav-subscribe-model",["jquery","tc/rrule","tc-backbone","tc/calendar-util","underscore"],function(c,e,f,b,a){var d=f.Model.extend({calDavEndpoint:"/plugins/servlet/team-calendars/caldav/",mapper:{},defaults:{subCalendars:[],baserUrl:"",selectedSubCalId:null,selectedSubCalName:null,selectedApp:null,isPrivateUrlsEnabled:false,privateUrlProvider:null,subCalendarIdInUserView:null,},initialize:function(m){this.baseUrl=m.baseUrl;this.subCalendars=m.subCalendars?m.subCalendars:[];this.privateUrlProvider=m.privateUrlProvider;this.set({isPrivateUrlsEnabled:m.isPrivateUrlsEnabled,selectedSubCalId:m.selectedSubCalId,});var k=this;var h=function(s){var q=c.Deferred();var p=q.promise();var r=k.baseUrl.split("/");var o=r[0]+"//"+r[2];var n=o.charAt(o.length)==="/"?o:o+"/";q.resolve(n);return p};var j=function(p){var o=c.Deferred();var n=o.promise();o.resolve(k.baseUrl+k.calDavEndpoint+encodeURIComponent(p));return n};var i=function(n){if(this.attributes.isPrivateUrlsEnabled==="true"){return g(n)}return l(n)};var l=function(p){var o=c.Deferred();var n=o.promise();o.resolve(k.baseUrl+"/rest/calendar-services/1.0/calendar/export/subcalendar/"+encodeURIComponent(p)+".ics?os_authType=basic&isSubscribe=true");return n};var g=function(o){var n=k.privateUrlProvider(o);return n};this.mapper={"OUTLOOK-WIN":h,"OUTLOOK-BRO":i,"APPLECAL-MAC":h,"APPLECAL-IOS":h,"GCAL-BRO":i,"GCAL-AND":h,THUNDERBIRD:j,CALDAV:h,ICAL:i}},getEndpoint:function(i){var g=this.attributes;console.debug("Get endpoint for: "+g.selectedApp);var h=this.mapper[g.selectedApp]?a.bind(this.mapper[g.selectedApp],this,i)():"Could not detected endpoint";return h}});return d});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-caldav-subscribe-dialog', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-caldav-subscribe-dialog/calendar-caldav-subscribe-dialog.js' */
define("tc/subcalendar-subscribe-dialog",["jquery","ajs","tc-backbone","tc/templates","tc/calendar-reset-url-dialog","tc/calendar-caldav-subscribe-service"],function(d,g,i,f,b,h){var j=f.subCalendarSubscribeDialog;var c=f.addToMyCalendarsButton;var a=f.addToMyCalendarsButtonStatus;var e=i.View.extend({template:j,events:{"change select#cal-select":"updateModel","change select#cal-app-select":"updateModel","click #subscribe-url-copy":"handleCopyButton","click #subscribe-url-reset":"handleResetButton","click #add-to-mycalendars":"handleAddToMyCalendars","click #remove-form-mycalendars":"handleRemoveToMyCalendars","click #reload-action":"handleReloadAction"},setJQueryEl:function(k){this.undelegateEvents();this.$el=k;this.delegateEvents()},initialize:function(l){this.setJQueryEl(d(this.template({subCalendars:this.model.subCalendars})));this.calendarPlugin=l.calendarPlugin;this.calendarDiv=l.calendarDiv;if(g.versionDetails.major>=9){d(this.$el[0]).find(".aui-dialog2-header-close").replaceWith('<button class="aui-close-button" type="button" aria-label="close"></button>')}this.dialog=g.dialog2(this.$el);this.$calendarSelection=this.$el.find("#cal-select");this.$calendarAppSelection=this.$el.find("#cal-app-select");this.service=l.calDavSubscribeService?l.calDavSubscribeService:new h(this.calendarPlugin,this.calendarDiv);this.previousAction=null;var k=this.model.attributes;if(k.selectedSubCalId){console.debug("Going to select sub calendar: "+k.selectedSubCalId);this.$calendarSelection.val(k.selectedSubCalId).trigger("change")}},_showSpinner:function(){var k=this.$el.find(".add-to-mycalendars-panel .spinner");var l=this.$el.find(".add-to-mycalendars-panel-container");k.removeClass("hidden");l.addClass("hidden")},_hideSpinner:function(){var k=this.$el.find(".add-to-mycalendars-panel .spinner");var l=this.$el.find(".add-to-mycalendars-panel-container");l.removeClass("hidden");k.addClass("hidden")},_setSubCalendarIdInUserView:function(l){var k=this.model.attributes;k.subCalendarIdInUserView=l;k.allowAddSubCalendarIntoUserView=l.indexOf(k.selectedSubCalId)<0},handleReloadAction:function(k){k.preventDefault();if(this.previousAction){this.previousAction(k)}},handleRemoveToMyCalendars:function(m){console.info("Removing calendar from user view");m.preventDefault();var l=this;var k=this.model.attributes;var n=this.$el.find(".add-to-mycalendars-panel-container");this.previousAction=this.handleRemoveToMyCalendars;console.log("Old calendars in view:"+k.subCalendarIdInUserViewOld);this._showSpinner();this.service.updateSubCalendarInUserView(k.subCalendarIdInUserViewOld).then(function(o){l._setSubCalendarIdInUserView(o);n.html(c());l._hideSpinner()},function(o){n.html(a({isError:true,message:g.format("Diese \u00c4nderung konnte nicht r\u00fcckg\u00e4ngig gemacht werden. Entfernen Sie den Kalender unter \u003ca href=\u0022{0}\u0022\u003eMeine Kalender\u003c/a\u003e.",g.contextPath()+"/calendar/mycalendar.action")}));l._hideSpinner()})},handleAddToMyCalendars:function(m){console.info("Adding calendar into user view");m.preventDefault();var l=this;var k=this.model.attributes;var n=this.$el.find(".add-to-mycalendars-panel-container");this.previousAction=this.handleAddToMyCalendars;console.log("Old calendars in view:"+k.subCalendarIdInUserView);l._showSpinner();k.subCalendarIdInUserViewOld=k.subCalendarIdInUserView.slice();k.subCalendarIdInUserView.push(k.selectedSubCalId);this.service.updateSubCalendarInUserView(k.subCalendarIdInUserView).then(function(o){l._setSubCalendarIdInUserView(o);n.html(a({isError:false,message:g.format("\u201e{0}\u201d wurde zu Ihren Kalendern hinzugef\u00fcgt. \u003ca id=\u0022remove-form-mycalendars\u0022 href=\u0022#\u0022\u003eR\u00fcckg\u00e4ngig machen\u003c/href\u003e",k.selectedSubCalName)}));l._hideSpinner()},function(o){n.html(a({isError:true,message:"Ihr Kalender wurde nicht gefunden. \u003ca id=\u0022reload-action\u0022 href=\u0022#\u0022\u003eErneut versuchen\u003c/a\u003e \u003cbr/\u003eWenn dieses Problem mehrfach auftritt, wenden Sie sich an Ihren Administrator."}));l._hideSpinner()})},handleCopyButton:function(){var k=this.$el.find(".subscribe-dialog-url-txt input.long-field");var l=this.$el.find(".subscribe-dialog-url .copy-message");k.select();document.execCommand("Copy");console.debug("Copy subscription url into clipboard");l.removeClass("hidden");setTimeout(function(){l.addClass("hidden")},5000);return false},handleResetButton:function(){var k=this.model.attributes;this.dialog.hide();var l=new b({calendarPlugin:this.calendarPlugin,calendarDiv:this.calendarDiv,subCalendar:this.calendarPlugin.getSubCalendar(this.calendarDiv,k.selectedSubCalId),subCalendars:this.model.subCalendars});l.render();return false},updateModel:function(){var k=this.model.attributes;console.debug("Updating model value");this.model.set({selectedSubCalId:this.$calendarSelection.val()});this.model.set({selectedSubCalName:this.$calendarSelection.find("option:selected").text()});this.model.set({selectedApp:this.$calendarAppSelection.val()});var l=this;this.service.getSubCalendarsInUserView().then(function(n,o,m){if(m.status===200){console.info("Load 'subCalendarIdInUserView' successfully");l.model.attributes.subCalendarIdInUserView=n;l.model.attributes.allowAddSubCalendarIntoUserView=n.indexOf(k.selectedSubCalId)<0}else{console.error("Could not load 'subCalendarIdInUserView' from server");l.model.attributes.subCalendarIdInUserView=[];l.model.attributes.allowAddSubCalendarIntoUserView=false}l.render()})},render:function(){var l=this.model.attributes;var p=this.$el.find(".subscribe-dialog-output");var k=this.$el.find(".subscribe-dialog-help");if(d.fn.auiSelect2){this.$calendarSelection.auiSelect2({minimumResultsForSearch:-1});this.$calendarAppSelection.auiSelect2({minimumResultsForSearch:-1})}p.removeClass("hidden");var n=this.calendarPlugin.setSubCalendarSpinnerIconVisible(true);var o=this;switch(l.selectedApp){case"OUTLOOK-WIN":k.html(f.outlookHelpWin({isInUserView:!l.allowAddSubCalendarIntoUserView,selectedCalendarName:l.selectedSubCalName}));var m=k.find(".subscribe-dialog-url");m.html(f.calDAVLinkOutput());break;case"OUTLOOK-BRO":k.html(f.outlookHelpBro());var m=k.find(".subscribe-dialog-url");m.html(f.calDAVLinkOutput());break;case"APPLECAL-MAC":k.html(f.appleCalHelpMac({isInUserView:!l.allowAddSubCalendarIntoUserView,selectedCalendarName:l.selectedSubCalName}));var m=k.find(".subscribe-dialog-url");m.html(f.calDAVLinkOutput());break;case"APPLECAL-IOS":k.html(f.appleCalHelpIos({isInUserView:!l.allowAddSubCalendarIntoUserView,selectedCalendarName:l.selectedSubCalName}));var m=k.find(".subscribe-dialog-url");m.html(f.calDAVLinkOutput());break;case"GCAL-BRO":k.html(f.gcalHelpBro());var m=k.find(".subscribe-dialog-url");m.html(f.calDAVLinkOutput());break;case"GCAL-AND":k.html(f.gcalHelpAndroid({isInUserView:!l.allowAddSubCalendarIntoUserView,selectedCalendarName:l.selectedSubCalName}));var m=k.find(".subscribe-dialog-url");m.html(f.calDAVLinkOutput());break;case"THUNDERBIRD":k.html(f.thunderbirdHelp());var m=k.find(".subscribe-dialog-url");m.html(f.calDAVLinkOutput());break;case"CALDAV":k.html(f.otherCalDAVHelp({isInUserView:!l.allowAddSubCalendarIntoUserView,selectedCalendarName:l.selectedSubCalName}));var m=k.find(".subscribe-dialog-url");m.html(f.calDAVLinkOutput());break;case"ICAL":k.html(f.otherIcalHelp());var m=k.find(".subscribe-dialog-url");if(l.isPrivateUrlsEnabled==="true"){m.html(f.icalLinkOutput())}else{m.html(f.calDAVLinkOutput())}break;case"UNKNOWN":k.html(f.otherUnknown());break;default:p.addClass("hidden")}var q=this.$el.find(".subscribe-dialog-url-txt input.long-field");d.when(this.model.getEndpoint(l.selectedSubCalId)).then(function(r){console.debug("Set subscription url: "+r);q.val(r).focus().select();if(n){n.resolve()}},function(r,t,s){console.debug("set subscription error:");o.calendarPlugin.showAjaxError(o.calendarDiv,r,t,s,o.calendarPlugin.ERROR_CLASS_PRIVATE_URL);if(n){n.resolve()}});this.dialog.show()}});return e});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-caldav-subscribe-dialog', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-caldav-subscribe-dialog/calendar-caldav-subscribe-dialog.soy' */
// This file was automatically generated from calendar-caldav-subscribe-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.subCalendarSubscribeDialog = function(opt_data, opt_ignored) {
  var output = '<section id="calendar-subscribe-dialog" class="aui-dialog2 aui-dialog2-medium aui-layer" data-aui-remove-on-hide="true" role="dialog" aria-hidden="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Kalender abonnieren') + '</h2><a class="aui-dialog2-header-close"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">Close</span></a></header><div class="aui-dialog2-content"><div class="subscribe-dialog-description">' + soy.$$escapeHtml('Zeigen Sie Ihren Kalender an und \xe4ndern Sie Ereignisse in Ihrer Lieblingskalender-App.') + '</div><form class="aui"><fieldset><div class="field-group"><label for="d-fname">' + soy.$$escapeHtml('Kalender') + '</label><select name="cal-select" id="cal-select" class="select">';
  var subCalList10 = opt_data.subCalendars;
  var subCalListLen10 = subCalList10.length;
  for (var subCalIndex10 = 0; subCalIndex10 < subCalListLen10; subCalIndex10++) {
    var subCalData10 = subCalList10[subCalIndex10];
    output += (subCalData10.dummy) ? '<option value="' + soy.$$escapeHtml(subCalData10.childSubCalendars[0].id) + '">' + soy.$$escapeHtml(subCalData10.name) + '</option>' : '<option value="' + soy.$$escapeHtml(subCalData10.id) + '">' + soy.$$escapeHtml(subCalData10.name) + '</option>';
  }
  output += '</select></div><div class="field-group"><label for="d-fname">' + soy.$$escapeHtml('Kalender-App') + '</label><select name="cal-app-select" id="cal-app-select" class="select"><option value="NONE">' + soy.$$escapeHtml('App w\xe4hlen') + '</option><optgroup label="' + soy.$$escapeHtml('App') + '" ><option value="OUTLOOK-WIN">' + soy.$$escapeHtml('Microsoft Outlook (Windows-Desktop)') + '</option><option value="OUTLOOK-BRO">' + soy.$$escapeHtml('Microsoft Outlook (Browser)') + '</option><option value="APPLECAL-MAC">' + soy.$$escapeHtml('Apple-Kalender (MacOS)') + '</option><option value="APPLECAL-IOS">' + soy.$$escapeHtml('Apple-Kalender (iOS)') + '</option><option value="GCAL-BRO">' + soy.$$escapeHtml('Google Kalender (Browser)') + '</option><option value="GCAL-AND">' + soy.$$escapeHtml('Google Kalender (Android)') + '</option><option value="THUNDERBIRD">' + soy.$$escapeHtml('Thunderbird') + '</option><option value="UNKNOWN">' + soy.$$escapeHtml('Meine App fehlt') + '</option></optgroup><optgroup label="' + soy.$$escapeHtml('Sonstiges') + '" ><option value="CALDAV">' + soy.$$escapeHtml('CalDAV') + '</option><option value="ICAL">' + soy.$$escapeHtml('iCal') + '</option><optgroup></select></div></fieldset></form><div class="subscribe-dialog-output"><div class="subscribe-dialog-help"></div></div></div></section>';
  return output;
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.subCalendarSubscribeDialog.soyTemplateName = 'Confluence.TeamCalendars.Templates.subCalendarSubscribeDialog';
}


Confluence.TeamCalendars.Templates.calDAVLinkOutput = function(opt_data, opt_ignored) {
  return '<div class="subscribe-dialog-url-txt calDAVLinkOutput"><form class="aui"><input class="text long-field" id="d-lname" name="d-lname" type="text"><button id="subscribe-url-copy" class="aui-button">' + soy.$$escapeHtml('Kopieren') + '</button></form></div><div class="copy-message hidden"><div class="subscribe-url-copy-icon aui-icon"></div>' + soy.$$escapeHtml('Link wurde kopiert. Jeder, der diesen Link erh\xe4lt, kann diesen Kalender anzeigen.') + '</div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.calDAVLinkOutput.soyTemplateName = 'Confluence.TeamCalendars.Templates.calDAVLinkOutput';
}


Confluence.TeamCalendars.Templates.icalLinkOutput = function(opt_data, opt_ignored) {
  return '<div class="subscribe-dialog-url-txt icalLinkOutput"><form class="aui"><input class="text long-field with-reset" id="d-lname" name="d-lname" title="last name" type="text"><button id="subscribe-url-copy" class="aui-button">' + soy.$$escapeHtml('Kopieren') + '</button><button id="subscribe-url-reset" class="aui-button aui-button-link">' + soy.$$escapeHtml('Zur\xfccksetzungslink') + '</button></form></div><div class="copy-message hidden"><div class="subscribe-url-copy-icon aui-icon"></div>' + soy.$$escapeHtml('Link wurde kopiert. Jeder, der diesen Link erh\xe4lt, kann diesen Kalender anzeigen.') + '</div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.icalLinkOutput.soyTemplateName = 'Confluence.TeamCalendars.Templates.icalLinkOutput';
}


Confluence.TeamCalendars.Templates.thunderbirdHelp = function(opt_data, opt_ignored) {
  return '<div class="subscribe-dialog-help-step thunderbirdCal"><div class="list list-margin"><div class="num-list"><h7>1.</h7></div><div class="num-detail"><h7>' + soy.$$escapeHtml('Kopieren Sie die Team Calendars-URL.') + '</h7></div></div><div class="list"><div class="num-list"></div><div class="num-detail"><div class="subscribe-dialog-url"></div></div></div><div class="list list-margin"><div class="num-list"><h7>2.</h7></div><div class="num-detail"><h7>' + soy.$$escapeHtml('\xd6ffnen Sie Ihre Kalender-App, um Ihren Kalender einzurichten.') + '</h7></div></div><div class="list"><div class="num-list"></div><div class="num-detail">' + soy.$$filterNoAutoescape(AJS.format('Need help? Check out our \x3ca href\x3d\x22{0}\x22 target\x3d\x22_blank\x22\x3estep-by-step-guide\x3c/a\x3e.',"https://docs.atlassian.com/confluence/docs-711/Subscribe+to+Team+Calendars+from+Thunderbird")) + '</div></div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.thunderbirdHelp.soyTemplateName = 'Confluence.TeamCalendars.Templates.thunderbirdHelp';
}


Confluence.TeamCalendars.Templates.appleCalHelpMac = function(opt_data, opt_ignored) {
  var output = '';
  var numHeading__soy78 = opt_data.isInUserView ? 1 : 2;
  output += '<div class="subscribe-dialog-help-step appleCal">' + Confluence.TeamCalendars.Templates.additionalStepForDiscovery(opt_data) + '<div class="list list-margin"><div class="num-list"><h7>' + soy.$$escapeHtml(numHeading__soy78) + '.</h7></div><div class="num-detail"><h7>' + soy.$$escapeHtml('Kopieren Sie die Team Calendars-URL.') + '</h7></div></div><div class="list"><div class="num-list"></div><div class="num-detail"><div class="subscribe-dialog-url"></div></div></div><div class="list list-margin"><div class="num-list"><h7>' + soy.$$escapeHtml(numHeading__soy78 + 1) + '.</h7></div><div class="num-detail"><h7>' + soy.$$escapeHtml('\xd6ffnen Sie Ihre Kalender-App, um Ihren Kalender einzurichten.') + '</h7></div></div><div class="list"><div class="num-list"></div><div class="num-detail">' + soy.$$filterNoAutoescape(AJS.format('Need help? Check out our \x3ca href\x3d\x22{0}\x22 target\x3d\x22_blank\x22\x3estep-by-step-guide\x3c/a\x3e.',"https://docs.atlassian.com/confluence/docs-711/Subscribe+to+Team+Calendars+from+Apple+Calendar")) + '</div></div></div>';
  return output;
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.appleCalHelpMac.soyTemplateName = 'Confluence.TeamCalendars.Templates.appleCalHelpMac';
}


Confluence.TeamCalendars.Templates.appleCalHelpIos = function(opt_data, opt_ignored) {
  var output = '';
  var numHeading__soy96 = opt_data.isInUserView ? 1 : 2;
  output += '<div class="subscribe-dialog-help-step appleCal">' + Confluence.TeamCalendars.Templates.additionalStepForDiscovery(opt_data) + '<div class="list list-margin"><div class="num-list"><h7>' + soy.$$escapeHtml(numHeading__soy96) + '.</h7></div><div class="num-detail"><h7>' + soy.$$escapeHtml('Kopieren Sie die Team Calendars-URL.') + '</h7></div></div><div class="list"><div class="num-list"></div><div class="num-detail"><div class="subscribe-dialog-url"></div></div></div><div class="list list-margin"><div class="num-list"><h7>' + soy.$$escapeHtml(numHeading__soy96 + 1) + '.</h7></div><div class="num-detail"><h7>' + soy.$$escapeHtml('\xd6ffnen Sie Ihre Kalender-App, um Ihren Kalender einzurichten.') + '</h7></div></div><div class="list"><div class="num-list"></div><div class="num-detail">' + soy.$$filterNoAutoescape(AJS.format('Need help? Check out our \x3ca href\x3d\x22{0}\x22 target\x3d\x22_blank\x22\x3estep-by-step-guide\x3c/a\x3e.',"https://docs.atlassian.com/confluence/docs-711/Subscribe+to+Team+Calendars+from+Apple+iOS+Calendar")) + '</div></div></div>';
  return output;
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.appleCalHelpIos.soyTemplateName = 'Confluence.TeamCalendars.Templates.appleCalHelpIos';
}


Confluence.TeamCalendars.Templates.addToMyCalendarsButton = function(opt_data, opt_ignored) {
  return '<form class="aui" ><button id="add-to-mycalendars" class="aui-button">' + soy.$$escapeHtml('Zu \u201eMeine Kalender\u201d hinzuf\xfcgen') + '</button></form>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.addToMyCalendarsButton.soyTemplateName = 'Confluence.TeamCalendars.Templates.addToMyCalendarsButton';
}


Confluence.TeamCalendars.Templates.addToMyCalendarsButtonStatus = function(opt_data, opt_ignored) {
  return ((opt_data.isError) ? '<div class="subscribe-error-icon aui-icon aui-icon-small aui-iconfont-error"></div>' : '<div class="subscribe-success-icon aui-icon"></div>') + '<div class="subscribe-error-message">' + soy.$$filterNoAutoescape(opt_data.message) + '</div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.addToMyCalendarsButtonStatus.soyTemplateName = 'Confluence.TeamCalendars.Templates.addToMyCalendarsButtonStatus';
}


Confluence.TeamCalendars.Templates.additionalStepForDiscovery = function(opt_data, opt_ignored) {
  return '' + ((! opt_data.isInUserView) ? '<div class="list list-margin"><div class="num-list"><h7>1.</h7></div><div class="num-detail"><h7>' + soy.$$escapeHtml(AJS.format('F\xfcgen Sie \u201e{0}\u201d zu Ihren Kalendern hinzu.',opt_data.selectedCalendarName)) + '</h7></div></div><div class="list"><div class="num-list"></div><div class="num-detail add-to-mycalendars-panel"><div class="spinner aui-icon aui-icon-wait hidden"></div><div class="add-to-mycalendars-panel-status-message"></div><div class="add-to-mycalendars-panel-container" >' + Confluence.TeamCalendars.Templates.addToMyCalendarsButton(null) + '</div></div></div>' : '');
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.additionalStepForDiscovery.soyTemplateName = 'Confluence.TeamCalendars.Templates.additionalStepForDiscovery';
}


Confluence.TeamCalendars.Templates.outlookHelpWin = function(opt_data, opt_ignored) {
  var output = '';
  var numHeading__soy136 = opt_data.isInUserView ? 1 : 2;
  output += '<div class="subscribe-dialog-help-step outlookCal">' + Confluence.TeamCalendars.Templates.additionalStepForDiscovery(opt_data) + '<div class="list list-margin"><div class="num-list"><h7>' + soy.$$escapeHtml(numHeading__soy136) + '.</h7></div><div class="num-detail"><h7>' + soy.$$escapeHtml('Kopieren Sie die Team Calendars-URL.') + '</h7></div></div><div class="list"><div class="num-list"></div><div class="num-detail"><div class="subscribe-dialog-url"></div></div></div><div class="list list-margin"><div class="num-list"><h7>' + soy.$$escapeHtml(numHeading__soy136 + 1) + '.</h7></div><div class="num-detail"><h7>' + soy.$$escapeHtml('\xd6ffnen Sie Ihre Kalender-App, um Ihren Kalender einzurichten.') + '</h7></div></div><div class="list"><div class="num-list"></div><div class="num-detail">' + soy.$$filterNoAutoescape(AJS.format('Need help? Check out our \x3ca href\x3d\x22{0}\x22 target\x3d\x22_blank\x22\x3estep-by-step-guide\x3c/a\x3e.',"https://docs.atlassian.com/confluence/docs-711/Subscribe+to+Team+Calendars+from+Microsoft+Outlook")) + '</div></div></div>';
  return output;
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.outlookHelpWin.soyTemplateName = 'Confluence.TeamCalendars.Templates.outlookHelpWin';
}


Confluence.TeamCalendars.Templates.outlookHelpBro = function(opt_data, opt_ignored) {
  return '<div class="subscribe-dialog-help-step outlookCal"><div class="list list-margin"><div class="num-list"><h7>1.</h7></div><div class="num-detail"><h7>' + soy.$$escapeHtml('Kopieren Sie die Team Calendars-URL.') + '</h7></div></div><div class="list"><div class="num-list"></div><div class="num-detail"><div class="subscribe-dialog-url"></div></div></div><div class="list list-margin"><div class="num-list"><h7>2.</h7></div><div class="num-detail"><h7>' + soy.$$escapeHtml('\xd6ffnen Sie Ihre Kalender-App, um Ihren Kalender einzurichten.') + '</h7></div></div><div class="list"><div class="num-list"></div><div class="num-detail">' + soy.$$filterNoAutoescape(AJS.format('Need help? Check out our \x3ca href\x3d\x22{0}\x22 target\x3d\x22_blank\x22\x3estep-by-step-guide\x3c/a\x3e.',"https://docs.atlassian.com/confluence/docs-711/Subscribe+to+Team+Calendars+from+Outlook+on+the+web")) + '</div></div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.outlookHelpBro.soyTemplateName = 'Confluence.TeamCalendars.Templates.outlookHelpBro';
}


Confluence.TeamCalendars.Templates.gcalHelpBro = function(opt_data, opt_ignored) {
  return '<div class="subscribe-dialog-help-step gCal"><div class="list list-margin"><div class="num-list"><h7>1.</h7></div><div class="num-detail"><h7>' + soy.$$escapeHtml('Kopieren Sie die Team Calendars-URL.') + '</h7></div></div><div class="list"><div class="num-list"></div><div class="num-detail"><div class="subscribe-dialog-url"></div></div></div><div class="list list-margin"><div class="num-list"><h7>2.</h7></div><div class="num-detail"><h7>' + soy.$$escapeHtml('\xd6ffnen Sie Ihre Kalender-App, um Ihren Kalender einzurichten.') + '</h7></div></div><div class="list"><div class="num-list"></div><div class="num-detail">' + soy.$$filterNoAutoescape(AJS.format('Need help? Check out our \x3ca href\x3d\x22{0}\x22 target\x3d\x22_blank\x22\x3estep-by-step-guide\x3c/a\x3e.',"https://docs.atlassian.com/confluence/docs-711/Subscribe+to+Team+Calendars+from+Google+Calendar")) + '</div></div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.gcalHelpBro.soyTemplateName = 'Confluence.TeamCalendars.Templates.gcalHelpBro';
}


Confluence.TeamCalendars.Templates.gcalHelpAndroid = function(opt_data, opt_ignored) {
  var output = '';
  var numHeading__soy172 = opt_data.isInUserView ? 1 : 2;
  output += '<div class="subscribe-dialog-help-step gCal">' + Confluence.TeamCalendars.Templates.additionalStepForDiscovery(opt_data) + '<div class="list list-margin"><div class="num-list"><h7>' + soy.$$escapeHtml(numHeading__soy172) + '.</h7></div><div class="num-detail"><h7>' + soy.$$escapeHtml('Kopieren Sie die Team Calendars-URL.') + '</h7></div></div><div class="list"><div class="num-list"></div><div class="num-detail"><div class="subscribe-dialog-url"></div></div></div><div class="list list-margin"><div class="num-list"><h7>' + soy.$$escapeHtml(numHeading__soy172 + 1) + '.</h7></div><div class="num-detail"><h7>' + soy.$$escapeHtml('\xd6ffnen Sie Ihre Kalender-App, um Ihren Kalender einzurichten.') + '</h7></div></div><div class="list"><div class="num-list"></div><div class="num-detail">' + soy.$$filterNoAutoescape(AJS.format('Need help? Check out our \x3ca href\x3d\x22{0}\x22 target\x3d\x22_blank\x22\x3estep-by-step-guide\x3c/a\x3e.',"https://docs.atlassian.com/confluence/docs-711/Subscribe+to+Team+Calendars+from+Android+Calendar")) + '</div></div></div>';
  return output;
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.gcalHelpAndroid.soyTemplateName = 'Confluence.TeamCalendars.Templates.gcalHelpAndroid';
}


Confluence.TeamCalendars.Templates.otherIcalHelp = function(opt_data, opt_ignored) {
  return '<div class="subscribe-dialog-help-step otherICal"><div class="list list-margin"><div class="num-list"><h7>1.</h7></div><div class="num-detail"><h7>' + soy.$$escapeHtml('Kopieren Sie die Team Calendars-URL.') + '</h7></div></div><div class="list"><div class="num-list"></div><div class="num-detail"><div class="subscribe-dialog-url"></div></div></div><div class="list list-margin"><div class="num-list"><h7>2.</h7></div><div class="num-detail"><h7>' + soy.$$escapeHtml('\xd6ffnen Sie Ihre Kalender-App, um Ihren Kalender einzurichten.') + '</h7></div></div><div class="list"><div class="num-list"></div><div class="num-detail">' + soy.$$filterNoAutoescape('Lesen Sie die Dokumentation Ihrer Kalender-App, um zu erfahren, wie Sie einen iCal-Kalender hinzuf\xfcgen.') + '</div></div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.otherIcalHelp.soyTemplateName = 'Confluence.TeamCalendars.Templates.otherIcalHelp';
}


Confluence.TeamCalendars.Templates.otherCalDAVHelp = function(opt_data, opt_ignored) {
  var output = '';
  var numHeading__soy199 = opt_data.isInUserView ? 1 : 2;
  output += '<div class="subscribe-dialog-help-step otherCalDAV">' + Confluence.TeamCalendars.Templates.additionalStepForDiscovery(opt_data) + '<div class="list list-margin"><div class="num-list"><h7>' + soy.$$escapeHtml(numHeading__soy199) + '.</h7></div><div class="num-detail"><h7>' + soy.$$escapeHtml('Kopieren Sie die Team Calendars-URL.') + '</h7></div></div><div class="list"><div class="num-list"></div><div class="num-detail"><div class="subscribe-dialog-url"></div></div></div><div class="list list-margin"><div class="num-list"><h7>' + soy.$$escapeHtml(numHeading__soy199 + 1) + '.</h7></div><div class="num-detail"><h7>' + soy.$$escapeHtml('\xd6ffnen Sie Ihre Kalender-App, um Ihren Kalender einzurichten.') + '</h7></div></div><div class="list"><div class="num-list"></div><div class="num-detail">' + soy.$$filterNoAutoescape('Lesen Sie die Dokumentation Ihrer Kalender-App, um zu erfahren, wie Sie einen CalDAV-Kalender hinzuf\xfcgen.') + '</div></div></div>';
  return output;
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.otherCalDAVHelp.soyTemplateName = 'Confluence.TeamCalendars.Templates.otherCalDAVHelp';
}


Confluence.TeamCalendars.Templates.otherUnknown = function(opt_data, opt_ignored) {
  return '<div class="subscribe-dialog-help-step otherCalDAV"><div class="list list-margin"><h7>' + soy.$$escapeHtml('M\xf6glicherweise unterst\xfctzt Ihre Kalender-App entweder iCal oder CalDav.') + '</h7></div><div class="list list-margin"><p>' + soy.$$escapeHtml('Lesen Sie die Dokumentation Ihrer Kalender-App, um zu erfahren, welchen sie unterst\xfctzt. W\xe4hlen Sie anschlie\xdfend oben im Feld f\xfcr die Kalender-App entweder iCal oder CalDav aus.') + '</p></div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.otherUnknown.soyTemplateName = 'Confluence.TeamCalendars.Templates.otherUnknown';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-add-dialog', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-add-dialog/calendar-add-dialog.js' */
define("tc/calendar-add-dialog",["jquery","tc-backbone","tc/templates","tc/dialogs","tc/util","tc/calendar-util"],function(f,h,e,d,g,c){var b;var a=h.View.extend({events:{"click .option-new":"addNewCalendar","click .option-existing":"addExistingCalendar","click .option-subscription":"subscribeByUrl","click .option-import":"importCalendar"},defaults:{title:"Kalender hinzuf\u00fcgen"},initialize:function(i){i=i||{};this.callbackHandler=i.callbackHandler;this.dialogOptions=f.extend({},this.defaults,i.dialogOptions)},hide:function(){b.hide()},render:function(){if(!b){b=this.dialog=new AJS.Dialog(600,320,"add-calendar-dialog");b.addHeader(this.dialogOptions.title);b.addPanel(this.dialogOptions.title,e.addDialog(),"add-calendar-panel");if(this.dialogOptions.addClass){f("#add-calendar-dialog").addClass(this.dialogOptions.addClass)}b.addCancel("Abbrechen",function(){b.hide();return false});this.setElement(b.getCurPanel().body)}b.show()},addNewCalendar:function(){var i=d.getSubCalendarCreateDialog("parent",this.callbackHandler);g.showDialogInUpdatedHeight(i);f("input[name='name']",i.getCurrentPanel().body).focus();c.fireEventForAnalytics("add.calendar.click.new."+c.getCalendarContext());this.hide()},addExistingCalendar:function(){var i=f("meta[name='ajs-page-id']").length>=1;var j=d.getSubCalendarSubscribeDialog(f.extend({callbackHandler:this.callbackHandler,heading:i?"Existierenden Team Calendar hinzuf\u00fcgen":"Beliebte Teamkalender",showSearch:i,searchParams:{showSubCalendarsInView:AJS.Meta.get("space-key")!==undefined||i},disableWatching:i,id:"internal-subscription-calendar-dialog"}));g.showDialogInUpdatedHeight(j);c.fireEventForAnalytics("add.calendar.click.existing."+c.getCalendarContext());this.hide()},subscribeByUrl:function(){var i=d.getSubCalendarCreateDialog("subscription",this.callbackHandler);g.showDialogInUpdatedHeight(i);f("input[name='name']",i.getCurrentPanel().body).focus();c.fireEventForAnalytics("add.calendar.click.subscribe."+c.getCalendarContext());this.hide()},importCalendar:function(){var i=d.getSubCalendarImportDialog(this.callbackHandler);g.showDialogInUpdatedHeight(i);f("input[name='name']",i.getCurrentPanel()).focus();c.fireEventForAnalytics("add.calendar.click.import."+c.getCalendarContext());this.hide()}});return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-add-dialog', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-add-dialog/calendar-add-dialog-compat.js' */
require(["tc/calendar-add-dialog"],function(a){if(!Confluence.TeamCalendars.Dialogs){Confluence.TeamCalendars.Dialogs={}}Confluence.TeamCalendars.Dialogs.getAddDialog=function(b,c){return new a({callbackHandler:b,dialogOptions:c}).render()}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-add-dialog', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-add-dialog/calendar-add-dialog.soy' */
// This file was automatically generated from calendar-add-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.addDialog = function(opt_data, opt_ignored) {
  return '<div class="add-calendar subcalendar-wizard"><div><ul class="add-calendar-options"><li class="option-new"><div class="title">' + soy.$$escapeHtml('Neuen Kalender hinzuf\xfcgen') + '</div></li><li class="option-import"><div class="title">' + soy.$$escapeHtml('Kalender importieren') + '</div></li></ul><ul class="add-calendar-options"><li class="option-existing"><div class="title">' + soy.$$escapeHtml('Hinzuf\xfcgen eines bestehenden Kalenders') + '</div></li><li class="option-subscription"><div class="title">' + soy.$$escapeHtml('\xdcber URL abonnieren') + '</div></li></ul></div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.addDialog.soyTemplateName = 'Confluence.TeamCalendars.Templates.addDialog';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-add-inline-dialog', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-add-inline-dialog/calendar-add-inline-dialog.js' */
define("tc/calendar-add-inline-dialog",["jquery","tc-backbone","tc/templates","tc/dialogs","tc/util"],function(d,f,b,a,e){var c=f.View.extend({initialize:function(g){g=g||{};this.callbackHandler=g.callbackHandler},hide:function(){this.dialog.hide()},render:function(){var g=this.callbackHandler;if(!this.dialog){this.dialog=AJS.InlineDialog(d("#inline-dialog-more"),"inline-dialog-more",function(i,h,j){i.html(b.addInlineDialog());i.find(".option-new").on("click",function(){var k=a.getSubCalendarCreateDialog("parent",g);e.showDialogInUpdatedHeight(k);d("input[name='name']",k.getCurrentPanel().body).focus();d("#inline-dialog-more").removeClass("active");d("#inline-dialog-inline-dialog-more").hide();Confluence.TeamCalendars.fireEventForAnalytics("add.calendar.click.new."+Confluence.TeamCalendars.getCalendarContext())});i.find(".option-import").on("click",function(){var k=a.getSubCalendarImportDialog(g);e.showDialogInUpdatedHeight(k);d("input[name='name']",k.getCurrentPanel()).focus();d("#inline-dialog-more").removeClass("active");d("#inline-dialog-inline-dialog-more").hide();Confluence.TeamCalendars.fireEventForAnalytics("add.calendar.click.import."+Confluence.TeamCalendars.getCalendarContext())});i.find(".option-existing").on("click",function(){var k=d("meta[name='ajs-page-id']").length>=1;var l=a.getSubCalendarSubscribeDialog(d.extend({callbackHandler:g,heading:k?"Existierenden Team Calendar hinzuf\u00fcgen":"Beliebte Teamkalender",showSearch:k,searchParams:{showSubCalendarsInView:AJS.Meta.get("space-key")!==undefined||k},disableWatching:k,id:"internal-subscription-calendar-dialog"}));e.showDialogInUpdatedHeight(l);d("#inline-dialog-more").removeClass("active");d("#inline-dialog-inline-dialog-more").hide();Confluence.TeamCalendars.fireEventForAnalytics("add.calendar.click.existing."+Confluence.TeamCalendars.getCalendarContext())});i.find(".option-subscription").on("click",function(){var k=a.getSubCalendarCreateDialog("subscription",g);e.showDialogInUpdatedHeight(k);d("input[name='name']",k.getCurrentPanel().body).focus();d("#inline-dialog-more").removeClass("active");d("#inline-dialog-inline-dialog-more").hide();Confluence.TeamCalendars.fireEventForAnalytics("add.calendar.click.subscribe."+Confluence.TeamCalendars.getCalendarContext())});j();return false});d("#inline-dialog-more").on("click",function(){d("#inline-dialog-more").removeClass("active");d("#inline-dialog-inline-dialog-more").hide()})}}});return c});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-add-inline-dialog', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-add-inline-dialog/calendar-add-inline-dialog.soy' */
// This file was automatically generated from calendar-add-inline-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.addInlineDialog = function(opt_data, opt_ignored) {
  return '<div id="add-calendar-inline-dialog" class="add-calendar subcalendar-wizard"><ul class="add-calendar-options"><li class="option-new"><div class="title">' + soy.$$escapeHtml('Neuen Kalender hinzuf\xfcgen') + '</div><div class="description">' + soy.$$escapeHtml('Neuen Kalender erstellen') + '<div></li></ul><ul class="add-calendar-options"><li class="option-existing"><div class="title">' + soy.$$escapeHtml('Bestehenden Kalender hinzuf\xfcgen') + '</div><div class="description">' + soy.$$escapeHtml('Kalender suchen und von Confluence hinzuf\xfcgen') + '<div></li></ul><ul class="add-calendar-options"><li class="option-import"><div class="title">' + soy.$$escapeHtml('Kalender importieren') + '</div><div class="description">' + soy.$$escapeHtml('ICS-Datei importieren, um einen Kalender zu erstellen') + '<div></li></ul><ul class="add-calendar-options"><li class="option-subscription"><div class="title">' + soy.$$escapeHtml('\xdcber URL abonnieren') + '</div><div class="description">' + soy.$$escapeHtml('Einen Kalender anhand seiner URL abonnieren') + '<div></li></ul></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.addInlineDialog.soyTemplateName = 'Confluence.TeamCalendars.Templates.addInlineDialog';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:manage-event', location = 'com/atlassian/confluence/extra/calendar3/components/manage-event/manage-event.js' */
define("tc/manage-event",["jquery","tc/event-delete-dialog","tc/calendar-util"],function(c,a,b){var d=function(g,e){var h;function f(n,l,j,i,m,k){if(!l.end&&!m){l.end=new Date(l.start.getTime()+(1000*60*60*2))}g.setProcessingEvent(n,true);g.setSuppressEventToolTip(n,true);d(g,e).updateEvent(n,(function(){var p=g.getSubCalendar(n,l.subCalendarId),o={subCalendarId:p.parentId,uid:l.id,eventType:l.eventType,originalStartDate:l.originalStart||"",what:l.title,url:l.workingUrl,dragAndDropUpdate:true,start:c.fullCalendar.formatDate(l.start,"ddMMyyyyHHmm"),end:c.fullCalendar.formatDate(l.end||l.start,"ddMMyyyyHHmm"),allDayEvent:m,where:l.where,description:l.description,freq:l.recur?l.recur.freq:"",byday:l.recur?l.recur.byDay:"",interval:l.recur?l.recur.interval:"",until:l.recur?l.recur.localizedUntil||"":"",recurrenceId:l.recurId||"",editAllInRecurrenceSeries:"false",customEventTypeId:l.customEventTypeId,childSubCalendarId:l.subCalendarId||""};if(p.eventInviteesSupported){o.person=c.map(l.invitees||[],function(q){return q.id})}return o})(),function(o,q,p){g.showAjaxError(n,o,q,p,g.ERROR_CLASS_EVENT_UPDATE);k();g.setSuppressEventToolTip(n,false);g.setProcessingEvent(n,false)},function(p){if(p.success){g.setGenericErrors(n,null,g.ERROR_CLASS_EVENT_UPDATE);var o=p.event;c.each(g.getCalendarPanel(n).fullCalendar("clientEvents",l.id),function(r,q){q.localizedStartDate=o.localizedStartDate;q.localizedStartTime=o.localizedStartTime;q.localizedEndDate=o.localizedEndDate;q.localizedEndTime=o.localizedEndTime;q.recurId=o.recurId;q.invitees=o.invitees;q.iconUrl=o.iconUrl;q.confluenceFormattedStartDate=o.confluenceFormattedStartDate;q.expandDates=o.expandDates;if(o.extraProperties){q.extraProperties=o.extraProperties}});if(l.calendarReloadRequiredOnUpdate){g.reloadSubCalendar(n,[l.subCalendarId])}}else{g.setGenericErrors(n,"Uh oh. Es sieht aus, als ob etwas unerwartet schief gelaufen ist. Bitte \u00fcberpr\u00fcfen Sie die Confluence Log-Datei.",g.ERROR_CLASS_EVENT_UPDATE);k()}g.setSuppressEventToolTip(n,false);g.setProcessingEvent(n,false)})}return{getEventDetailsDialog:function(r,j,p,i){var m=g.getSubCalendar(r,j.subCalendarId),k=g.getSubCalendar(r,m.parentId),q=(function(){return(c.inArray(g.getCalendarPanel(r).fullCalendar("getView").name,["month","agendaWeek"])!==-1)||g.getParameter(r,"showSubCalendarNameInEventPopup")!=="true"})(),o=function(){var w=null;var v=k?k:m;if(b.isCustomEventType(j.eventType)){var s=v.customEventTypes;c.each(s,function(x,y){if(y.customEventTypeId===j.customEventTypeId&&y.periodInMins>0){w=AJS.format("{0} vor",b.showInforReminder(y.periodInMins));return false}})}else{var u=v.sanboxEventTypeReminders;if(u&&u.length>0){var t=j.eventType;if(b.isJiraType(t)){t+="-calendar"}c.each(u,function(y,x){if(x.eventTypeId===t&&x.periodInMins>0){w=AJS.format("{0} vor",b.showInforReminder(x.periodInMins));return false}})}}return w},n=function(){return c("<div/>").html(Confluence.TeamCalendars.Templates.eventPopup({contextClass:q?"mycalendars":"",baseUrl:g.getParameter(r,"baseUrl"),event:c.extend(c.extend({},j),{colour:m.color,subCalendarDisplayName:k&&!Confluence.TeamCalendars.isSubscriptionSubCalendar(m)?k.name:m.name,subCalendarId:k?k.id:m.id,inviteesSupported:m.inviteesSupported,period:o()})}))},l=AJS.InlineDialog(p,g.dialogSequence++,function(u,s,w){var t=n();c(".field-duration",t).each(function(){var x=c(this);if(j.localizedStartDate!==j.localizedEndDate){x.empty().html("<span class='aui-icon aui-icon-wait'></span>");g.formatDate(r,[j._start,j._end],"dd MMM",function(y){if(typeof y==="string"){x.text(y);return}if(j.allDayFlipped?!j.allDay:j.allDay){x.empty().text(AJS.format("{0} - {1}",y[0],y[1]))}else{x.empty().text(AJS.format("{0}, {1} - {2}, {3}",y[0],j.localizedStartTime,j.localizedEndTime,y[1]))}})}else{if(!((j.allDayFlipped?!j.allDay:j.allDay))){x.empty().text(j.localizedStartTime+" - "+j.localizedEndTime)}}});var v=c(".edit-controls",t);if(g.isEventEditable(r,j)){v.each(function(){if(g.getParameter(r,"redirectEditInEventPopup")==="true"){c(".event-edit",this).unbind("click").attr("href",g.getParameter(r,"baseUrl").concat("/calendar/mycalendar.action","?startDayOfMonth=",c.fullCalendar.formatDate(j.start,"d"),"&startMonthOfYear=",(parseInt(c.fullCalendar.formatDate(j.start,"M"))-1),"&startYear=",c.fullCalendar.formatDate(j.start,"yyyy"),"&editSubCalendarId=",encodeURIComponent(g.getSubCalendar(r,j.subCalendarId).id),"&editEventId=",encodeURIComponent(j.id),"&editView=month"))}else{c(".event-edit",this).unbind("click").click(function(){l.hide();var z=g.getSubCalendar(r,j.subCalendarId),y=Confluence.TeamCalendars.Dialogs.getEditEventDialog(c.extend({},j,{eventType:z.subscriptionType||z.type,subCalendarId:z.parentId,originalEventSubCalendarId:z.id,childSubCalendarId:j.subCalendarId||""}),null,g,r);y.show();return false})}var x=c(".event-delete",this);if(g.isEventDeletable(r,j)&&g.getParameter(r,"hideDeleteInEventPopup")==="false"){x.click(function(){l.hide();a(r,j,g).show();return false})}else{x.remove()}})}else{v.each(function(){c(".edit-control",this).remove()})}v.each(function(){c(".event-hyperlink-separator:first-child, .event-hyperlink-separator:last-child",this).remove()});t.appendTo(u.empty());w()},(function(){var s={hideDelay:0,noBind:true,isRelativeToMouse:true,showDelay:0,width:Confluence.TeamCalendars.isPDLEnabled()&&c.inArray("jira-version",j.className)!==-1?380:360,hideCallback:function(){g.setSuppressEventToolTip(r,false);if(AJS.InlineDialog.current&&AJS.InlineDialog.current.popup){AJS.InlineDialog.current.popup.hide()}},initCallback:function(){g.setSuppressEventToolTip(r,true);c(".event-field.reminder-icon").tooltip({gravity:"s"})}};return i?c.extend(s,i):s})());l.addClass("event-display-dialog");return l},updateEvent:function(m,l,j,i){l.userTimeZoneId=Confluence.TeamCalendars.getUserTimeZone();var k=g.setSubCalendarSpinnerIconVisible(true);c.ajax({cache:false,data:l,dataFilter:function(o){var n=c.parseJSON(o);if(n.success){Confluence.TeamCalendars.mergeSubCalendarObjectsToArray([n.subCalendar])}return n},dataType:"text",error:function(n,p,o){if(j){j(n,p,o)}},success:function(o){var p=l.eventType,n=g.getParameter(m,"calendarContext");var q;if(p==="custom"){if(o.subCalendar&&o.subCalendar.customEventTypes){c.each(o.subCalendar.customEventTypes,function(r,s){if(s.customEventTypeId===l.customEventTypeId){q={customEventTypeName:s.title}}})}}if(l.uid){Confluence.TeamCalendars.fireEventForAnalytics("event.update.default."+p+".context."+n,q)}else{Confluence.TeamCalendars.fireEventForAnalytics("event.create.default."+p+".context."+n,q)}e.removeCalendar(l.subCalendarId);e.removeCalendar(l.originalSubCalendarId);if(i){i(o)}g.reloadSubCalendarDisableEvent(m,l)},complete:function(){if(k){k.resolve()}},type:"PUT",timeout:g.ajaxTimeout,url:g.getCalendarServiceBaseUrl(m,"/events.json")})},deleteEvent:function(k,l,j,i){c.ajax({cache:false,data:l,dataType:"json",error:function(m,o,n){if(j){j(m,o,n)}},success:function(m){e.removeCalendar(l.subCalendarId);if(i){i(m)}},type:"DELETE",timeout:g.ajaxTimeout,url:g.getCalendarServiceBaseUrl(k,"/events.json")})},eventClick:function(j,i,k){g.setEventTooltipVisible(k);if(i.shiftKey){if(g.isEventEditable(k,j)){var l=g.getSubCalendar(k,j.subCalendarId);Confluence.TeamCalendars.Dialogs.getEditEventDialog(c.extend({},j,{eventType:l.subscriptionType||l.type,subCalendarId:l.parentId,originalEventSubCalendarId:l.id,childSubCalendarId:j.subCalendarId||""}),null,g,k).show()}return false}if((i.ctrlKey||i.metaKey)&&j.workingUrl){window.location=j.workingUrl;return false}g.getEventDetailsDialog(k,j,c(i.currentTarget)).show(i);return false},eventRender:function(j,m,i,k){if(j.disableResizing){c(".ui-resizable-handle",m).hide()}m.mousemove(function(n){m.data("mouseCoords",{pageX:n.pageX,pageY:n.pageY})}).hover(function(){setTimeout(function(){var n=m.data("mouseCoords");if(!g.isEventToolTipSuppressed(k)&&n){g.setEventTooltipVisible(k,j,n,true)}},5000)},function(){m.removeData("mouseCoords");g.setEventTooltipVisible(k);g.setSuppressEventToolTip(k,false)});c(".fc-event-time, .fc-event-title",m).css("color",m.css("color"));if("agendaWeek"===i.name){m.parent().addClass(j.allDay?"fc-agenda-head":"fc-agenda-body");if(!j.allDay){c(".fc-event-inner",m).css({"border-right-color":j.secondaryBorderColor||j.borderColor,"border-bottom-color":j.secondaryBorderColor||j.borderColor,"border-left-color":j.secondaryBorderColor||j.borderColor})}}if("month"===i.name||"agendaWeek"===i.name){var l;if(c.inArray("other",j.className)!==-1||j.eventType==="custom"){if(j.shortTitle){l=j.shortTitle+": "+j.title}else{if(j.invitees&&j.invitees.length){l=j.invitees[0].displayName+": "+j.title}else{l=j.title}}}else{l=j.shortTitle||j.title}c(".fc-event-title",m).text(l);if("month"===i.name||("agendaWeek"===i.name&&j.allDay)){c(".fc-event-inner",m).before(Confluence.TeamCalendars.Templates.renderCustomImagePrinting({eventType:j.className}))}}},eventDrop:function(l,j,i,m,k,n){if(g.isEventEditable(n,l)&&!g.isProcessingEvent(n)){f(n,l,j,i,m,k)}else{k()}},eventResize:function(l,j,i,k,m){if(g.isEventEditable(m,l)&&!g.isProcessingEvent(m)){f(m,l,j,i,l.allDay,k)}else{k()}},eventDragStart:function(i){g.setSuppressEventToolTip(i,true);g.setEventTooltipVisible(i);g.hideInlineAuiDialogs()},eventDragEnd:function(i){g.setSuppressEventToolTip(i,false)},eventResizeStart:function(i){g.setSuppressEventToolTip(i,true);g.setEventTooltipVisible(i);g.hideInlineAuiDialogs()},eventResizeStop:function(i){g.setSuppressEventToolTip(i,false)}}};return d});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:manage-i18n-text', location = 'com/atlassian/confluence/extra/calendar3/components/manage-i18n-text/manage-i18n-text.js' */
define("tc/manage-i18n-text",["jquery"],function(b){var a=function(c){return{getEventTypeNames:function(e){var d={"calendar3.subcalendar.type.parent":"Kalender","calendar3.subcalendar.type.local":"Veranstaltungskalender","calendar3.subcalendar.type.subscription":"Abonnements","calendar3.subcalendar.type.jira":"Jira-Kalender","calendar3.subcalendar.type.people":"Personen-Kalender","calendar3.subcalendar.type.other":"Ereignisse","calendar3.subcalendar.type.generic-people":"Personen","calendar3.subcalendar.type.travel":"Reise","calendar3.subcalendar.type.leaves":"Urlaub","calendar3.subcalendar.type.birthdays":"Geburtstage","calendar3.subcalendar.type.jira-agile-sprint":"Jira Agile Sprints","calendar3.subcalendar.type.jira-project-releases":"Jira Projekt-Ver\u00f6ffentlichungen","calendar3.subcalendar.type.jira-issue-dates":"Jira Vorgangsdatum","calendar3.subcalendar.type.unknown":"Unbekannter Typ"};return d[e]?d[e]:d},getMonthNames:function(){return[this.getText("calendar3.month.long.january"),this.getText("calendar3.month.long.february"),this.getText("calendar3.month.long.march"),this.getText("calendar3.month.long.april"),this.getText("calendar3.month.long.may"),this.getText("calendar3.month.long.june"),this.getText("calendar3.month.long.july"),this.getText("calendar3.month.long.august"),this.getText("calendar3.month.long.september"),this.getText("calendar3.month.long.october"),this.getText("calendar3.month.long.november"),this.getText("calendar3.month.long.december")]},getMonthNamesShort:function(){return[this.getText("calendar3.month.short.january"),this.getText("calendar3.month.short.february"),this.getText("calendar3.month.short.march"),this.getText("calendar3.month.short.april"),this.getText("calendar3.month.short.may"),this.getText("calendar3.month.short.june"),this.getText("calendar3.month.short.july"),this.getText("calendar3.month.short.august"),this.getText("calendar3.month.short.september"),this.getText("calendar3.month.short.october"),this.getText("calendar3.month.short.november"),this.getText("calendar3.month.short.december")]},getDayNames:function(){return[this.getText("calendar3.day.long.sunday"),this.getText("calendar3.day.long.monday"),this.getText("calendar3.day.long.tuesday"),this.getText("calendar3.day.long.wednesday"),this.getText("calendar3.day.long.thursday"),this.getText("calendar3.day.long.friday"),this.getText("calendar3.day.long.saturday")]},getDayNamesShort:function(){return[this.getText("calendar3.day.short.sunday"),this.getText("calendar3.day.short.monday"),this.getText("calendar3.day.short.tuesday"),this.getText("calendar3.day.short.wednesday"),this.getText("calendar3.day.short.thursday"),this.getText("calendar3.day.short.friday"),this.getText("calendar3.day.short.saturday")]},getText:function(d){return this.getI18nMessages()[d]},getI18nMessages:function(){if(!c){c={};b("fieldset input",b("<div/>",{html:b("#team-calendars-messages").html()})).each(function(){c[this.name]=this.value})}return c}}};return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:full-calendar-option', location = 'com/atlassian/confluence/extra/calendar3/components/full-calendar/full-calendar-option.js' */
define("tc/full-calendar-option",["jquery","tc/manage-event"],function(b,c){var a=function(f,e,d){return{_calendarDiv:e,_calendarPlugin:f,defaultView:f.getParameter(e,"defaultView")||"month",year:parseInt(f.getParameter(e,"startingYear")),month:parseInt(f.getParameter(e,"startingMonth")),date:parseInt(f.getParameter(e,"startingDay")),header:false,firstDay:Number.parseInt(f.getParameter(e,"firstDayOfWeek")),weekends:f.getParameter(e,"hideWeekends")==="false",viewRender:function(g){var h=function(){if(Confluence.TeamCalendars.isPDLEnabled()){b(".change-view",e).removeClass("active");b(".change-view-"+g.name,e).addClass("active")}else{b(".change-view",e).each(function(){b(this).closest("li").removeClass("active")});b(".change-view-"+g.name,e).closest("li").addClass("active")}};Confluence.TeamCalendars.updateDateDisplay(e,g.title);h();if(g.name==="basicDay"){f.getCalendarPanel(e).addClass("borderless")}else{f.getCalendarPanel(e).removeClass("borderless")}if(f.isCalendarInEditMode(e)){var i=e.data("lastSelectedView");if(!i){e.data("lastSelectedView",g.name)}else{if(g.name!==i){e.data("lastSelectedView",g.name);b.ajax({cache:false,data:{view:g.name},dataType:"json",error:function(j,l,k){f.showAjaxError(e,j,l,k,f.ERROR_CLASS_CONFIG_UPDATE)},success:function(){f.setGenericErrors(e,null,f.ERROR_CLASS_CONFIG_UPDATE)},type:"PUT",timeout:f.ajaxTimeout,url:f.getCalendarServiceBaseUrl(e,"/preferences/view.json")})}}}},allDayText:"Den ganzen Tag",firstHour:8,columnFormat:{week:"ddd d"},titleFormat:{week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d, yyyy}"},buttonText:{today:"Heute",month:"Monat",week:"Woche",day:"Liste"},monthNames:f.getMonthNames(),monthNamesShort:f.getMonthNamesShort(),dayNames:f.getDayNames(),dayNamesShort:f.getDayNamesShort(),dayClick:function(h,i,g){if(b(".event-details-popup:visible").length===0){if(f.getSubCalendarsWhichCanAddEvents(e).length){Confluence.TeamCalendars.Dialogs.getEditEventDialog({start:h,localizedStartTime:i?f.getDefaultStartTime(e):null,localizedEndTime:i?f.getDefaultEndTime(e):null,allDay:(function(){if(f.getCalendarPanel(e).fullCalendar("getView").name==="month"){return(e.data(f.PREF_LAST_ALL_DAY_USED)||i.toString())==="true"}return i})()},null,f,e).show()}}else{g.stopPropagation();f.hideInlineAuiDialogs()}},eventClick:function(h,g){return c(f).eventClick(h,g,e)},eventRender:function(h,i,g){c(f).eventRender(h,i,g,e)},eventDrop:function(j,h,g,k,i){c(f,d).eventDrop(j,h,g,k,i,e)},eventDragStart:function(){c(f,d).eventDragStart(e)},eventDragEnd:function(){c(f,d).eventDragEnd(e)},eventResize:function(j,h,g,i){c(f,d).eventResize(j,h,g,i,e)},eventResizeStart:function(){c(f,d).eventResizeStart(e)},eventResizeStop:function(){c(f,d).eventResizeStop(e)},loading:function(g){if(!g){window.isTeamCalendarsLoaded=true}if(!g&&this.spinnerDefer){this.spinnerDefer.resolve()}if(g){this.spinnerDefer=f.setSubCalendarSpinnerIconVisible(e,g)}},selectable:true,selectHelper:true,select:function(g,j,i,h){if(!b(".event-details-popup:visible").length&&f.getSubCalendarsWhichCanAddEvents(e).length){Confluence.TeamCalendars.Dialogs.getEditEventDialog({start:g,end:j,localizedStartTime:i?f.getDefaultStartTime(e):null,localizedEndTime:i?f.getDefaultEndTime(e):null,allDay:(function(){if(f.getCalendarPanel(e).fullCalendar("getView").name==="month"){if(j.getTime()-g.getTime()>0){return i.toString()==="true"}return(e.data(f.PREF_LAST_ALL_DAY_USED)||i.toString())==="true"}return i})()},null,f,e).show()}else{if(h){h.stopPropagation()}f.hideInlineAuiDialogs()}}}};return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:subcalendar-panel', location = 'com/atlassian/confluence/extra/calendar3/components/subcalendar-panel/subcalendar-panel.js' */
define("tc/subcalendar-panel",["jquery","tc/calendar-util","tc/myCalendarTour","tc/subcalendar-entry-view","tc/subcalendar-menu-builder","tc/non-space-calendars-handler","tc/event-edit-dialog","tc/calendar-caldav-subscribe-model","tc/subcalendar-subscribe-dialog","tc/calendar-caldav-subscribe-service","confluence/meta"],function(f,j,l,d,g,e,a,k,c,h,b){var i=b.get("remote-user")==="";var m=function(v,t,n){var o=f("div.sub-calendar-names",t);var u=function(z){var y=(function(){var A=new d({CalendarPlugin:v,subCalendar:z,_calendarDiv:t,cache:n}).render();return A})();return y};var x=function(){if(v.getSubCalendarsWhichCanAddEvents(t).length){f(".add-event-button",t).removeClass("hidden");f(".toolbar-group-addevent, .add-event-button",t).removeClass("hidden")}else{f(".add-event-button",t).addClass("hidden");f(".toolbar-group-addevent, .add-event-button",t).addClass("hidden")}};var r=function(){if(!i&&v.getSubCalendars(t).length){f(".subscribe-calendar-button").removeClass("hidden")}else{f(".subscribe-calendar-button").addClass("hidden")}};var p=function(){if("true"===v.getParameter(t,"readOnly")){f("#add-calendar-menu").addClass("hidden")}else{f("#add-calendar-menu").removeClass("hidden")}};var s=function(){f("<div/>",{"class":"no-subcalendars-msg",text:"Sie haben keine Kalender erstellt oder abonniert"}).appendTo(o)};var w=function(z,C){var A=f.grep(C,function(F,E){return F.type==="parent"||F.subscriptionType==="parent"});var y=function(E){var F=f(z).find(".subcalendar-item");F.each(function(H,J){var G=f(J);var M=G.data("sub-calendar-id");var K=f.grep(E,function(N){return N.subCalendarId==M});var L=v.getParameter(t,"hideWatchMenuItem")==="true";if(K.length>0&&K[0].isWatchable&&!L){var I="not-watched";if(K[0].watchedViaContent){I="watching-via-content"}else{if(K[0].watched){I="watched"}}G.addClass(I)}G.addClass("disable-loading-watching-status");l.reposition()});AJS.trigger("calendar.watch.statuses.loaded",E)};var B={};var D=f.map(A,function(E,F){return E.id});B.include=D;f.ajax({cache:false,data:B,dataType:"json",error:function(E,G,F){v.showAjaxError(t,E,G,F,v.ERROR_CLASS_SUB_CALENDAR_LIST)},success:function(F){if(F.success){var E=F.payload;y(E);v.setGenericErrors(t,null,v.ERROR_CLASS_SUB_CALENDAR_LIST)}else{v.setGenericErrors(t,"Uh oh. Es sieht aus, als ob etwas unerwartet schief gelaufen ist. Bitte \u00fcberpr\u00fcfen Sie die Confluence Log-Datei.",v.ERROR_CLASS_SUB_CALENDAR_LIST)}},type:"GET",timeout:v.ajaxTimeout,url:Confluence.TeamCalendars.getCalendarServiceBaseUrl("/subcalendars/watching/status.json")})};var q=function(y){g.build(t,v,y)};return{initSubCalendarPanel:function(){var z=function(B){new a().getEditEventDialog({start:new Date(),localizedStartTime:v.getDefaultStartTime(B),localizedEndTime:v.getDefaultEndTime(B),allDay:(B.data(v.PREF_LAST_ALL_DAY_USED)||"true")==="true"},null,v,t).show()};f(".toolbar-group-addevent .trigger-addevent, .calendar-toolbar .add-event, .add-event-button",t).click(function(){z(t);return false});f(".subscribe-calendar-button",t).click(function(){var D=v.getSubCalendars(t);var B=new h(v,t);var C=new k({subCalendars:D,baseUrl:j.getParameter(t,"baseUrl"),isPrivateUrlsEnabled:v.getParameter(t,"privateUrlsEnabled"),privateUrlProvider:_.bind(B.getPrivateUrlProvider,B)});var E=new c({calendarPlugin:v,calendarDiv:t,model:C});E.render();return false});var y=v.setSubCalendarSpinnerIconVisible(true);var A=function(){if(y){y.resolve()}};v.refreshCachedSubCalendars(t,function(C){if("true"===v.getParameter(t,"showHiddenSubCalendars")&&f.isArray(C)){f.each(C,function(E,D){D.eventsHidden=false})}v.updateAvailableSubCalendarsInSubCalendarPanel(t);A();if(v.isCalendarInEditMode(t)){var B=function(){t.unbind("calendar-plugin.resized",B);if("true"===v.getParameter(t,"isShowCalendarWizard")){var E=function(){Confluence.TeamCalendars.Dialogs.getSubCalendarSubscribeDialog({heading:"Willkommen bei Team-Kalender!",callbackHandler:v.getRenderedMacroCallbackHandler(t)}).show()};var D=function(){Confluence.TeamCalendars.Dialogs.getAddDialog(v.getRenderedMacroCallbackHandler(t),{title:"Willkommen bei Team-Kalender!",addClass:"create-calendar-first-time"})};j.showCalendarPopupHaveAnEmptySubcalendar(E,D)}};t.bind("calendar-plugin.resized",B)}},function(){A()})},updateAvailableSubCalendarsInSubCalendarPanel:function(){o.empty();x();r();p();var y=j.getSortedSubCalendarsByTypeAndName(v.getSubCalendars(t));q(y);window.isTeamCalendarsLoaded=true;if(!y.length){j.toggleNoCalendarPage(true);f(".no-calendar-page #add-button").click(function(z){Confluence.TeamCalendars.Dialogs.getAddDialog(v.getRenderedMacroCallbackHandler(t));z.preventDefault()});s()}else{j.toggleNoCalendarPage(false)}f.each(y,function(z,A){o.append(u(A))});if(!j.isSingleCalendarView(t)){l.start()}w(o,y);e.handle(v,t,n,y)}}};return m});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:subcalendar-panel', location = 'com/atlassian/confluence/extra/calendar3/components/subcalendar-panel/subcalendar-entry-view.js' */
define("tc/subcalendar-entry-view",["jquery","underscore","tc/calendar-util","tc-backbone","tc/child-subcalendar-entry-view","tc/subcalendar-menu-view","tc/subcalendar-displayer"],function(f,b,d,h,g,e,a){var c=h.View.extend({initialize:function(i){this.cache=i.cache;this.CalendarPlugin=i.CalendarPlugin;this.subCalendar=i.subCalendar;this._calendarDiv=i._calendarDiv;this.template=Confluence.TeamCalendars.Templates.subCalendarPanelEntry;this.childSubCalendarIds=[];this.childSubCalendarViews=[];AJS.trigger("calendar.loaded",this.subCalendar)},events:{"click .subcalendar-name":"_onClick"},render:function(){this.$el.html(this.template({subCalendar:this.subCalendar,autoConvertSupported:this.CalendarPlugin.isAutoConvertSupported(this._calendarDiv),subCalendarClasses:this.CalendarPlugin.getParameter(this._calendarDiv,"subCalendarColorClass")}));this.entryView=this.$(".subcalendar-item");this._ellipsisLongCalendarNames();this._renderChildSubCalendars();this._initEventsVisibility();if(!d.isSingleCalendarView(this._calendarDiv)){this.subcalendarDisplayer=new a({CalendarPlugin:this.CalendarPlugin,_calendarDiv:this._calendarDiv,entryView:this.entryView,subCalendar:this.subCalendar,childSubCalendarIds:this.childSubCalendarIds,childSubCalendarViews:this.childSubCalendarViews})}if(d.isSpaceCalendarView(this._calendarDiv)&&!d.isDummySubscriptionParentSubCalendar(this.subCalendar)&&this.subCalendar.spaceKey!==undefined){this.$(".subcalendar-name").addClass("header-color")}this.menuView=new e({cache:this.cache,CalendarPlugin:this.CalendarPlugin,_calendarDiv:this._calendarDiv,subCalendar:this.subCalendar,subCalendarEntryView:this.entryView,autoConvertSupported:this.CalendarPlugin.isAutoConvertSupported(this._calendarDiv),subCalendarClasses:this.CalendarPlugin.getParameter(this._calendarDiv,"subCalendarColorClass"),template:Confluence.TeamCalendars.Templates.subCalendarMenu,subcalendarDisplayer:this.subcalendarDisplayer});this.$(".subcalendar-info").append(this.menuView.render());return this.$el},_ellipsisLongCalendarNames:function(){this.$(".subcalendar-name").attr("title",this.$(".ellipsis_text").text())},_renderChildSubCalendars:function(){if(this.subCalendar.childSubCalendars){this.childSubCalendarIds=[];this.childSubCalendarViews=[];var j=this;b.each(this.subCalendar.childSubCalendars,function(l){var k=l.customEventTypes;if(k&&k.length){b.each(k,function(m){j._renderChildSubCalendar(l,m)})}else{j._renderChildSubCalendar(l)}});this.childSubCalendarViews.sort(function(m,l){var k=m.find(".ellipsis_text");var n=l.find(".ellipsis_text");if(k.length!==1||n.length!==1){return 0}return k.text().localeCompare(n.text())});var i=this.$(".child-subcalendars");this.childSubCalendarViews.forEach(function(k){i.append(k)})}},_renderChildSubCalendar:function(k,j){var i={cache:this.cache,CalendarPlugin:this.CalendarPlugin,_calendarDiv:this._calendarDiv,parentView:this.entryView,parentSubCalendar:this.subCalendar,childSubCalendar:k};if(j){i.customEventType=j;i.template=Confluence.TeamCalendars.Templates.customEventTypePanelEntry}else{i.template=Confluence.TeamCalendars.Templates.childSubCalendarPanelEntry}var l=new g(i).render();this.childSubCalendarIds.push(k.id);this.childSubCalendarViews.push(l.find(".child-subcalendar"))},_onClick:function(){if(!d.isSpaceCalendarView(this._calendarDiv)||d.isDummySubscriptionParentSubCalendar(this.subCalendar)||this.subCalendar.spaceKey===undefined){return}Confluence.TeamCalendars.fireEventForAnalytics("view.calendar.detail.click");window.location.href=AJS.contextPath()+"/display/"+encodeURIComponent(this.subCalendar.spaceKey)+"/calendar/"+encodeURIComponent(this.subCalendar.subscriptionId||this.subCalendar.id)+"?calendarName="+encodeURIComponent(this.subCalendar.name)},_initEventsVisibility:function(){var j=[];var i=[];if(d.isSubscriptionSubCalendar(this.subCalendar)){if(this.subCalendar.eventsHidden||f.inArray(this.subCalendar.id,i)!==-1){this.entryView.addClass("subcalendar-disabled");i.push(this.subCalendar.id)}else{if(!d.isDummySubscriptionParentSubCalendar(this.subCalendar)){j.push(this.subCalendar.id)}}}b.each(this.childSubCalendarViews,function(k){var l=this.CalendarPlugin.getSubCalendar(this._calendarDiv,k.data("subCalendarId"));if(!d.isSingleCalendarView(this._calendarDiv)&&(l.eventsHidden||f.inArray(l.id,i)!==-1)){k.addClass("subcalendar-disabled");k.find(".child-subcalendar-checkbox").prop("checked",false);i.push(l.id)}else{j.push(l.id);k.find(".child-subcalendar-checkbox").prop("checked",true)}},this);if(j.length){this.CalendarPlugin.addSubCalendarEventSource(this._calendarDiv,j)}if(i.length){this.entryView.addClass("subcalendar-disabled")}if(this.childSubCalendarViews.length){this.CalendarPlugin.checkCalendarHasAllChildDisable(this.entryView)}else{if(!d.isSingleCalendarView(this._calendarDiv)&&this.subCalendar.eventsHidden){this.entryView.addClass("subcalendar-disabled")}}}});return c});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:subcalendar-panel', location = 'com/atlassian/confluence/extra/calendar3/components/subcalendar-panel/subcalendar-menu-view.js' */
define("tc/subcalendar-menu-view",["jquery","underscore","tc-backbone","tc/myCalendarTour","tc/calendar-util","tc/calendar-caldav-subscribe-model","tc/subcalendar-subscribe-dialog","tc/calendar-caldav-subscribe-service"],function(f,m,l,k,h,i,e,g){var n=l.View.extend({initialize:function(o){this.cache=o.cache;this.CalendarPlugin=o.CalendarPlugin;this._calendarDiv=o._calendarDiv;this.subCalendar=o.subCalendar;this.parentSubCalendar=o.parentSubCalendar;this.$subCalendarEntryView=o.subCalendarEntryView;this.template=o.template;this.subcalendarDisplayer=o.subcalendarDisplayer},events:{"click .subcalendar-addevent":"_onAddEventClick","click .subcalendar-watch":"_onWatchClick","click .subcalendar-unwatch":"_onUnWatchClick","click .subcalendar-edit, .subcalendar-view":"_onEditClick","click .subcalendar-restrict":"_onRestrictClick","click .subcalendar-remove":"_onRemoveClick","click .subcalendar-share, .subcalendar-share-or-embed":"_onShareClick","click .subcalendar-subscribe":"_onSubscribeClick","click .subcalendar-reload":"_onRefreshClick","click .subcalendar-reminder":"_onReminderClick","click .custom-event-type-edit, .setting-reminder-setting":"_onEditEventTypeClick","click .color-cell":"_onColorCellClick","click .subcalendar-display-hide, .subcalendar-display-show":"_onDisplayClick"},render:function(){this.$el.html(this.template({subCalendar:this.subCalendar,autoConvertSupported:this.CalendarPlugin.isAutoConvertSupported(this._calendarDiv),subCalendarClasses:this.CalendarPlugin.getParameter(this._calendarDiv,"subCalendarColorClass"),parentSubCalendar:this.parentSubCalendar}));this._initExportLink();this._initDetailLink();this._initMenuItemsDropDown();return this.$el},_initMenuItemsDropDown:function(){this.$(".subcalendar-dropdown-menu").dropDown("Standard",{alignment:"right",hideHandler:function(){k.hideLeg()}})},_initExportLink:function(){this.$(".subcalendar-icalexport").attr("href",this.CalendarPlugin.getCalendarServiceBaseUrl(this._calendarDiv,"/export/subcalendar/"+encodeURIComponent(this.subCalendar.id+".ics")+"?os_authType=basic&isSubscribe=false"))},_initDetailLink:function(){this.$(".subcalendar-page").attr("href",AJS.contextPath()+"/display/"+encodeURIComponent(this.subCalendar.spaceKey)+"/calendar/"+encodeURIComponent(this.subCalendar.subscriptionId||this.subCalendar.id)+"?calendarName="+encodeURIComponent(this.subCalendar.name))},_onAddEventClick:function(o){Confluence.TeamCalendars.Dialogs.getEditEventDialog({start:new Date(),localizedStartTime:this.CalendarPlugin.getDefaultStartTime(this._calendarDiv),localizedEndTime:this.CalendarPlugin.getDefaultEndTime(this._calendarDiv),allDay:(this._calendarDiv.data(this.CalendarPlugin.PREF_LAST_ALL_DAY_USED)||"true")==="true",subCalendarId:this.subCalendar.id},this.subCalendar,this.CalendarPlugin,this._calendarDiv).show();o.preventDefault()},_onWatchClick:function(o){d(this.CalendarPlugin,this._calendarDiv,this.subCalendar,true,m.bind(function(){this.$subCalendarEntryView.addClass("watched").removeClass("not-watched")},this));o.preventDefault()},_onUnWatchClick:function(o){d(this.CalendarPlugin,this._calendarDiv,this.subCalendar,false,m.bind(function(){this.$subCalendarEntryView.removeClass("watched").addClass("not-watched")},this));o.preventDefault()},_onEditClick:function(o){this.CalendarPlugin.showSubCalendarEdit(this._calendarDiv,this.subCalendar);f("#edit-calendar-dialog").find(".button-panel-button.submit").removeClass("hidden");o.preventDefault()},_onRestrictClick:function(o){this.CalendarPlugin.getSubCalendarRestrictionsDialog(this._calendarDiv,this.subCalendar);o.preventDefault()},_onRemoveClick:function(o){if(this.CalendarPlugin.isSubCalendarDeletable(this._calendarDiv,this.subCalendar)){if(h.isJiraSubCalendar(this.subCalendar)){this.CalendarPlugin.deleteSubCalendar(this._calendarDiv,this.subCalendar)}else{this.CalendarPlugin.removeSubCalendarDialog(this._calendarDiv,this.subCalendar)}}else{this.CalendarPlugin.unsubscribeFromSubcalendar(this._calendarDiv,this.subCalendar)}o.preventDefault()},_onShareClick:function(o){this.CalendarPlugin.getSubCalendarShareDialog(this._calendarDiv,this.subCalendar);o.preventDefault()},_onSubscribeClick:function(q){var t=this.CalendarPlugin;var s=this._calendarDiv;var r=t.getSubCalendars(s);var o=new g(t,s);var p=new i({subCalendars:r,selectedSubCalId:this.subCalendar.id,baseUrl:h.getParameter(s,"baseUrl"),isPrivateUrlsEnabled:t.getParameter(s,"privateUrlsEnabled"),privateUrlProvider:m.bind(o.getPrivateUrlProvider,o)});var u=new e({calendarPlugin:t,calendarDiv:s,model:p});u.render();q.preventDefault()},_onRefreshClick:function(p){if(!this.CalendarPlugin.isSubCalendarEventsUpdatable(this._calendarDiv,this.subCalendar)||j(this.subCalendar)||h.isSubscriptionSubCalendar(this.subCalendar)){var o=this;f.ajax({cache:false,data:{subCalendarId:this.subCalendar.id},dataType:"json",error:function(q,s,r){o.CalendarPlugin.showAjaxError(o._calendarDiv,q,s,r,o.CalendarPlugin.ERROR_CLASS_SUB_CALENDAR_LIST_EVENTS+o.CalendarPlugin.getStringAsHex(o.subCalendar.id))},success:function(q){o.CalendarPlugin.setGenericErrors(o._calendarDiv,null,o.CalendarPlugin.ERROR_CLASS_SUB_CALENDAR_LIST_EVENTS+o.CalendarPlugin.getStringAsHex(o.subCalendar.id));if(q.success){o.CalendarPlugin.reloadSubCalendar(o._calendarDiv,o.subCalendar.id)}},type:"PUT",timeout:this.CalendarPlugin.ajaxTimeout,url:this.CalendarPlugin.getCalendarServiceBaseUrl(this._calendarDiv,"/subcalendars/admin/refresh.json")})}else{this.CalendarPlugin.reloadSubCalendar(this._calendarDiv,this.subCalendar.id)}p.preventDefault()},_onReminderClick:function(o){b(this.CalendarPlugin,this._calendarDiv,this.subCalendar,this.subCalendar.id,m.bind(function(){this.$subCalendarEntryView.find(".reminder-me").toggleClass("hidden");this.$subCalendarEntryView.find(".unreminder-me").toggleClass("hidden")},this),this.$subCalendarEntryView.find(".reminder-me.hidden").length?false:true);o.preventDefault()},_onEditEventTypeClick:function(o){var p=this.$subCalendarEntryView.data("customEventTypeId");if(!p){p=h.isInternalSubscriptionSubCalendar(this.subCalendar)?this.subCalendar.subscriptionType:this.subCalendar.type}this.CalendarPlugin.showCustomEventEditForm(this._calendarDiv,this.parentSubCalendar,p);o.preventDefault()},_onColorCellClick:function(q){if(!this.CalendarPlugin.isProcessingSubCalendar(this._calendarDiv)){this.CalendarPlugin.setProcessingSubCalendar(this._calendarDiv,true);var r=f(q.target);var o=this.subCalendar;var p=this;a(this.CalendarPlugin,this._calendarDiv,o,r.data("colour"),function(s){if(s.success){p.cache.removeCalendar(o.id);p.CalendarPlugin.setGenericErrors(p._calendarDiv,null,p.CalendarPlugin.ERROR_CLASS_SUB_CALENDAR_UPDATE);p.CalendarPlugin.setSubCalendars(p._calendarDiv,s.payload);p.CalendarPlugin.removeSubCalendarEventSource(p._calendarDiv,o.id);p.CalendarPlugin.updateAvailableSubCalendarsInSubCalendarPanel(p._calendarDiv);p.$subCalendarEntryView.removeClass().addClass("aui-dd-parent "+r.data("colour"))}else{p.CalendarPlugin.setGenericErrors(p._calendarDiv,"Die Farbe des Kalenders kann nicht ge\u00e4ndert werden. Bitte authentifizieren Sie zuerst.",p.CalendarPlugin.ERROR_CLASS_SUB_CALENDAR_UPDATE)}c(p.CalendarPlugin,p._calendarDiv)},c(p.CalendarPlugin,p._calendarDiv))}q.preventDefault()},_onDisplayClick:function(o){this.subcalendarDisplayer.toggleVisibility();o.preventDefault()}});var d=function(s,r,p,q,o){f.ajax({cache:false,data:{subCalendarId:p.id},dataType:"json",error:function(t,v,u){s.showAjaxError(r,t,v,u,s.ERROR_CLASS_SUB_CALENDAR_WATCH+s.getStringAsHex(p.id))},success:function(){if(o){o()}},type:q?"PUT":"DELETE",timeout:s.ajaxTimeout,url:s.getCalendarServiceBaseUrl(r,"/preferences/subcalendars/watch.json")})};var j=function(o){return o&&(h.isJiraSubCalendar(o)||f.grep(o.childSubCalendars||[],function(p){return j(p)}).length)};var b=function(s,r,q,p,o,t){f.ajax({cache:false,data:{subCalendarId:p,isReminder:t},dataType:"json",error:function(u,w,v){s.showAjaxError(r,u,w,v,s.ERROR_CLASS_SUB_CALENDAR_WATCH+s.getStringAsHex(q.id))},success:function(){if(o){o()}},type:"PUT",timeout:s.ajaxTimeout,url:s.getCalendarServiceBaseUrl(r,"/preferences/subcalendars/setreminder.json")})};var c=function(p,o){p.setProcessingSubCalendar(o,false)};var a=function(u,t,r,s,o,p){var q=u.setSubCalendarSpinnerIconVisible(true);f.ajax({cache:false,converters:{"text json":function(v){return v}},data:(function(){var v={subCalendarId:r.id,color:s};if(u.getParameter(t,"include")){v.include=u.getParameter(t,"include")}h.putCalendarContextParams(v);return v})(),dataType:"json",dataFilter:function(v){var w=f.parseJSON(v);if(w.success){u.mergeSubCalendarObjectsToArray(w.payload)}return w},error:function(v,x,w){u.showAjaxError(t,v,x,w,u.ERROR_CLASS_SUB_CALENDAR_UPDATE);if(p){p(v,x,w)}},success:function(v){if(o){o(v)}},complete:function(){if(q){q.resolve()}},type:"PUT",timeout:u.ajaxTimeout,url:u.getCalendarServiceBaseUrl(t,"/subcalendars/color.json")})};return n});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:subcalendar-panel', location = 'com/atlassian/confluence/extra/calendar3/components/subcalendar-panel/child-subcalendar-entry-view.js' */
define("tc/child-subcalendar-entry-view",["jquery","tc-backbone","tc/calendar-util","tc/subcalendar-menu-view","tc/subcalendar-displayer"],function(d,f,b,c,a){var e=f.View.extend({initialize:function(g){this.cache=g.cache;this.parentSubCalendar=g.parentSubCalendar;this.childSubCalendar=g.childSubCalendar;this.customEventType=g.customEventType;this.CalendarPlugin=g.CalendarPlugin;this._calendarDiv=g._calendarDiv;this.parentView=g.parentView;this.template=g.template},render:function(){this.$el.html(this.template({childSubCalendar:this.childSubCalendar,customEventType:this.customEventType}));this.entryView=this.$(".child-subcalendar");this.entryView.hover(this._onHover.bind(this));this.entryView.click(this._onClick.bind(this));var g={cache:this.cache,CalendarPlugin:this.CalendarPlugin,_calendarDiv:this._calendarDiv,subCalendar:this.childSubCalendar,parentSubCalendar:this.parentSubCalendar,subCalendarEntryView:this.entryView,autoConvertSupported:this.CalendarPlugin.isAutoConvertSupported(this._calendarDiv),subCalendarClasses:this.CalendarPlugin.getParameter(this._calendarDiv,"subCalendarColorClass")};if(this.customEventType){g.template=Confluence.TeamCalendars.Templates.customEventTypeMenu}else{g.template=Confluence.TeamCalendars.Templates.childSubCalendarMenu}this.entryView.append(new c(g).render());this._ellipsisChildSubCalendarName();this.subcalendarDisplayer=new a({CalendarPlugin:this.CalendarPlugin,_calendarDiv:this._calendarDiv,entryView:this.entryView,subCalendar:this.childSubCalendar,parentView:this.parentView,parentSubCalendar:this.parentSubCalendar});return this.$el},_ellipsisChildSubCalendarName:function(){var g=this.$(".child-subcalendar-name");if(!g.attr("threedots")){g.attr("title",this.$(".ellipsis_text").text())}},_onHover:function(){this.entryView.toggleClass("active-child-subcalendar")},_onClick:function(g){if(d(g.target).closest(".subcalendar-dropdown-menu").length>0){return}this.subcalendarDisplayer.toggleVisibility()}});return e});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:subcalendar-panel', location = 'com/atlassian/confluence/extra/calendar3/components/subcalendar-panel/subcalendar-menu-builder.js' */
define("tc/subcalendar-menu-builder",["jquery","underscore","tc/calendar-util","confluence/meta"],function(d,a,b,c){var f=c.get("remote-user")==="";var e=function(r,t,j){var p=t.getParameter(r,"readOnly")==="true",n=t.getParameter(r,"isNotificationsEnabled")==="true",m=t.getParameter(r,"hideEditMenuItem")==="true",o=t.getParameter(r,"hideRemoveMenuItem")==="true",k=t.getParameter(r,"hideColorGrid")==="true",i=AJS.Meta.get("remote-user");function g(u,v){if(b.isSingleCalendarView(r)){l(u,v)}else{q(u,v)}}function q(v,w){var x=b.isJiraSubCalendar(v),u=b.isSubscriptionSubCalendar(v);v.displayName=v.name;if(b.isSubscriptionSubCalendar(v)&&!w){v.menuOptions={showMenu:false}}else{v.menuOptions={showMenu:true,showAddEvent:!p&&!x&&v.eventsEditable,showWatch:!p,showNotifications:n&&!w,showEdit:s(v)||(b.isSubscriptionSubCalendar(v)&&v.administrable),showView:!m&&!p&&!v.editable,showRestrictions:!p&&v.administrable&&!x,showRemove:!o&&!p&&v.editable&&((!w||b.isSubscriptionSubCalendar(v))?true:v.eventsEditable),showShareAndSubscribe:v.eventsViewable&&!x,showSubscribe:!x&&!f,showICalExport:!f,showColourGrid:!k&&(u||x)&&i.length>0,showReload:v.reloadable,showDisplayLink:true}}}function l(u,v){q(u,v);var w=u.menuOptions;w.showEdit=false;w.showRemove=false;if(b.isJiraSubCalendar(u)){w.showEdit=true;w.showRemove=true}w.showRestrictions=false;w.showDisplayLink=false;u.menuOptions=w}function s(u){return !p&&u.editable&&u.eventsEditable}function h(u,x){var v=x.subscriptionType||x.type;if(b.isEventTypeSanbox(v)||b.isJiraType(v)){var w=b.getPeriodReminderEventTypeSanboxOrJira(u,v);return w!==undefined&&w>0}else{if(b.isCustomEventType(v)){return x.customEventTypes&&x.customEventTypes[0].periodInMins>0}}}a.each(j,function(u){g(u,false);if(u.childSubCalendars){a.each(u.childSubCalendars,function(x){var v=x.typeKey;var w=t.getEventTypeNames(v);if(b.isSubscriptionSubCalendar(x)){g(x,true);x.menuOptions=d.extend(x.menuOptions,{showDisplayLink:false})}else{if(b.isJiraSubCalendar(x)){g(x,true);x.menuOptions=d.extend(x.menuOptions,{showReminder:i.length>0&&h(u,x),showSettingReminder:i.length>0&&!h(u,x)&&s(u),showDisplayLink:false})}else{x.menuOptions={showMenu:true,showColourGrid:i.length>0,showReload:true,showReminder:i.length>0&&h(u,x),showSettingReminder:i.length>0&&!h(u,x)&&s(u)};x.displayName=w}}})}})};return{build:e}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:subcalendar-panel', location = 'com/atlassian/confluence/extra/calendar3/components/subcalendar-panel/subcalendar-displayer.js' */
define("tc/subcalendar-displayer",["jquery","underscore","tc/calendar-util"],function(d,b,c){var a=function(n){var l=n.CalendarPlugin,k=n._calendarDiv,h=n.entryView,i=n.subCalendar,e=n.childSubCalendarIds,f=n.childSubCalendarViews,m=n.parentView,g=n.parentSubCalendar;var j=function(){var q;var r=h.hasClass("child-subcalendar");if(r){q=[i.id]}else{q=b.clone(e)}var o=!h.hasClass("subcalendar-disabled");h.toggleClass("subcalendar-disabled",o);if(!r){h.toggleClass("allchildsubcalendar-disabled",o);b.each(f,b.bind(function(s){s.toggleClass("subcalendar-disabled",o);s.find(".child-subcalendar-checkbox").prop("checked",!o)},this))}else{h.find(".child-subcalendar-checkbox").prop("checked",!o)}if(!c.isDummySubscriptionParentSubCalendar(r?g:i)){q.push(i.id)}if(!c.isSingleCalendarView(k)){l.setSubCalendarEventsHidden(k,q,o,m)}if(o){l.removeSubCalendarEventSource(k,q)}else{l.addSubCalendarEventSource(k,q)}var p="";if(r){if(o){p="hide.event.click."}else{p="show.event.click."}}else{if(o){p="hide.calendar.click."}else{p="show.calendar.click."}}if(c.isSingleCalendarView(k)){p+="singleCalendar"}else{p+=Confluence.TeamCalendars.getCalendarContext()}Confluence.TeamCalendars.fireEventForAnalytics(p)};return{toggleVisibility:function(){j()}}};return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.share-page:share-dialog-service', location = 'js/service/share-page.js' */
define("confluence/share-page/service/share-page",["ajs","wrm","jquery"],function(k,e,c){return{initDialog:function(d,f,g,a){var b=c(d);if(b.length)b.off("click.share-page").on("click.share-page",function(h){b.off("click.share-page");a.beforeLoad&&"function"===typeof a.beforeLoad&&a.beforeLoad();e.require(["wrc!share-page-async-loader"]).done(function(){a.afterLoad&&"function"===typeof a.afterLoad&&a.afterLoad();require("confluence/share-page/dialog-async-loader")(d,f,c.extend(!1,{hideCallback:function(){a.onHide&&
"function"===typeof a.onHide&&a.onHide()},width:250,hideDelay:36E5},g),a);b.click()});h.preventDefault();return!1})}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.share-page:share-dialog-service', location = 'js/service/share-dialog-loader.js' */
define("confluence/share-page/service/share-dialog-loader",["wrm","confluence/api/logger"],function(a,b){return{init:function(c,d){a.require(["wrc!share-dialog-react"]).done(function(){require(["share-dialog-react"],function(a){a.init(c,d)})}).fail(function(){b.error("fail to load share-dialog-app")})}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendars-in-space', location = 'com/atlassian/confluence/extra/calendar3/components/calendars-in-space/calendar-navigation-buttons-view.js' */
define("tc/subcalendar-navigation-buttons-view",["jquery","underscore","tc/calendar-util","tc/util","tc/calendar-add-inline-dialog","tc-backbone","confluence/share-page/service/share-page","confluence/api/logger"],function(c,g,d,e,i,f,a,h){var b=f.View.extend({events:{"click .edit-calendar-button, #editCalendarLink":"_onEditButtonClick","click .add-calendar-button":"_onAddButtonClick"},initialize:function(j){this._calendarDiv=j._calendarDiv;this.CalendarPlugin=j.CalendarPlugin;AJS.bind("calendar.loaded",g.bind(this._onCalendarLoaded,this));AJS.bind("calendar.removed",g.bind(this._onCalendarRemoved,this));AJS.bind("calendar.watch.statuses.loaded",g.bind(this._onWatchStatusLoaded,this));this.inlineAddCalendarDialog=new i({callbackHandler:this.CalendarPlugin.getRenderedMacroCallbackHandler(this._calendarDiv)})},render:function(){this._initShareButton();if(d.isSpaceCalendarView(this._calendarDiv)){var k=!c(".no-calendar-page").is(":visible");this.$(".add-calendar-button").toggleClass("hidden",!k);this.$(".add-calendar-button-more").toggleClass("hidden",!k)}else{if(d.isSingleCalendarView(this._calendarDiv)){if(this.subCalendar){var j=this.CalendarPlugin.getParameter(this._calendarDiv,"readOnly")!=="true"&&this.subCalendar.editable&&this.subCalendar.eventsEditable;this.$(".edit-calendar-button").toggleClass("hidden",!j)}}}this.inlineAddCalendarDialog.render()},_initShareButton:function(){var n=this;var l=".share-calendar-button";var k=this.$(l);var q=!c(".no-calendar-page").is(":visible");var s=d.getParameter(this._calendarDiv,"enableShareCalendar");var r=true;if(this.subCalendar){r=this.subCalendar.eventsViewable}else{if(d.isSingleCalendarView(this._calendarDiv)){r=false}}var o=q&&s&&r;k.toggleClass("hidden",!o);if(o&&!this.shareDialogLoaded){var j,p,m;if(d.isSingleCalendarView(this._calendarDiv)){j="singleCalendar";p="Sehen Sie sich diesen Kalender an (optional)";m="Kalender teilen"}else{if(d.isSpaceCalendarView(this._calendarDiv)){j="spaceCalendars";p="Sehen Sie sich Bereichs-Kalender an (optional)";m="Bereichs-Kalender teilen"}else{h.warn("Unable to create share button: cannot share calendar from anywhere other than space calendars or single calendar");return}}var t=d.getCustomContentType(this._calendarDiv);a.initDialog(l,"shareContentPopup",{offsetX:-110},{heading:m,notePlaceholder:p,copyOption:"share",entityId:function(){return d.getParameter(n._calendarDiv,"contentId")},contentType:t,shareType:"custom",errorText:"Es kann keine Verbindung hergestellt werden. Sie k\u00f6nnen zurzeit leider nichts teilen. Versuchen Sie es sp\u00e4ter noch einmal.",beforeLoad:function(){k.find(".aui-icon").css("visibility","hidden");k.spin();k.find("aui-spinner").css("left","-23px")},afterLoad:function(){k.find(".aui-icon").css("visibility","visible");k.spinStop()},onShow:function(){Confluence.TeamCalendars.fireEventForAnalytics("share.calendar.click."+j)},});this.shareDialogLoaded=true}},_onEditButtonClick:function(j){this.CalendarPlugin.showSubCalendarEdit(this._calendarDiv,this.subCalendar);c("#edit-calendar-dialog").find(".button-panel-button.submit").removeClass("hidden");j.preventDefault();return false},_onCalendarLoaded:function(k,j){if(d.isSingleCalendarView(this._calendarDiv)){this.subCalendar=j}var l=this.CalendarPlugin.getParameter(this._calendarDiv,"contentId");AJS.params.pageId=l?l:AJS.params.pageId;this.render()},_onCalendarRemoved:function(){this.render()},_onWatchStatusLoaded:function(k,j){},_onAddButtonClick:function(k){Confluence.TeamCalendars.fireEventForAnalytics("add.calendar.click.new."+Confluence.TeamCalendars.getCalendarContext());var j=Confluence.TeamCalendars.Dialogs.getSubCalendarCreateDialog("parent",this.CalendarPlugin.getRenderedMacroCallbackHandler(this._calendarDiv));e.showDialogInUpdatedHeight(j);c("input[name='name']",j.getCurrentPanel().body).focus();c("#inline-dialog-inline-dialog-more").hide();k.preventDefault();return false}});return b});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendars-in-space', location = 'com/atlassian/confluence/extra/calendar3/components/calendars-in-space/calendar-restriction-button-view.js' */
define("tc/subcalendar-restriction-button-view",["jquery","underscore","tc/calendar-util"],function(d,a,b){var c=Backbone.View.extend({events:{"click .restrict-calendar-button":"_onRestrictionClick"},initialize:function(e){this._calendarDiv=e._calendarDiv;this.CalendarPlugin=e.CalendarPlugin;AJS.bind("calendar.loaded",a.bind(this._onCalendarLoaded,this))},render:function(){var e=b.hasRestriction(this.subCalendar);this.$(".restrict-calendar-button.restricted").toggleClass("hidden",!e);this.$(".restrict-calendar-button.no-restricted").toggleClass("hidden",e)},_onRestrictionClick:function(){if(this.CalendarPlugin.getParameter(this._calendarDiv,"readOnly")!=="true"&&this.subCalendar.administrable&&!b.isJiraSubCalendar(this.subCalendar)){this.CalendarPlugin.getSubCalendarRestrictionsDialog(this._calendarDiv,this.subCalendar)}event.preventDefault()},_onCalendarLoaded:function(f,e){if(b.isSingleCalendarView(this._calendarDiv)){this.subCalendar=e;this.render()}}});return c});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:internal-subscription-subcalendar', location = 'com/atlassian/confluence/extra/calendar3/components/internal-subscription-subcalendar/internal-subscription-subcalendar.js' */
define("tc/internal-subscription-subcalendar",["jquery","tc/templates","tc/calendar-util"],function(d,b,a){var c=Backbone.View.extend({getDialog:function(i,f,e){var h;var g;var j=function(m,l){m.resetFieldErrors();if(m.isNewCalendar()){m.setFormModeCreate();m.setHeading("Neuer Kalender",i);m.setSubCalendarIdField("");m.setSubscriptionIdField("");m.setNameField("");m.setDescriptionField("");m.setColorField(e.getNextCalendarColor());m.setSpaceToDefault();m.setTimeZoneIdDisplayField("")}else{m.setFormModeEdit();m.setHeading(f.name,i);m.setSubCalendarIdField(f.id);m.setSubscriptionIdField(f.subscriptionId||"");m.setNameField(f.name);m.setDescriptionField(f.description);m.setColorField(f.color);m.setSpaceKeyField(f.spaceKey);m.setSpaceKeyAutocompleteField(f.spaceName);m.setTimeZoneIdDisplayField(f.timeZoneId);if(!(f.restrictable&&f.administrable)){d(".field-group-permissions",l).remove()}}var n=d("textarea[name='description'], input[name='spaceKeyAutocomplete']",l);if(e.isCalendarInEditMode()){n.removeAttr("readonly")}else{m.setFormModeReadOnly();n.attr("readonly","readonly")}if(m.isNewCalendar()&&AJS.Meta.get("space-key")){var k=d(".field-group-space-permission",l);k.addClass("hidden")}};return{initializeForm:function(k){i.addHeader("Neuer Kalender");i.addPanel("Allgemein",b.editInternalSubcalendar(),"calendar-dialog-panel");g=d("form.sub-calendar-edit-form",i.getCurrentPanel().body);h=Confluence.TeamCalendars.getEditCalendarDialogHelper(g,f,e);h.initSpaceDropDown();h.initOkButton("OK",i);h.initCloseButton(i,k);j(h,g);return g},getFormDataAsAjaxData:function(){var k={type:"internal-subscription",subCalendarId:d("input[name='subCalendarId']",g).val(),name:d("input[name='name']",g).val(),description:d("textarea[name='description']",g).val(),color:d("input[name='color']",g).val(),spaceKey:d("input[name='spaceKeyAutocomplete']",g).val()?d("input[name='spaceKey']",g).val():"",location:"subscription://"+d("input[name='subscriptionId']",g).val()};a.putCalendarContextParams(k);return k},onSubmitStart:function(){h.disableOkButton("Wird hinzugef\u00fcgt...")},onSubmitEnd:function(){h.enableOkButton("OK")}}},weight:1000,typeName:"Unbekannter Typ"});return c});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:internal-subscription-subcalendar', location = 'com/atlassian/confluence/extra/calendar3/components/internal-subscription-subcalendar/internal-subscription-subcalendar.soy' */
// This file was automatically generated from internal-subscription-subcalendar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.editInternalSubcalendar = function(opt_data, opt_ignored) {
  return '<form name="editSubCalendarForm" class="sub-calendar-edit-form aui" method="POST" action="#"><input type="hidden" name="subCalendarId" value=""><input type="hidden" name="type" value="internal-subscription"><input type="hidden" name="color" value=""><input type="hidden" name="subscriptionId" value=""><input type="hidden" name="spaceKey" value=""><div class="form-mode create"><div class="subcalendar-type subcalendar-interal-subscription"><div class="field-group field-group-name"><label for="name">' + soy.$$escapeHtml('Name') + '<span class="aui-icon icon-required"></span></label><input name="name" id="name" type="text" class="text" value="" autocomplete="off"><div class="error name-error"></div></div><div class="field-group field-group-description"><label for="description">' + soy.$$escapeHtml('Beschreibung') + '</label><textarea name="description" id="description" rows="5" class="textarea"></textarea></div><div class="field-group field-group-space-permission"><label for="spaceKeyAutocomplete">' + soy.$$escapeHtml('Zugeh\xf6riger Bereich') + '<span class="aui-icon icon-required"></span></label><input name="spaceKeyAutocomplete" id="spaceKeyAutocomplete" type="text" class="autocomplete-space text" data-max="5" data-none-message="' + soy.$$escapeHtml('Keine Bereiche gefunden') + '"><div class="description">' + soy.$$escapeHtml('Diesen Kalender mit einem Bereich verkn\xfcpfen') + '</div><div class="error spaceKeyAutocomplete-error"></div></div><div class="field-group field-group-timezone-display"><label>' + soy.$$escapeHtml('Zeitzone') + '</label><span class="timeZoneIdDisplay field-value"></span></div></div></div></form>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.editInternalSubcalendar.soyTemplateName = 'Confluence.TeamCalendars.Templates.editInternalSubcalendar';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:internal-subscription-subcalendar', location = 'com/atlassian/confluence/extra/calendar3/components/internal-subscription-subcalendar/internal-subscription-subcalendar-compact.js' */
require(["tc/internal-subscription-subcalendar"],function(a){if(!window.Confluence.TeamCalendars.subcalendar){window.Confluence.TeamCalendars.subcalendar={}}if(!window.Confluence.TeamCalendars.subcalendar["internal-subscription"]){window.Confluence.TeamCalendars.subcalendar["internal-subscription"]=new a({})}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:infinite-list', location = 'com/atlassian/confluence/extra/calendar3/components/infinite-list/infinitelist.js' */
define("tc/infinite-list",["jquery","underscore","tc-backbone","exports"],function(d,b,e,a){function c(p){var h=p.$el;var o=p.load;var n=p.$container||d(window);var i=p.body||document.body;var g=p.scrollMargin||300;var k=p.isLoadMoreItems||false;var j=h.data("page-size");var l=1;function f(){o(l,j);l+=1}function m(){var r=k==true?k:h.children().length>=j;var q=i.scrollHeight-n.scrollTop()-g<=n.height();if(r&&q){f()}}n.bind("scroll.list",b.debounce(m,100));m();this.destroy=function(){n.off("scroll.list")}}b.extend(c.prototype,e.Events);a.init=function(f){return new c(f)}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-on-space-resources', location = 'com/atlassian/confluence/extra/calendar3/js/calendar-on-space.js' */
(function(a){a(function(){function b(){var c="com.atlassian.confluence.extra.team-calendars:tc-on-space-blueprint-webitem";Confluence.Blueprint.setDirectCallback(c,function(f,d){d.finalUrl=Confluence.getContextPath()+"/display/"+d.spaceKey+"/calendars?src=sidebar&openAddCalDialog=true"})}b()})}(AJS.$));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:non-space-calendars-dialog', location = 'com/atlassian/confluence/extra/calendar3/components/non-space-calendars-dialog/non-space-calendar-entry-view.js' */
define("tc/non-space-calendar-entry-view",["jquery","underscore","tc-backbone","ajs","tc/calendar-util"],function(d,b,f,a,c){var e=f.View.extend({initialize:function(g){this.template=Confluence.TeamCalendars.Templates.nonSpaceCalendarEntry;this.subCalendar=g.subCalendar;this.CalendarPlugin=g.CalendarPlugin;this._calendarDiv=g._calendarDiv;this.cache=g.cache},render:function(){this.$el.html(this.template({subCalendar:this.subCalendar}));this.spaceKeyAutocompleteField=this.$("input.autocomplete-space");this.spaceKeyField=this.$("input.space-key");this.spaceKeyAutocompleteField.keypress(b.bind(function(g){if(g.which!==13){this.spaceKeyField.val(g.which)}},this));this.spaceKeyAutocompleteField.bind("selected.autocomplete-content",b.bind(function(h,g){this.spaceKeyField.val(g.content.key);this.spaceKeyAutocompleteField.val(g.content.name)},this));this.successIcon=this.$(".success-icon");this.errorIcon=this.$(".error-icon");this.spinnerIcon=this.$(".spinner");this.errorMessageDiv=this.$(".error-message");return this.$el},getData:function(){return{calendarId:this.subCalendar.id,spaceKey:this.spaceKeyField.val()}},isUpdateSuccessfully:function(){return this.spaceKeyAutocompleteField.attr("updated")==="true"},updateSubCalendar:function(){if(this.isUpdateSuccessfully()){return}var g=this.getData();if(!g.spaceKey){return}this.spinnerIcon.show();return d.ajax({cache:false,data:JSON.stringify(g),contentType:"application/json",dataFilter:function(h){var i=d.parseJSON(h);if(i.success){c.mergeSubCalendarObjectsToArray(i.payload)}return i},dataType:"json",converters:{"text json":function(h){return h}},error:b.bind(function(i,k,j){var h=JSON.parse(i.responseText)[0]||"Uh oh. Es sieht aus, als ob etwas unerwartet schief gelaufen ist. Bitte \u00fcberpr\u00fcfen Sie die Confluence Log-Datei.";this._showResult(false,h);c.fireEventForAnalytics("non.space.calendars.upgrade.one.calendar.failed")},this),success:b.bind(function(h){if(h.success){this._showResult(true,"");this._hide();this.CalendarPlugin.setSubCalendar(g.calendarId,this._calendarDiv,h.payload);c.fireEventForAnalytics("non.space.calendars.upgrade.one.calendar.successful")}else{var i=(h.fieldErrors&&h.fieldErrors.length)?h.fieldErrors[0].errorMessages[0]:"Uh oh. Es sieht aus, als ob etwas unerwartet schief gelaufen ist. Bitte \u00fcberpr\u00fcfen Sie die Confluence Log-Datei.";this._showResult(false,i);c.fireEventForAnalytics("non.space.calendars.upgrade.one.calendar.failed")}},this),type:"POST",timeout:c.ajaxTimeout,url:Confluence.TeamCalendars.getCalendarServiceBaseUrl("/subcalendar/space")})},_hide:function(){this.$el.animate({height:0,opacity:0},500,function(){d(this).remove()})},_showResult:function(h,g){this.spinnerIcon.hide();this.successIcon.toggleClass("hidden",!h);this.errorIcon.toggleClass("hidden",h);this.errorMessageDiv.toggleClass("hidden",h);if(h){this.spaceKeyAutocompleteField.prop("disabled",true);this.spaceKeyAutocompleteField.attr("updated","true")}if(g){this.errorMessageDiv.text(g)}}});return e});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:non-space-calendars-dialog', location = 'com/atlassian/confluence/extra/calendar3/components/non-space-calendars-dialog/non-space-calendars-dialog-view.js' */
define("tc/non-space-calendars-dialog-view",["jquery","underscore","tc-backbone","ajs","tc/calendar-util","tc/non-space-calendar-entry-view"],function(e,b,h,a,d,f){var c;var g=h.View.extend({events:{},initialize:function(i){this.subCalendars=i.subCalendars;this.nonSpaceCalendarEntryViews=[];this.CalendarPlugin=i.CalendarPlugin;this._calendarDiv=i._calendarDiv;this.cache=i.cache},setSubCalendars:function(i){this.subCalendars=i},render:function(){if(!c){c=this.dialog=new a.Dialog(600,600,"non-space-calendars-dialog");var i="Der Kalender ben\u00f6tigt einen zugeh\u00f6rigen Bereich";c.addHeader(i);c.addPanel(i,Confluence.TeamCalendars.Templates.nonSpaceCalendarsDialog(),"non-space-calendars-panel");c.addSubmit("Speichern",b.bind(this._onSubmit,this));c.addCancel("Jetzt nicht",b.bind(this._onCancel,this));this.setElement(c.getCurPanel().body)}this._renderNonSpaceCalendarEntries();c.show()},_renderNonSpaceCalendarEntries:function(){this.nonSpaceCalendarEntryViews=[];this.$(".non-space-calendars-list").empty();b.each(this.subCalendars,b.bind(function(j){var i=new f({subCalendar:j,CalendarPlugin:this.CalendarPlugin,_calendarDiv:this._calendarDiv,cache:this.cache});this.nonSpaceCalendarEntryViews.push(i);this.$(".non-space-calendars-list").append(i.render())},this))},_onSubmit:function(){var i=[];b.each(this.nonSpaceCalendarEntryViews,function(j){var k=j.updateSubCalendar("onSubmit");if(k!==undefined){i.push(k)}});e.when.apply(e,i).done(b.bind(function(){var j=true;b.each(this.nonSpaceCalendarEntryViews,function(k){if(!k.isUpdateSuccessfully()){j=false}});if(j){this.CalendarPlugin.updateAvailableSubCalendarsInSubCalendarPanel(this._calendarDiv);c.hide();d.fireEventForAnalytics("non.space.calendars.upgrade.all.calendars.successful")}},this));d.fireEventForAnalytics("non.space.calendars.upgrade.dialog.submit.click");return false},_onCancel:function(){var i=false;b.each(this.nonSpaceCalendarEntryViews,function(j){if(j.isUpdateSuccessfully()){i=true}});if(i){this.CalendarPlugin.updateAvailableSubCalendarsInSubCalendarPanel(this._calendarDiv)}c.hide();d.fireEventForAnalytics("non.space.calendars.upgrade.dialog.cancel.click");return false}});return g});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:non-space-calendars-dialog', location = 'com/atlassian/confluence/extra/calendar3/components/non-space-calendars-dialog/non-space-calendars-handler.js' */
define("tc/non-space-calendars-handler",["jquery","underscore","tc/calendar-util","tc/non-space-calendars-warning-view"],function(d,a,b,e){var c;return{handle:function(j,i,f,h){if(b.isMyCalendarView(i)){var g=a.filter(h,function(k){return k.eventsEditable&&(k.spaceKey===undefined||k.spaceKey==="")});if(!c){c=new e({el:".non-space-calendars-warning",CalendarPlugin:j,_calendarDiv:i,cache:f})}c.render(g)}}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:non-space-calendars-dialog', location = 'com/atlassian/confluence/extra/calendar3/components/non-space-calendars-dialog/non-space-calendars-warning-view.js' */
define("tc/non-space-calendars-warning-view",["jquery","underscore","tc-backbone","ajs","tc/calendar-util","tc/non-space-calendars-dialog-view"],function(d,b,g,a,c,f){var e=g.View.extend({events:{"click .fix-calendars-link":"_onFixCalendarLinkClick"},initialize:function(h){this.CalendarPlugin=h.CalendarPlugin;this._calendarDiv=h._calendarDiv;this.cache=h.cache},render:function(h){this.nonSpaceCalendars=h;this.$(".title strong").text(a.format("{0} dieser Kalender m\u00fcssen einem Space zugeordnet werden.",this.nonSpaceCalendars.length));if(this.nonSpaceCalendars&&this.nonSpaceCalendars.length>0){this.show()}else{this.hide()}},show:function(){this.$el.removeClass("hidden")},hide:function(){this.$el.addClass("hidden")},_onFixCalendarLinkClick:function(){if(!this.nonSpaceCalendarsDialogView){this.nonSpaceCalendarsDialogView=new f({subCalendars:this.nonSpaceCalendars,CalendarPlugin:this.CalendarPlugin,_calendarDiv:this._calendarDiv,cache:this.cache})}this.nonSpaceCalendarsDialogView.setSubCalendars(this.nonSpaceCalendars);this.nonSpaceCalendarsDialogView.render();c.fireEventForAnalytics("non.space.calendars.upgrade.link.click");return false}});return e});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:non-space-calendars-dialog', location = 'com/atlassian/confluence/extra/calendar3/components/non-space-calendars-dialog/non-space-calendars-dialog.soy' */
// This file was automatically generated from non-space-calendars-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.nonSpaceCalendarsDialog = function(opt_data, opt_ignored) {
  return '<div class="non-space-calendars-dialog"><div class="info"><span><b>' + soy.$$escapeHtml('Ordnen Sie diese Kalender einem bestimmten Space zu, damit sie leichter gefunden werden k\xf6nnen:') + '</b></span><ul><li><b>' + soy.$$escapeHtml('Entdecken') + '</b> \u2013 ' + soy.$$escapeHtml('Kalender, wo Sie arbeiten, in Ihrem Team- oder dem Projekt-Space') + '</li><li><b>' + soy.$$escapeHtml('Beobachten') + '</b> \u2013 ' + soy.$$escapeHtml('Wenn Sie einen Bereich beobachten, beobachten Sie automatisch dessen Kalender.') + '</li><li><b>' + soy.$$escapeHtml('Verwalten') + '</b> \u2013 ' + soy.$$escapeHtml('Nur Personen mit der Berechtigung den Bereich zusehen, sehen den Kalender') + '</li><li><b>' + soy.$$escapeHtml('Teilen') + '</b> \u2013 ' + soy.$$escapeHtml('Teile Bereichskalender genauso wie eine Confluence-Seite') + '</li></ul></div><div class="separator"></div><form class="aui non-space-calendars-form"><div class="header"><div class="col1"><b>' + soy.$$escapeHtml('Kalender') + '</b></div><div class="col2"><b>' + soy.$$escapeHtml('Verwandter Bereich') + '</b></div></div><div class="non-space-calendars-list"></div></form></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.nonSpaceCalendarsDialog.soyTemplateName = 'Confluence.TeamCalendars.Templates.nonSpaceCalendarsDialog';
}


Confluence.TeamCalendars.Templates.nonSpaceCalendarEntry = function(opt_data, opt_ignored) {
  return '<div class="field-group field-group-' + soy.$$escapeHtml(opt_data.subCalendar.id) + '"><label for="spaceKeyAutocomplete-' + soy.$$escapeHtml(opt_data.subCalendar.id) + '">' + soy.$$escapeHtml(opt_data.subCalendar.name) + '</label><input name="spaceKeyAutocomplete-' + soy.$$escapeHtml(opt_data.subCalendar.id) + '" type="text" class="autocomplete-space text" data-max="5" placeholder="' + soy.$$escapeHtml('Bereichsnamen eingeben.') + '" data-none-message="' + soy.$$escapeHtml('Keine Bereiche gefunden') + '" data-template="{key}" data-dropdown-target=".field-group-' + soy.$$escapeHtml(opt_data.subCalendar.id) + ' .dropdown"><div class="status-icon"><div class="spinner invisible aui-icon aui-icon-wait hidden"></div><span class="aui-icon aui-icon-error error-icon hidden"></span><span class="success aui-icon aui-icon-success success-icon hidden"></span></div><div class="spaceKeyAutocomplete-error error-message"></div><div class="dropdown"></div><input name="spaceKey-' + soy.$$escapeHtml(opt_data.subCalendar.id) + '" type="hidden" class="space-key"></input></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.nonSpaceCalendarEntry.soyTemplateName = 'Confluence.TeamCalendars.Templates.nonSpaceCalendarEntry';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:event-type-icons', location = 'com/atlassian/confluence/extra/calendar3/templates/soy/icons.soy' */
// This file was automatically generated from icons.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 * @modName {EventIcons}
 * @hassoydeltemplate {eventIcon}
 * @hassoydelcall {eventIcon}
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.__deltemplate_s2_cbe40ab3 = function(opt_data, opt_ignored) {
  return '<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g  fill-rule="evenodd"><path d="M9.746 18.055a1.87 1.87 0 0 0 1.875-1.876l-3.758-.007a1.888 1.888 0 0 0 1.883 1.883zM4.879 6.695a4.712 4.712 0 0 1 1.383-3.35 4.714 4.714 0 0 1 2.406-1.29.945.945 0 0 1 .941-1.04.952.952 0 0 1 .945 1.044 4.765 4.765 0 0 1 3.806 4.654l.002.838c.002 1.107.288 2.855.638 3.901l.97 2.899c.168.498-.123.9-.651.9L3.953 15.23c-.527-.001-.819-.41-.656-.904l.96-2.894c.344-1.036.626-2.79.623-3.899l-.001-.838z"/></g></svg>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.__deltemplate_s2_cbe40ab3.soyTemplateName = 'Confluence.TeamCalendars.Templates.__deltemplate_s2_cbe40ab3';
}
soy.$$registerDelegateFn(soy.$$getDelTemplateId('eventIcon'), 'campaign', 1, Confluence.TeamCalendars.Templates.__deltemplate_s2_cbe40ab3);


Confluence.TeamCalendars.Templates.__deltemplate_s4_624d32d2 = function(opt_data, opt_ignored) {
  return '<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g fill-rule="evenodd"><path d="M9 14.28V9h2v5.28l2.294.764a.968.968 0 0 1 .7 1.067.996.996 0 0 1-.023.13A.968.968 0 0 1 13 17H7a.968.968 0 0 1-.97-.76.996.996 0 0 1-.024-.13.968.968 0 0 1 .7-1.066L9 14.279z" /><path d="M6.762 6L10 8.698 13.238 6H6.762zm3.878 4.768a1 1 0 0 1-1.28 0l-6-5C2.64 5.17 3.065 4 4 4h12c.935 0 1.359 1.17.64 1.768l-6 5z"  fill-rule="nonzero"/><circle  cx="15" cy="5" r="3"/></g></svg>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.__deltemplate_s4_624d32d2.soyTemplateName = 'Confluence.TeamCalendars.Templates.__deltemplate_s4_624d32d2';
}
soy.$$registerDelegateFn(soy.$$getDelTemplateId('eventIcon'), 'party', 1, Confluence.TeamCalendars.Templates.__deltemplate_s4_624d32d2);


Confluence.TeamCalendars.Templates.__deltemplate_s6_f29f5d11 = function(opt_data, opt_ignored) {
  return '<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g  fill-rule="nonzero"><path d="M17.43 9.52a1.001 1.001 0 1 1 .137 1.998 6.46 6.46 0 0 0-3.39 1.244l1.843 1.843a1 1 0 1 1-1.415 1.416l-1.843-1.843a6.46 6.46 0 0 0-1.245 3.389 1 1 0 1 1-1.997-.137 8.466 8.466 0 0 1 1.815-4.68L10 11.417 5.395 16.02a1.001 1.001 0 0 1-1.415-1.416L8.584 10 7.25 8.665a8.468 8.468 0 0 1-4.68 1.815 1.001 1.001 0 1 1-.136-1.998 6.46 6.46 0 0 0 3.39-1.244L3.98 5.395A1 1 0 1 1 5.395 3.98l1.843 1.843a6.455 6.455 0 0 0 1.244-3.39 1 1 0 1 1 1.998.138 8.466 8.466 0 0 1-1.815 4.68L10 8.583l4.605-4.605a1.001 1.001 0 0 1 1.415 1.416L11.416 10l1.335 1.335a8.468 8.468 0 0 1 4.68-1.815zm-7.428.48l.353-.354 4.959-4.959L10 10 7.306 7.304l-.38-.38-2.237-2.237c-.002 0 .869.872 2.612 2.615L9.998 10l-.353.354-4.959 4.959L10 10l2.695 2.695.38.38 2.236 2.237c.002 0-.869-.872-2.612-2.615L10.002 10z"/><path d="M10 17a7 7 0 1 0 0-14 7 7 0 0 0 0 14zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18z"/></g></svg>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.__deltemplate_s6_f29f5d11.soyTemplateName = 'Confluence.TeamCalendars.Templates.__deltemplate_s6_f29f5d11';
}
soy.$$registerDelegateFn(soy.$$getDelTemplateId('eventIcon'), 'sporting_event', 1, Confluence.TeamCalendars.Templates.__deltemplate_s6_f29f5d11);


Confluence.TeamCalendars.Templates.__deltemplate_s8_d5bd417f = function(opt_data, opt_ignored) {
  return '<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g transform="translate(3 2)"  fill-rule="evenodd"><path d="M5.542 2.833v4.475l-3.675 7.803h9.338L7.529 7.308V2.833H5.542zm7.348 11.465a1.899 1.899 0 0 1-.882 2.518c-.25.121-.525.184-.803.184H1.867A1.878 1.878 0 0 1 0 15.111c0-.281.062-.559.182-.813l3.494-7.417V.944h5.72v5.937l3.494 7.417z" fill-rule="nonzero"/><path d="M3.736 9.444h5.6l2.8 6.612H.936z"/><rect x="2.803" width="7.467" height="1.889" rx=".944"/></g></svg>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.__deltemplate_s8_d5bd417f.soyTemplateName = 'Confluence.TeamCalendars.Templates.__deltemplate_s8_d5bd417f';
}
soy.$$registerDelegateFn(soy.$$getDelTemplateId('eventIcon'), 'testing', 1, Confluence.TeamCalendars.Templates.__deltemplate_s8_d5bd417f);


Confluence.TeamCalendars.Templates.__deltemplate_s10_d0934dc4 = function(opt_data, opt_ignored) {
  return '<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.74 13.55c.532.32 1.196.32 1.728 0l4.172-2.51v3.256c0 .591-.309 1.138-.814 1.443l-3.358 2.021c-.532.32-1.196.32-1.728 0l-3.358-2.02a1.686 1.686 0 0 1-.816-1.444v-3.257L8.74 13.55zm8.444-7.549c.505.305.816.852.816 1.445v8.322c0 .458-.39.827-.84.827a.841.841 0 0 1-.84-.827V7.502l-5.852 3.523c-.533.32-1.196.32-1.728 0L2.408 7.214a.842.842 0 0 1 0-1.444l5.469-3.29a3.35 3.35 0 0 1 3.455 0L17.184 6z"  fill-rule="evenodd"/></svg>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.__deltemplate_s10_d0934dc4.soyTemplateName = 'Confluence.TeamCalendars.Templates.__deltemplate_s10_d0934dc4';
}
soy.$$registerDelegateFn(soy.$$getDelTemplateId('eventIcon'), 'training', 1, Confluence.TeamCalendars.Templates.__deltemplate_s10_d0934dc4);


Confluence.TeamCalendars.Templates.__deltemplate_s12_bfe44f45 = function(opt_data, opt_ignored) {
  return '<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g  fill-rule="evenodd"><path d="M4.014 12.855a.647.647 0 0 0 .763.763l2.465-.505-2.724-2.723-.504 2.465zM14.252 4.752L12.88 3.379a1.292 1.292 0 0 0-1.83 0L4.735 9.693l3.203 3.203 6.313-6.314a1.294 1.294 0 0 0 0-1.83z"/><path d="M4.5 16.5a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2h-12z" fill-rule="nonzero"/></g></svg>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.__deltemplate_s12_bfe44f45.soyTemplateName = 'Confluence.TeamCalendars.Templates.__deltemplate_s12_bfe44f45';
}
soy.$$registerDelegateFn(soy.$$getDelTemplateId('eventIcon'), 'workshop', 1, Confluence.TeamCalendars.Templates.__deltemplate_s12_bfe44f45);


Confluence.TeamCalendars.Templates.__deltemplate_s14_f4134a47 = function(opt_data, opt_ignored) {
  return '<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M16.222 3.778h.005c.98 0 1.773.795 1.773 1.772v10.678c0 .978-.793 1.772-1.773 1.772H3.773C2.793 18 2 17.205 2 16.228V5.55c0-.978.793-1.772 1.773-1.772h.005v.889c0 .988.796 1.777 1.778 1.777.988 0 1.777-.795 1.777-1.777v-.89h5.334v.89c0 .988.796 1.777 1.777 1.777.99 0 1.778-.795 1.778-1.777v-.89z M5.556 10.89h1.777V9.11H5.556zM5.556 14.445h1.777v-1.778H5.556zM9.111 10.89h1.778V9.11H9.11zM9.111 14.445h1.778v-1.778H9.11zM12.667 10.89h1.777V9.11h-1.777zM12.667 14.445h1.777v-1.778h-1.777z M13.556 3.778v-.89a.89.89 0 0 1 1.777 0v1.779a.89.89 0 0 1-1.777 0v-.89zM6.444 3.778v.889a.89.89 0 0 1-1.777 0V2.889a.89.89 0 0 1 1.777 0v.889z"></path></svg>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.__deltemplate_s14_f4134a47.soyTemplateName = 'Confluence.TeamCalendars.Templates.__deltemplate_s14_f4134a47';
}
soy.$$registerDelegateFn(soy.$$getDelTemplateId('eventIcon'), 'events', 1, Confluence.TeamCalendars.Templates.__deltemplate_s14_f4134a47);


Confluence.TeamCalendars.Templates.__deltemplate_s16_e056647e = function(opt_data, opt_ignored) {
  return '' + soy.$$getDelegateFn(soy.$$getDelTemplateId('eventIcon'), 'events', true)(opt_data);
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.__deltemplate_s16_e056647e.soyTemplateName = 'Confluence.TeamCalendars.Templates.__deltemplate_s16_e056647e';
}
soy.$$registerDelegateFn(soy.$$getDelTemplateId('eventIcon'), 'other', 1, Confluence.TeamCalendars.Templates.__deltemplate_s16_e056647e);


Confluence.TeamCalendars.Templates.__deltemplate_s18_18f4da60 = function(opt_data, opt_ignored) {
  return '<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M15.02 12.192h2.415c.89 0 1.337 1.078.707 1.707L13.9 18.142c-.63.63-1.707.184-1.707-.707v-2.414L9.11 11.938 4.78 17.352c-.682.854-2.043.151-1.743-.899L5.391 8.22 2.586 5.414a2 2 0 1 1 2.828-2.828L8.22 5.39l8.234-2.353c1.05-.3 1.753 1.06.9 1.743L11.937 9.11l3.083 3.082z"  fill-rule="nonzero"/></svg>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.__deltemplate_s18_18f4da60.soyTemplateName = 'Confluence.TeamCalendars.Templates.__deltemplate_s18_18f4da60';
}
soy.$$registerDelegateFn(soy.$$getDelTemplateId('eventIcon'), 'travel', 1, Confluence.TeamCalendars.Templates.__deltemplate_s18_18f4da60);


Confluence.TeamCalendars.Templates.__deltemplate_s20_01fdbda0 = function(opt_data, opt_ignored) {
  return '<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.84 7.932a12.183 12.183 0 0 1 1.984 3.309c.64 1.604.992 3.803 1.084 6.624a1.5 1.5 0 1 1-2.998.1c-.082-2.505-.383-4.385-.873-5.613-.485-1.216-1.232-2.316-2.252-3.307a1.52 1.52 0 0 1-.092-.097l-.052.003c-1.722.107-3.417 1.54-5.057 4.366a.5.5 0 0 1-.931-.207c-.211-2.41.4-4.19 1.86-5.274a5.47 5.47 0 0 1 2.226-1.008C5.31 6.45 3.398 6.823.996 7.988a.5.5 0 0 1-.656-.692c1.172-2.116 2.675-3.25 4.491-3.333 1.703-.078 3.164.527 4.348 1.795.007-1.433.52-2.694 1.534-3.758C11.967.684 13.809.294 16.174.797a.5.5 0 0 1 .093.949c-2.569 1.097-4.131 2.357-4.729 3.76 1.017-.812 2.213-1.203 3.57-1.164 1.816.051 3.339 1.158 4.547 3.253a.5.5 0 0 1-.643.704c-2.966-1.375-5.175-1.576-6.647-.676-.191.117-.365.22-.525.309z"  fill-rule="nonzero"/></svg>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.__deltemplate_s20_01fdbda0.soyTemplateName = 'Confluence.TeamCalendars.Templates.__deltemplate_s20_01fdbda0';
}
soy.$$registerDelegateFn(soy.$$getDelTemplateId('eventIcon'), 'leave', 1, Confluence.TeamCalendars.Templates.__deltemplate_s20_01fdbda0);


Confluence.TeamCalendars.Templates.__deltemplate_s22_e1724cca = function(opt_data, opt_ignored) {
  return '' + soy.$$getDelegateFn(soy.$$getDelTemplateId('eventIcon'), 'leave', true)(opt_data);
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.__deltemplate_s22_e1724cca.soyTemplateName = 'Confluence.TeamCalendars.Templates.__deltemplate_s22_e1724cca';
}
soy.$$registerDelegateFn(soy.$$getDelTemplateId('eventIcon'), 'leaves', 1, Confluence.TeamCalendars.Templates.__deltemplate_s22_e1724cca);


Confluence.TeamCalendars.Templates.__deltemplate_s24_fd6eff36 = function(opt_data, opt_ignored) {
  return '<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g transform="translate(1 1)" fill-rule="evenodd"><circle  cx="13" cy="6" r="3"/><circle  cx="5" cy="3" r="3"/><path d="M8 12c0-1.105.887-2 2-2h6c1.105 0 2 .885 2 2v3.73c0 3.027-10 3.027-10 0V12z" /><path d="M0 9h10V7H0v2zm0 6h7V8H0v7z" fill="#FFF"/><path d="M10 9h-.003A3.001 3.001 0 0 0 7 12.006v2.807c-2.946.534-7-.063-7-1.984V9.003C0 7.897.887 7 2 7h6c1.102 0 1.996.885 2 2z" /></g></svg>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.__deltemplate_s24_fd6eff36.soyTemplateName = 'Confluence.TeamCalendars.Templates.__deltemplate_s24_fd6eff36';
}
soy.$$registerDelegateFn(soy.$$getDelTemplateId('eventIcon'), 'conference', 1, Confluence.TeamCalendars.Templates.__deltemplate_s24_fd6eff36);


Confluence.TeamCalendars.Templates.__deltemplate_s26_70f0c90c = function(opt_data, opt_ignored) {
  return '<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.63463122 12.00024961c.42347959.77002165 1.05658158 1.45204083 1.86966239 2.00005629H1v-2.00005629h1.63463122zm10.62933768-1.00002812h-2.48582515c.99909375-1.05511782 1.08143305-2.62633496.19753961-3.76949635-.88389339-1.14316139-2.493473-1.5471623-3.86153148-.96923583-1.36805849.57792647-2.12228669 1.98050099-1.80946373 3.36490697.31282295 1.38440599 1.60756411 2.37388541 3.10620469 2.37385333v2.00005629c-2.3407169-.00062983-4.40309686-1.4533004-5.07154686-3.57222583-.66845001-2.11892544.21575193-4.40097153 2.17431881-5.61172235 1.95856689-1.21075083 4.52644131-1.06271625 6.31459561.3640281 1.7881543 1.42674436 2.3719952 3.79342119 1.4357085 5.81983567zm1.8093166 4.70813241c.4145048.3888615 1.0835543.3888615 1.498059 0l2.1131632-1.99705617C18.8930714 13.51429219 19 13.25828499 19 12.9992777c0-.25400714-.1048112-.51001434-.3154923-.71001996l-2.1131632-1.99605614c-.4133852-.39075245-1.0838521-.39097631-1.4975297-.00050001-.4136775.3904763-.4139145 1.02378733-.0005293 1.41453978l1.3699565 1.29303636-1.3699565 1.29403637c-.413297.3905109-.413297 1.023529 0 1.4140398z"/><path d="M8.41176471 12h8.47058819v2H8.41176471z"/></svg>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.__deltemplate_s26_70f0c90c.soyTemplateName = 'Confluence.TeamCalendars.Templates.__deltemplate_s26_70f0c90c';
}
soy.$$registerDelegateFn(soy.$$getDelTemplateId('eventIcon'), 'sprints', 1, Confluence.TeamCalendars.Templates.__deltemplate_s26_70f0c90c);


Confluence.TeamCalendars.Templates.__deltemplate_s28_968cc426 = function(opt_data, opt_ignored) {
  return '<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g  fill-rule="nonzero"><path d="M4 7.046V16c0 .31.467.783 1.444 1.202C6.616 17.704 8.247 18 10 18c1.753 0 3.384-.296 4.556-.798C15.533 16.783 16 16.31 16 16V7.046H4zm.003-2c.043.31.511.758 1.441 1.156C6.616 6.704 8.247 7 10 7c1.753 0 3.384-.296 4.556-.798.93-.398 1.398-.846 1.44-1.156H18V16c0 2.44-3.638 4-8 4s-8-1.56-8-4V5.046h2.003z"/><path d="M10 9C5.638 9 2 7.44 2 5s3.638-4 8-4 8 1.56 8 4-3.638 4-8 4zm0-2c1.753 0 3.384-.296 4.556-.798C15.533 5.783 16 5.31 16 5c0-.31-.467-.783-1.444-1.202C13.384 3.296 11.753 3 10 3c-1.753 0-3.384.296-4.556.798C4.467 4.217 4 4.69 4 5c0 .31.467.783 1.444 1.202C6.616 6.704 8.247 7 10 7z"/><path d="M17.5 8.5c0 2.049-3.386 3.5-7.5 3.5s-7.5-1.451-7.5-3.5h1C3.5 9.765 6.382 11 10 11s6.5-1.235 6.5-2.5h1z"/><path d="M17.5 11.5c0 2.049-3.386 3.5-7.5 3.5s-7.5-1.451-7.5-3.5h1c0 1.265 2.882 2.5 6.5 2.5s6.5-1.235 6.5-2.5h1z"/></g></svg>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.__deltemplate_s28_968cc426.soyTemplateName = 'Confluence.TeamCalendars.Templates.__deltemplate_s28_968cc426';
}
soy.$$registerDelegateFn(soy.$$getDelTemplateId('eventIcon'), 'deployment', 1, Confluence.TeamCalendars.Templates.__deltemplate_s28_968cc426);


Confluence.TeamCalendars.Templates.__deltemplate_s30_43ed316d = function(opt_data, opt_ignored) {
  return '<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M15.518 9.794v8.004c0 .55-.456.996-1.003.996h-2.997v-4.002c0-1.1-.896-1.998-2-1.998-1.113 0-2 .894-2 1.998v4.002H4.52a.998.998 0 0 1-1.002-.996V9.794H1.51c-.549 0-.673-.32-.287-.706l7.94-7.941a.497.497 0 0 1 .706 0l7.941 7.94c.39.39.262.707-.287.707h-2.006z"  fill-rule="evenodd"/></svg>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.__deltemplate_s30_43ed316d.soyTemplateName = 'Confluence.TeamCalendars.Templates.__deltemplate_s30_43ed316d';
}
soy.$$registerDelegateFn(soy.$$getDelTemplateId('eventIcon'), 'home', 1, Confluence.TeamCalendars.Templates.__deltemplate_s30_43ed316d);


Confluence.TeamCalendars.Templates.__deltemplate_s32_b5b3f6dc = function(opt_data, opt_ignored) {
  return '<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 4h14a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2zm7.001 6.193L4.203 5.682A1 1 0 1 0 2.975 7.26l6.41 4.989a1 1 0 0 0 1.228 0l6.432-4.989a1 1 0 1 0-1.226-1.58l-5.818 4.513z"  fill-rule="nonzero"/></svg>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.__deltemplate_s32_b5b3f6dc.soyTemplateName = 'Confluence.TeamCalendars.Templates.__deltemplate_s32_b5b3f6dc';
}
soy.$$registerDelegateFn(soy.$$getDelTemplateId('eventIcon'), 'marketing_email', 1, Confluence.TeamCalendars.Templates.__deltemplate_s32_b5b3f6dc);


Confluence.TeamCalendars.Templates.__deltemplate_s34_8dd06bec = function(opt_data, opt_ignored) {
  return '<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 19a9 9 0 1 1 0-18 9 9 0 0 1 0 18zm2-8.193H8a2 2 0 0 0-2 2.002v3.183a7.16 7.16 0 0 0 4 1.215c1.48 0 2.855-.448 4-1.215V12.81a2.001 2.001 0 0 0-2-2.002zM10 10a2.4 2.4 0 1 0 0-4.8 2.4 2.4 0 0 0 0 4.8z"  fill-rule="nonzero"/></svg>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.__deltemplate_s34_8dd06bec.soyTemplateName = 'Confluence.TeamCalendars.Templates.__deltemplate_s34_8dd06bec';
}
soy.$$registerDelegateFn(soy.$$getDelTemplateId('eventIcon'), 'meeting', 1, Confluence.TeamCalendars.Templates.__deltemplate_s34_8dd06bec);


Confluence.TeamCalendars.Templates.__deltemplate_s36_5abd3649 = function(opt_data, opt_ignored) {
  return '<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M4 10.415v6.587c0 .549.45.998 1 .998s.999-.45.999-.998v-5.904c1.168-.349 2.387-.047 3.765.296.982.243 2.035.505 3.128.505.832 0 1.686-.152 2.545-.579.345-.172.563-.527.563-.92V3.498c0-.352-.177-.68-.469-.866a.982.982 0 0 0-.967-.053c-1.344.667-2.73.323-4.328-.074-1.728-.429-3.685-.914-5.674.074-.344.17-.562.528-.562.919v6.917z"  fill-rule="evenodd"/></svg>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.__deltemplate_s36_5abd3649.soyTemplateName = 'Confluence.TeamCalendars.Templates.__deltemplate_s36_5abd3649';
}
soy.$$registerDelegateFn(soy.$$getDelTemplateId('eventIcon'), 'milestone', 1, Confluence.TeamCalendars.Templates.__deltemplate_s36_5abd3649);


Confluence.TeamCalendars.Templates.__deltemplate_s38_38a3386e = function(opt_data, opt_ignored) {
  return '<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g  fill-rule="evenodd"><path d="M5.938 4.458a4.844 4.844 0 0 0-.777-.063C2.356 4.396 0 6.577 0 9.43c0 2.882 2.385 5.45 5.1 5.45h.881v-1.974H5.1c-1.657 0-3.115-1.648-3.115-3.476 0-1.761 1.469-3.058 3.104-3.058.401 0 .698.05.982.148l.17.063c.605.246.875-.244.875-.244l.15-.264c.73-1.335 2.201-2.077 3.716-2.1 2.082.034 3.797 1.534 4.069 3.61l.046.337s.071.52.665.52l.277.005c1.136 0 1.976.95 1.976 2.138 0 1.196-.987 2.32-2.07 2.32h-2.964v1.975h2.964c2.16 0 4.055-2.026 4.055-4.295 0-1.98-1.312-3.629-3.138-4.036-.707-2.682-3.053-4.51-5.886-4.548-1.975.02-3.901.892-5.038 2.458z"/><path d="M9.145 14.868l-.794.018-.26.004-.104-.002c-.032-.001-.032-.001-.095-.007-.045-.005-.045-.005-.152-.029-.08-.022-.08-.022-.245-.102-.273-.16-.273-.16-.495-.864 0-.514.08-.614 3.419-4.602a1 1 0 0 1 1.533 1.284c-.773.923-1.404 1.684-1.893 2.282.25-.003.462-.004.638-.002.175.001.314.005.422.013.082.006.152.014.223.028.083.016.083.016.242.075.282.102.282.102.602.922 0 .526-.217.796-3.42 4.614a1 1 0 0 1-1.532-1.286c.802-.956 1.452-1.739 1.948-2.347h-.037z" fill-rule="nonzero"/></g></svg>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.__deltemplate_s38_38a3386e.soyTemplateName = 'Confluence.TeamCalendars.Templates.__deltemplate_s38_38a3386e';
}
soy.$$registerDelegateFn(soy.$$getDelTemplateId('eventIcon'), 'outage', 1, Confluence.TeamCalendars.Templates.__deltemplate_s38_38a3386e);


Confluence.TeamCalendars.Templates.__deltemplate_s40_b1d4df5f = function(opt_data, opt_ignored) {
  return '<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g  fill-rule="nonzero"><path d="M5.134 17h9.614V9.353H5.134V17zm-1-9.647h11.614a1 1 0 0 1 1 1V18a1 1 0 0 1-1 1H4.134a1 1 0 0 1-1-1V8.353a1 1 0 0 1 1-1z"/><path d="M8.441 5.324h3v13.588h-3z"/><path d="M4.206 13.618v-3H16.22v3zM3 6.294h13.882a1 1 0 0 1 1 1v1.177a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7.294a1 1 0 0 1 1-1z"/><path d="M9.304 7.029c-1.13 1.13-3.612.235-4.89-1.044-1.142-1.14-1.264-2.94-.179-4.025C5.321.874 7.12.997 8.261 2.137c1.278 1.28 2.174 3.761 1.043 4.892zm-1.628-2.07c-.197-.544-.546-1.124-.83-1.407-.4-.4-.938-.437-1.197-.178-.258.258-.221.797.178 1.197.283.283.864.633 1.408.829.227.082.43.13.586.146a2.519 2.519 0 0 0-.145-.587z"/><path d="M10.492 7.029c-1.13-1.131-.235-3.613 1.044-4.892 1.14-1.14 2.94-1.263 4.025-.177 1.086 1.085.963 2.884-.178 4.025-1.279 1.279-3.76 2.174-4.891 1.044zm2.07-1.63c.543-.195 1.124-.545 1.407-.828.4-.4.436-.939.178-1.197-.259-.259-.798-.222-1.197.178-.283.283-.633.863-.83 1.407-.081.227-.13.43-.145.587.157-.015.36-.064.586-.146z"/></g></svg>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.__deltemplate_s40_b1d4df5f.soyTemplateName = 'Confluence.TeamCalendars.Templates.__deltemplate_s40_b1d4df5f';
}
soy.$$registerDelegateFn(soy.$$getDelTemplateId('eventIcon'), 'birthdays', 1, Confluence.TeamCalendars.Templates.__deltemplate_s40_b1d4df5f);


Confluence.TeamCalendars.Templates.__deltemplate_s42_3e1f11d2 = function(opt_data, opt_ignored) {
  return '<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g  fill-rule="evenodd"><path d="M5.143 6.286V16h9.714V6.286H5.143zM16 4.644c.518.362.857.962.857 1.642V16a2 2 0 0 1-2 2H5.143a2 2 0 0 1-2-2V6.286c0-.68.339-1.28.857-1.642v1.07h12v-1.07zM4 4v1.714h12V4H4zm0-2h12a2 2 0 0 1 2 2v1.714a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z" fill-rule="nonzero"/><path d="M7.714 8.857h4.571v2.286H7.714z"/></g></svg>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.__deltemplate_s42_3e1f11d2.soyTemplateName = 'Confluence.TeamCalendars.Templates.__deltemplate_s42_3e1f11d2';
}
soy.$$registerDelegateFn(soy.$$getDelTemplateId('eventIcon'), 'jira_box', 1, Confluence.TeamCalendars.Templates.__deltemplate_s42_3e1f11d2);


Confluence.TeamCalendars.Templates.__deltemplate_s44_21eada66 = function(opt_data, opt_ignored) {
  return '<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g><path d="M17.3613625 2H10c0 .88651593.35010544 1.73672248.97329713 2.3635839.62319161.62686143 1.46842097.97902851 2.34974697.97902851h1.3560405v1.31691648C14.6802589 8.50393066 16.1663957 9.99881878 18 10V2.64239828C18 2.28761151 17.7140723 2 17.3613625 2z"/><path d="M13.3613624 6H6c.00117426 1.84440176 1.48731108 3.33928992 3.32091539 3.34047109h1.35604043v1.32119912C10.67930511 12.5060714 12.1663948 14.0000015 14 14V6.64239828C14 6.28761151 13.7140722 6 13.3613624 6z"/><path d="M9.36136242 10H2c0 1.84607388 1.48777755 3.3426125 3.32304417 3.3426125H6.6833422v1.3169164C6.68451239 16.502261 8.16805859 17.996459 10 18v-7.35760169C10 10.28761152 9.71407217 10 9.36136242 10z"/><path d="M13.3613624 6H6c.00117426 1.84440176 1.48731108 3.33928992 3.32091539 3.34047109h1.35604043v1.32119912C10.67930511 12.5060714 12.1663948 14.0000015 14 14V6.64239828C14 6.28761151 13.7140722 6 13.3613624 6z"/><path d="M9.36136242 10H2c0 1.84607388 1.48777755 3.3426125 3.32304417 3.3426125H6.6833422v1.3169164C6.68451239 16.502261 8.16805859 17.996459 10 18v-7.35760169C10 10.28761152 9.71407217 10 9.36136242 10z"/></g></svg>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.__deltemplate_s44_21eada66.soyTemplateName = 'Confluence.TeamCalendars.Templates.__deltemplate_s44_21eada66';
}
soy.$$registerDelegateFn(soy.$$getDelTemplateId('eventIcon'), 'jira', 1, Confluence.TeamCalendars.Templates.__deltemplate_s44_21eada66);


Confluence.TeamCalendars.Templates.__deltemplate_s46_a47a113e = function(opt_data, opt_ignored) {
  return '<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g fill-rule="evenodd"><path d="M3 8h13H3zm14 1v8c0 .5522847-.4477153 1-1 1H3c-.55228475 0-1-.4477153-1-1V9h15zM7 12v2h5v-2H7z"/><path d="M4.01759531 6.5H14.9822913l-1.2937993-3H5.31139458l-1.29379927 3zM4.65362899 2h9.69262861c.1996009 0 .3800796.11871266.4591233.30199552l2.1563321 5c.1093549.25356682-.007552.54777295-.2611188.65712781C16.6380649 7.98609012 16.5706861 8 16.5025897 8H2.49729687c-.27614238 0-.5-.22385763-.5-.5 0-.06809642.01390988-.13547517.04087667-.19800448l2.15633213-5C4.27354941 2.11871266 4.45402809 2 4.65362899 2z" fill-rule="nonzero"/></g></svg>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.__deltemplate_s46_a47a113e.soyTemplateName = 'Confluence.TeamCalendars.Templates.__deltemplate_s46_a47a113e';
}
soy.$$registerDelegateFn(soy.$$getDelTemplateId('eventIcon'), 'version_open', 1, Confluence.TeamCalendars.Templates.__deltemplate_s46_a47a113e);


Confluence.TeamCalendars.Templates.__deltemplate_s48_923a696e = function(opt_data, opt_ignored) {
  return '<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8h13H3zm14 1v8c0 .5522847-.4477153 1-1 1H3c-.55228475 0-1-.4477153-1-1V9h15zM7 12v2h5v-2H7zM9 2v6H2.49729687c-.27614238 0-.5-.22385763-.5-.5 0-.06809642.01390988-.13547517.04087667-.19800448l2.15633213-5C4.27354941 2.11871266 4.45402809 2 4.65362899 2H9zm1 0h4.3462576c.1996009 0 .3800796.11871266.4591233.30199552l2.1563321 5c.1093549.25356682-.007552.54777295-.2611188.65712781C16.6380649 7.98609012 16.5706861 8 16.5025897 8H10V2z" fill-rule="evenodd"/></svg>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.__deltemplate_s48_923a696e.soyTemplateName = 'Confluence.TeamCalendars.Templates.__deltemplate_s48_923a696e';
}
soy.$$registerDelegateFn(soy.$$getDelTemplateId('eventIcon'), 'version_closed', 1, Confluence.TeamCalendars.Templates.__deltemplate_s48_923a696e);


Confluence.TeamCalendars.Templates.__deltemplate_s50_ddd3f909 = function(opt_data, opt_ignored) {
  return '';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.__deltemplate_s50_ddd3f909.soyTemplateName = 'Confluence.TeamCalendars.Templates.__deltemplate_s50_ddd3f909';
}
soy.$$registerDelegateFn(soy.$$getDelTemplateId('eventIcon'), '', 1, Confluence.TeamCalendars.Templates.__deltemplate_s50_ddd3f909);

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:add-from-macro-dialog', location = 'com/atlassian/confluence/extra/calendar3/js/add-from-macro-dialog.js' */
define("tc/get-add-dialog-for-macro",["jquery","confluence/meta","aui/dialog2","window","tc/get-add-dialog-for-macro"],function(f,c,b,d){var g=c.get("remote-user")==="";function h(){var i=AJS.dialog2();i.$el.find(".aui-dialog2-header .aui-dialog2-header-main").text("Insert a Team Calendar");i.$el.find(".aui-dialog2-content").text("You need to log in to insert a calendar");i.$el.find(".aui-dialog2-footer").html('<div class="aui-dialog2-footer-actions">     <button class="aui-button aui-button-light cancel-btn">'+"Cancel"+'   </button>     <button class="aui-button aui-button-primary login-btn">'+"Log in"+"   </button> </div>");i.$el.find(".aui-dialog2-header-close").hide();i.$el.find(".cancel-btn").click(function(){i.hide()});i.$el.find(".login-btn").click(function(){d.location.href=f("#login-link").prop("href")});return i}var a;function e(){a=a||h();a.show()}Confluence.TeamCalendars=Confluence.TeamCalendars||{};Confluence.TeamCalendars.Dialogs=Confluence.TeamCalendars.Dialogs||{};Confluence.TeamCalendars.Dialogs.getAddDialogForMacro=function(k){if(!k.params&&g){e();return}var i=k.params?k.params.id:"";var j={isProcessingSubCalendar:function(){return false},setProcessingSubCalendar:function(l){},setSubCalendarSpinnerIconVisible:function(l){},getIncludedCalendars:function(){return i?i.split(","):[]},showAjaxUpdateError:function(l,n,m){Confluence.TeamCalendars.showAjaxError(f("#editor-messages"),l,n,m,"error-subcalendar-update")},showAjaxError:function(m,o,n,l){Confluence.TeamCalendars.showAjaxError(f("#editor-messages"),m,o,n,l)},setGenericErrors:function(m,l){Confluence.TeamCalendars.setGenericErrors(f("#editor-messages"),null,l)},setGenericUpdateError:function(){Confluence.TeamCalendars.setGenericErrors(f("#editor-messages"),null,"error-subcalendar-update")},setSubCalendars:function(l){if(!i){Confluence.TeamCalendars.fireEventForAnalytics("subcalendar.parent.embedded")}var m=l+(i?","+i:"");k.params=f.extend(k.params,{id:m});k.body="";AJS.Rte.BookmarkManager.restoreBookmark();tinymce.confluence.MacroUtils.insertMacro({macro:k,contentId:Confluence.Editor.getContentId()})},setParameter:function(l,m){},getParameter:function(l){},reloadSubCalendar:function(l){},getSubCalendars:function(){return k.params},updateAvailableSubCalendarsInSubCalendarPanel:function(){},getNextCalendarColor:function(){return""},isAutoWatchSet:function(){return false},refreshCachedSubCalendars:function(m,l){},handleImport:function(l){this.setSubCalendars(l)},isCalendarInEditMode:function(){return true},suppressMessage:function(m,l){Confluence.TeamCalendars.suppressMessage(f("#editor-messages"),m,l)},showCalendarWizard:function(){Confluence.TeamCalendars.Dialogs.getAddDialog(j)},getSubCalendarsWhichCanAddEvents:function(){return[]}};if(Confluence.TeamCalendars.shouldShowTimezoneSetup()){Confluence.TeamCalendars.Dialogs.getTimeZoneSetupDialog(j).show()}else{AJS.Rte.BookmarkManager.storeBookmark();Confluence.TeamCalendars.Dialogs.getAddDialog(j,{title:"Kalender einf\u00fcgen"})}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/lib/fullcalendar.js' */
/*!
 * FullCalendar v1.6.4
 * Docs & License: http://arshaw.com/fullcalendar/
 * (c) 2013 Adam Shaw
 */
(function(av,w){var c={isDisplayTimeFormat24hour:function(){return AJS.Meta.get("team-calendars-display-time-format")==="displayTimeFormat24"},getTimelineAdapter:function(aP,aR,aQ,aS){return Confluence.TeamCalendars.getTimelineAdapter(aP,aR,aQ,aS)},Templates:function(){return Confluence.TeamCalendars.Templates},getUserTimeZone:function(){return Confluence.TeamCalendars.getUserTimeZone()}};var O={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:true,weekNumbers:false,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:true,ignoreTimezone:true,lazyFetching:true,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":c.isDisplayTimeFormat24hour()===true?"HH:mm":"h:mm TT"},isRTL:false,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:false,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:true,dropAccept:"*",handleWindowResize:true,supportPrint:true};var T={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}};var aE=av.fullCalendar={version:"1.6.4"};var ag=aE.views={};av.fn.fullCalendar=function(aR){if(typeof aR=="string"){var aQ=Array.prototype.slice.call(arguments,1);var aS;this.each(function(){var aU=av.data(this,"fullCalendar");if(aU&&av.isFunction(aU[aR])){var aT=aU[aR].apply(aU,aQ);if(aS===w){aS=aT}if(aR=="destroy"){av.removeData(this,"fullCalendar")}}});if(aS!==w){return aS}return this}aR=aR||{};var aP=aR.eventSources||[];delete aR.eventSources;if(aR.events){aP.push(aR.events);delete aR.events}aR=av.extend(true,{},O,(aR.isRTL||aR.isRTL===w&&O.isRTL)?T:{},aR);this.each(function(aV,aT){var aU=av(aT);var aW=new u(aU,aR,aP);aU.data("fullCalendar",aW);aW.render()});return this};function al(aP){av.extend(true,O,aP)}function u(a9,bg,bj){var bD=this;bD.options=bg;bD.render=bs;bD.destroy=bF;bD.refetchEvents=a4;bD.reportEvents=a6;bD.reportEventChange=bH;bD.rerenderEvents=aS;bD.changeView=a0;bD.select=bE;bD.unselect=a1;bD.prev=bn;bD.next=aR;bD.prevYear=bG;bD.nextYear=aQ;bD.today=ba;bD.gotoDate=br;bD.incrementDate=bd;bD.formatDate=function(bM,bN){return E(bM,bN,bg)};bD.formatDates=function(bO,bM,bN){return l(bO,bM,bN,bg)};bD.getWeekNumber=function(bN,bM){return ay(bN,bM,bg)};bD.getDate=be;bD.getView=bk;bD.option=bA;bD.trigger=bp;t.call(bD,bg,bj);var aP=bD.isFetchNeeded;var bK=bD.fetchEvents;var bB=a9[0];var aU;var bt;var a3;var bL;var a2;var bo;var aX;var bu=0;var bC=0;var bI=new Date();var bi=[];var aV;B(bI,bg.year,bg.month,bg.date);function bs(bT){if(!a3){bh()}else{if(by()){bv();bJ(bT)}}var bS=av("div.plugin-calendar .calendar-layout");var bP=av("div.plugin-calendar .calendar-panel");var bR=function(bU){bv();bJ(bU)};var bM=function(bU){bS.css("width",bU);bP.css("margin-right",0);bR()};var bO=function(){bS.css("width","");bP.css("margin-right","");var bU=navigator.userAgent.indexOf("Chrome")>-1;if(!bU){bR()}};if(bg.supportPrint){var bN=Math.min(bS.width(),1200);if(window.matchMedia){var bQ=window.matchMedia("print");bQ.addListener(function(bU){if(a2.name!=="timeline"){if(bU.matches){bM(bN)}else{bO()}}})}av(window).bind("beforeprint",function(){if(a2.name!=="timeline"){bM(bN*0.75)}}).bind("afterprint",function(){if(a2.name!=="timeline"){bO()}})}}function bh(){bL=bg.theme?"ui":"fc";a9.addClass("fc");if(bg.isRTL){a9.addClass("fc-rtl")}else{a9.addClass("fc-ltr")}if(bg.theme){a9.addClass("ui-widget")}a3=av("<div class='fc-content' style='position:relative'/>").prependTo(a9);aU=new U(bD,bg);bt=aU.render();if(bt){a9.prepend(bt)}a0(bg.defaultView);if(bg.handleWindowResize){av(window).resize(a5)}bq();if(!a8()){aZ()}}function bq(){if(by()){AJS.log("TC detected the width. Will go ahead !!!");bf()}else{setTimeout(bq,500)}}function aZ(){setTimeout(function(){if(!a2.start&&a8()){bf()}},0)}function bF(){if(a2){bp("viewDestroy",a2,a2,a2.element);a2.triggerEventDestroy()}av(window).unbind("resize",a5);aU.destroy();a3.remove();a9.removeClass("fc fc-rtl ui-widget")}function by(){return a9.is(":visible")}function a8(){return av("body").is(":visible")}function a0(bM){if(!a2||bM!=a2.name){bw(bM)}}function bw(bM){bC++;if(a2){bp("viewDestroy",a2,a2,a2.element);a1();a2.triggerEventDestroy();aT();a2.element.remove();aU.deactivateButton(a2.name)}aU.activateButton(bM);a2=new ag[bM](av("<div class='fc-view fc-view-"+bM+"' style='position:relative'/>").appendTo(a3),bD);bf();a7();bC--}function bf(bM){if(!a2.start||bM||bI<a2.start||bI>=a2.end){if(by()){bJ(bM)}}}function bJ(bM){bC++;if(a2.start){bp("viewDestroy",a2,a2,a2.element);a1();bl()}aT();a2.render(bI,bM||0);bz();a7();(a2.afterRender||at)();bb();bm();bp("viewRender",a2,a2,a2.element);a2.trigger("viewDisplay",bB);bC--;aY()}function bc(){if(by()){a1();bl();bv();bz();aW()}}function bv(){if(bg.contentHeight){aX=bg.contentHeight}else{if(bg.height){aX=bg.height-(bt?bt.height():0)-I(a3)}else{aX=Math.round(a3.width()/Math.max(bg.aspectRatio,0.5))}}}function bz(){if(aX===w){bv()}bC++;a2.setHeight(aX);a2.setWidth(a3.width());bC--;bo=a9.outerWidth()}function a5(){if(!bC){if(a2.start){var bM=++bu;setTimeout(function(){if(bM==bu&&!bC&&by()){if(bo!=(bo=a9.outerWidth())){bC++;bc();a2.trigger("windowResize",bB);bC--}}},200)}else{aZ()}}}function a4(){bl();bx()}function aS(bM){bl();aW(bM)}function aW(bM){if(by()){a2.setEventData(bi);a2.renderEvents(bi,bM);a2.trigger("eventAfterAllRender")}}function bl(){a2.triggerEventDestroy();a2.clearEvents();a2.clearEventData()}function aY(){if(!bg.lazyFetching||aP(a2.visStart,a2.visEnd)){bx()}else{aW()}}function bx(){bK(a2.visStart,a2.visEnd)}function a6(bM){bi=bM;aW()}function bH(bM){aS(bM)}function bb(){aU.updateTitle(a2.title)}function bm(){var bM=new Date();if(bM>=a2.start&&bM<a2.end){aU.disableButton("today")}else{aU.enableButton("today")}}function bE(bO,bM,bN){a2.select(bO,bM,bN===w?true:bN)}function a1(){if(a2){a2.unselect()}}function bn(){if(a2.prev){a2.prev()}else{bf(-1)}}function aR(){if(a2.next){a2.next()}else{bf(1)}}function bG(){ak(bI,-1);bf()}function aQ(){ak(bI,1);bf()}function ba(){if(a2.gotoToday){a2.gotoToday()}else{bI=new Date();bf()}}function br(bN,bO,bM){if(bN instanceof Date){bI=P(bN)}else{B(bI,bN,bO,bM)}bf()}function bd(bN,bM,bO){if(bN!==w){ak(bI,bN)}if(bM!==w){q(bI,bM)}if(bO!==w){aG(bI,bO)}bf()}function be(){return P(bI)}function aT(){a3.css({width:"100%",height:a3.height(),overflow:"hidden"})}function a7(){a3.css({width:"",height:"",overflow:""})}function bk(){return a2}function bA(bM,bN){if(bN===w){return bg[bM]}if(bM=="height"||bM=="contentHeight"||bM=="aspectRatio"){bg[bM]=bN;bc()}}function bp(bM,bN){if(bg[bM]){return bg[bM].apply(bN||bB,Array.prototype.slice.call(arguments,2))}}if(bg.droppable){av(document).bind("dragstart",function(bO,bP){var bM=bO.target;var bQ=av(bM);if(!bQ.parents(".fc").length){var bN=bg.dropAccept;if(av.isFunction(bN)?bN.call(bM,bQ):bQ.is(bN)){aV=bM;a2.dragStart(aV,bO,bP)}}}).bind("dragstop",function(bM,bN){if(aV){a2.dragStop(aV,bM,bN);aV=null}})}}function U(aS,a1){var a0=this;a0.render=aQ;a0.destroy=aW;a0.updateTitle=aU;a0.activateButton=aP;a0.deactivateButton=aY;a0.disableButton=aR;a0.enableButton=aV;var aT=av([]);var aX;function aQ(){aX=a1.theme?"ui":"fc";var a2=a1.header;if(a2){aT=av("<table class='fc-header' style='width:100%'/>").append(av("<tr/>").append(aZ("left")).append(aZ("center")).append(aZ("right")));return aT}}function aW(){aT.remove()}function aZ(a2){var a4=av("<td class='fc-header-"+a2+"'/>");var a3=a1.header[a2];if(a3){av.each(a3.split(" "),function(a6){if(a6>0){a4.append("<span class='fc-header-space'/>")}var a5;av.each(this.split(","),function(a9,a8){if(a8=="title"){a4.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>");if(a5){a5.addClass(aX+"-corner-right")}a5=null}else{var a7;if(aS[a8]){a7=aS[a8]}else{if(ag[a8]){a7=function(){ba.removeClass(aX+"-state-hover");aS.changeView(a8)}}}if(a7){var bb=a1.theme?H(a1.buttonIcons,a8):null;var bc=H(a1.buttonText,a8);var ba=av("<span class='fc-button fc-button-"+a8+" "+aX+"-state-default'>"+(bb?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+bb+"'></span></span>":bc)+"</span>").click(function(){if(!ba.hasClass(aX+"-state-disabled")){a7()}}).mousedown(function(){ba.not("."+aX+"-state-active").not("."+aX+"-state-disabled").addClass(aX+"-state-down")}).mouseup(function(){ba.removeClass(aX+"-state-down")}).hover(function(){ba.not("."+aX+"-state-active").not("."+aX+"-state-disabled").addClass(aX+"-state-hover")},function(){ba.removeClass(aX+"-state-hover").removeClass(aX+"-state-down")}).appendTo(a4);aO(ba);if(!a5){ba.addClass(aX+"-corner-left")}a5=ba}}});if(a5){a5.addClass(aX+"-corner-right")}})}return a4}function aU(a2){aT.find("h2").html(a2)}function aP(a2){aT.find("span.fc-button-"+a2).addClass(aX+"-state-active")}function aY(a2){aT.find("span.fc-button-"+a2).removeClass(aX+"-state-active")}function aR(a2){aT.find("span.fc-button-"+a2).addClass(aX+"-state-disabled")}function aV(a2){aT.find("span.fc-button-"+a2).removeClass(aX+"-state-disabled")}}aE.sourceNormalizers=[];aE.sourceFetchers=[];var o={dataType:"json",cache:false};var X=1;function t(aV,a3){var a5=this;a5.isFetchNeeded=aX;a5.fetchEvents=a4;a5.addEventSource=aS;a5.removeEventSource=aT;a5.updateEvent=a8;a5.renderEvent=a1;a5.removeEvents=bk;a5.clientEvents=be;a5.normalizeEvent=a0;var a7=a5.trigger;var aP=a5.getView;var ba=a5.reportEvents;var bc={events:[]};var aQ=[bc];var bh,bd;var aR=0;var bi=0;var bg=0;var a6=[];for(var bf=0;bf<a3.length;bf++){a9(a3[bf])}function aX(bm,bl){return !bh||bm<bh||bl>bd}function a4(bp,bm){bh=bp;bd=bm;a6=[];var bo=++aR;var bl=aQ.length;bi=bl;for(var bn=0;bn<bl;bn++){aW(aQ[bn],bo)}}function aW(bm,bl){bb(bm,function(bo){if(bl==aR){if(bo){if(aV.eventDataTransform){bo=av.map(bo,aV.eventDataTransform)}if(bm.eventDataTransform){bo=av.map(bo,bm.eventDataTransform)}for(var bn=0;bn<bo.length;bn++){bo[bn].source=bm;a0(bo[bn])}a6=a6.concat(bo)}ba(a6)}})}function bb(bl,bv){var bq;var bu=aE.sourceFetchers;var bs;for(bq=0;bq<bu.length;bq++){bs=bu[bq](bl,bh,bd,bv);if(bs===true){return}else{if(typeof bs=="object"){bb(bs,bv);return}}}var bx=bl.events;if(bx){if(av.isFunction(bx)){aZ();bx(P(bh),P(bd),function(bz){bv(bz);bj()})}else{if(av.isArray(bx)){bv(bx)}else{bv()}}}else{var bm=bl.url;if(bm){var bw=bl.success;var bt=bl.error;var bn=bl.complete;var by;if(av.isFunction(bl.data)){by=bl.data()}else{by=bl.data}var bp=av.extend({},by||{});var br=aM(bl.startParam,aV.startParam);var bo=aM(bl.endParam,aV.endParam);if(br){bp[br]=Math.round(+bh/1000)}if(bo){bp[bo]=Math.round(+bd/1000)}aZ();av.ajax(av.extend({},o,bl,{data:bp,success:function(bA){bA=bA||[];var bz=K(bw,this,arguments);if(av.isArray(bz)){bA=bz}bv(bA)},error:function(){K(bt,this,arguments);bv()},complete:function(){K(bn,this,arguments);bj()}}))}else{bv()}}}function aS(bl){bl=a9(bl);if(bl){bi++;aW(bl,aR)}}function a9(bl){if(av.isFunction(bl)||av.isArray(bl)){bl={events:bl}}else{if(typeof bl=="string"){bl={url:bl}}}if(typeof bl=="object"){a2(bl);aQ.push(bl);return bl}}function aT(bl){aQ=av.grep(aQ,function(bm){return !aY(bm,bl)});a6=av.grep(a6,function(bm){return !aY(bm.source,bl)});ba(a6)}function a8(bq){var bo,bm=a6.length,br,bl=aP().defaultEventEnd,bp=bq.start-bq._start,bn=bq.end?(bq.end-(bq._end||bl(bq))):0;for(bo=0;bo<bm;bo++){br=a6[bo];if(br._id==bq._id&&br!=bq){br.start=new Date(+br.start+bp);if(bq.end){if(br.end){br.end=new Date(+br.end+bn)}else{br.end=new Date(+bl(br)+bn)}}else{br.end=null}br.title=bq.title;br.url=bq.url;br.allDay=bq.allDay;br.className=bq.className;br.editable=bq.editable;br.color=bq.color;br.backgroundColor=bq.backgroundColor;br.borderColor=bq.borderColor;br.textColor=bq.textColor;a0(br)}}a0(bq);ba(a6)}function a1(bm,bl){a0(bm);if(!bm.source){if(bl){bc.events.push(bm);bm.source=bc}a6.push(bm)}ba(a6)}function bk(bm){if(!bm){a6=[];for(var bl=0;bl<aQ.length;bl++){if(av.isArray(aQ[bl].events)){aQ[bl].events=[]}}}else{if(!av.isFunction(bm)){var bn=bm+"";bm=function(bo){return bo._id==bn}}a6=av.grep(a6,bm,true);for(var bl=0;bl<aQ.length;bl++){if(av.isArray(aQ[bl].events)){aQ[bl].events=av.grep(aQ[bl].events,bm,true)}}}ba(a6)}function be(bl){if(av.isFunction(bl)){return av.grep(a6,bl)}else{if(bl){bl+="";return av.grep(a6,function(bm){return bm._id==bl})}}return a6}function aZ(){if(!bg++){a7("loading",null,true,aP())}}function bj(){if(!--bg){a7("loading",null,false,aP())}}function a0(bm){var bn=bm.source||{};var bl=aM(bn.ignoreTimezone,aV.ignoreTimezone);bm._id=bm._id||(bm.id===w?"_fc"+X++:bm.id+"");if(bm.date){if(!bm.start){bm.start=bm.date}delete bm.date}bm._start=P(bm.start=ab(bm.start,bl));bm.end=ab(bm.end,bl);if(bm.end&&bm.end<=bm.start){bm.end=null}bm._end=bm.end?P(bm.end):null;if(bm.allDay===w){bm.allDay=aM(bn.allDayDefault,aV.allDayDefault)}if(bm.className){if(typeof bm.className=="string"){bm.className=bm.className.split(/\s+/)}}else{bm.className=[]}}function a2(bn){if(bn.className){if(typeof bn.className=="string"){bn.className=bn.className.split(/\s+/)}}else{bn.className=[]}var bm=aE.sourceNormalizers;for(var bl=0;bl<bm.length;bl++){bm[bl](bn)}}function aY(bm,bl){return bm&&bl&&aU(bm)==aU(bl)}function aU(bl){return((typeof bl=="object")?(bl.events||bl.url):"")||bl}}aE.addDays=aG;aE.cloneDate=P;aE.parseDate=ab;aE.parseISO8601=p;aE.parseTime=aK;aE.formatDate=E;aE.formatDates=l;var R=["sun","mon","tue","wed","thu","fri","sat"],az=86400000,am=3600000,V=60000;function ak(aQ,aR,aP){aQ.setFullYear(aQ.getFullYear()+aR);if(!aP){f(aQ)}return aQ}function q(aS,aT,aR){if(+aS){var aP=aS.getMonth()+aT,aQ=P(aS);aQ.setDate(1);aQ.setMonth(aP);aS.setMonth(aP);if(!aR){f(aS)}while(aS.getMonth()!=aQ.getMonth()){aS.setDate(aS.getDate()+(aS<aQ?1:-1))}}return aS}function aG(aS,aT,aR){if(+aS){var aP=aS.getDate()+aT,aQ=P(aS);aQ.setHours(9);aQ.setDate(aP);aS.setDate(aP);if(!aR){f(aS)}aI(aS,aQ)}return aS}function aI(aQ,aP){if(+aQ){while(aQ.getDate()!=aP.getDate()){aQ.setTime(+aQ+(aQ<aP?1:-1)*am)}}}function k(aP,aQ){aP.setMinutes(aP.getMinutes()+aQ);return aP}function f(aP){aP.setHours(0);aP.setMinutes(0);aP.setSeconds(0);aP.setMilliseconds(0);return aP}function P(aP,aQ){if(aQ){return f(new Date(+aP))}return new Date(+aP)}function h(){var aP=0,aQ;do{aQ=new Date(1970,aP++,1)}while(aQ.getHours());return aQ}function aD(aQ,aP){return Math.round((P(aQ,true)-P(aP,true))/az)}function B(aQ,aS,aP,aR){if(aS!==w&&aS!=aQ.getFullYear()){aQ.setDate(1);aQ.setMonth(0);aQ.setFullYear(aS)}if(aP!==w&&aP!=aQ.getMonth()){aQ.setDate(1);aQ.setMonth(aP)}if(aR!==w){aQ.setDate(aR)}}function ab(aQ,aP){if(typeof aQ=="object"){return aQ}if(typeof aQ=="number"){return new Date(aQ*1000)}if(typeof aQ=="string"){if(aQ.match(/^\d+(\.\d+)?$/)){return new Date(parseFloat(aQ)*1000)}if(aP===w){aP=true}return p(aQ,aP)||(aQ?new Date(aQ):null)}return null}function p(aT,aQ){var aP=aT.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!aP){return null}var aS=new Date(aP[1],0,1,9,0);if(aQ||!aP[13]){var aR=new Date(aP[1],0,1,9,0);if(aP[3]){aS.setMonth(aP[3]-1);aR.setMonth(aP[3]-1)}if(aP[5]){aS.setDate(aP[5]);aR.setDate(aP[5])}aI(aS,aR);if(aP[7]){aS.setHours(aP[7])}if(aP[8]){aS.setMinutes(aP[8])}if(aP[10]){aS.setSeconds(aP[10])}if(aP[12]){aS.setMilliseconds(Number("0."+aP[12])*1000)}aI(aS,aR)}else{aS.setUTCFullYear(aP[1],aP[3]?aP[3]-1:0,aP[5]||1);aS.setUTCHours(aP[7]||0,aP[8]||0,aP[10]||0,aP[12]?Number("0."+aP[12])*1000:0);if(aP[14]){var aU=Number(aP[16])*60+(aP[18]?Number(aP[18]):0);aU*=aP[15]=="-"?1:-1;aS=new Date(+aS+(aU*60*1000))}}return aS}function aK(aR){if(typeof aR=="number"){return aR*60}if(typeof aR=="object"){return aR.getHours()*60+aR.getMinutes()}var aP=aR.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(aP){var aQ=parseInt(aP[1],10);if(aP[3]){aQ%=12;if(aP[3].toLowerCase().charAt(0)=="p"){aQ+=12}}return aQ*60+(aP[2]?parseInt(aP[2],10):0)}}function E(aQ,aR,aP){return l(aQ,null,aR,aP)}function l(a1,a0,aZ,a2){a2=a2||O;var aQ=a1,aS=a0,aT,aU=aZ.length,aW,aR,aY,aV="";for(aT=0;aT<aU;aT++){aW=aZ.charAt(aT);if(aW=="'"){for(aR=aT+1;aR<aU;aR++){if(aZ.charAt(aR)=="'"){if(aQ){if(aR==aT+1){aV+="'"}else{aV+=aZ.substring(aT+1,aR)}aT=aR}break}}}else{if(aW=="("){for(aR=aT+1;aR<aU;aR++){if(aZ.charAt(aR)==")"){var aP=E(aQ,aZ.substring(aT+1,aR),a2);if(parseInt(aP.replace(/\D/,""),10)){aV+=aP}aT=aR;break}}}else{if(aW=="["){for(aR=aT+1;aR<aU;aR++){if(aZ.charAt(aR)=="]"){var aX=aZ.substring(aT+1,aR);var aP=E(aQ,aX,a2);if(aP!=E(aS,aX,a2)){aV+=aP}aT=aR;break}}}else{if(aW=="{"){aQ=a0;aS=a1}else{if(aW=="}"){aQ=a1;aS=a0}else{for(aR=aU;aR>aT;aR--){if(aY=aC[aZ.substring(aT,aR)]){if(aQ){aV+=aY(aQ,a2)}aT=aR-1;break}}if(aR==aT){if(aQ){aV+=aW}}}}}}}}return aV}var aC={s:function(aP){return aP.getSeconds()},ss:function(aP){return ad(aP.getSeconds())},m:function(aP){return aP.getMinutes()},mm:function(aP){return ad(aP.getMinutes())},h:function(aP){return aP.getHours()%12||12},hh:function(aP){return ad(aP.getHours()%12||12)},H:function(aP){return aP.getHours()},HH:function(aP){return ad(aP.getHours())},d:function(aP){return aP.getDate()},dd:function(aP){return ad(aP.getDate())},ddd:function(aQ,aP){return aP.dayNamesShort[aQ.getDay()]},dddd:function(aQ,aP){return aP.dayNames[aQ.getDay()]},M:function(aP){return aP.getMonth()+1},MM:function(aP){return ad(aP.getMonth()+1)},MMM:function(aQ,aP){return aP.monthNamesShort[aQ.getMonth()]},MMMM:function(aQ,aP){return aP.monthNames[aQ.getMonth()]},yy:function(aP){return(aP.getFullYear()+"").substring(2)},yyyy:function(aP){return aP.getFullYear()},t:function(aP){return aP.getHours()<12?"a":"p"},tt:function(aP){return aP.getHours()<12?"am":"pm"},T:function(aP){return aP.getHours()<12?"A":"P"},TT:function(aP){return aP.getHours()<12?"AM":"PM"},u:function(aP){return E(aP,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(aQ){var aP=aQ.getDate();if(aP>10&&aP<20){return"th"}return["st","nd","rd"][aP%10-1]||"th"},w:function(aQ,aP){return aP.weekNumberCalculation(aQ)},W:function(aP){return x(aP)}};aE.dateFormatters=aC;function x(aP){var aQ;var aR=new Date(aP.getTime());aR.setDate(aR.getDate()+4-(aR.getDay()||7));aQ=aR.getTime();aR.setMonth(0);aR.setDate(1);return Math.floor(Math.round((aQ-aR)/86400000)/7)+1}aE.applyAll=K;function ap(aP){if(aP.end){return s(aP.end,aP.allDay)}else{return aG(P(aP.start),1)}}function s(aP,aQ){aP=P(aP);return aQ||aP.getHours()||aP.getMinutes()?aG(aP,1):f(aP)}function aL(aP){return(8-aP.getDay())%7}function ay(aS,aP,aR){var aQ=aL(aS);if(aQ>3){return E(aS,aP||"W",aR)}else{var aT=new Date(aS);aT.setDate(aT.getDate()+aQ);return E(aT,aP||"W",aR)}}function v(aQ,aP,aR){aQ.unbind("mouseover").mouseover(function(aV){var aU=aV.target,aW,aT,aS;while(aU!=this){aW=aU;aU=aU.parentNode}if((aT=aW._fci)!==w){aW._fci=w;aS=aP[aT];aR(aS.event,aS.element,aS);av(aV.target).trigger(aV)}aV.stopPropagation()})}function aw(aR,aS,aP){for(var aQ=0,aT;aQ<aR.length;aQ++){aT=av(aR[aQ]);aT.width(Math.max(0,aS-j(aT,aP)))}}function aa(aS,aP,aQ){for(var aR=0,aT;aR<aS.length;aR++){aT=av(aS[aR]);aT.height(Math.max(0,aP-I(aT,aQ)))}}function j(aQ,aP){return ai(aQ)+r(aQ)+(aP?ah(aQ):0)}function ai(aP){return(parseFloat(av.css(aP[0],"paddingLeft",true))||0)+(parseFloat(av.css(aP[0],"paddingRight",true))||0)}function ah(aP){return(parseFloat(av.css(aP[0],"marginLeft",true))||0)+(parseFloat(av.css(aP[0],"marginRight",true))||0)}function r(aP){return(parseFloat(av.css(aP[0],"borderLeftWidth",true))||0)+(parseFloat(av.css(aP[0],"borderRightWidth",true))||0)}function I(aQ,aP){return A(aQ)+ar(aQ)+(aP?m(aQ):0)}function A(aP){return(parseFloat(av.css(aP[0],"paddingTop",true))||0)+(parseFloat(av.css(aP[0],"paddingBottom",true))||0)}function m(aP){return(parseFloat(av.css(aP[0],"marginTop",true))||0)+(parseFloat(av.css(aP[0],"marginBottom",true))||0)}function ar(aP){return(parseFloat(av.css(aP[0],"borderTopWidth",true))||0)+(parseFloat(av.css(aP[0],"borderBottomWidth",true))||0)}function at(){}function a(aQ,aP){return aQ-aP}function au(aP){return Math.max.apply(Math,aP)}function ad(aP){return(aP<10?"0":"")+aP}function H(aT,aP){if(aT[aP]!==w){return aT[aP]}var aS=aP.split(/(?=[A-Z])/),aR=aS.length-1,aQ;for(;aR>=0;aR--){aQ=aT[aS[aR].toLowerCase()];if(aQ!==w){return aQ}}return aT[""]}function aJ(aP){return aP.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function aO(aP){aP.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})}function g(aP){aP.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function M(aP,aQ){aP.each(function(aR,aS){aS.className=aS.className.replace(/^fc-\w*/,"fc-"+R[aQ.getDay()])})}function S(aQ,aR){var aP=aQ.source||{};var aW=aQ.color;var aU=aP.color;var aT=aR("eventColor");var aX=aQ.backgroundColor||aW||aP.backgroundColor||aU||aR("eventBackgroundColor")||aT;var aS=aQ.borderColor||aW||aP.borderColor||aU||aR("eventBorderColor")||aT;var aY=aQ.textColor||aP.textColor||aR("eventTextColor");var aV=[];if(aX){aV.push("background-color:"+aX)}if(aS){aV.push("border-color:"+aS)}if(aY){aV.push("color:"+aY)}return aV.join(";")}function K(aS,aT,aQ){if(av.isFunction(aS)){aS=[aS]}if(aS){var aR;var aP;for(aR=0;aR<aS.length;aR++){aP=aS[aR].apply(aT,aQ)||aP}return aP}}function aM(){for(var aP=0;aP<arguments.length;aP++){if(arguments[aP]!==w){return arguments[aP]}}}ag.timeline=z;function z(aQ,aT){var aP=this;aP.name="timeline";aP.render=aR;aP.title="";aP.formatDate=function(aU,aV){return aT.formatDate(aU,aV)};var aS=c.getTimelineAdapter(aQ,aT.options._calendarPlugin,aT.options._calendarDiv,aP);function aR(aU,aV){aS.setDate(aU)}aP.update=function(){aT.refetchEvents(true)};aP.unselect=function(){};aP.setHeight=function(){};aP.setWidth=function(){};aP.clearEvents=function(){};aP.renderEvents=function(aU){aS.renderEvents(aU)};aP.trigger=function(aU,aV){return aT.trigger.apply(aT,[aU,aV||aP].concat(Array.prototype.slice.call(arguments,2),[aP]))};aP.next=function(){aS.next()};aP.prev=function(){aS.prev()};aP.gotoDate=function(aU){aT.gotoDate(aU)};aP.triggerEventDestroy=function(){};aP.clearEventData=function(){};aP.setEventData=function(aU){aS.renderEvents(aU)};aP.element=av(".fc-view-timeline")}ag.month=ae;function ae(aU,aT){var aX=this;aX.render=aP;C.call(aX,aU,aT,"month");var aQ=aX.opt;var aR=aX.renderBasic;var aV=aX.skipHiddenDays;var aS=aX.getCellsPerWeek;var aW=aT.formatDate;function aP(a0,a5){if(a5){q(a0,a5);a0.setDate(1)}var aY=aQ("firstDay");var aZ=P(a0,true);aZ.setDate(1);var a1=q(P(aZ),1);var a6=P(aZ);aG(a6,-((a6.getDay()-aY+7)%7));aV(a6);var a2=P(a1);aG(a2,(7-a2.getDay()+aY)%7);aV(a2,-1,true);var a4=aS();var a3=Math.round(aD(a2,a6)/7);if(aQ("weekMode")=="fixed"){aG(a2,(6-a3)*7);a3=6}aX.title=aW(aZ,aQ("titleFormat"));aX.start=aZ;aX.end=a1;aX.visStart=a6;aX.visEnd=a2;aR(a3,a4,true)}}ag.basicWeek=aF;function aF(aU,aT){var aX=this;aX.render=aP;C.call(aX,aU,aT,"basicWeek");var aQ=aX.opt;var aR=aX.renderBasic;var aW=aX.skipHiddenDays;var aS=aX.getCellsPerWeek;var aV=aT.formatDates;function aP(a2,a4){if(a4){aG(a2,a4*7)}var a3=aG(P(a2),-((a2.getDay()-aQ("firstDay")+7)%7));var a0=aG(P(a3),7);var aZ=P(a3);aW(aZ);var aY=P(a0);aW(aY,-1,true);var a1=aS();aX.start=a3;aX.end=a0;aX.visStart=aZ;aX.visEnd=aY;aX.title=aV(aZ,aG(P(aY),-1),aQ("titleFormat"));aR(1,a1,false)}}ag.basicDay=L;function L(aS,a4){var a2=this;a2.render=ba;var aZ=0;var a6=false;var a7;C.call(a2,aS,a4,"basicDay");var aQ=a2.opt,a9=a2.renderBasic,aX=a2.skipHiddenDays,a3=a4.formatDate,aY=a4.options._calendarDiv,a5=a4.options._calendarPlugin,a0=1000*60*60*24,a8=Math.min(parseInt(a5.getParameter(aY,"maxUpcomingDays")),30),a1=av("<div/>").appendTo(aS),aW=a5.getParameter(aY,"autoAdjustUpcomingEventsHeight")==="true",aP=a5.getParameter(aY,"hideMoreEventsButtonInUpcomingEventsOnClick")==="true",aR=function(){if(aW){aS.css({height:(av(".events-container",a1).height()+5)+"px",overflow:"hidden"})}},aV=true,aT=true;daysMore=a8;var aU=function(bm,bq,bk){if(!a7){a7=bq}else{if(!bm.length&&a7!==bq){a7=bq;a6=false;a1.empty();av("<div/>",{text:"An diesem Tag gibt es keine Ereignisse."}).appendTo(a1.empty())}}if(bm.length){a1.empty();a6=true;var bp=[],bd=new Date(),bf=new Date();aS.removeClass("no-event");av.each(bm,function(bt,bs){if(bs.eventType=="custom"){bs.iconName=bs.className[0]||"other"}else{if(bs.eventType=="subscription"){bs.iconName="other"}else{bs.iconName=bs.eventType}}bs.customIcon;var br=bs.allDay;bs.startdisplay=a3(bs.start,aQ("timeFormat"));bs.enddisplay=a3(bs.end,aQ("timeFormat"));if(bs.expandDates&&bs.end&&bs.end.getTime()-bs.start.getTime()>=a0){var bu=bs.end;bd.setTime(bs.start.getTime()+a0);if(br){while(bd<=bu){bf.setTime(bd.getTime()+a0);if(bd>=bq&&bf<=bk){bp.push(av.extend({},bs,{start:new Date(bd.getTime()),end:new Date(bf.getTime()),expanded:true}))}bd.setTime(bf.getTime())}}else{bd.setHours(0,0,0,0);bf.setTime(bd.getTime());bf.setHours(23,59,59,0);finalDayCuttoff=new Date(bs.end.getTime());finalDayCuttoff.setHours(0,0,0,0);bs.multiday=true;bs.enddisplay=a3(bf,aQ("timeFormat"));while(bd<finalDayCuttoff&&bd<bk){bp.push(av.extend({},bs,{start:new Date(bd.getTime()),end:new Date(bd.getTime()+a0),expanded:true}));bd.setTime(bd.getTime()+a0);bf.setTime(bf.getTime()+a0)}if(bd>=finalDayCuttoff&&finalDayCuttoff<bk){bp.push(av.extend({},bs,{start:new Date(bd.getTime()),end:bs.end,startdisplay:a3(bd,aQ("timeFormat")),enddisplay:a3(bs.end,aQ("timeFormat")),expanded:true}))}}}});av.each(bp,function(br,bs){bm.push(bs)});bm.sort(function(bs,bt){var br=bs.expanded===bt.expanded?0:(bs.expanded?1:-1);if(0==br){br=bs.allDay===bt.allDay?0:(bs.allDay?1:-1)}if(0===br){br=bs.start.getTime()-bt.start.getTime()}if(0==br){br=bs.title>bt.title?1:(bt.title>bs.title?-1:0)}if(0==br){br=bs.subCalendarId>bt.subCalendarId?1:(bt.subCalendarId>bs.subCalendarId?-1:0)}return br});bm=av.grep(bm,function(br){return br.start>=bq});var bc={};av.each(bm,function(bw,bt){var br=a3(new Date(),"yyyyMMdd"),bs=a3(bt.start,"yyyyMMdd"),bv=bc[bs],bu;if(!bc[bs]){bv={today:bs===br,groupKey:bs,groupDay:bs.substring(6),dateFormatKey:bs.substring(6)+bs.substring(4,6)+bs.substring(0,4),events:[bt]};bc[bs]=bv}else{bu=bv.events;bu.push(bt)}});var bl=parseInt(a5.getParameter(aY,"maxEventsPerUpcomingDay"));var bi={};var be={};function bh(bs){var bt=be[bs.subCalendarId]||a5.getSubCalendar(aY,bs.subCalendarId),br=be[bt.parentId]||a5.getSubCalendar(aY,bt.parentId),bu=av.extend({subCalendar:bt,parentSubCalendar:br},bs);be[bt.id]=bt;if(br){be[br.id]=br}bi[bt.id]=bi[bt.id]||{};bi[bt.id][bu.id]=bu;return bu}av.each(bc,function(br,bt){var bs=bt.events;if(aT&&bs&&bs.length&&bs.length>bl){bt.hiddenEventsCount=bs.length-bl;bt.hiddenEvents=bs.slice(bl);bt.events=bs.slice(0,bl)}bt.events=av.map(bt.events,bh)});var bo=[];av.each(bc,function(br){bo.push(br)});bo.sort(function(br,bs){return br>bs?1:(bs>br?-1:0)});var bb=av("<div/>").html(c.Templates().upcomingEvents({eventGroups:av.map(bo,function(br){return bc[br]})}));a1.append(bb);function bn(br){av(".event-description",br).ThreeDots({max_rows:1});av("li.event-item",br).each(function(bv){var bs=av(this);if(!aV&&bv>=10&&!bs.prev().length){var bx=bs.closest(".event-group");if(!bx.hasClass("toggleable")){bx.addClass("toggleable")}}var bw=this.getAttribute("data-event-subCalendar-id");var bt=this.getAttribute("data-event-id");var bu=bi[bw][bt];a5.getEventDetailsDialog(aY,bu,bs.hover(function(){bs.addClass("highlighted");a5.hideInlineAuiDialogs()},function(){bs.removeClass("highlighted")}),{hideDelay:10000,noBind:false})});if(aT){av(".hidden-events-expand",br).on("click",bg)}}bn(bb);function bg(){var br=av(this).data("event-group-key");var bu=bc[br];bu.events=av.map(bu.events,bh);var bs=av.map(bu.hiddenEvents.slice(0,10),bh);bu.events=bu.events.concat(bs);bu.hiddenEvents=bu.hiddenEvents.slice(10);var bt=c.Templates().dayEventList({eventsList:bu.events,hiddenEventsCount:bu.hiddenEvents.length,groupKey:br});av(this).closest(".events").replaceWith(bt);bn(av("#"+br))}aR();var bj=function(br,bt){var bs=bt.attr("data-group-date");bt.text(a3(new Date(parseInt(bs.substring(4)),parseInt(bs.substring(2,4),10)-1,parseInt(bs.substring(0,2),10)),br))};av(".other-days",bb).each(function(){bj("dddd",av(this))});av(".day",bb).each(function(){bj("dd",av(this))});av(".month",bb).each(function(){bj("MMM",av(this))})}else{if(aZ>1&&!a6){a1.empty();av("<div/>",{text:"An diesem Tag gibt es keine Ereignisse."}).appendTo(a1.empty())}else{if(!a6){a1.empty();aZ=aZ+1;window.setTimeout(function(){a2.renderEvents([])},1000);av("<span class='calendar-upcoming-spinner aui-icon aui-icon-wait'>Loading...</span>").appendTo(a1.empty())}}}};av("<div/>",{"class":"no-events-message",text:"Wird geladen..."}).appendTo(a1);a2.renderEvents=function(bc){aS.css("MozUserSelect","text").attr("unselectable","off").unbind("selectstart.ui");var bb=new Date(a2.visStart.getTime()+a0*(daysMore=a8));aU((function(bh,bg,bf){var bd=[];var be=function(bi){if(bi.allDay){return(bi.start>=bg&&bi.start<bf)||(bi.start<bg&&bi.end>=bg)||(bi.start>=bf&&bi.start<bf)}else{return(bi.start>=bg&&bi.start<bf)||(bi.start<bg&&bi.end>bg)||(bi.start>=bf&&bi.start<bf)}};av.each(bh,function(bj,bi){if(be(bi)){bd.push(bi)}});return bd})(bc,a2.visStart,bb),a2.visStart,bb)};function ba(bc,be){if(be){aG(bc,be)}aX(bc,be<0?-1:1);var bd=P(bc,true);var bb=aG(P(bd),1);a2.title=a3(bc,aQ("titleFormat"));a2.start=a2.visStart=bd;a2.end=a2.visEnd=bb;a9(1,1,false)}}al({weekMode:"fixed"});function C(bb,bC,a3){var bB=this;bB.renderBasic=bv;bB.setHeight=bz;bB.setWidth=bK;bB.renderDayOverlay=br;bB.defaultSelectionEnd=bq;bB.renderSelection=bD;bB.clearSelection=aP;bB.reportDayClick=a9;bB.dragStart=aV;bB.dragStop=a4;bB.defaultEventEnd=bP;bB.getHoverListener=function(){return aW};bB.colLeft=bR;bB.colRight=be;bB.colContentLeft=by;bB.colContentRight=bw;bB.getIsCellAllDay=function(){return true};bB.allDayRow=a8;bB.getRowCnt=function(){return bi};bB.getColCnt=function(){return aY};bB.getColWidth=function(){return bn};bB.getDaySegmentContainer=function(){return a7};aH.call(bB,bb,bC,a3);d.call(bB);ao.call(bB);an.call(bB);var bg=bB.opt;var bs=bB.trigger;var bN=bB.renderOverlay;var a2=bB.clearOverlays;var bx=bB.daySelectionMousedown;var aR=bB.cellToDate;var bG=bB.dateToCell;var bu=bB.rangeToSegments;var bA=bC.formatDate;var aQ=bC.getWeekNumber;var bh;var ba;var a5;var bl;var a1;var bc;var bo;var bm;var aT;var a7;var bO;var bQ;var bn;var a6;var bi,aY;var bd;var bE;var aW;var bH;var bI;var bS;var aZ;var bf;var bF;var bp;aO(bb.addClass("fc-grid"));function bv(bT,bU,bV){bi=bT;aY=bU;bd=bV;bL();if(!bl){aU()}bk()}function bL(){bS=bg("theme")?"ui":"fc";aZ=bg("columnFormat");bf=bg("weekNumbers");bF=bg("weekNumberTitle");if(bg("weekNumberCalculation")!="iso"){bp="w"}else{bp="W"}}function aU(){a7=av("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(bb)}function bk(){var bT=bt();if(bh){bh.remove()}bh=av(bT).appendTo(bb);ba=bh.find("thead");a5=ba.find(".fc-day-header");bl=bh.find("tbody");a1=bl.find("tr");bc=bl.find(".fc-day");bo=a1.find("td:first-child");bm=a1.eq(0).find(".fc-day > div");aT=a1.eq(0).find(".fc-day-content > div");g(ba.add(ba.find("tr")));g(a1);a1.eq(0).addClass("fc-first");a1.filter(":last").addClass("fc-last");bc.each(function(bV,bW){var bU=aR(Math.floor(bV/aY),bV%aY);bs("dayRender",bB,bU,av(bW))});aX(bc)}function bt(){var bT="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+aS()+bj()+"</table>";return bT}function aS(){var bW=bS+"-widget-header";var bV="";var bU;var bT;bV+="<thead><tr>";if(bf){bV+="<th class='fc-week-number "+bW+"'>"+aJ(bF)+"</th>"}for(bU=0;bU<aY;bU++){bT=aR(0,bU);bV+="<th class='fc-day-header fc-"+R[bT.getDay()]+" "+bW+"'>"+aJ(bA(bT,aZ))+"</th>"}bV+="</tr></thead>";return bV}function bj(){var bV=bS+"-widget-content";var bW="";var bX;var bU;var bT;bW+="<tbody>";for(bX=0;bX<bi;bX++){bW+="<tr class='fc-week'>";if(bf){bT=aR(bX,0);bW+="<td class='fc-week-number "+bV+"'><div>"+aJ(aQ(bT,bp))+"</div></td>"}for(bU=0;bU<aY;bU++){bT=aR(bX,bU);bW+=a0(bT)}bW+="</tr>"}bW+="</tbody>";return bW}function a0(bV){var bU=bS+"-widget-content";var bX=bB.start.getMonth();var bT=f(new Date());var bW="";var bY=["fc-day","fc-"+R[bV.getDay()],bU];if(bV.getMonth()!=bX){bY.push("fc-other-month")}if(+bV==+bT){bY.push("fc-today",bS+"-state-highlight")}else{if(bV<bT){bY.push("fc-past")}else{bY.push("fc-future")}}bW+="<td class='"+bY.join(" ")+"' data-date='"+bA(bV,"yyyy-MM-dd")+"'><div>";if(bd){bW+="<div class='fc-day-number'>"+bV.getDate()+"</div>"}bW+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";return bW}function bz(bU){bQ=bU;var bX=bQ-ba.height();var bW;var bV;var bT;if(bg("weekMode")=="variable"){bW=bV=Math.floor(bX/(bi==1?2:6))}else{bW=Math.floor(bX/bi);bV=bX-bW*(bi-1)}bo.each(function(bY,bZ){if(bY<bi){bT=av(bZ);bT.find("> div").css("min-height",(bY==bi-1?bV:bW)-I(bT))}})}function bK(bT){bO=bT;bH.clear();bI.clear();a6=0;if(bf){a6=ba.find("th.fc-week-number").outerWidth()}bn=Math.floor((bO-a6)/aY);aw(a5.slice(0,-1),bn)}function aX(bT){bT.click(bM).mousedown(bx)}function bM(bU){if(!bg("selectable")){var bT=p(av(this).data("date"));bs("dayClick",this,bT,true,bU)}}function br(bX,bY,bT){if(bT){bE.build()}var bU=bu(bX,bY);for(var bV=0;bV<bU.length;bV++){var bW=bU[bV];aX(bJ(bW.row,bW.leftCol,bW.row,bW.rightCol))}}function bJ(bW,bX,bU,bV){var bT=bE.rect(bW,bX,bU,bV,bb);return bN(bT,bb)}function bq(bT,bU){return P(bT)}function bD(bT,bV,bU){br(bT,aG(P(bV),1),true)}function aP(){a2()}function a9(bV,bX,bW){var bT=bG(bV);var bU=bc[bT.row*aY+bT.col];bs("dayClick",bU,bV,bX,bW)}function aV(bV,bT,bU){aW.start(function(bW){a2();if(bW){bJ(bW.row,bW.col,bW.row,bW.col)}},bT)}function a4(bX,bU,bV){var bT=aW.stop();a2();if(bT){var bW=aR(bT);bs("drop",bX,bW,true,bU,bV)}}function bP(bT){return P(bT.start)}bE=new Q(function(bT,bW){var bV,bX,bU;a5.each(function(bZ,bY){bV=av(bY);bX=bV.offset().left;if(bZ){bU[1]=bX}bU=[bX];bW[bZ]=bU});bU[1]=bX+bV.outerWidth();a1.each(function(bZ,bY){if(bZ<bi){bV=av(bY);bX=bV.offset().top;if(bZ){bU[1]=bX}bU=[bX];bT[bZ]=bU}});bU[1]=bX+bV.outerHeight()});aW=new aq(bE);bH=new n(function(bT){return bm.eq(bT)});bI=new n(function(bT){return aT.eq(bT)});function bR(bT){return bH.left(bT)}function be(bT){return bH.right(bT)}function by(bT){return bI.left(bT)}function bw(bT){return bI.right(bT)}function a8(bT){return a1.eq(bT)}}function an(){var aQ=this;aQ.renderEvents=aP;aQ.clearEvents=aR;Z.call(aQ);function aP(aT,aS){aQ.renderDayEvents(aT,aS)}function aR(){aQ.getDaySegmentContainer().empty()}}ag.agendaWeek=i;function i(aU,aT){var aX=this;aX.render=aP;J.call(aX,aU,aT,"agendaWeek");var aQ=aX.opt;var aR=aX.renderAgenda;var aW=aX.skipHiddenDays;var aS=aX.getCellsPerWeek;var aV=aT.formatDates;function aP(a2,a4){if(a4){aG(a2,a4*7)}var a3=aG(P(a2),-((a2.getDay()-aQ("firstDay")+7)%7));var a0=aG(P(a3),7);var aZ=P(a3);aW(aZ);var aY=P(a0);aW(aY,-1,true);var a1=aS();aX.title=aV(aZ,aG(P(aY),-1),aQ("titleFormat"));aX.start=a3;aX.end=a0;aX.visStart=aZ;aX.visEnd=aY;aR(a1)}}ag.agendaDay=aA;function aA(aT,aW){var aS=this;aS.render=aU;J.call(aS,aT,aW,"agendaDay");var aR=aS.opt;var aP=aS.renderAgenda;var aQ=aS.skipHiddenDays;var aV=aW.formatDate;function aU(aY,a0){if(a0){aG(aY,a0)}aQ(aY,a0<0?-1:1);var aZ=P(aY,true);var aX=aG(P(aZ),1);aS.title=aV(aY,aR("titleFormat"));aS.start=aS.visStart=aZ;aS.end=aS.visEnd=aX;aP(1)}}al({allDaySlot:true,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:30,axisFormat:c.isDisplayTimeFormat24hour()===true?"HH:mm":"h(:mm)tt",timeFormat:{agenda:c.isDisplayTimeFormat24hour()===true?"HH:mm{ - HH:mm}":"h:mm{ - h:mm}"},dragOpacity:{agenda:0.5},minTime:0,maxTime:24,slotEventOverlap:true});function J(cf,a5,bi){var bf=this;bf.renderAgenda=a1;bf.setWidth=br;bf.setHeight=bn;bf.afterRender=bY;bf.defaultEventEnd=bX;bf.timePosition=ci;bf.getIsCellAllDay=by;bf.allDayRow=bF;bf.getCoordinateGrid=function(){return bK};bf.getHoverListener=function(){return ce};bf.colLeft=b9;bf.colRight=bQ;bf.colContentLeft=cj;bf.colContentRight=aX;bf.getDaySegmentContainer=function(){return ba};bf.getSlotSegmentContainer=function(){return aV};bf.getMinMinute=function(){return bm};bf.getMaxMinute=function(){return aR};bf.getSlotContainer=function(){return a8};bf.getRowCnt=function(){return 1};bf.getColCnt=function(){return bI};bf.getColWidth=function(){return aY};bf.getSnapHeight=function(){return cb};bf.getSnapMinutes=function(){return bv};bf.defaultSelectionEnd=bq;bf.renderDayOverlay=aT;bf.renderSelection=b7;bf.clearSelection=b2;bf.reportDayClick=bc;bf.dragStart=aZ;bf.dragStop=cg;aH.call(bf,cf,a5,bi);d.call(bf);ao.call(bf);W.call(bf);var bD=bf.opt;var bG=bf.trigger;var bu=bf.renderOverlay;var aS=bf.clearOverlays;var bw=bf.reportSelection;var b5=bf.unselect;var bB=bf.daySelectionMousedown;var a7=bf.slotSegHtml;var bd=bf.cellToDate;var a0=bf.dateToCell;var bk=bf.rangeToSegments;var bb=a5.formatDate;var bP=a5.getWeekNumber;var bT;var cc;var b0;var bZ;var bh;var aU;var aP;var bW;var bO;var ch;var ba;var cd;var b4;var bs;var a8;var aV;var a2;var aW;var bz;var bM;var bo;var aY;var bC;var bJ;var bv;var a6;var cb;var bI;var bN;var bK;var ce;var bH;var bA;var bj={};var bt;var aQ;var bm,aR;var a4;var bU;var bE;var bx;aO(cf.addClass("fc-agenda"));function a1(ck){bI=ck;bL();if(!bT){bg()}else{bS()}}function bL(){bt=bD("theme")?"ui":"fc";aQ=bD("isRTL");bm=aK(bD("minTime"));aR=aK(bD("maxTime"));a4=bD("columnFormat");bU=bD("weekNumbers");bE=bD("weekNumberTitle");if(bD("weekNumberCalculation")!="iso"){bx="w"}else{bx="W"}bv=bD("snapMinutes")||bD("slotMinutes")}function bg(){var cp=bt+"-widget-header";var ck=bt+"-widget-content";var co;var cr;var cn;var cq;var cm;var cl=bD("slotMinutes")%15==0;bS();ch=av("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(cf);if(bD("allDaySlot")){ba=av("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ch);co="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+cp+" fc-agenda-axis'>"+bD("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'></div></div></td><th class='"+cp+" fc-agenda-gutter'>&nbsp;</th></tr></table>";cd=av(co).appendTo(ch);b4=cd.find("tr");bp(b4.find("td"));ch.append("<div class='fc-agenda-divider "+cp+"'><div class='fc-agenda-divider-inner'></div></div>")}else{ba=av([])}bs=av("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'></div>").appendTo(ch);a8=av("<div style='position:relative;width:100%;overflow:hidden'></div>").appendTo(bs);aV=av("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'></div>").appendTo(a8);co="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>";cr=h();cq=k(P(cr),aR);k(cr,bm);bN=0;for(cn=0;cr<cq;cn++){cm=cr.getMinutes();co+="<tr class='fc-slot"+cn+" "+(!cm?"":"fc-minor")+"'><th class='fc-agenda-axis "+cp+"'>"+((!cl||!cm)?bb(cr,bD("axisFormat")):"&nbsp;")+"</th><td class='"+ck+"'><div style='position:relative'>&nbsp;</div></td></tr>";k(cr,bD("slotMinutes"));bN++}co+="</tbody></table>";a2=av(co).appendTo(a8);b3(a2.find("td"))}function bS(){var ck=ca();if(bT){bT.remove()}bT=av(ck).appendTo(cf);cc=bT.find("thead");b0=cc.find("th").slice(1,-1);bZ=bT.find("tbody");bh=bZ.find("td").slice(0,-1);aU=bh.find("> div");aP=bh.find(".fc-day-content > div");bW=bh.eq(0);bO=aU.eq(0);g(cc.add(cc.find("tr")));g(bZ.add(bZ.find("tr")))}function ca(){var ck="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+b8()+b1()+"</table>";return ck}function b8(){var cn=bt+"-widget-header";var cl;var cm="";var co;var ck;cm+="<thead><tr>";if(bU){cl=bd(0,0);co=bP(cl,bx);if(aQ){co+=bE}else{co=bE+co}cm+="<th class='fc-agenda-axis fc-week-number "+cn+"'>"+aJ(co)+"</th>"}else{cm+="<th class='fc-agenda-axis "+cn+"'>&nbsp;</th>"}for(ck=0;ck<bI;ck++){cl=bd(0,ck);cm+="<th class='fc-"+R[cl.getDay()]+" fc-col"+ck+" "+cn+"'>"+aJ(bb(cl,a4))+"</th>"}cm+="<th class='fc-agenda-gutter "+cn+"'>&nbsp;</th></tr></thead>";return cm}function b1(){var cm=bt+"-widget-header";var cn=bt+"-widget-content";var cp;var cr=f(new Date());var co;var cs;var cl;var ck;var cq="";cq+="<tbody><tr><th class='fc-agenda-axis "+cm+"'>&nbsp;</th>";cs="";for(co=0;co<bI;co++){cp=bd(0,co);ck=["fc-col"+co,"fc-"+R[cp.getDay()],cn];if(+cp==+cr){ck.push(bt+"-state-highlight","fc-today")}else{if(cp<cr){ck.push("fc-past")}else{ck.push("fc-future")}}cl="<td class='"+ck.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";cs+=cl}cq+=cs;cq+="<td class='fc-agenda-gutter "+cn+"'>&nbsp;</td></tr></tbody>";return cq}function bn(ck){if(ck===w){ck=bM}bM=ck;bj={};var cm=bZ.position().top;var cl=bs.position().top;var cn=Math.min(ck-cm,a2.height()+cl+1);bO.height(cn-I(bW));ch.css("top",cm);bs.height(cn-cl-1);bJ=a2.find("tr:first").height()+1;a6=bD("slotMinutes")/bv;cb=bJ/a6}function br(cn){bz=cn;bH.clear();bA.clear();var ck=cc.find("th:first");if(cd){ck=ck.add(cd.find("th:first"))}ck=ck.add(a2.find("th:first"));bo=0;aw(ck.width("").each(function(co,cp){bo=Math.max(bo,av(cp).outerWidth())}),bo);var cl=bT.find(".fc-agenda-gutter");if(cd){cl=cl.add(cd.find("th.fc-agenda-gutter"))}var cm=bs[0].clientWidth;bC=bs.width()-cm;if(bC){aw(cl,bC);cl.show().prev().removeClass("fc-last")}else{cl.hide().prev().addClass("fc-last")}aY=Math.floor((cm-bo)/bI);aw(b0.slice(0,-1),aY)}function bl(){var cn=h();var cl=P(cn);cl.setHours(bD("firstHour"));var cm=ci(cn,cl)+1;function ck(){bs.scrollTop(cm)}ck();setTimeout(ck,0)}function bY(){bl()}function bp(ck){ck.click(bR).mousedown(bB)}function b3(ck){ck.click(bR).mousedown(a3)}function bR(co){if(!bD("selectable")){var cm=Math.min(bI-1,Math.floor((co.pageX-bT.offset().left-bo)/aY));var cl=bd(0,cm);var cp=this.parentNode.className.match(/fc-slot(\d+)/);if(cp){var cn=parseInt(cp[1])*bD("slotMinutes");var ck=Math.floor(cn/60);cl.setHours(ck);cl.setMinutes(cn%60+bm);bG("dayClick",bh[cm],cl,false,co)}else{bG("dayClick",bh[cm],cl,true,co)}}}function aT(co,cp,ck){if(ck){bK.build()}var cl=bk(co,cp);for(var cm=0;cm<cl.length;cm++){var cn=cl[cm];bp(a9(cn.row,cn.leftCol,cn.row,cn.rightCol))}}function a9(cn,co,cl,cm){var ck=bK.rect(cn,co,cl,cm,ch);return bu(ck,ch)}function be(co,ct){for(var cm=0;cm<bI;cm++){var cp=bd(0,cm);var cl=aG(P(cp),1);var cn=new Date(Math.max(cp,co));var cs=new Date(Math.min(cl,ct));if(cn<cs){var cr=bK.rect(0,cm,0,cm,a8);var cq=ci(cp,cn);var ck=ci(cp,cs);cr.top=cq;cr.height=ck-cq;b3(bu(cr,a8))}}}bK=new Q(function(cs,cq){var co,cl,ck;b0.each(function(cv,cu){co=av(cu);cl=co.offset().left;if(cv){ck[1]=cl}ck=[cl];cq[cv]=ck});ck[1]=cl+co.outerWidth();if(bD("allDaySlot")){co=b4;cl=co.offset().top;cs[0]=[cl,cl+co.outerHeight()]}var cr=a8.offset().top;var ct=bs.offset().top;var cn=ct+bs.outerHeight();function cp(cu){return Math.max(ct,Math.min(cn,cu))}for(var cm=0;cm<bN*a6;cm++){cs.push([cp(cr+cb*cm),cp(cr+cb*(cm+1))])}});ce=new aq(bK);bH=new n(function(ck){return aU.eq(ck)});bA=new n(function(ck){return aP.eq(ck)});function b9(ck){return bH.left(ck)}function cj(ck){return bA.left(ck)}function bQ(ck){return bH.right(ck)}function aX(ck){return bA.right(ck)}function by(ck){return bD("allDaySlot")&&!ck.row}function bV(ck){var cm=bd(0,ck.col);var cl=ck.row;if(bD("allDaySlot")){cl--}if(cl>=0){k(cm,bm+cl*bv)}return cm}function ci(cl,cp){cl=P(cl,true);if(cp<k(P(cl),bm)){return 0}if(cp>=k(P(cl),aR)){return a2.height()}var ck=bD("slotMinutes"),co=cp.getHours()*60+cp.getMinutes()-bm,cn=Math.floor(co/ck),cm=bj[cn];if(cm===w){cm=bj[cn]=a2.find("tr").eq(cn).find("td div")[0].offsetTop}return Math.max(0,Math.round(cm-1+bJ*((co%ck)/ck)))}function bF(ck){return b4}function bX(ck){var cl=P(ck.start);if(ck.allDay){return cl}return k(cl,bD("defaultEventMinutes"))}function bq(ck,cl){if(cl){return P(ck)}return k(P(ck),bD("slotMinutes"))}function b7(ck,cm,cl){if(cl){if(bD("allDaySlot")){aT(ck,aG(P(cm),1),true)}}else{b6(ck,cm)}}function b6(ck,cq){var co=bD("selectHelper");bK.build();if(co){var cm=a0(ck).col;if(cm>=0&&cm<bI){var cn=bK.rect(0,cm,0,cm,a8);var cp=ci(ck,ck);var cl=ci(ck,cq);if(cl>cp){cn.top=cp;cn.height=cl-cp;cn.left+=2;cn.width-=5;if(av.isFunction(co)){var cr=co(ck,cq);if(cr){cn.position="absolute";aW=av(cr).css(cn).appendTo(a8)}}else{cn.isStart=true;cn.isEnd=true;aW=av(a7({title:"",start:ck,end:cq,className:["fc-select-helper"],editable:false},cn));aW.css("opacity",bD("dragOpacity"))}if(aW){b3(aW);a8.append(aW);aw(aW,cn.width,true);aa(aW,cn.height,true)}}}}else{be(ck,cq)}}function b2(){aS();if(aW){aW.remove();aW=null}}function a3(ck){if(ck.which==1&&bD("selectable")){b5(ck);var cl;ce.start(function(cn,cm){b2();if(cn&&cn.col==cm.col&&!by(cn)){var cp=bV(cm);var co=bV(cn);cl=[cp,k(P(cp),bv),co,k(P(co),bv)].sort(a);b6(cl[0],cl[3])}else{cl=null}},ck);av(document).one("mouseup",function(cm){ce.stop();if(cl){if(+cl[0]==+cl[1]){bc(cl[0],false,cm)}bw(cl[0],cl[3],false,cm)}})}}function bc(ck,cm,cl){bG("dayClick",bh[a0(ck).col],ck,cm,cl)}function aZ(cm,ck,cl){ce.start(function(cn){aS();if(cn){if(by(cn)){a9(cn.row,cn.col,cn.row,cn.col)}else{var cp=bV(cn);var co=k(P(cp),bD("defaultEventMinutes"));be(cp,co)}}},ck)}function cg(cn,cl,cm){var ck=ce.stop();aS();if(ck){bG("drop",cn,bV(ck),by(ck),cl,cm)}}}function W(){var bo=this;bo.renderEvents=aU;bo.clearEvents=a9;bo.slotSegHtml=ba;Z.call(bo);var a4=bo.opt;var bb=bo.trigger;var aS=bo.isEventDraggable;var bt=bo.isEventResizable;var bu=bo.eventEnd;var be=bo.eventElementHandlers;var bk=bo.setHeight;var aT=bo.getDaySegmentContainer;var bw=bo.getSlotSegmentContainer;var aR=bo.getHoverListener;var aQ=bo.getMaxMinute;var bf=bo.getMinMinute;var aX=bo.timePosition;var bh=bo.getIsCellAllDay;var bj=bo.colContentLeft;var bg=bo.colContentRight;var aP=bo.cellToDate;var bl=bo.getColCnt;var a5=bo.getColWidth;var bn=bo.getSnapHeight;var aZ=bo.getSnapMinutes;var a1=bo.getSlotContainer;var a2=bo.reportEventElement;var aV=bo.showEvents;var a3=bo.hideEvents;var br=bo.eventDrop;var a7=bo.eventResize;var bc=bo.renderDayOverlay;var aW=bo.clearOverlays;var bx=bo.renderDayEvents;var bp=bo.calendar;var bm=bp.formatDate;var a6=bp.formatDates;bo.draggableDayEvent=a0;function aU(bC,bA){var bB,bz=bC.length,bD=[],by=[];for(bB=0;bB<bz;bB++){if(bC[bB].allDay){bD.push(bC[bB])}else{by.push(bC[bB])}}if(a4("allDaySlot")){bx(bD,bA);bk()}aY(a8(by),bA)}function a9(){aT().empty();bw().empty()}function a8(bI){var bG=bl(),bE=bf(),bz=aQ(),bF,bC=av.map(bI,bv),bD,bB,bA,bH,by=[];for(bD=0;bD<bG;bD++){bF=aP(0,bD);k(bF,bE);bH=bi(bI,bC,bF,k(P(bF),bz-bE));bH=aj(bH);for(bB=0;bB<bH.length;bB++){bA=bH[bB];bA.col=bD;by.push(bA)}}return by}function bi(bK,bE,bA,bD){var bB=[],bF,bH=bK.length,bz,bI,bG,bJ,bL,by,bC;for(bF=0;bF<bH;bF++){bz=bK[bF];bI=bz.start;bG=bE[bF];if(bG>bA&&bI<bD){if(bI<bA){bJ=P(bA);by=false}else{bJ=bI;by=true}if(bG>bD){bL=P(bD);bC=false}else{bL=bG;bC=true}bB.push({event:bz,start:bJ,end:bL,isStart:by,isEnd:bC})}}return bB.sort(y)}function bv(by){if(by.end){return P(by.end)}else{return k(P(by.start),a4("defaultEventMinutes"))}}function aY(bJ,bK){var bO,bR=bJ.length,bQ,bM,bG,bC,bD,bF,bA,bL,by,bS,bE="",bT,bP,bB,bI,bH,bN=bw(),bz=a4("isRTL");for(bO=0;bO<bR;bO++){bQ=bJ[bO];bM=bQ.event;bG=aX(bQ.start,bQ.start);bC=aX(bQ.start,bQ.end);bD=bj(bQ.col);bF=bg(bQ.col);bA=bF-bD;bF-=bA*0.025;bA=bF-bD;bL=bA*(bQ.forwardCoord-bQ.backwardCoord);if(a4("slotEventOverlap")){bL=Math.max((bL-(20/2))*2,bL)}if(bz){bS=bF-bQ.backwardCoord*bA;by=bS-bL}else{by=bD+bQ.backwardCoord*bA;bS=by+bL}by=Math.max(by,bD);bS=Math.min(bS,bF);bL=bS-by;bQ.top=bG;bQ.left=by;bQ.outerWidth=bL;bQ.outerHeight=bC-bG;bE+=ba(bM,bQ)}bN[0].innerHTML=bE;bT=bN.children();for(bO=0;bO<bR;bO++){bQ=bJ[bO];bM=bQ.event;bP=av(bT[bO]);bB=bb("eventRender",bM,bM,bP);if(bB===false){bP.remove()}else{if(bB&&bB!==true){bP.remove();bP=av(bB).css({position:"absolute",top:bQ.top,left:bQ.left}).appendTo(bN)}bQ.element=bP;if(bM._id===bK){bq(bM,bP,bQ)}else{bP[0]._fci=bO}a2(bM,bP)}}v(bN,bJ,bq);for(bO=0;bO<bR;bO++){bQ=bJ[bO];if(bP=bQ.element){bQ.vsides=I(bP,true);bQ.hsides=j(bP,true);bI=bP.find(".fc-event-title");if(bI.length){bQ.contentTop=bI[0].offsetTop}}}for(bO=0;bO<bR;bO++){bQ=bJ[bO];if(bP=bQ.element){bP[0].style.width=Math.max(0,bQ.outerWidth-bQ.hsides)+"px";bH=Math.max(0,bQ.outerHeight-bQ.vsides);bP[0].style.height=bH+"px";bM=bQ.event;if(bQ.contentTop!==w&&bH-bQ.contentTop<10){bP.find("div.fc-event-time").text(bm(bM.start,a4("timeFormat"))+" - "+bM.title);bP.find("div.fc-event-title").remove()}bb("eventAfterRender",bM,bM,bP)}}}function ba(bD,by){var bC="<";var bA=bD.url;var bz=S(bD,a4);var bB=["fc-event","fc-event-vert"];if(aS(bD)){bB.push("fc-event-draggable")}if(by.isStart){bB.push("fc-event-start")}if(by.isEnd){bB.push("fc-event-end")}bB=bB.concat(bD.className);if(bD.source){bB=bB.concat(bD.source.className||[])}if(bA){bC+="a href='"+aJ(bD.url)+"'"}else{bC+="div"}bC+=" class='"+bB.join(" ")+"' style='position:absolute;top:"+by.top+"px;left:"+by.left+"px;"+bz+"'>"+c.Templates().renderCustomImagePrinting({eventType:bD.eventType!=="custom"?bD.eventType:bD.className[0]})+"<div class='fc-event-inner'><div class='fc-event-time'>"+aJ(a6(bD.start,bD.end,a4("timeFormat")))+"</div><div class='fc-event-title'>"+aJ(bD.title||"")+"</div></div><div class='fc-event-bg'></div>";if(by.isEnd&&bt(bD)){bC+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"}bC+="</"+(bA?"a":"div")+">";return bC}function bq(bA,bz,by){var bB=bz.find("div.fc-event-time");if(aS(bA)){bd(bA,bz,bB)}if(by.isEnd&&bt(bA)){bs(bA,bz,bB)}be(bA,bz)}function a0(bz,bI,bD){var by=bD.isStart;var bJ;var bH;var bL=true;var bC;var bB=aR();var bE=a5();var bA=bn();var bK=aZ();var bG=bf();bI.draggable({opacity:a4("dragOpacity","month"),revertDuration:a4("dragRevertDuration"),start:function(bM,bN){bb("eventDragStart",bI,bz,bM,bN);a3(bz,bI);bJ=bI.width();bB.start(function(bP,bO){aW();if(bP){bH=false;var bR=aP(0,bO.col);var bQ=aP(0,bP.col);bC=aD(bQ,bR);if(!bP.row){bc(aG(P(bz.start),bC),aG(ap(bz),bC));bF()}else{if(by){if(bL){bI.width(bE-10);aa(bI,bA*Math.round((bz.end?((bz.end-bz.start)/V):a4("defaultEventMinutes"))/bK));bI.draggable("option","grid",[bE,1]);bL=false}}else{bH=true}}bH=bH||(bL&&!bC)}else{bF();bH=true}bI.draggable("option","revert",bH)},bM,"drag")},stop:function(bN,bO){bB.stop();aW();bb("eventDragStop",bI,bz,bN,bO);if(bH){bF();bI.css("filter","");aV(bz,bI)}else{var bM=0;if(!bL){bM=Math.round((bI.offset().top-a1().offset().top)/bA)*bK+bG-(bz.start.getHours()*60+bz.start.getMinutes())}br(this,bz,bC,bM,bL,bN,bO)}}});function bF(){if(!bL){bI.width(bJ).height("").draggable("option","grid",null);bL=true}}}function bd(bL,bN,bA){var bG=bo.getCoordinateGrid();var bJ=bl();var bS=a5();var bK=bn();var bF=aZ();var bR;var bP;var bQ,bI;var by,bB;var bz,bE;var bC;var bM,bD;bN.draggable({scroll:false,grid:[bS,bK],axis:bJ==1?"y":false,opacity:a4("dragOpacity"),revertDuration:a4("dragRevertDuration"),start:function(bT,bU){F(bT);bb("eventDragStart",bN,bL,bT,bU);a3(bL,bN);bG.build();bR=bN.position();bP=bG.cell(bT.pageX,bT.pageY);bQ=bI=true;by=bB=bh(bP);bz=bE=0;bC=0;bM=bD=0},drag:function(bX,bY){F(bX);var bT=bG.cell(bX.pageX,bX.pageY);bQ=!!bT;if(bQ){by=bh(bT);bz=Math.round((bY.position.left-bR.left)/bS);if(bz!=bE){var bW=aP(0,bP.col);var bV=bP.col+bz;bV=Math.max(0,bV);bV=Math.min(bJ-1,bV);var bU=aP(0,bV);bC=aD(bU,bW)}if(!by){bM=Math.round((bY.position.top-bR.top)/bK)*bF}}if(bQ!=bI||by!=bB||bz!=bE||bM!=bD){bO();bI=bQ;bB=by;bE=bz;bD=bM}bN.draggable("option","revert",!bQ)},stop:function(bT,bU){F(bT);aW();bb("eventDragStop",bN,bL,bT,bU);if(bQ&&(by||bC||bM)){br(this,bL,bC,by?0:bM,by,bT,bU)}else{bQ=true;by=false;bz=0;bC=0;bM=0;bO();bN.css("filter","");bN.css(bR);aV(bL,bN)}}});function bO(){aW();if(bQ){if(by){bA.hide();bN.draggable("option","grid",null);bc(aG(P(bL.start),bC),aG(ap(bL),bC))}else{bH(bM);bA.css("display","");bN.draggable("option","grid",[bS,bK])}}}function bH(bU){var bT=k(P(bL.start),bU);var bV;if(bL.end){bV=k(P(bL.end),bU)}bA.text(a6(bT,bV,a4("timeFormat")))}}function bs(bC,bA,bD){var bB,by;var bE=bn();var bz=aZ();bA.resizable({handles:{s:".ui-resizable-handle"},grid:bE,minHeight:bE,start:function(bF,bG){bB=by=0;bb("eventResizeStart",this,bC,bF,bG)},resize:function(bF,bG){bB=Math.round((Math.max(bE,bA.height())-bG.originalSize.height)/bE);if(bB!=by){bD.text(a6(bC.start,(!bB&&!bC.end)?null:k(bu(bC),bz*bB),a4("timeFormat")));by=bB}},stop:function(bF,bG){bb("eventResizeStop",this,bC,bF,bG);if(bB){a7(this,bC,0,bz*bB,bF,bG)}}})}}function aj(aP){var aR=G(aP);var aS=aR[0];var aQ;Y(aR);if(aS){for(aQ=0;aQ<aS.length;aQ++){ac(aS[aQ])}for(aQ=0;aQ<aS.length;aQ++){N(aS[aQ],0,0)}}return D(aR)}function G(aQ){var aT=[];var aS,aP;var aR;for(aS=0;aS<aQ.length;aS++){aP=aQ[aS];for(aR=0;aR<aT.length;aR++){if(!aN(aP,aT[aR]).length){break}}(aT[aR]||(aT[aR]=[])).push(aP)}return aT}function Y(aT){var aS,aU;var aR,aP;var aQ;for(aS=0;aS<aT.length;aS++){aU=aT[aS];for(aR=0;aR<aU.length;aR++){aP=aU[aR];aP.forwardSegs=[];for(aQ=aS+1;aQ<aT.length;aQ++){aN(aP,aT[aQ],aP.forwardSegs)}}}}function ac(aQ){var aP=aQ.forwardSegs;var aT=0;var aS,aR;if(aQ.forwardPressure===w){for(aS=0;aS<aP.length;aS++){aR=aP[aS];ac(aR);aT=Math.max(aT,1+aR.forwardPressure)}aQ.forwardPressure=aT}}function N(aQ,aS,aT){var aP=aQ.forwardSegs;var aR;if(aQ.forwardCoord===w){if(!aP.length){aQ.forwardCoord=1}else{aP.sort(aB);N(aP[0],aS+1,aT);aQ.forwardCoord=aP[0].backwardCoord}aQ.backwardCoord=aQ.forwardCoord-(aQ.forwardCoord-aT)/(aS+1);for(aR=0;aR<aP.length;aR++){N(aP[aR],0,aQ.forwardCoord)}}}function D(aS){var aP=[];var aR,aT;var aQ;for(aR=0;aR<aS.length;aR++){aT=aS[aR];for(aQ=0;aQ<aT.length;aQ++){aP.push(aT[aQ])}}return aP}function aN(aP,aS,aR){aR=aR||[];for(var aQ=0;aQ<aS.length;aQ++){if(e(aP,aS[aQ])){aR.push(aS[aQ])}}return aR}function e(aQ,aP){return aQ.end>aP.start&&aQ.start<aP.end}function aB(aQ,aP){return aP.forwardPressure-aQ.forwardPressure||(aQ.backwardCoord||0)-(aP.backwardCoord||0)||y(aQ,aP)}function y(aQ,aP){return aQ.start-aP.start||(aP.end-aP.start)-(aQ.end-aQ.start)||(aQ.event.title||"").localeCompare(aP.event.title)}function aH(a4,bo,a1){var bn=this;bn.element=a4;bn.calendar=bo;bn.name=a1;bn.opt=a9;bn.trigger=bh;bn.isEventDraggable=aU;bn.isEventResizable=bt;bn.setEventData=bq;bn.clearEventData=aT;bn.eventEnd=bu;bn.reportEventElement=a7;bn.triggerEventDestroy=bg;bn.eventElementHandlers=bj;bn.showEvents=aW;bn.hideEvents=a8;bn.eventDrop=br;bn.eventResize=bc;var bw=bn.defaultEventEnd;var bi=bo.normalizeEvent;var bs=bo.reportEventChange;var a6={};var a0={};var bv=[];var be=bo.options;function a9(bB,bz){var bA=be[bB];if(av.isPlainObject(bA)){return H(bA,bz||a1)}return bA}function bh(bz,bA){return bo.trigger.apply(bo,[bz,bA||bn].concat(Array.prototype.slice.call(arguments,2),[bn]))}function aU(bz){var bA=bz.source||{};return aM(bz.startEditable,bA.startEditable,a9("eventStartEditable"),bz.editable,bA.editable,a9("editable"))&&!a9("disableDragging")}function bt(bz){var bA=bz.source||{};return aM(bz.durationEditable,bA.durationEditable,a9("eventDurationEditable"),bz.editable,bA.editable,a9("editable"))&&!a9("disableResizing")}function bq(bB){a6={};var bA,bz=bB.length,bC;for(bA=0;bA<bz;bA++){bC=bB[bA];if(a6[bC._id]){a6[bC._id].push(bC)}else{a6[bC._id]=[bC]}}}function aT(){a6={};a0={};bv=[]}function bu(bz){return bz.end?P(bz.end):bw(bz)}function a7(bA,bz){bv.push({event:bA,element:bz});if(a0[bA._id]){a0[bA._id].push(bz)}else{a0[bA._id]=[bz]}}function bg(){av.each(bv,function(bz,bA){bn.trigger("eventDestroy",bA.event,bA.event,bA.element)})}function bj(bA,bz){bz.click(function(bB){if(!bz.hasClass("ui-draggable-dragging")&&!bz.hasClass("ui-resizable-resizing")){return bh("eventClick",this,bA,bB)}}).hover(function(bB){bh("eventMouseover",this,bA,bB)},function(bB){bh("eventMouseout",this,bA,bB)})}function aW(bA,bz){a5(bA,bz,"show")}function a8(bA,bz){a5(bA,bz,"hide")}function a5(bC,bB,bE){var bD=a0[bC._id],bA,bz=bD.length;for(bA=0;bA<bz;bA++){if(!bB||bD[bA][0]!=bB[0]){bD[bA][bE]()}}}function br(bC,bA,bB,bD,bG,bF,bE){var bH=bA.allDay;var bz=bA._id;ba(a6[bz],bB,bD,bG);bh("eventDrop",bC,bA,bB,bD,bG,function(){ba(a6[bz],-bB,-bD,bH);bs(bz)},bF,bE);bs(bz)}function bc(bF,bD,bA,bz,bC,bE){var bB=bD._id;a2(a6[bB],bA,bz);bh("eventResize",bF,bD,bA,bz,function(){a2(a6[bB],-bA,-bz);bs(bB)},bC,bE);bs(bB)}function ba(bD,bB,bA,bE){bA=bA||0;for(var bF,bz=bD.length,bC=0;bC<bz;bC++){bF=bD[bC];if(bE!==w){bF.allDay=bE}k(aG(bF.start,bB,true),bA);if(bF.end){bF.end=k(aG(bF.end,bB,true),bA)}bi(bF,be)}}function a2(bD,bB,bA){bA=bA||0;for(var bE,bz=bD.length,bC=0;bC<bz;bC++){bE=bD[bC];bE.end=k(aG(bu(bE),bB,true),bA);bi(bE,be)}}bn.isHiddenDay=aY;bn.skipHiddenDays=aV;bn.getCellsPerWeek=bl;bn.dateToCell=bp;bn.dateToDayOffset=bd;bn.dayOffsetToCellOffset=aR;bn.cellOffsetToCell=a3;bn.cellToDate=aS;bn.cellToCellOffset=aP;bn.cellOffsetToDayOffset=bf;bn.dayOffsetToDate=by;bn.rangeToSegments=bk;var bb=a9("hiddenDays")||[];var aQ=[];var bx;var aX=[];var aZ=[];var bm=a9("isRTL");(function(){if(a9("weekends")===false){bb.push(0,6)}for(var bA=0,bz=0;bA<7;bA++){aX[bA]=bz;aQ[bA]=av.inArray(bA,bb)!=-1;if(!aQ[bA]){aZ[bz]=bA;bz++}}bx=bz;if(!bx){throw"invalid hiddenDays"}})();function aY(bz){if(typeof bz=="object"){bz=bz.getDay()}return aQ[bz]}function bl(){return bx}function aV(bA,bB,bz){bB=bB||1;while(aQ[(bA.getDay()+(bz?bB:0)+7)%7]){aG(bA,bB)}}function aS(){var bB=aP.apply(null,arguments);var bz=bf(bB);var bA=by(bz);return bA}function aP(bE,bC){var bB=bn.getColCnt();var bA=bm?-1:1;var bz=bm?bB-1:0;if(typeof bE=="object"){bC=bE.col;bE=bE.row}var bD=bE*bB+(bC*bA+bz);return bD}function bf(bA){var bz=bn.visStart.getDay();bA+=aX[bz];return Math.floor(bA/bx)*7+aZ[(bA%bx+bx)%bx]-bz}function by(bz){var bA=P(bn.visStart);aG(bA,bz);return bA}function bp(bB){var bA=bd(bB);var bC=aR(bA);var bz=a3(bC);return bz}function bd(bz){return aD(bz,bn.visStart)}function aR(bA){var bz=bn.visStart.getDay();bA+=bz;return Math.floor(bA/7)*bx+aX[(bA%7+7)%7]-aX[bz]}function a3(bE){var bC=bn.getColCnt();var bA=bm?-1:1;var bz=bm?bC-1:0;var bD=Math.floor(bE/bC);var bB=((bE%bC+bC)%bC)*bA+bz;return{row:bD,col:bB}}function bk(bA,bP){var bD=bn.getRowCnt();var bN=bn.getColCnt();var bO=[];var bR=bd(bA);var bM=bd(bP);var bQ=aR(bR);var bE=aR(bM)-1;for(var bF=0;bF<bD;bF++){var bB=bF*bN;var bJ=bB+bN-1;var bK=Math.max(bQ,bB);var bC=Math.min(bE,bJ);if(bK<=bC){var bz=a3(bK);var bL=a3(bC);var bI=[bz.col,bL.col].sort();var bG=bf(bK)==bR;var bH=bf(bC)+1==bM;bO.push({row:bF,leftCol:bI[0],rightCol:bI[1],isStart:bG,isEnd:bH})}}return bO}}function Z(){var bw=this;bw.renderDayEvents=bD;bw.draggableDayEvent=a5;bw.resizableDayEvent=bq;var ba=bw.opt;var bn=bw.trigger;var aX=bw.isEventDraggable;var bz=bw.isEventResizable;var bA=bw.eventEnd;var a8=bw.reportEventElement;var bp=bw.eventElementHandlers;var a0=bw.showEvents;var a9=bw.hideEvents;var by=bw.eventDrop;var be=bw.eventResize;var bE=bw.getRowCnt;var bv=bw.getColCnt;var bc=bw.getColWidth;var a4=bw.allDayRow;var bC=bw.colLeft;var a6=bw.colRight;var bu=bw.colContentLeft;var bs=bw.colContentRight;var bx=bw.dateToCell;var aY=bw.getDaySegmentContainer;var bd=bw.calendar.formatDates;var bo=bw.renderDayOverlay;var a1=bw.clearOverlays;var aR=bw.clearSelection;var aW=bw.getHoverListener;var br=bw.rangeToSegments;var aU=bw.cellToDate;var aQ=bw.cellToCellOffset;var bl=bw.cellOffsetToDayOffset;var bg=bw.dateToDayOffset;var aT=bw.dayOffsetToCellOffset;function bD(bH,bG){var bF=a3(bH,false,true);af(bF,function(bJ,bI){a8(bJ.event,bI)});a2(bF,bG);af(bF,function(bJ,bI){bn("eventAfterRender",bJ.event,bJ.event,bI)})}function bh(bG,bJ,bI){var bF=a3([bG],true,false);var bH=[];af(bF,function(bL,bK){if(bL.row===bJ){bK.css("top",bI)}bH.push(bK[0])});return bH}function a3(bI,bM,bK){var bJ=aY();var bH=bM?av("<div/>"):bJ;var bF=a7(bI);var bG;var bL;bB(bF);bG=bf(bF);bH[0].innerHTML=bG;bL=bH.children();if(bM){bJ.append(bL)}aZ(bF,bL);af(bF,function(bO,bN){bO.hsides=j(bN,true)});af(bF,function(bO,bN){bN.width(Math.max(0,bO.outerWidth-bO.hsides))});af(bF,function(bO,bN){bO.outerHeight=bN.outerHeight(true)});aV(bF,bK);return bF}function a7(bH){var bF=[];for(var bG=0;bG<bH.length;bG++){var bI=bm(bH[bG]);bF.push.apply(bF,bI)}return bF}function bm(bI){var bF=bI.start;var bJ=ap(bI);var bG=br(bF,bJ);for(var bH=0;bH<bG.length;bH++){bG[bH].event=bI}return bG}function bB(bG){var bJ=ba("isRTL");for(var bI=0;bI<bG.length;bI++){var bK=bG[bI];var bL=(bJ?bK.isEnd:bK.isStart)?bu:bC;var bF=(bJ?bK.isStart:bK.isEnd)?bs:a6;var bM=bL(bK.leftCol);var bH=bF(bK.rightCol);bK.left=bM;bK.outerWidth=bH-bM}}function bf(bF){var bH="";for(var bG=0;bG<bF.length;bG++){bH+=bb(bF[bG])}return bH}function bb(bK){var bI="";var bH=ba("isRTL");var bJ=bK.event;var bG=bJ.url;var bL=["fc-event","fc-event-hori"];if(aX(bJ)){bL.push("fc-event-draggable")}if(bK.isStart){bL.push("fc-event-start")}if(bK.isEnd){bL.push("fc-event-end")}bL=bL.concat(bJ.className);if(bJ.source){bL=bL.concat(bJ.source.className||[])}var bF=S(bJ,ba);if(bG){bI+="<a href='"+aJ(bG)+"'"}else{bI+="<div"}bI+=" class='"+bL.join(" ")+"' style='position:absolute;left:"+bK.left+"px;"+bF+"'><div class='fc-event-inner'>";if(!bJ.allDay&&bK.isStart){bI+="<span class='fc-event-time'>"+aJ(bd(bJ.start,bJ.end,ba("timeFormat")))+"</span>"}bI+="<span class='fc-event-title'>"+aJ(bJ.title||"")+"</span></div>";if(bK.isEnd&&bz(bJ)){bI+="<div class='ui-resizable-handle ui-resizable-"+(bH?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"}bI+="</"+(bG?"a":"div")+">";return bI}function aZ(bG,bL){for(var bI=0;bI<bG.length;bI++){var bK=bG[bI];var bJ=bK.event;var bH=bL.eq(bI);var bF=bn("eventRender",bJ,bJ,bH);if(bF===false){bH.remove()}else{if(bF&&bF!==true){bF=av(bF).css({position:"absolute",left:bK.left});bH.replaceWith(bF);bH=bF}bK.element=bH}}}function aV(bH,bJ){var bK=aP(bH);var bF=bt();var bG=[];if(bJ){for(var bI=0;bI<bF.length;bI++){bF[bI].height(bK[bI])}}for(var bI=0;bI<bF.length;bI++){bG.push(bF[bI].position().top)}af(bH,function(bM,bL){bL.css("top",bG[bM.row]+bM.top)})}function aP(bH){var bJ=bE();var bO=bv();var bP=[];var bF=bk(bH);for(var bN=0;bN<bJ;bN++){var bM=bF[bN];var bL=[];for(var bK=0;bK<bO;bK++){bL.push(0)}for(var bG=0;bG<bM.length;bG++){var bI=bM[bG];bI.top=au(bL.slice(bI.leftCol,bI.rightCol+1));for(var bK=bI.leftCol;bK<=bI.rightCol;bK++){bL[bK]=bI.top+bI.outerHeight}}bP.push(au(bL))}return bP}function bk(bG){var bK=bE();var bJ=[];var bF;var bI;var bH;for(bF=0;bF<bG.length;bF++){bI=bG[bF];bH=bI.row;if(bI.element){if(bJ[bH]){bJ[bH].push(bI)}else{bJ[bH]=[bI]}}}for(bH=0;bH<bK;bH++){bJ[bH]=aS(bJ[bH]||[])}return bJ}function aS(bG){var bI=[];var bF=bj(bG);for(var bH=0;bH<bF.length;bH++){bI.push.apply(bI,bF[bH])}return bI}function bj(bH){bH.sort(ax);var bG=[];for(var bI=0;bI<bH.length;bI++){var bJ=bH[bI];for(var bF=0;bF<bG.length;bF++){if(!b(bJ,bG[bF])){break}}if(bG[bF]){bG[bF].push(bJ)}else{bG[bF]=[bJ]}}return bG}function bt(){var bF;var bH=bE();var bG=[];for(bF=0;bF<bH;bF++){bG[bF]=a4(bF).find("div.fc-day-content > div")}return bG}function a2(bG,bF){var bH=aY();af(bG,function(bL,bJ,bI){var bK=bL.event;if(bK._id===bF){bi(bK,bJ,bL)}else{bJ[0]._fci=bI}});v(bH,bG,bi)}function bi(bH,bF,bG){if(aX(bH)){bw.draggableDayEvent(bH,bF,bG)}if(bG.isEnd&&bz(bH)){bw.resizableDayEvent(bH,bF,bG)}bp(bH,bF)}function a5(bI,bH){var bG=aW();var bF;bH.draggable({delay:50,opacity:ba("dragOpacity"),revertDuration:ba("dragRevertDuration"),start:function(bJ,bK){bn("eventDragStart",bH,bI,bJ,bK);a9(bI,bH);bG.start(function(bM,bL,bP,bQ){bH.draggable("option","revert",!bM||!bP&&!bQ);a1();if(bM){var bO=aU(bL);var bN=aU(bM);bF=aD(bN,bO);bo(aG(P(bI.start),bF),aG(ap(bI),bF))}else{bF=0}},bJ,"drag")},stop:function(bJ,bK){bG.stop();a1();bn("eventDragStop",bH,bI,bJ,bK);if(bF){by(this,bI,bF,0,bI.allDay,bJ,bK)}else{bH.css("filter","");a0(bI,bH)}}})}function bq(bI,bG,bH){var bF=ba("isRTL");var bK=bF?"w":"e";var bJ=bG.find(".ui-resizable-"+bK);var bL=false;aO(bG);bG.mousedown(function(bM){bM.preventDefault()}).click(function(bM){if(bL){bM.preventDefault();bM.stopImmediatePropagation()}});bJ.mousedown(function(bU){if(bU.which!=1){return}bL=true;var bO=aW();var bS=bE();var bV=bv();var bN=bG.css("top");var bQ;var bM;var bT=av.extend({},bI);var bP=aT(bg(bI.start));aR();av("body").css("cursor",bK+"-resize").one("mouseup",bR);bn("eventResizeStart",this,bI,bU);bO.start(function(bX,bW){if(bX){var b0=aQ(bW);var bZ=aQ(bX);bZ=Math.max(bZ,bP);bQ=bl(bZ)-bl(b0);if(bQ){bT.end=aG(bA(bI),bQ,true);var bY=bM;bM=bh(bT,bH.row,bN);bM=av(bM);bM.find("*").css("cursor",bK+"-resize");if(bY){bY.remove()}a9(bI)}else{if(bM){a0(bI);bM.remove();bM=null}}a1();bo(bI.start,aG(ap(bI),bQ))}},bU);function bR(bW){bn("eventResizeStop",this,bI,bW);av("body").css("cursor","");bO.stop();a1();if(bQ){be(this,bI,bQ,0,bW)}setTimeout(function(){bL=false},0)}})}}function b(aQ,aS){for(var aP=0;aP<aS.length;aP++){var aR=aS[aP];if(aR.leftCol<=aQ.rightCol&&aR.rightCol>=aQ.leftCol){return true}}return false}function af(aP,aT){for(var aR=0;aR<aP.length;aR++){var aS=aP[aR];var aQ=aS.element;if(aQ){aT(aS,aQ,aR)}}}function ax(aQ,aP){return(aP.rightCol-aP.leftCol)-(aQ.rightCol-aQ.leftCol)||aP.event.allDay-aQ.event.allDay||aQ.event.start-aP.event.start||(aQ.event.title||"").localeCompare(aP.event.title)}function ao(){var aZ=this;aZ.select=aX;aZ.unselect=aT;aZ.reportSelection=aP;aZ.daySelectionMousedown=aW;var aR=aZ.opt;var aS=aZ.trigger;var aU=aZ.defaultSelectionEnd;var aQ=aZ.renderSelection;var aY=aZ.clearSelection;var aV=false;if(aR("selectable")&&aR("unselectAuto")){av(document).mousedown(function(a0){var a1=aR("unselectCancel");if(a1){if(av(a0.target).parents(a1).length){return}}aT(a0)})}function aX(a0,a2,a1){aT();if(!a2){a2=aU(a0,a1)}aQ(a0,a2,a1);aP(a0,a2,a1)}function aT(a0){if(aV){aV=false;aY();aS("unselect",null,a0)}}function aP(a0,a3,a2,a1){aV=true;aS("select",null,a0,a3,a2,a1)}function aW(a4){var a2=aZ.cellToDate;var a1=aZ.getIsCellAllDay;var a0=aZ.getHoverListener();var a5=aZ.reportDayClick;if(a4.which==1&&aR("selectable")){aT(a4);var a3=this;var a6;a0.start(function(a8,a7){aY();if(a8&&a1(a8)){a6=[a2(a7),a2(a8)].sort(a);aQ(a6[0],a6[1],true)}else{a6=null}},a4);av(document).one("mouseup",function(a7){a0.stop();if(a6){if(+a6[0]==+a6[1]){a5(a6[0],true,a7)}aP(a6[0],a6[1],true,a7)}})}}}function d(){var aS=this;aS.renderOverlay=aQ;aS.clearOverlays=aP;var aR=[];var aT=[];function aQ(aV,aU){var aW=aT.shift();if(!aW){aW=av("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")}if(aW[0].parentNode!=aU[0]){aW.appendTo(aU)}aR.push(aW.css(aV).show());return aW}function aP(){var aU;while(aU=aR.shift()){aT.push(aU.hide().unbind())}}}function Q(aP){var aQ=this;var aR;var aS;aQ.build=function(){aR=[];aS=[];aP(aR,aS)};aQ.cell=function(aT,aZ){var aY=aR.length;var aU=aS.length;var aV,aW=-1,aX=-1;for(aV=0;aV<aY;aV++){if(aZ>=aR[aV][0]&&aZ<aR[aV][1]){aW=aV;break}}for(aV=0;aV<aU;aV++){if(aT>=aS[aV][0]&&aT<aS[aV][1]){aX=aV;break}}return(aW>=0&&aX>=0)?{row:aW,col:aX}:null};aQ.rect=function(aW,aY,aU,aV,aX){var aT=aX.offset();return{top:aR[aW][0]-aT.top,left:aS[aY][0]-aT.left,width:aS[aV][1]-aS[aY][0],height:aR[aU][1]-aR[aW][0]}}}function aq(aU){var aS=this;var aT;var aV;var aQ;var aP;aS.start=function(aW,aX,aY){aV=aW;aQ=aP=null;aU.build();aR(aX);aT=aY||"mousemove";av(document).bind(aT,aR)};function aR(aW){F(aW);var aX=aU.cell(aW.pageX,aW.pageY);if(!aX!=!aP||aX&&(aX.row!=aP.row||aX.col!=aP.col)){if(aX){if(!aQ){aQ=aX}aV(aX,aQ,aX.row-aQ.row,aX.col-aQ.col)}else{aV(aX,aQ)}aP=aX}}aS.stop=function(){av(document).unbind(aT,aR);return aP}}function F(aP){if(aP.pageX===w){aP.pageX=aP.originalEvent.pageX;aP.pageY=aP.originalEvent.pageY}}function n(aQ){var aP=this,aR={},aU={},aT={};function aS(aV){return aR[aV]=aR[aV]||aQ(aV)}aP.left=function(aV){return aU[aV]=aU[aV]===w?aS(aV).position().left:aU[aV]};aP.right=function(aV){return aT[aV]=aT[aV]===w?aP.left(aV)+aS(aV).width():aT[aV]};aP.clear=function(){aR={};aU={};aT={}}}})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/js/calendar-data-cache.js' */
define("tc/calendar-cache",["jquery"],function(a){function b(){var c=[];function d(k,h){var f=false;for(var g=0;g<h.length;g++){for(var e=0;e<c[k].data.length;e++){if(h[g].id===c[k].data[e].id){f=true;break}}if(!f){c[k].data.push(h[g])}f=false}}return{hasCalendar:function(e){return c[e]},getCalendarStart:function(e){if(c[e]){return c[e].start}return null},getCalendarEnd:function(e){if(c[e]){return c[e].end}return null},addDataToCalendar:function(f,g,h,e){if(!c[f]){c[f]={data:g}}else{d(f,g)}if(!c[f].start||h.getTime()<c[f].start.getTime()){c[f].start=h}if(!c[f].end||e.getTime()>c[f].end.getTime()){c[f].end=e}},removeCalendar:function(f){if(a.isArray(f)){var e=this;a.each(f,function(h,g){if(a.isPlainObject(g)&&g.id&&typeof g.id==="string"){e.removeCalendar(g.id)}else{e.removeCalendar(g.toString())}})}else{delete c[f]}},removeAllCalendars:function(){c=[]},getCalendarData:function(e){if(!c[e]){return null}return c[e].data}}}return b});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-remove-dialog/calendar-remove-dialog.js' */
define("tc/calendar-remove-dialog",["jquery","underscore","tc-backbone","tc/templates","tc/calendar-util","tc/util"],function(e,a,g,d,c,f){var b=g.View.extend({removeSubCalendarDialog:null,_calendarDiv:null,subCalendar:null,_calendarPlugin:null,initialize:function(h){this._calendarDiv=h._calendarDiv;this.subCalendar=h.subCalendar;this._calendarPlugin=h._calendarPlugin;this.removeSubCalendarDialog=e("#remove-calendar-dialog")},render:function(){var k=this;var h;var i=AJS.Meta.get("space-key")!==undefined||e("meta[name='ajs-page-id']").length>=1;if(this.removeSubCalendarDialog){this.removeSubCalendarDialog.remove()}h=c.isPDLEnabled()?230:200;this.removeSubCalendarDialog=new AJS.Dialog({width:512,height:h,id:"remove-calendar-dialog"});this.removeSubCalendarDialog.addHeader("Kalender entfernen","subcalendar-remove-header calendar-dialog-panel");this.removeSubCalendarDialog.addPanel("subcalendar-remove-calendar",d.removeSubCalendar({inSpace:i}),"remove-subcalendar-form");var j=e(".calendar-to-remove",this.removeSubCalendarDialog.getPanel());j.attr("title",this.subCalendar.name);j.text(this.subCalendar.name);this.removeSubCalendarDialog.addButton("OK",function(){if(e("#deletecalendaroption:checked",k.removeSubCalendarDialog.getPanel()).length){k._calendarPlugin.deleteSubCalendar(k._calendarDiv,k.subCalendar)}else{k._calendarPlugin.unsubscribeFromSubcalendar(k._calendarDiv,k.subCalendar)}k.removeSubCalendarDialog.hide()});this.removeSubCalendarDialog.addLink("Abbrechen",function(){k.removeSubCalendarDialog.hide()});this.removeSubCalendarDialog.show()}});return b});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-feature-discovery-dialog/calendar-feature-discovery-dialog.js' */
define("tc/calendar-feature-discovery-dialog",["jquery","underscore","tc-backbone","tc/templates","tc/dialogs","tc/calendar-util","tc/util"],function(f,a,h,d,c,b,g){var e=h.View.extend({featureDiscoveryDialog:null,_calendarDiv:null,subCalendar:null,_calendarPlugin:null,initialize:function(i){this._calendarDiv=i._calendarDiv;this.subCalendar=i.subCalendar;this._calendarPlugin=i._calendarPlugin;this.featureDiscoveryDialog=f("#team-calendars-feature-discovery-dialog")},render:function(){var k=this;if(this.featureDiscoveryDialog){this.featureDiscoveryDialog.remove()}var i=b.isPDLEnabled()?385:340,l=new AJS.Dialog({width:596,height:i,id:"team-calendars-feature-discovery-dialog"});l.addHeader("Gl\u00fcckwunsch, Sie haben einen neuen Kalender erstellt!");l.addPanel("",d.subCalendarFeatures({autoConvertSupported:b.getParameter(this._calendarDiv,"autoConvertSupported")==="true",subCalendar:this.subCalendar}),"setup-calendar-panel");var j=l.getCurrentPanel().body;f(".add-event",j).click(function(){l.remove();var m=c.getEditEventDialog({start:new Date(),localizedStartTime:k._calendarPlugin.getDefaultStartTime(k._calendarDiv),localizedEndTime:k._calendarPlugin.getDefaultEndTime(k._calendarDiv),allDay:(k._calendarDiv.data(k._calendarPlugin.PREF_LAST_ALL_DAY_USED)||"true")==="true",subCalendarId:k.subCalendar.id},k.subCalendar,k._calendarPlugin,k._calendarDiv);m.show();return false});f(".restrict",j).click(function(){l.remove();k._calendarPlugin.getSubCalendarRestrictionsDialog(k._calendarDiv,k.subCalendar).show();return false});f(".embed, .embed-or-share, .share",j).click(function(){l.remove();var m=k._calendarPlugin.getSubCalendarShareDialog(k._calendarDiv,k.subCalendar);m.show();f(".share-address-field",m.getCurrentPanel().body).focus().select();return false});l.addLink("Schlie\u00dfen",function(){l.remove()});l.show()}});return e});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-subcalendar-subscribe-dialog/calendar-subcalendar-subscribe-dialog.js' */
define("tc/calendar-subcalendar-subscribe-dialog",["jquery","underscore","tc-backbone","tc/templates","tc/calendar-util","tc/util","tc/infinite-list","tc/form-state-control"],function(d,h,g,i,e,f,c,a){var b=g.View.extend({subCalendarSubscibeDialog:null,callbackHandler:null,options:null,initialize:function(j){this.options=j;this.callbackHandler=j.callbackHandler;this.subCalendarSubscibeDialog=d(this.options.id!==undefined?this.options.id:"internal-subscription-calendar-dialog")},render:function(){var q=this;if(this.subCalendarSubscibeDialog){this.subCalendarSubscibeDialog.remove()}var l=function(H,J,G,L,F,K){var I=d(".results",H.getCurrentPanel().body);d.ajax({cache:false,converters:{"text json":function(M){return M}},data:J,dataFilter:function(M){var N=d.parseJSON(M);if(N.success){Confluence.TeamCalendars.mergeSubCalendarObjectsToArray(N.payload)}return N.payload},dataType:"json",error:function(O,M,N){if(L){L(J,I)}},success:function(N){if(!K){I.empty()}if(N&&N.length){var M=d(i.calendarSearchResultTable()),O=K?d("tbody",d(I)):d("tbody",M),P=function(Q){O.append(d(i.calendarSearchResult({name:Q.name,description:Q.description||"",relatedSpace:Q.spaceName||"",numSubscribers:Q.subscriberCount})).click(function(){var R=d(this),S=R.hasClass("active");if(S){R.removeClass("active");d(".subcalendar-select",R).removeAttr("checked")}else{R.addClass("active");d(".subcalendar-select",R).attr("checked","checked")}var T=true,U=d("tr.active",O);U.each(function(){if(d(this).data("subCalendar").watchable){T=false;return false}});if(U.length){E();p()}else{x();j()}if(!U.length||T){j()}else{if(!T&&!S){p()}}}).data("subCalendar",Q))};d.each(N,function(R,Q){if(Confluence.TeamCalendars.isDummySubscriptionParentSubCalendar(Q)){d.each(Q.childSubCalendars||[],function(S,T){P(T)})}else{P(Q)}});if(!K){I.append(M)}d(".ellipsedColumn",M).each(function(){var R=d(this);var Q=R.text();R.attr("title",Q).addClass("relative").ThreeDots({max_rows:1}).removeClass("relative")});if(F){F(N)}}else{if(L){L(J,I)}}},timeout:Confluence.TeamCalendars.ajaxTimeout,url:Confluence.TeamCalendars.getCalendarServiceBaseUrl(G)})};var w=(function(){var J=q.options.id!==undefined?q.options.id:"internal-subscription-calendar-dialog";var G=new AJS.Dialog({width:800,height:400,id:J});G.addHeader("Existierenden Team Calendar hinzuf\u00fcgen");G.addPanel("",i.subscribeDialog(),"subscribe-to-subcalendars-panel");var H=G.getCurrentPanel().body;d("#subscribe-intro",H).append("Hier ist eine Liste beliebter Kalender, die Ihnen gefallen k\u00f6nnten. Sie k\u00f6nnen auch \u003cspan class=\u0022show-search\u0022\u003e\u003ca  href=\u0022#\u0022\u003enach anderen Kalendern suchen\u003c/a\u003e\u003c/span\u003e. Wenn Sie nicht das finden, wonach Sie suchen, \u003ca class=\u0022create-your-subcalendar\u0022 href=\u0022#\u0022\u003eerstellen Sie selbst einen Kalender\u003c/a\u003e.");d(".create-your-subcalendar",H).click(function(){G.remove();var M=Confluence.TeamCalendars.Dialogs.getSubCalendarCreateDialog("parent",q.callbackHandler);f.showDialogInUpdatedHeight(M);d("input[name='name']",M.getCurrentPanel().body).focus();return false});var L=d(".search",H);d(".form",L).submit(function(){return false});var F;d("textarea[name='query']",L).text("Suchen").addClass("blank-search").keydown(function(M){if(M.keyCode===13){return false}var O=d(this),N=O.hasClass("blank-search")?O.removeClass("blank-search").val("").val():O.val();if(F!==undefined){clearTimeout(F)}F=setTimeout(function(){var Q=O.val();if(!O.hasClass("blank-search")&&Q&&Q!==N){var P=AJS.Meta.get("space-key")!==undefined||d("meta[name='ajs-page-id']").length>=1;L.addClass("searching");l(G,d.extend({term:Q,startIndex:0,pageSize:10,showSubscriberCount:true,showSubCalendarsInView:P},q.options.searchParams||{}),"/search/subcalendars.json",function(S,R){L.removeClass("searching");x();j();R.empty().append(d(document.createElement("span")).addClass("no-subcalendars-found").text(AJS.format("Keine Ergebnisse gefunden f\u00fcr {0}",S.term)))},function(){L.removeClass("searching");E();s()})}},500)}).blur(function(){var M=d(this);if(!d.trim(M.val())){M.addClass("blank-search").val("Suchen")}});if(G.addHelpText&&d.isFunction(G.addHelpText)){G.addHelpText(d(document.createElement("span")).addClass("show-popular").html("Sie k\u00f6nnen auch \u003ca href=\u0022#\u0022\u003ebeliebte Kalender\u003c/a\u003e durchsuchen."));d("span.show-popular a",G.getCurrentPanel().page.buttonpanel).unbind("click").click(function(){G.remove();Confluence.TeamCalendars.Dialogs.getSubCalendarSubscribeDialog({callbackHandler:q.callbackHandler,heading:"Beliebte Teamkalender"}).show();return false});G.addHelpText(d(document.createElement("span")).addClass("show-search").html("Sie k\u00f6nnen auch \u003ca href=\u0022#\u0022\u003enach Kalender suchen\u003c/a\u003e ."));var K=function(){G.remove();Confluence.TeamCalendars.Dialogs.getSubCalendarSubscribeDialog(d.extend(d.extend({},q.options),{callbackHandler:q.callbackHandler,heading:"Existierenden Team Calendar hinzuf\u00fcgen",showSearch:true})).show();return false};d("#"+G.id).find("span.show-search a").unbind("click").click(K)}var I=d(".dialog-button-panel",G.popup.element);if(!q.options.disableWatching){d(document.createElement("input")).attr({type:"checkbox",name:"watch"}).addClass("watch-selected-subcalendars").appendTo(I);d(document.createElement("span")).addClass("watch-select-subcalendars-label").text("Ausgew\u00e4hlte Kalender anschauen").appendTo(I)}d("<span class='spinner hidden aui-icon aui-icon-wait'>Loading...</span>").appendTo(I);G.addButton("Hinzuf\u00fcgen",function(){var N=d("tr.active",H);if(N.length&&!q.callbackHandler.isProcessingSubCalendar()){q.callbackHandler.setProcessingSubCalendar(true);var M=q.callbackHandler.setSubCalendarSpinnerIconVisible();x();j();m();d.ajax({cache:false,converters:{"text json":function(O){return O}},data:(function(){var O={color:q.callbackHandler.getNextCalendarColor(),watchSubCalendars:d(".watch-selected-subcalendars",G.popup.element).is(":checked")};var P=[];N.each(function(){P.push(d(this).data("subCalendar").id)});O.subCalendarIds=P;if(q.callbackHandler.getIncludedCalendars()){O.include=q.callbackHandler.getIncludedCalendars()}e.putCalendarContextParams(O);return O})(),dataFilter:function(O){var P=d.parseJSON(O);if(P.success){Confluence.TeamCalendars.mergeSubCalendarObjectsToArray(P.payload)}return P},dataType:"json",error:function(O,Q,P){Confluence.TeamCalendars.showAjaxError(H,O,Q,P,"error-subcalendar-refresh");q.callbackHandler.setProcessingSubCalendar(false);E();p();o()},success:function(O){if(!O.success){e.setGenericErrors(H,"Uh oh. Es sieht aus, als ob etwas unerwartet schief gelaufen ist. Bitte \u00fcberpr\u00fcfen Sie die Confluence Log-Datei.","error-subcalendar-refresh");return}q.callbackHandler.setSubCalendars(AJS.$.map(N,function(P){return d(P).data("subCalendar").id}).toString(),O.payload);q.callbackHandler.updateAvailableSubCalendarsInSubCalendarPanel();e.setGenericErrors(H,null,"error-subcalendar-refresh");G.remove();q.callbackHandler.setProcessingSubCalendar(false)},complete:function(){if(M){M.resolve()}},type:"PUT",timeout:Confluence.TeamCalendars.ajaxTimeout,url:Confluence.TeamCalendars.getCalendarServiceBaseUrl("/subcalendars/subscribe.json")})}else{G.remove()}},"subscribe-to-subcalendar-button");G.addLink("Abbrechen",function(){G.remove();return false});return G})();var C=function(){var F=B.showSearch?d(".subscribe-to-subcalendars-panel.search .spinner"):d(".subscribe-to-subcalendars-panel.popular .spinner");d(F).css("display","none")};var t=function(){var F=B.showSearch?d(".subscribe-to-subcalendars-panel.search .spinner"):d(".subscribe-to-subcalendars-panel.popular .spinner");d(F).css("display","inline-block")};var z=function(){C();u.destroy()};var r=function(G,F){t();l(w,d.extend({startIndex:G,pageSize:F},q.options.searchParams||{}),"/search/subcalendars/popular",z,function(){C()},true)};var A=function(H,G){var F=d("textarea[name='query']",d(".subscribe-to-subcalendars-panel.search")).val();t();l(w,d.extend({startIndex:H,pageSize:G,term:F,showSubscriberCount:true,showSubCalendarsInView:d("meta[name='ajs-page-id']").length>=1},q.options.searchParams||{}),"/search/subcalendars.json",z,function(){C()},true)};var u=null;function s(){if(u){u.destroy()}u=c.init({$el:d(".tc-subscription-result"),load:B.showSearch?A:r,$container:d(".subscribe-to-subcalendars-panel .tc-table-content"),body:d(".subscribe-to-subcalendars-panel .tc-subscription-result")[0],scrollMargin:30,isLoadMoreItems:B.showSearch?true:false})}var D=w.getCurrentPanel();var n=D.body;var x=function(){d(".subscribe-to-subcalendar-button","#internal-subscription-calendar-dialog").attr("disabled","disabled").addClass("ui-state-disabled")};var E=function(){d(".subscribe-to-subcalendar-button","#internal-subscription-calendar-dialog").removeAttr("disabled","disabled").removeClass("ui-state-disabled")};var j=function(){a.disableElement(d(".watch-selected-subcalendars","#internal-subscription-calendar-dialog"))};var p=function(){a.enableElement(d(".watch-selected-subcalendars","#internal-subscription-calendar-dialog"))};var m=function(){d(".spinner","#internal-subscription-calendar-dialog").removeClass("hidden")};var o=function(){d(".spinner","#internal-subscription-calendar-dialog").addClass("hidden")};var B=d.extend({heading:"Existierenden Team Calendar hinzuf\u00fcgen"},this.options);var v=D.page.header;v.empty().text(B.heading);if(B.showSearch){v.removeClass("welcome-heading-with-logo")}else{v.addClass("welcome-heading-with-logo")}if(Confluence.TeamCalendars.isPDLEnabled()){if(B.showSearch){n.removeClass("popular").addClass("search")}else{n.removeClass("search").addClass("popular")}}d(".results",n).empty();d(".mode",n).removeClass().addClass("mode"+(B.showSearch?"":" new-user"));var k=d(".watch-selected-subcalendars");j();if(q.callbackHandler.isAutoWatchSet()){k.attr("checked","checked")}else{k.removeAttr("checked")}x();j();if(B.showSearch){if(Confluence.TeamCalendars.isCalendarSearchDisabled){d("#tc-subscribe-no-search-warning",n).removeClass("hidden");d(".search",n).addClass("hidden");l(w,{},"/search/subcalendars/all",o,function(){d("#tc-subscribe-no-search-warning .spinner",n).addClass("hidden")})}d("input[name='query']",n).val("");d(".dialog-tip .show-popular",D.page.buttonpanel).removeClass("hidden");d(".dialog-tip .show-search",D.page.buttonpanel).addClass("hidden")}else{var y=d(".preamble",n).addClass("loading");var o=function(){y.removeClass("loading")};l(w,d.extend({startIndex:0,pageSize:10},q.options.searchParams||{}),"/search/subcalendars/popular",o,function(){o();s()});d(".dialog-tip .show-popular",D.page.buttonpanel).addClass("hidden");d(".dialog-tip .show-search",D.page.buttonpanel).removeClass("hidden")}q.subCalendarSubscibeDialog=w;w.show();return w}});return b});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-subcalendar-subscribe-dialog/calendar-subcalendar-subscribe-dialog-compat.js' */
require(["tc/calendar-subcalendar-subscribe-dialog"],function(a){if(!Confluence.TeamCalendars.Dialogs){Confluence.TeamCalendars.Dialogs={}}Confluence.TeamCalendars.Dialogs.getSubCalendarSubscribeDialog=function(b){return new a(b).render()}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/js/add-from-macro-dialog.js' */
define("tc/get-add-dialog-for-macro",["jquery","confluence/meta","aui/dialog2","window","tc/get-add-dialog-for-macro"],function(f,c,b,d){var g=c.get("remote-user")==="";function h(){var i=AJS.dialog2();i.$el.find(".aui-dialog2-header .aui-dialog2-header-main").text("Insert a Team Calendar");i.$el.find(".aui-dialog2-content").text("You need to log in to insert a calendar");i.$el.find(".aui-dialog2-footer").html('<div class="aui-dialog2-footer-actions">     <button class="aui-button aui-button-light cancel-btn">'+"Cancel"+'   </button>     <button class="aui-button aui-button-primary login-btn">'+"Log in"+"   </button> </div>");i.$el.find(".aui-dialog2-header-close").hide();i.$el.find(".cancel-btn").click(function(){i.hide()});i.$el.find(".login-btn").click(function(){d.location.href=f("#login-link").prop("href")});return i}var a;function e(){a=a||h();a.show()}Confluence.TeamCalendars=Confluence.TeamCalendars||{};Confluence.TeamCalendars.Dialogs=Confluence.TeamCalendars.Dialogs||{};Confluence.TeamCalendars.Dialogs.getAddDialogForMacro=function(k){if(!k.params&&g){e();return}var i=k.params?k.params.id:"";var j={isProcessingSubCalendar:function(){return false},setProcessingSubCalendar:function(l){},setSubCalendarSpinnerIconVisible:function(l){},getIncludedCalendars:function(){return i?i.split(","):[]},showAjaxUpdateError:function(l,n,m){Confluence.TeamCalendars.showAjaxError(f("#editor-messages"),l,n,m,"error-subcalendar-update")},showAjaxError:function(m,o,n,l){Confluence.TeamCalendars.showAjaxError(f("#editor-messages"),m,o,n,l)},setGenericErrors:function(m,l){Confluence.TeamCalendars.setGenericErrors(f("#editor-messages"),null,l)},setGenericUpdateError:function(){Confluence.TeamCalendars.setGenericErrors(f("#editor-messages"),null,"error-subcalendar-update")},setSubCalendars:function(l){if(!i){Confluence.TeamCalendars.fireEventForAnalytics("subcalendar.parent.embedded")}var m=l+(i?","+i:"");k.params=f.extend(k.params,{id:m});k.body="";AJS.Rte.BookmarkManager.restoreBookmark();tinymce.confluence.MacroUtils.insertMacro({macro:k,contentId:Confluence.Editor.getContentId()})},setParameter:function(l,m){},getParameter:function(l){},reloadSubCalendar:function(l){},getSubCalendars:function(){return k.params},updateAvailableSubCalendarsInSubCalendarPanel:function(){},getNextCalendarColor:function(){return""},isAutoWatchSet:function(){return false},refreshCachedSubCalendars:function(m,l){},handleImport:function(l){this.setSubCalendars(l)},isCalendarInEditMode:function(){return true},suppressMessage:function(m,l){Confluence.TeamCalendars.suppressMessage(f("#editor-messages"),m,l)},showCalendarWizard:function(){Confluence.TeamCalendars.Dialogs.getAddDialog(j)},getSubCalendarsWhichCanAddEvents:function(){return[]}};if(Confluence.TeamCalendars.shouldShowTimezoneSetup()){Confluence.TeamCalendars.Dialogs.getTimeZoneSetupDialog(j).show()}else{AJS.Rte.BookmarkManager.storeBookmark();Confluence.TeamCalendars.Dialogs.getAddDialog(j,{title:"Kalender einf\u00fcgen"})}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/js/calendar-edit-dialog.js' */
(function(b){var a=require("tc/form-state-control");Confluence.TeamCalendars.getEditCalendarDialogHelper=function(e,d,c){var i,h=b(".form-mode",e),g=b("input[name='spaceKey']",e),f=b("input[name='spaceKeyAutocomplete']",e);return{initSpaceDropDown:function(){f.keypress(function(j){if(j.which!==13){g.val(j.which)}});f.bind("selected.autocomplete-content",function(k,j){g.val(j.content.key);b(this).val(j.content.name);b(".spaceKeyAutocomplete-error",e).empty()})},initTimeZoneSelect:function(){b("select[name='timeZoneIdSelect']",e).change(function(){b("input[name='timeZoneId']",e).val(b("option:selected",this).val())})},initCloseButton:function(j,k){j.addLink("Abbrechen",function(){if(typeof k==="function"){k()}j.remove();return false})},initOkButton:function(j,k){k.addButton(j,function(){e.submit();return false},"submit");i=k.popup.element.find(".submit")},populateTimeZoneDropDown:function(k){var l=d?d.timeZoneId:Confluence.TeamCalendars.getUserTimeZone();var j=b("#timeZoneIdSelect",k.body);a.disableElement(i);Confluence.TeamCalendars.populateTimeZoneDropDown(j,l,function(){a.enableElement(i);j.addClass("ready")},function(m,o,n){c.showAjaxError(m,o,n)})},disableOkButton:function(j){i.text(j).attr("disabled","disabled").addClass("ui-state-disabled")},enableOkButton:function(j){i.text(j).removeAttr("disabled").removeClass("ui-state-disabled")},isNewCalendar:function(){return d?false:true},resetFieldErrors:function(){Confluence.TeamCalendars.setFieldErrors(e,null)},setFormModeEdit:function(){h.removeClass().addClass("form-mode edit")},setFormModeCreate:function(){h.removeClass().addClass("form-mode create")},setFormModeReadOnly:function(){h.removeClass().addClass("form-mode read-only")},setHeading:function(k,j){return j.getCurrentPanel().page.header.empty().text(k).addClass("calendar-heading")},setSubCalendarIdField:function(j){b("input[name='subCalendarId']",e).val(j)},setNameField:function(j){b("input[name='name']",e).val(j)},setDescriptionField:function(j){b("textarea[name='description']",e).val(j)},setColorField:function(j){b("input[name='color']",e).val(j)},setSpaceKeyField:function(j){g.val(j)},setSpaceKeyAutocompleteField:function(j){f.val(j)},setTimeZoneIdField:function(j){b("input[name='timeZoneId']",e).val(j)},setTimeZoneIdDisplayField:function(j){b(".timeZoneIdDisplay",e).text(j)},setSubscriptionIdField:function(j){b("input[name='subscriptionId']",e).val(j)},setLocationField:function(j){b("input[name='location']",e).val(j)},setUserNameField:function(j){b("input[name='username']",e).val(j)},setSpaceToDefault:function(){g.val(AJS.Meta.get("space-key")||"");f.val(AJS.Meta.get("space-name")||"")}}};Confluence.TeamCalendars.Dialogs.getSubCalendarCreateDialog=function(f,e){var j=require("tc/util"),d=(typeof f==="string")?f:f.type,g,i=Confluence.TeamCalendars.subcalendar[d],h=new AJS.ConfluenceDialog({width:i.dialogWidth||521,height:"auto",onSubmit:function(){g.submit();return false},id:"create-calendar-dialog"}),c=i.getDialog(h,b.isPlainObject(f)?f:null,e);h.popup.element.css("overflow","visible");g=c.initializeForm();g.submit(function(){if(e.isProcessingSubCalendar()){return false}e.setProcessingSubCalendar(true);var l=e.setSubCalendarSpinnerIconVisible(true);c.onSubmitStart();var k=c.getFormDataAsAjaxData();if(e.getIncludedCalendars()){k.include=e.getIncludedCalendars()}var m=k.subCalendarId;b.ajax({cache:false,converters:{"text json":function(n){return n}},data:k,dataFilter:function(n){var o=b.parseJSON(n);if(o.success){Confluence.TeamCalendars.mergeSubCalendarObjectsToArray(o.payload)}return o},dataType:"json",error:function(n,p,o){e.showAjaxUpdateError(n,p,o);c.onSubmitEnd();e.setProcessingSubCalendar(false)},success:function(o){e.setGenericUpdateError();if(o.success){Confluence.TeamCalendars.setFieldErrors(g,null);var n=m;if(n){e.setSubCalendars(m,o.payload);e.reloadSubCalendar(m)}else{m=o.modifiedSubCalendarId;b("input[name='subCalendarId']",g).val(m);e.setSubCalendars(m,o.payload)}e.updateAvailableSubCalendarsInSubCalendarPanel();c.onSubmitEnd();h.remove();if(!n){Confluence.TeamCalendars.CalendarTour().start(m)}}else{Confluence.TeamCalendars.setFieldErrors(g,o.fieldErrors);c.onSubmitEnd();if(!i.dynamicDialogHeight){j.showDialogInUpdatedHeight(h)}}e.setProcessingSubCalendar(false)},complete:function(){if(l){l.resolve()}},type:"PUT",timeout:Confluence.TeamCalendars.ajaxTimeout,url:Confluence.TeamCalendars.getCalendarServiceBaseUrl("/subcalendars.json")});return false});return h}}(AJS.$));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/js/calendar-plugin.js' */
define("tc/calendar-plugin",["jquery","underscore","ajs","tc/calendar-cache","tc/util","tc/calendar-util","tc/manage-event","tc/manage-i18n-text","tc/full-calendar-option","tc/subcalendar-panel","tc/auto-complete-search-helper","tc/calendar-remove-dialog","tc/calendar-feature-discovery-dialog","tc/calendar-share-dialog","tc/calendar-restriction-dialog","tc/myCalendarTour","tc/subcalendar-navigation-buttons-view","tc/subcalendar-restriction-button-view","tc/load-favicon","tc/calendar-caldav-subscribe-model","tc/subcalendar-subscribe-dialog","tc/calendar-caldav-subscribe-service"],function(f,x,k,o,h,l,i,v,q,g,t,j,e,d,a,s,c,b,n,m,u,w){var p=new o();var r={spinnerDeferTasks:[],ajaxTimeout:Confluence.TeamCalendars.ajaxTimeout,i18nMessages:null,dialogSequence:0,ERROR_CLASS_EVENT_UPDATE:"error-event-update",ERROR_CLASS_EVENT_DELETE:"error-event-delete",ERROR_CLASS_SUB_CALENDAR_LIST:"error-subcalendar-refresh",ERROR_CLASS_SUB_CALENDAR_DELETE:"error-subcalendar-delete",ERROR_CLASS_SUB_CALENDAR_UPDATE:"error-subcalendar-update",ERROR_CLASS_SUB_CALENDAR_WATCH:"error-subcalendar-watch",ERROR_CLASS_SUB_CALENDAR_LIST_EVENTS:"error-subcalendar-list-events-",ERROR_CLASS_SUB_CALENDAR_TOGGLE_EVENTS:"error-subcalendar-toggle-events-",ERROR_CLASS_CONFIG_UPDATE:"error-config-update",ERROR_CLASS_PRIVATE_URL:"error-private-url",ERROR_CLASS_RESET_PRIVATE_URLS:"error-reset-private-urls",PREF_LAST_ALL_DAY_USED:"pref-all-day-event-default",init:function(z){var y=new q(r,z,p);if(r.getParameter(z,"width")){z.parent().css("width",r.getParameter(z,"width")+"px")}if(r.getParameter(z,"height")){y.height=parseInt(r.getParameter(z,"height"))}else{y.aspectRatio=1.9}if(r.getParameter(z,"displayWeekNumber")){y.weekNumbers=(r.getParameter(z,"displayWeekNumber")==="true")}this.getCalendarPanel(z).fullCalendar(y);this.initCalendarDiv(z)},getEventTypeNames:function(y){return v(this.i18nMessages).getEventTypeNames(y)},getMonthNames:function(){return v(this.i18nMessages).getMonthNames()},getMonthNamesShort:function(){return v(this.i18nMessages).getMonthNamesShort()},getDayNames:function(){return v(this.i18nMessages).getDayNames()},getDayNamesShort:function(){return v(this.i18nMessages).getDayNamesShort()},hideInlineAuiDialogs:function(){f("body").trigger("click")},isEventToolTipSuppressed:function(y){return y.data("shouldSuppressEventToolTip")},setSuppressEventToolTip:function(z,y){z.data("shouldSuppressEventToolTip",y)},setEventTooltipVisible:function(B,A,y,C){if(C&&(this.isEventEditable(B,A)||A.workingUrl)){var z=f("body > .event-tooltip").length?f("body > .event-tooltip"):f("<div/>",{"class":"event-tooltip"}).appendTo(f("body"));f("p",z).remove();if(this.isEventEditable(B,A)){z.append(f("<p/>",{text:"Halten Sie die Umschalt-Taste gedr\u00fcckt und klicken Sie dann, um das Dialogfenster \u201eBearbeiten\u201c anzuzeigen."}))}if(A.workingUrl){z.append(f("<p/>",{"class":"follow-hint",text:k.format("Streuerelement/Befehl + Mausklick, um zu {0} zu gelangen",A.workingUrl)}))}z.css({left:y.pageX+"px",top:(y.pageY+5)+"px"}).show()}else{f("body > .event-tooltip").hide()}},getParameter:function(z,y){return l.getParameter(z,y)},getParameters:function(y){return l.getParameters(y)},setParameter:function(A,y,z){l.setParameter(A,y,z)},getCalendarPanel:function(y){return f(".calendar-panel .calendar",y)},getTimelineHeight:function(y){return r.getParameter(y,"timelineHeight")},getMaxMonthToDisplayTimelineCalendar:function(y){return r.getParameter(y,"maxMonthToDisplayTimelineCalendar")},getDefaultStartTime:function(y){return this.getParameter(y,"timeSuggestion")[16]},getDefaultEndTime:function(y){return this.getParameter(y,"timeSuggestion")[18]},reloadSubCalendar:function(y,z){if(!z){return}z=f.isArray(z)?z:[z];f(".sub-calendar-panel .subcalendar-item",y).each(function(){var H=f(this),D=H.data("subCalendarId"),C=f(".child-subcalendar",H),I=r.getSubCalendar(y,D),B=f.map(C,function(K){return f(K).data("subCalendarId")});if(f.inArray(D,z)!==-1){var G=function(L){for(var K=0;K<C.length;K++){if(f(C[K]).data("sub-calendar-id")===L){return !f(C[K]).hasClass("subcalendar-disabled")}}return false};if(Confluence.TeamCalendars.isSubscriptionSubCalendar(I)){p.removeCalendar(D);r.removeSubCalendarEventSource(y,D);r.addSubCalendarEventSource(y,D)}r.removeSubCalendarEventSource(y,f.map(B,function(K){p.removeCalendar(K);return K}));if(I.childSubCalendars!==undefined){var A=f.map(I.childSubCalendars,function(K){if(G(K.id)||!K.eventsHidden){return K.id}});r.addSubCalendarEventSource(y,A)}}else{var F=[];C.filter(function(){return f.inArray(f(this).data("subCalendarId"),z)!==-1}).each(function(){var K=f(this),L=K.data("subCalendarId");p.removeCalendar(L);if(K.hasClass("subcalendar-disabled")){K.removeClass("subcalendar-disabled");K.find(".child-subcalendar-checkbox").prop("checked",true)}else{r.removeSubCalendarEventSource(y,L)}r.addSubCalendarEventSource(y,L);F.push(L)});if(F.length){var J=F;var E=r.getSubCalendar(y,D);if(!l.isDummySubscriptionParentSubCalendar(E)){J.push(E.id)}r.setSubCalendarEventsHidden(y,J,false,H)}}})},makeAutoCompleteSearch:function(B,A,z,D,y,C){t.makeAutoCompleteSearch(B,A,z,D,y,C)},isProcessingEvent:function(y){return y.data("processingEvent")},setProcessingEvent:function(A,z,y){if(y){if(z){if(y.disableOkButton){y.disableOkButton()}}else{if(y.enableOkButton){y.enableOkButton()}}}A.data("processingEvent",z)},showAjaxError:function(z,B,D,C,y,A){if(!r.isPageUnloading){Confluence.TeamCalendars.showAjaxError(z,B,D,C,y,A)}},showHTMLGenericError:function(z,A,y){if(!r.isPageUnloading){Confluence.TeamCalendars.showHTMLGenericError(z,A,y)}},showRestrictedCalendarsWarning:function(y){f(".restricted-calendars-warning",y).removeClass("hidden")},deleteEvent:function(A,B,z,y){i(r,p).deleteEvent(A,B,z,y)},getCalendarServiceBaseUrl:function(z,y){return Confluence.TeamCalendars.getCalendarServiceBaseUrl(y)},getSubCalendars:function(A,B){var z=A.data("subCalendars")||[];if(B){var y=[];f.each(z,function(D,C){if(B(C)){y.push(C)}});return y}return z},isSubCalendarDeletable:function(z,y){return this.isCalendarInEditMode(z)&&y.deletable},isSubCalendarAdministratable:function(z,y){return this.isCalendarInEditMode(z)&&y.administrable},isSubCalendarEventsUpdatable:function(z,y){return this.isCalendarInEditMode(z)&&y.eventsEditable},canAddEventsToSubcalendar:function(z,y){return this.isSubCalendarEventsUpdatable(z,y)&&!Confluence.TeamCalendars.isJiraSubCalendar(y)},doesSubCalendarHaveRestrictions:function(y){return y.usersPermittedToView.length||y.groupsPermittedToView.length||y.usersPermittedToEdit.length||y.groupsPermittedToEdit.length},getSubCalendarsWhichCanAddEvents:function(y){return this.getSubCalendars(y,function(z){return r.canAddEventsToSubcalendar(y,z)})},getParentSubCalendar:function(A,z){var y=null;f.each(this.getSubCalendars(A),function(D,C){if(C.id===z){y=C;return false}else{var B=f.grep(C.childSubCalendars||[],function(E){return E.id==z});if((y=B&&B.length?C:null)){return false}}});return y},getSubCalendar:function(z,A){var y=null;f.each(this.getSubCalendars(z),function(C,B){if(B.id===A){y=B;return false}else{y=f.grep(B.childSubCalendars||[],function(D){return D.id==A});if((y=y&&y.length?y[0]:null)){return false}}});return y},getSanboxEventTypeRemindersFromSubCalendar:function(z,A){var y=this.getSubCalendar(z,A);if(y){return y.sanboxEventTypeReminders}},getCurrentReminderForEventType:function(D,C){var E=null;var B=C.getSelectedSubCalendarId();var z=C.getSelectedEventType();if(l.isCustomEventType(z)){var A=this.getCustomEventTypeFromSubCalendar(D,B);if(A){f.each(A,function(F,G){if(G.customEventTypeId===z&&G.periodInMins>0){E=G;return false}})}}else{var y=this.getSanboxEventTypeRemindersFromSubCalendar(D,B);if(y){f.each(y,function(F,G){if(G.eventTypeId===z||G.eventTypeId===z+"-calendar"){E=G;return false}})}}return E},getCustomEventTypeFromSubCalendar:function(z,A){var y=this.getSubCalendar(z,A);if(y){return y.customEventTypes}},setSubCalendar:function(C,B,A){var z=B.data("subCalendars");for(var y=0;y<z.length;y++){if(z[y].id===C){z[y]=f.isArray(A)?A[0]:A}}B.data("subCalendars",z)},setSubCalendars:function(z,y){if(l.isSpaceCalendarView(z)){y=x.filter(y,function(A){return A.eventsViewable||l.isDummySubscriptionParentSubCalendar(A)})}z.data("subCalendars",f.isArray(y)?y:(y?[y]:null))},showSubCalendarEdit:function(B,y){var C;if(Confluence.TeamCalendars.isJiraSubCalendar(y)){var D=Confluence.TeamCalendars.isInternalSubscriptionSubCalendar(y);C=Confluence.TeamCalendars.Dialogs.getEditEventDialog({title:D?y.sourceSubCalendar.name:y.name,eventType:(D?y.sourceSubCalendar.type:y.type)+"-calendar",subCalendarId:y.id},y,r,B).show()}else{var z=Confluence.TeamCalendars.Dialogs.getSubCalendarEditDialog(y,r.getRenderedMacroCallbackHandler(B),B,r,p);C=z.render();var A=C.getCurrentPanel().body;Confluence.TeamCalendars.setFieldErrors(A,null);C.show();C.gotoPanel(l.panelEditCalendar.GENERAL_PANEL);f("input[name='name']",A).focus();C.belongedView=z;if(s.isShowCustomEventTypeFrom(y.id)){z.showAddEventTypeForm()}if(!this.isSubCalendarAdministratable(B,y)){f(C.getPanel(l.panelEditCalendar.GENERAL_PANEL).button).addClass("hidden");f(C.getPanel(l.panelEditCalendar.EVENT_TYPE_PANEL).button).addClass("hidden");f(C.getPanel(l.panelEditCalendar.RESTRICTION_PANEL).button).addClass("hidden")}else{if(l.isSubscriptionSubCalendar(y)){f(C.getPanel(l.panelEditCalendar.EVENT_TYPE_PANEL).button).addClass("hidden")}}C.getCurrentPanel().onselect=function(){f("#edit-calendar-dialog").find(".button-panel-button.submit").removeClass("hidden")}}return C},showCustomEventEditForm:function(B,y,A,D){var C=this.showSubCalendarEdit(B,y);if(!(!Confluence.TeamCalendars.isInternalSubscriptionSubCalendar(y)&&Confluence.TeamCalendars.isJiraSubCalendar(y))){var z=C.belongedView;if(A){A=Confluence.TeamCalendars.isJiraType(A)?A+"-calendar":A;z.selectCustomEvent(A)}else{z.showAddEventTypeForm()}}C.gotoPanel(l.panelEditCalendar.EVENT_TYPE_PANEL);return C},updateCustomEventType:function(C,E,z){var D=this.getSubCalendars(C);for(var B=0;B<D.length;B++){if(D[B].id===E){var A=false;for(var y=0;y<D[B].customEventTypes.length;y++){if(D[B].customEventTypes[y].customEventTypeId===z.customEventTypeData){D[B].customEventTypes[y]=z;A=true;break}}if(!A){D[B].customEventTypes.push(z)}break}}C.data("subCalendars",D)},refreshCachedSubCalendars:function(B,y,z){var A={};if(r.getParameter(B,"include")){A.include=r.getParameter(B,"include")}l.putCalendarContextParams(A);f.ajax({cache:false,converters:{"text json":function(C){return C}},data:A,dataFilter:function(C){var D=f.parseJSON(C);if(D.success){r.mergeSubCalendarObjectsToArray(D.payload)}return D},dataType:"json",error:function(C,E,D){r.showAjaxError(B,C,E,D,r.ERROR_CLASS_SUB_CALENDAR_LIST);if(z){z(C,E,D)}},success:function(C){if(C.success){r.setSubCalendars(B,C.payload);if(y){y(C.payload)}r.setGenericErrors(B,null,r.ERROR_CLASS_SUB_CALENDAR_LIST)}else{r.setGenericErrors(B,"Uh oh. Es sieht aus, als ob etwas unerwartet schief gelaufen ist. Bitte \u00fcberpr\u00fcfen Sie die Confluence Log-Datei.",r.ERROR_CLASS_SUB_CALENDAR_LIST)}},type:"GET",timeout:r.ajaxTimeout,url:Confluence.TeamCalendars.getCalendarServiceBaseUrl("/subcalendars.json")})},mergeSubCalendarObjectsToArray:function(y){return Confluence.TeamCalendars.mergeSubCalendarObjectsToArray(y)},setGenericErrors:function(z,A,y){Confluence.TeamCalendars.setGenericErrors(z,A,y)},shouldShowFeatureDiscoveryDialog:function(y,z){return r.getParameter(y,"showCalendarDiscoveryDialog")==="true"},setSubCalendarEventsHidden:function(z,B,y,A){B=f.isArray(B)?B:B;return f.ajax({cache:false,data:{subCalendarId:B},dataType:"json",type:y?"PUT":"DELETE",error:function(C,E,D){f.each(B,function(F,G){r.showAjaxError(z,C,E,D,r.ERROR_CLASS_SUB_CALENDAR_TOGGLE_EVENTS+r.getStringAsHex(G))})},success:function(){f.each(B,function(C,D){r.getSubCalendar(z,D).eventsHidden=y;r.checkCalendarHasAllChildDisable(A);r.setGenericErrors(z,null,r.ERROR_CLASS_SUB_CALENDAR_TOGGLE_EVENTS+r.getStringAsHex(D))})},timeout:r.ajaxTimeout,url:r.getCalendarServiceBaseUrl(z,"/preferences/events/hidden.json")})},checkCalendarHasAllChildDisable:function(y){f(y).filter(function(){var z=f("li.child-subcalendar",y);var A=f("li.child-subcalendar:not(.subcalendar-disabled)",y);if(z.length!==0&&A.length===0){y.addClass("allchildsubcalendar-disabled").addClass("subcalendar-disabled")}else{y.removeClass("allchildsubcalendar-disabled").removeClass("subcalendar-disabled")}})},updateAvailableSubCalendarsInSubCalendarPanel:function(y){g(r,y,p).updateAvailableSubCalendarsInSubCalendarPanel()},unsubscribeFromSubcalendar:function(B,z){if(!r.isProcessingSubCalendar(B)){r.setProcessingSubCalendar(B,true);var y=r.setSubCalendarSpinnerIconVisible(B,true);var A=function(){if(y){y.resolve()}};if(z.subscriptionId){r._deleteSubCalendarInternal(B,z.id,function(C,E,D){r.showAjaxError(B,C,E,D,r.ERROR_CLASS_SUB_CALENDAR_DELETE);A();r.setProcessingSubCalendar(B,false)},function(C){if(C.success){r.setGenericErrors(B,null,r.ERROR_CLASS_SUB_CALENDAR_UPDATE);f.each(f.merge([z],z.childSubCalendars||[]),function(E,D){r.setGenericErrors(B,null,r.ERROR_CLASS_SUB_CALENDAR_LIST_EVENTS+r.getStringAsHex(D.id))});r.setGenericErrors(B,null,r.ERROR_CLASS_SUB_CALENDAR_DELETE);r.removeSubCalendarEventSource(B,z.id);r.removeSubCalendarEventSource(B,z.childSubCalendars);r.setSubCalendars(B,C.payload);r.updateAvailableSubCalendarsInSubCalendarPanel(B)}else{r.setGenericErrors(B,"Uh oh. Es sieht aus, als ob etwas unerwartet schief gelaufen ist. Bitte \u00fcberpr\u00fcfen Sie die Confluence Log-Datei.",r.ERROR_CLASS_SUB_CALENDAR_DELETE)}A();r.setProcessingSubCalendar(B,false)})}else{f.ajax({cache:false,converters:{"text json":function(C){return C}},data:(function(){var C={subCalendarId:z.id};if(r.getParameter(B,"include")){C.include=r.getParameter(B,"include")}l.putCalendarContextParams(C);return C})(),dataType:"json",dataFilter:function(C){var D=f.parseJSON(C);if(D.success){r.mergeSubCalendarObjectsToArray(D.payload)}return D},error:function(C,E,D){r.showAjaxError(B,C,E,D);r.setProcessingSubCalendar(B,false)},success:function(C){if(l.isSingleCalendarView(B)){window.location.href=k.contextPath()+"/display/"+encodeURIComponent(k.Meta.get("space-key"))+"/calendars"}else{r.setGenericErrors(B,null,r.ERROR_CLASS_SUB_CALENDAR_UPDATE);r.removeSubCalendarEventSource(B,z.id);r.removeSubCalendarEventSource(B,z.childSubCalendars);r.setSubCalendars(B,C.payload);r.updateAvailableSubCalendarsInSubCalendarPanel(B);r.setProcessingSubCalendar(B,false)}k.trigger("calendar.removed")},complete:function(){A()},type:"DELETE",timeout:r.ajaxTimeout,url:r.getCalendarServiceBaseUrl(B,"/subcalendars/preferences.json")})}}},getNextUnusedSubCalendarColor:function(D){var C=r.getSubCalendars(D);var B=r.getParameter(D,"subCalendarColorClass");for(var z=0;z<B.length;++z){var A=B[z];var E=false;for(var y=0;y<C.length;++y){if(A===C[y].color){E=true;break}}if(!E){return A}}return C.length?B[C.length%B.length]:"subcalendar-blue"},setProcessingSubCalendar:function(z,y){z.data("processingSubCalendar",y)},isProcessingSubCalendar:function(y){return y.data("processingSubCalendar")},getDeleteSubCalendarConfirmationDialog:function(A,y,z){var B=this.createDeleteSubCalendarConfirmationDialog(A,y,z);f("input[name='subCalendarId']",B.getCurrentPanel().body).val(y.id);return B},createDeleteSubCalendarConfirmationDialog:function(D,z,C){var A=new k.Dialog({height:290,width:550,id:"delete-calendar-dialog"});A.addHeader(Confluence.TeamCalendars.isJiraSubCalendar(z)?"Ereignis l\u00f6schen":"Kalender l\u00f6schen");A.addPanel("Kalender l\u00f6schen",Confluence.TeamCalendars.Templates.confirmRemoveSubCalendar({subCalendar:z,subscriberCount:C}),"delete-subcalendar-confirmation-panel");var B=A.getCurrentPanel().body;f("form.sub-calendar-delete-confirm",B).submit(function(){return false});var y=r.setSubCalendarSpinnerIconVisible(D,true);A.addButton(Confluence.TeamCalendars.isJiraSubCalendar(z)?"Ereignis l\u00f6schen":"Kalender l\u00f6schen",function(){if(!r.isProcessingSubCalendar(D)){r.setProcessingSubCalendar(D,true);var E=r.getSubCalendar(D,f("input[name='subCalendarId']",B).val());r._deleteSubCalendarInternal(D,E.subscriptionId||E.id,function(F,H,G){r.showAjaxError(D,F,H,G,r.ERROR_CLASS_SUB_CALENDAR_DELETE);A.remove();y.resolve();r.setProcessingSubCalendar(D,false)},function(F){if(F.success){r.setGenericErrors(D,null,r.ERROR_CLASS_SUB_CALENDAR_UPDATE);f.each(f.merge([E],E.childSubCalendars||[]),function(H,G){r.setGenericErrors(D,null,r.ERROR_CLASS_SUB_CALENDAR_LIST_EVENTS+r.getStringAsHex(G.id))});r.setGenericErrors(D,null,r.ERROR_CLASS_SUB_CALENDAR_DELETE);r.removeSubCalendarEventSource(D,E.id);r.removeSubCalendarEventSource(D,E.childSubCalendars);r.setSubCalendars(D,F.payload);r.updateAvailableSubCalendarsInSubCalendarPanel(D)}else{r.setGenericErrors(D,"Uh oh. Es sieht aus, als ob etwas unerwartet schief gelaufen ist. Bitte \u00fcberpr\u00fcfen Sie die Confluence Log-Datei.",r.ERROR_CLASS_SUB_CALENDAR_DELETE)}A.remove();y.resolve();r.setProcessingSubCalendar(D,false)})}return false});A.addLink("Abbrechen",function(){A.remove();y.resolve();return false});return A},deleteSubCalendar:function(B,z){if(!r.isProcessingSubCalendar(B)){r.setProcessingSubCalendar(B,true);var y=r.setSubCalendarSpinnerIconVisible(B,true);var A={subCalendarId:z.subscriptionId||z.id};l.putCalendarContextParams(A);f.ajax({cache:false,data:A,dataType:"json",error:function(C,E,D){r.showAjaxError(B,C,E,D,r.ERROR_CLASS_SUB_CALENDAR_DELETE);r.setProcessingSubCalendar(B,false)},success:function(D){var G=B.data("subCalendarEditFormDialog");if(G){G.hide()}var H=r.getDeleteSubCalendarConfirmationDialog(B,z,D.subscriptionCount),E=H.getCurrentPanel().body,C=f(".calendar-to-delete",E);C.removeAttr("ThreeDots").empty().append(f(document.createElement("span")).addClass("ellipsis_text").text(z.name));r.setProcessingSubCalendar(B,false);var F=function(I){if(27===I.keyCode){r.setProcessingSubCalendar(B,false);y.resolve();f(document).unbind("keypress",F)}};f(document).keypress(F);H.show();C.ThreeDots()},complete:function(){if(y){y.resolve()}},type:"GET",timeout:r.ajaxTimeout,url:r.getCalendarServiceBaseUrl(B,"/subcalendars/links.json")})}},_deleteSubCalendarInternal:function(B,C,z,y){var A={subCalendarId:C};if(r.getParameter(B,"include")){A.include=r.getParameter(B,"include")}l.putCalendarContextParams(A);f.ajax({cache:false,converters:{"text json":function(D){return D}},data:A,dataFilter:function(D){var E=f.parseJSON(D);if(E.success){r.mergeSubCalendarObjectsToArray(E.payload)}return E},dataType:"json",error:function(D,F,E){if(z){z(D,F,E)}},success:function(D){if(l.isSingleCalendarView(B)){window.location.href=k.contextPath()+"/display/"+encodeURIComponent(k.Meta.get("space-key"))+"/calendars"}else{if(y){y(D)}}k.trigger("calendar.removed")},type:"DELETE",timeout:r.ajaxTimeout,url:r.getCalendarServiceBaseUrl(B,"/subcalendars.json")})},addSubCalendarEventSource:function(z,B){if(!B){return}var A=Confluence.TeamCalendars.getAsArray(B),y=z.data("visibleEventSources")||{};f.each(A,function(D,C){if(!y[C]){y[C]=r.getSubCalendarEventSource(z,C);r.getCalendarPanel(z).fullCalendar("addEventSource",y[C])}});z.data("visibleEventSources",y)},removeSubCalendarEventSource:function(z,B){if(!B){return}var A=Confluence.TeamCalendars.getAsArray(B),y=z.data("visibleEventSources")||{};f.each(A,function(D,C){if(y[C]){r.getCalendarPanel(z).fullCalendar("removeEventSource",y[C]);y[C]=null}});z.data("visibleEventSources",y)},isHttpsServer:function(y){return r.getParameter(y,"baseUrl").substring(5,0).toLowerCase()!="https"},getSubCalendarEventSource:function(B,C){var z=B.data("eventSources")||{},y=function(D,F){var E=D.data("retrieveEventsQueue")||{};if(!E[F]){E[F]=[]}D.data("retrieveEventsQueue",E);return E[F]},A=z[C]||function(E,L,H){if(!(isNaN(E.getTime())||isNaN(L.getTime()))){if(p.hasCalendar(C)&&p.getCalendarStart(C).getTime()<E.getTime()&&p.getCalendarEnd(C).getTime()>L.getTime()){var F=r.getEventsTruncated(B,p.getCalendarData(C));H(F);return}var N=y(B,C);for(var J=0;J<N.length;++J){var M=N.shift();if(!M.aborted&&M.xhr.readyState!==4){try{M.xhr.abort()}catch(I){}M.xhr.aborted=true}}var K=new Date(E.getTime()-(1000*60*60*24*30)),O=new Date(L.getTime()+(1000*60*60*24*30)),D={subCalendarId:C,userTimeZoneId:Confluence.TeamCalendars.getUserTimeZone(),start:f.fullCalendar.formatDate(K,"u"),end:f.fullCalendar.formatDate(O,"u")},G=r.getSubCalendars(B,function(R){if(!R.childSubCalendar){return false}var Q=false;f.each(R.childSubCalendar,function(S,T){if(T.id===C){Q=true;return false}});return Q});if(G.length){D.parentSubCalendarId=G[0].id}var P=f.ajax({cache:false,data:D,dataType:"json",error:function(W,S,U){if(Confluence.TeamCalendars.isRequireOauth(W)){var R=f.parseJSON(W.responseText),X=f(".jira-calendars-oauth-warnings",B),Q=R.oAuthUrl,Y=f("div",X).filter(function(){return Q===f(this).data("oAuthUrl")}),T=function(){X.append(Confluence.TeamCalendars.Templates.requireOauthMessage({oAuthUrl:Q,subCalendarIdsArrayJson:JSON.stringify([C]),subCalendarNamesArrayJson:JSON.stringify([R.subCalendarName]),subCalendarName:f("<div/>",{text:R.subCalendarName}).html()})).find(".approve-dance").click(function(){AppLinks.authenticateRemoteCredentials(R.oAuthUrl,function(){var aa=f("div",X).filter(function(){return Q===f(this).data("oAuthUrl")});r.reloadSubCalendar(B,aa.data("subCalendarIds"));aa.remove()},function(){alert("Best\u00e4tigung erfolglos. K\u00f6nnten Sie es bitte noch einmal versuchen?")});return false})},Z=function(){var ab=Y.data("subCalendarIds");if(f.inArray(C,ab)===-1){ab.push(C)}var aa=Y.data("subCalendarNames");if(f.inArray(R.subCalendarName,aa)===-1){aa.push(R.subCalendarName)}f("span.subcalendar-names",Y.data("subCalendarIds",ab).data("subCalendarNames",aa)).text(aa.join(", "))};if(!Y.length){T()}else{Z()}}else{if(W.status==403){if(r.getParameter(B,"showHiddenSubCalendars")==="true"){r.showRestrictedCalendarsWarning(B)}else{if(!l.isSpaceCalendarView(B)){r.showAjaxError(B,W,S,U,r.ERROR_CLASS_SUB_CALENDAR_LIST_EVENTS+r.getStringAsHex(C))}}}else{if(S!=="abort"){var V=r.getSubCalendar(B,C);r.showAjaxError(B,W,S,U,r.ERROR_CLASS_SUB_CALENDAR_LIST_EVENTS+r.getStringAsHex(C),V);f(B).find("#calendar-change-jql").click(function(){var ab=this;var ac=f(ab).parent().data("jiraCalendarId");if(ac){var aa=r.getSubCalendar(B,ac);if(aa&&aa.eventsEditable){r.showSubCalendarEdit(B,aa);f("#edit-calendar-dialog").find(".button-panel-button.submit").removeClass("hidden")}}})}}}H([])},success:function(S,R){var W=S.events;var V=[];r.setGenericErrors(B,null,r.ERROR_CLASS_SUB_CALENDAR_LIST_EVENTS+r.getStringAsHex(C));W=f.map(W||[],function(Y){if(Y.className==="greenhopper-sprint"&&!Y.allDay){Y.allDay=!Y.allDay;Y.allDayFlipped=true}return Y});if(R==="success"&&W){V=r.getEventsTruncated(B,W)}H(V);p.addDataToCalendar(C,V,K,O);var U=r.getSubCalendar(B,C);if(U.warnings&&U.warnings.length){r.setGenericErrors(B,U.warnings,r.ERROR_CLASS_SUB_CALENDAR_LIST_EVENTS+r.getStringAsHex(C))}var X=r.getParameter(B,"editSubCalendarId"),Q=r.getParameter(B,"editEventUid");if(X&&Q){var T=r.getCalendarPanel(B).fullCalendar("clientEvents",function(Y){return Y.subCalendarId===X&&Y.id===Q});if(T.length){r.setParameter(B,"editSubCalendarId","");r.setParameter(B,"editEventUid","");f("#calendar-dialog-panel").remove();Confluence.TeamCalendars.Dialogs.getEditEventDialog(T[0],U,r,B).show()}}},type:"GET",timeout:r.ajaxTimeout,url:r.getCalendarServiceBaseUrl(B,"/events.json")});N.push({xhr:P})}};z[C]=A;B.data("eventSources",z);return A},getEventsTruncated:function(E,z,N){var O=this.getCalendarPanel(E).fullCalendar("getView");var F=parseInt(this.getParameter(E,"maxEventsToDisplayPerCalendar"));var C={};f.each(z,function(R,Q){if(!C[Q.subCalendarId]){C[Q.subCalendarId]=[]}C[Q.subCalendarId].push(Q)});var D=function(Q){Q.sort(function(S,U){var R=S._start||f.fullCalendar.parseISO8601(S.start,true);var T=U._start||f.fullCalendar.parseISO8601(U.start,true);return R.getTime()-T.getTime()})};var L=function(U,S,R){D(U);var Q;var T=-1;f.each(U,function(X,W){var V=W._start||f.fullCalendar.parseISO8601(W.start,true);if(V>=S){T=X;return false}});if(-1===T){Q=U.slice(-F)}else{Q=U.slice(T,Math.min(T+F,U.length))}G.push(r.getParentSubCalendar(E,U[0].subCalendarId).name);return Q};var G=[];var I={};f.each(C,function(U,T){var S=O.visStart;var R=O.visEnd;var Q=[];f.each(T,function(Y,W){var V=W._start||f.fullCalendar.parseISO8601(W.start,true);var X=W._end||(W.end?f.fullCalendar.parseISO8601(W.end,true):V);if((V>=S&&V<=R)||(X>=S&&X<=R)){Q.push(W)}if(Q.length>F){Q=L(T,S,R);return}});I[U]=Q});if(G.length){var H=f(".events-truncated-message-container",E);var P=function(Q){Q.sort(function(S,R){return S>R?1:(R>S?-1:0)})};var M=function(R){var Q=f(document.createElement("ul"));f.each(R,function(S,T){Q.append(f(document.createElement("li")).text(T))});return Q};var B;if(N){P(G);B=M(G)}else{var A=[];var K=f.map(f("ul li",H),function(Q){return f(Q).text()});var J=f.map(this.getSubCalendars(E),function(Q){return Q.name});f.each(K,function(R,Q){if(f.inArray(Q,J)>-1){A.push(Q)}});f.each(G,function(Q,R){if(-1===f.inArray(R,A)){A.push(R)}});P(A);B=M(A)}k.messages.warning(H.empty(),{title:"Es gibt zu viele Ereignisse. Deshalb wurden in den Kalendern unten einige nicht angezeigt.",body:f(document.createElement("div")).append(B).html()});s.start();var y=[];f.each(I,function(R,Q){f.merge(y,Q)});return y}else{return z}},isCalendarInEditMode:function(y){return this.getParameter(y,"readOnly")!=="true"},isEventEditable:function(z,y){return this.isCalendarInEditMode(z)&&this.isSubCalendarEventsUpdatable(z,this.getSubCalendar(z,y.subCalendarId))&&y.editable},isEventDeletable:function(A,z){var y=r.getSubCalendar(A,z.subCalendarId);return r.isEventEditable(A,z)&&!Confluence.TeamCalendars.isJiraSubCalendar(y)},getEventDetailsDialog:function(B,z,A,y){return i(r,p).getEventDetailsDialog(B,z,A,y)},updateEvent:function(B,A,z,y){i(r,p).updateEvent(B,A,z,y)},setSubCalendarSpinnerIconVisible:function(B,D){var y=f.Deferred();var z=this;this.spinnerDeferTasks.push(y.promise());var A=function(E){var F=f(".calendar-panel .right-controls .spinner, .calendar-toolbar .spinner",B);if(E){F.removeClass("invisible")}else{F.addClass("invisible")}z._toggleEnableButton(f(".page-prev",B),!E);z._toggleEnableButton(f(".page-next",B),!E)};if(D){A(D)}f.when.apply(f,this.spinnerDeferTasks).done(function(){A(false);this.spinnerDeferTasks=[]});var C=setTimeout(function(){y.resolve()},10*1000);return{resolve:function(){y.resolve();clearTimeout(C)}}},_toggleEnableButton:function(z,y){z.attr("aria-disabled",!y);if(y){z.removeAttr("disabled")}else{z.attr("disabled","disabled")}},reloadSubCalendarDisableEvent:function(B,A){if(A.uid&&(A.originalEventType!==A.eventType||A.originalSubCalendarId!==A.subCalendarId)){var z=r.getSubCalendar(B,A.subCalendarId).disableEventTypes;for(var y=0;y<z.length;y++){if(z[y]===A.eventType){z.splice(y,1);break}}r.getSubCalendar(B,A.subCalendarId).disableEventTypes=z}},initCalendarToolbar:function(z){var y=this;f(".feedback-form-trigger",z).click(function(){var B=new k.Dialog(700,512);B.addHeader("Team-Kalender Plugin Feedback");B.addPanel("","<div class='loading-message'></div><iframe src='https://atlassian.wufoo.com/forms/team-calendars-feedback/' frameborder='0'></iframe>","calendar-feedback-dialog-panel");var A=B.getCurrentPanel().body;var C=f(".loading-message",A).text("Wird geladen...");f("iframe",A).load(function(){C.remove()});B.addCancel("Abbrechen",function(){B.hide();return false});B.show();return false});f(".change-view",z).click(function(){y.hideInlineAuiDialogs();var A=f(this);r.getCalendarPanel(z).fullCalendar("changeView",A.data("viewName"));var B=l.getCalendarContext(z);Confluence.TeamCalendars.fireEventForAnalytics("view."+A.data("analyticsViewName")+".render."+B);return false});f(".today",z).click(function(){y.hideInlineAuiDialogs();p.removeAllCalendars();r.getCalendarPanel(z).fullCalendar("today");return false});f(".page-prev",z).click(function(){y.hideInlineAuiDialogs();var A=r.getCalendarPanel(z);delete A.fullCalendar("getView").daysMore;if(A.fullCalendar("getView").name==="basicDay"){A.fullCalendar("incrementDate",0,0,-1)}else{A.fullCalendar("prev")}return false});f(".page-next",z).click(function(){y.hideInlineAuiDialogs();var A=r.getCalendarPanel(z);delete A.fullCalendar("getView").daysMore;if(A.fullCalendar("getView").name==="basicDay"){A.fullCalendar("incrementDate",0,0,1)}else{A.fullCalendar("next")}return false})},getStringAsHex:function(z){var B="";if(z){var y=z.length;for(var C=0;C<y;++C){var A=z.charCodeAt(C);B+=A.length>1?A:"0"+A}}return B},formatDate:function(D,A,C,z){if(z){var y=f.isArray(A);if(y&&!A.length){z();return}var B={date:f.map(y?A:[A],function(E){return f.fullCalendar.formatDate(E,"ddMMyyyyHHmm")}),pattern:C};f.ajax({cache:false,data:B,dataType:"json",error:function(){z(k.format("Datum/Zeit {0} kann nicht formattiert werden.",B.date.join(", ")))},success:function(E){z(y?E:E[0])},timeout:r.ajaxTimeout,url:r.getCalendarServiceBaseUrl(D,"/util/format/date.json")})}},initWhatsNew:function(A){var z=f(".whatsnew");if(z.length){z.removeClass("hidden");var y=function(B){Confluence.TeamCalendars.suppressMessage(A,"MESSAGE_KEY_PREFIX_WHATSNEW_"+r.getParameter(A,"pluginVersion"),function(){if(f.isFunction(B)){B()}})};f("button",z).click(function(){window.open(f(this).data("url"),"_blank");return false});f(".aui-iconfont-close-dialog",z).click(function(){y(function(){z.addClass("hidden")})})}},initButtons:function(y){new c({el:"#navigation",_calendarDiv:y,CalendarPlugin:this}).render();new b({el:"#calendar-restriction-buttons",_calendarDiv:y,CalendarPlugin:this})},getSubCalendarRestrictionsDialog:function(A,y){var B=this.showSubCalendarEdit(A,y);var z=B.belongedView;z.showRestrictionOption();return B},removeSubCalendarDialog:function(A,y){var z=new j({_calendarPlugin:this,_calendarDiv:A,subCalendar:y});z.render()},getSubCalendarFeatureDiscoveryDialog:function(A,y){var z=new e({_calendarPlugin:this,_calendarDiv:A,subCalendar:y});return{show:function(){z.render()}}},isAutoConvertSupported:function(y){return this.getParameter(y,"autoConvertSupported")==="true"},getSubCalendarShareDialog:function(A,y){var B=this.showSubCalendarEdit(A,y);var z=B.belongedView;z.showShareOption();return B},getCalendarSubscribeDialog:function(C,B,A){var y=new w(r,C);var z=new m({subCalendars:B,selectedSubCalId:A.id,baseUrl:l.getParameter(C,"baseUrl"),isPrivateUrlsEnabled:r.getParameter(C,"privateUrlsEnabled"),privateUrlProvider:x.bind(y.getPrivateUrlProvider,y)});var D=new u({calendarPlugin:r,calendarDiv:C,model:z});D.render();return D},initCalendarDiv:function(z){var y=r.getRenderedMacroCallbackHandler(z);this.initCalendarToolbar(z);g(r,z).initSubCalendarPanel();this.initWhatsNew(z);this.initButtons(z);f(document).keydown(function(A){if(A.keyCode===27){r.getCalendarPanel(z).fullCalendar("unselect")}});if(Confluence.TeamCalendars.shouldShowTimezoneSetup()){Confluence.TeamCalendars.Dialogs.getTimeZoneSetupDialog(y).show()}else{y.showCalendarWizard()}},getRenderedMacroCallbackHandler:function(y){return{isProcessingSubCalendar:function(){return r.isProcessingSubCalendar(y)},setProcessingSubCalendar:function(z){return r.setProcessingSubCalendar(y,z)},setSubCalendarSpinnerIconVisible:function(z){return r.setSubCalendarSpinnerIconVisible(y,z)},getIncludedCalendars:function(){return r.getParameter(y,"include")},mergeSubCalendarObjectsToArray:function(z){return r.mergeSubCalendarObjectsToArray(z)},showAjaxUpdateError:function(z,B,A){r.showAjaxError(y,z,B,A,r.ERROR_CLASS_SUB_CALENDAR_UPDATE)},showAjaxError:function(A,C,B,z){r.showAjaxError(y,A,C,B,z)},showHTMLGenericError:function(A,B,z){r.showHTMLGenericError(A,B,z)},setGenericUpdateError:function(){r.setGenericErrors(y,null,r.ERROR_CLASS_SUB_CALENDAR_UPDATE)},setGenericErrors:function(A,z){Confluence.TeamCalendars.setGenericErrors(y,null,z)},setParameter:function(z,A){r.setParameter(y,z,A)},getParameter:function(z){return r.getParameter(y,z)},setSubCalendar:function(A,z){r.setSubCalendar(A,y,z)},setSubCalendars:function(z,A){r.setSubCalendars(y,A)},reloadSubCalendar:function(z){r.reloadSubCalendar(y,z)},getSubCalendars:function(){return r.getSubCalendars(y)},updateAvailableSubCalendarsInSubCalendarPanel:function(){r.updateAvailableSubCalendarsInSubCalendarPanel(y)},refreshCalendarInfo:function(z){if(l.isSingleCalendarView(y)&&z.length){f("#title-text span").text(z[0].name);f(".calendar-description p").text(z[0].description)}},shouldShowFeatureDiscoveryDialog:function(z){return r.shouldShowFeatureDiscoveryDialog(y,z)},getSubCalendarFeatureDiscoveryDialog:function(z){r.getSubCalendarFeatureDiscoveryDialog(y,r.getSubCalendar(y,z)).show()},getNextCalendarColor:function(){return r.getNextUnusedSubCalendarColor(y)},isAutoWatchSet:function(){return r.getParameter(y,"autowatch")==="true"},refreshCachedSubCalendars:function(z,A){r.refreshCachedSubCalendars(y,z,A)},handleImport:function(z){this.refreshCachedSubCalendars(function(){r.updateAvailableSubCalendarsInSubCalendarPanel(y);if(r.shouldShowFeatureDiscoveryDialog(y)){r.getSubCalendarFeatureDiscoveryDialog(y,r.getSubCalendar(y,z)).show()}},function(A,C,B){r.showAjaxError(y,A,C,B,r.ERROR_CLASS_SUB_CALENDAR_UPDATE)});s.start(z)},isCalendarInEditMode:function(){return r.isCalendarInEditMode(y)},suppressMessage:function(A,z){Confluence.TeamCalendars.suppressMessage(y,A,z)},showCalendarWizard:function(){var B=function(){Confluence.TeamCalendars.Dialogs.getSubCalendarSubscribeDialog({heading:"Willkommen bei Team-Kalender!",callbackHandler:r.getRenderedMacroCallbackHandler(y),id:"welcome-to-popular-dialog"}).show()};var z=function(){Confluence.TeamCalendars.Dialogs.getAddDialog(r.getRenderedMacroCallbackHandler(y),{title:"Willkommen bei Team-Kalender!",addClass:"create-calendar-first-time"})};var A=k.Meta.get("space-key")?(l.getParamsFromUrl()["openAddCalDialog"]==="true"):false;if(A){if(l.isValidLicense()){z()}}else{if("true"===r.getParameter(y,"isShowCalendarWizard")){Confluence.TeamCalendars.showCalendarPopupHaveAnEmptySubcalendar(B,z)}}},getSubCalendarsWhichCanAddEvents:function(){return r.getSubCalendarsWhichCanAddEvents(y)},updateCustomEventType:function(A,z){r.updateCustomEventType(y,A,z)}}},onTeamCalendarsLoaded:function(){if(f(".user-calendar, .space-calendar").length>0){n.render()}f("div.plugin-calendar:not(.init-started)").each(function(){var D=f(this);D.addClass("init-started");var B=f("#team-calendars-display-week-number").attr("content");r.setParameter(D,"displayWeekNumber",B);if(!r.getParameter(D,"defaultView")){var z=r.getCalendarPanel(D).text("Wird geladen...");f.ajax({cache:false,dataType:"json",error:function(){z.empty();r.init(D)},success:function(E){r.setParameter(D,"defaultView",E.view==="agendaDay"?"basicDay":E.view);z.empty();r.init(D)},timeout:r.ajaxTimeout,url:r.getCalendarServiceBaseUrl(D,"/preferences.json")})}else{var C=D.closest(".dashboard-calendar-container");if(C){var A=setInterval(function(){r.init(D);clearInterval(A)},100)}else{r.init(D)}}});var y=f(".ia-splitter-handle-highlight");y.mousedown(function(){y.on("mousemove",function(){f(window).trigger("resize")})}).mouseup(function(){f(window).trigger("resize");y.off("mousemove")});f(".expand-collapse-trigger").click(function(){f(window).trigger("resize")})}};f(function(){r.isPageUnloading=false;k.$(window).bind("beforeunload",function(){r.isPageUnloading=true});f(document).keydown(function(y){var z=true;f(".aui-inline-dialog:visible:first .event-details-popup").each(function(){if(y.keyCode===8||y.keyCode===46){f(".event-delete",this).click();z=false}});return z});f("body").keyup(function(y){if((y.keyCode?y.keyCode:y.which)===219){f(window).trigger("resize")}})});return r});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/js/child-subcalendars.js' */
(function(a){if(!window.Confluence.TeamCalendars.subcalendar){window.Confluence.TeamCalendars.subcalendar={}}window.Confluence.TeamCalendars.subcalendar.other={getDialog:function(){AJS.log("Tried to call getDialog on child calendar type. This should not happen.")},weight:1,typeName:"Veranstaltungskalender"};window.Confluence.TeamCalendars.subcalendar.travel=a.extend({},window.Confluence.TeamCalendars.subcalendar.other,{weight:2,typeName:"Reise"});window.Confluence.TeamCalendars.subcalendar.leaves=a.extend({},window.Confluence.TeamCalendars.subcalendar.other,{weight:3,typeName:"Urlaub"});window.Confluence.TeamCalendars.subcalendar.birthdays=a.extend({},window.Confluence.TeamCalendars.subcalendar.other,{weight:4,typeName:"Geburtstage"});window.Confluence.TeamCalendars.subcalendar["jira-agile-sprint"]=a.extend({},window.Confluence.TeamCalendars.subcalendar.other,{weight:6,typeName:"Jira Agile Sprints"});window.Confluence.TeamCalendars.subcalendar["jira-project-releases"]=a.extend({},window.Confluence.TeamCalendars.subcalendar.other,{weight:7,typeName:"Jira Projekt-Ver\u00f6ffentlichungen"});window.Confluence.TeamCalendars.subcalendar["jira-issue-dates"]=a.extend({},window.Confluence.TeamCalendars.subcalendar.other,{weight:8,typeName:"Jira Vorgangsdatum"});window.Confluence.TeamCalendars.subcalendar.custom=a.extend({},window.Confluence.TeamCalendars.subcalendar.other,{weight:9,typeName:"custom_name"})})(AJS.$);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/js/parent-subcalendar.js' */
(function(b){if(!window.Confluence.TeamCalendars.subcalendar){window.Confluence.TeamCalendars.subcalendar={}}if(!window.Confluence.TeamCalendars.subcalendar.parent){var a=require("tc/calendar-util");window.Confluence.TeamCalendars.subcalendar.parent={getDialog:function(g,d,c){var e,f;var h=function(){var k=g.getCurrentPanel();f.resetFieldErrors();f.populateTimeZoneDropDown(k);var j=b("select[name='timeZoneIdSelect']",e);if(f.isNewCalendar()){f.setFormModeCreate();f.setHeading("Kalender erstellen",g);f.setSubCalendarIdField("");f.setNameField("");f.setDescriptionField("");f.setColorField(c.getNextCalendarColor());f.setSpaceToDefault();f.setTimeZoneIdField("")}else{f.setFormModeEdit();f.setHeading(d.name,g);f.setSubCalendarIdField(d.id);f.setNameField(d.name);f.setDescriptionField(d.description);f.setColorField(d.color);f.setSpaceKeyField(d.spaceKey);f.setSpaceKeyAutocompleteField(d.spaceName);f.setTimeZoneIdField(d.timeZoneId)}var l=b("input[name='name'], textarea[name='description'], input[name='spaceKeyAutocomplete']",e);if(c.isCalendarInEditMode()){l.removeAttr("readonly");j.removeAttr("disabled")}else{f.setFormModeReadOnly();l.attr("readonly","readonly");j.attr("disabled","disabled")}if(f.isNewCalendar()&&AJS.Meta.get("space-key")){var i=b(".field-group-space-permission",e);i.addClass("hidden")}};return{initializeForm:function(i){g.addHeader("Kalender erstellen");g.addPanel("Allgemein",Confluence.TeamCalendars.Templates.editLocalCalendar(),"calendar-dialog-panel create-calendar-dialog");e=b("form.sub-calendar-edit-form",g.getCurrentPanel().body);f=Confluence.TeamCalendars.getEditCalendarDialogHelper(e,d,c);f.initSpaceDropDown();f.initTimeZoneSelect();f.initOkButton("OK",g);f.initCloseButton(g,i);h();return e},getFormDataAsAjaxData:function(){var i={type:"parent",subCalendarId:b("input[name='subCalendarId']",e).val(),name:b("input[name='name']",e).val(),description:b("textarea[name='description']",e).val(),color:b("input[name='color']",e).val(),spaceKey:b("input[name='spaceKeyAutocomplete']",e).val()?b("input[name='spaceKey']",e).val():"",timeZoneId:b("input[name='timeZoneId']",e).val()||b("select[name='timeZoneIdSelect'] option:selected",e).val()};a.putCalendarContextParams(i);return i},onSubmitStart:function(){f.disableOkButton("Wird hinzugef\u00fcgt...")},onSubmitEnd:function(){f.enableOkButton("OK")}}},weight:1,typeName:"Kalender"}}})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/js/jira-subcalendar.js' */
(function(a){if(!window.Confluence.TeamCalendars.subcalendar){window.Confluence.TeamCalendars.subcalendar={}}if(!window.Confluence.TeamCalendars.subcalendar.jira){window.Confluence.TeamCalendars.subcalendar.jira={weight:5,typeName:"Jira-Kalender",getDialog:function(){AJS.log("Confluence.TeamCalendars.subcalendar.jira.should never be called")}}}})(AJS.$);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/js/subscription-subcalendar.js' */
(function(b){if(!window.Confluence.TeamCalendars.subcalendar){window.Confluence.TeamCalendars.subcalendar={}}if(!window.Confluence.TeamCalendars.subcalendar.subscription){var a=require("tc/calendar-util");window.Confluence.TeamCalendars.subcalendar.subscription={getDialog:function(g,d,c){var f,e;var h=function(){f.resetFieldErrors();var j=function(){return b(document.createElement("div")).addClass("calendar-dialog-help-link").append(b(document.createElement("a")).attr("href","Subscribe+to+Third-Party+Calendars+from+Team+Calendars").attr("target","_blank").text("Hilfe"))};if(f.isNewCalendar()){f.setFormModeCreate();f.setHeading("Abonnieren",g).append(j());f.setSubCalendarIdField("");f.setNameField("");f.setDescriptionField("");f.setColorField(c.getNextCalendarColor());f.setSpaceToDefault();f.setLocationField("");f.setUserNameField("");f.setTimeZoneIdDisplayField("")}else{f.setFormModeEdit();f.setHeading(d.name,g).append(j());f.setSubCalendarIdField(d.id);f.setNameField(d.name);f.setDescriptionField(d.description);f.setColorField(d.color);f.setSpaceKeyField(d.spaceKey);f.setSpaceKeyAutocompleteField(d.spaceName);f.setLocationField(d.sourceLocation);f.setUserNameField(d.userName||"");f.setTimeZoneIdDisplayField(d.timeZoneId)}var k=b("input[name='name'], textarea[name='description'], input[name='spaceKeyAutocomplete'], input[name='location'], input[name='username'], input[name='password']",e);if(c.isCalendarInEditMode()){k.removeAttr("readonly")}else{f.setFormModeReadOnly();k.attr("readonly","readonly")}if(AJS.Meta.get("space-key")){var i=b(".field-group-space-permission",e);i.css("display","none")}};return{initializeForm:function(){g.addHeader("Abonnieren");g.addPanel("Allgemein",Confluence.TeamCalendars.Templates.editSubscriptionSubcalendar(),"calendar-dialog-panel subscribe-dialog");e=b("form.sub-calendar-edit-form",g.getCurrentPanel().body);f=Confluence.TeamCalendars.getEditCalendarDialogHelper(e,d,c);f.initSpaceDropDown();f.initOkButton("Abonnieren",g);f.initCloseButton(g);h();return e},getFormDataAsAjaxData:function(){var i={type:"subscription",subCalendarId:b("input[name='subCalendarId']",e).val(),name:b("input[name='name']",e).val(),description:b("textarea[name='description']",e).val(),color:b("input[name='color']",e).val(),spaceKey:!!b("input[name='spaceKeyAutocomplete']",e).val()?b("input[name='spaceKey']",e).val():"",location:b("input[name='location']",e).val(),userName:b("input[name='username']",e).val(),password:b("input[name='password']",e).val()};a.putCalendarContextParams(i);return i},onSubmitStart:function(){f.disableOkButton("Abonnieren")},onSubmitEnd:function(){f.enableOkButton("Abonnieren")}}},weight:6,typeName:"Abonnements"}}})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/js/remove-jira-events-dialog.js' */
(function(a){Confluence.TeamCalendars.getRemoveJiraEventsDialog=function(f,e,c){var b;b=new AJS.Dialog(400,250);b.addHeader("Jira-Ereignisse entfernen?");b.addPanel("",Confluence.TeamCalendars.Templates.confirmRemoveJiraEvents({childName:c.name,parentName:f.getSubCalendar(e,c.parentId).name}),"remove-jira-events-confirmation-panel");b.addButton("Entfernen",function(){d();b.remove()});b.addCancel("Abbrechen",function(){b.remove()});b.show();function d(){var g=f.setSubCalendarSpinnerIconVisible(e,true);var h=function(){if(g){g.resolve()}};f.setProcessingSubCalendar(e,true);f._deleteSubCalendarInternal(e,c.subscriptionId||c.id,function(i,k,j){f.showAjaxError(e,i,k,j,f.ERROR_CLASS_SUB_CALENDAR_DELETE);h();f.setProcessingSubCalendar(e,false)},function(i){f.removeSubCalendarEventSource(e,c.id);f.setSubCalendars(e,i.payload);f.updateAvailableSubCalendarsInSubCalendarPanel(e);h();f.setProcessingSubCalendar(e,false)})}}}(AJS.$));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/components/load-favicon/load-favicon.js' */
define("tc/load-favicon",["jquery"],function(a){return{render:function(){var b=(new Date()).getDate()+"";this._loadFaviconCalendar(b)},_loadFaviconCalendar:function(c){var d=a("<canvas />"),f=a("<img />"),b=a("link[rel~='icon']");if(typeof d.get(0).getContext==="function"){if(!b){b=document.createElement("link");b.setAttribute("rel","shortcut icon");b.type="image/x-icon";document.head.appendChild(b)}d.attr({width:32,height:32});var e=d.get(0).getContext("2d");var g=AJS.Meta.get("static-resource-url-prefix")||Confluence.getContextPath();f.load(function(){e.drawImage(this,0,0);e.font='bold 17px "helvetica", sans-serif';e.textAlign="center";e.fillStyle="#42526E";e.fillText(c,16,25);var h=!!navigator.userAgent.match(/Trident\/7.0/)&&!!navigator.userAgent.match(/.NET4.0E/);b.each(function(){if(h){this.href=g+"/download/resources/com.atlassian.confluence.extra.team-calendars:calendar-resources/img/logo_16.png"}else{this.href=d.get(0).toDataURL("image/png")}});a("head").append(b)});f.attr({src:g+"/download/resources/com.atlassian.confluence.extra.team-calendars:calendar-resources/img/calendar-favicon.png"})}}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/js/upcoming-events.js' */
jQuery(function(b){if(b("#dashboard-get-started").length>0){b("#dashboard-get-started").parent().after(b(".dashboard-calendar-container").children())}else{b(".welcome-message").after(b(".dashboard-calendar-container").children())}var a={initializeAddLater:function(c,e){var d=function(){b.ajax({cache:false,data:{messageKey:"MESSAGE_KEY_FULL_SIZED_EMPTY_UPCOMING_EVENTS"},error:function(){b(".show-small-sad-calendar-error",c).removeClass("hidden")},type:"DELETE",timeout:Confluence.TeamCalendars.ajaxTimeout,url:b("#confluence-context-path").attr("content")+"/rest/calendar-services/1.0/calendar/preferences/messagekey.json"})};b(".add-later",c).click(function(){var f=b(".sad-calendar",c);f.fadeTo(e,0,function(){f.addClass("small-sad-calendar").fadeTo(e,1);d()});return false})},initialize:function(c){this.initializeAddLater(c,"fast")}};b(".dashboard-calendar").each(function(){a.initialize(b(this))})});
}catch(e){WRMCB(e)};